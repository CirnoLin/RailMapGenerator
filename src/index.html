<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title trans-tag="Title">Rail Map Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/material-components-web@4.0.0/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/material-components-web@3.2.0/dist/material-components-web.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <link rel="stylesheet" href="styles/main.css">
    <style type="text/css" id="global">
        :root {
            --rmg-theme-colour: #000;
        }
    </style>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-152882192-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-152882192-1');
    </script>
</head>
<body>
<div id="svgs">
    <div class="" style="display: none;" mtr-specific shmetro-specific>
        <svg 
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink" 
        id="destination" style="
            --rmg-svg-width: 0px;
            --rmg-svg-height: 0px;
            width: var(--rmg-svg-width);
            height: var(--rmg-svg-height);">
            <defs>
                <path id="arrow" d="M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z" fill="black"/>

                <!-- style/shmetro -->
                <!-- Todo: fix this absolute position -->
                <path id="arrow_left" d="M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z" fill="black"/>
                <!-- style/shmetro -->
            </defs>

            <rect id="outer" x="0" y="0"/>

            <rect id="strip" style="display: none;" mtr-specific/>

            <g id="dest_name" style="display: none;" mtr-specific>
                <use xlink:href="#arrow"/>
                <g id="platform">
                    <circle cx="0" cy="0" r="75"/>
                    <text class="rmg-name__zh" dy="0"></text>
                </g>
                <g>
                    <text class="rmg-name__zh" font-size="90px">往</text>
                    <text class="rmg-name__en" font-size="45px" dy="80">to</text>
                </g>
            </g>

            <g id="station_info_shmetro" style="display: none;" shmetro-specific>
                <path id="line_shmetro_use"/>
                <use id="arrow_left_use" xlink:href="#arrow_left"/>
                <!-- Todo: fix this absolute position -->
                <g id="dest_text">
                    <text class="rmg-name__zh rmg-name__shmetro--dest" font-size="500%">往</text>
                    <text class="rmg-name__en rmg-name__shmetro--dest" font-size="200%" dy="60">to</text>
                </g>
                <g id="line_number">
                    <rect width="125" height="125"></rect>
                    <text class="rmg-name__zh rmg-name__shmetro--line_number" font-size="700%" text-anchor="middle"></text>
                </g>
                <g id="line_name_text">
                    <text class="rmg-name__zh rmg-name__shmetro--line_name" font-size="500%">号线</text>
                    <text class="rmg-name__en rmg-name__shmetro--line_name" font-size="200%" dy="60">Line</text>
                </g>
            </g>

        </svg>
    </div>
    <div class="" style="display: none;" gzmtr-specific>
        <svg 
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink" 
        id="runin" style="
            --rmg-svg-width: 0px;
            --rmg-svg-height: 0px;
            width: var(--rmg-svg-width);
            height: var(--rmg-svg-height);">
            <defs>
                <path id="arrow" d="M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z" fill="black"/>

                <ellipse id="indicator_gz28" rx="24" ry="12" fill="orange"/>
                <ellipse id="indicator_gzgf" rx="24" ry="12" fill="white"/>
                <rect id="indicator_gz3" x="-15" y="-25" height="30" width="30" fill="red"/>
                <ellipse id="indicator_gz1421" cy="-8" rx="24" ry="12" fill="orange"/>

                <rect id="psd" height="40" width="40" rx="4"/>
                <path id="stn_gz" class="rmg-stn" d="M 0,9.25 V -9.25 H -9.25 a 9.25,9.25 0 0,0 0,18.5 h 18.5 a 9.25,9.25 0 0,0 0,-18.5 H 0 "/>

            </defs>

            <rect id="outer" x="0" y="0"/>
            <rect id="strip_gz" style="display: none;" gzmtr-specific/>

            <g id="run_in_gzmtr" style="display: none;" gzmtr-specific>
                <g id="big_next">
                    <g text-anchor="middle">
                        <text class="rmg-name__zh">下站</text>
                        <text class="rmg-name__en" dy="30">Next</text>
                    </g>
                    <g text-anchor="start">
                        <text class="rmg-name__zh"></text>
                        <text class="rmg-name__en" dy="30"></text>
                    </g>
                </g>
                <g id="big_next_2">
                    <g text-anchor="middle">
                        <text class="rmg-name__zh rmg-name__gzmtr--next2">下站</text>
                        <text class="rmg-name__en rmg-name__gzmtr--next2" y="22">Next</text>
                    </g>
                    <g text-anchor="start">
                        <text class="rmg-name__zh rmg-name__gzmtr--next2-dest" y="-35">方向</text>
                        <text class="rmg-name__en rmg-name__gzmtr--next2-dest" y="-20">Towards</text>
                        <text class="rmg-name__zh rmg-name__gzmtr--next2"></text>
                        <text class="rmg-name__en rmg-name__gzmtr--next2" y="22"></text>
                    </g>
                    <g text-anchor="middle">
                        <text class="rmg-name__zh rmg-name__gzmtr--next2">下站</text>
                        <text class="rmg-name__en rmg-name__gzmtr--next2" y="22">Next</text>
                    </g>
                    <g text-anchor="start">
                        <text class="rmg-name__zh rmg-name__gzmtr--next2-dest" y="-35">方向</text>
                        <text class="rmg-name__en rmg-name__gzmtr--next2-dest" y="-20">Towards</text>
                        <text class="rmg-name__zh rmg-name__gzmtr--next2"></text>
                        <text class="rmg-name__en rmg-name__gzmtr--next2" y="22"></text>
                    </g>
                </g>
                <use xlink:href="#arrow" id="arrow"/>
                <g id="platform">
                    <circle cx="0" cy="0" r="30" fill="var(--rmg-theme-colour)"/>
                    <text class="rmg-name__en" font-size="38px" dy="-9.5"></text>
                    <text class="rmg-name__zh" font-size="13px" dy="10">站台</text>
                    <text class="rmg-name__en" font-size="9px" dy="21">Platform</text>
                </g>
                <g id="big_stn_num">
                    <use xlink:href="#stn_gz" class="rmg-stn--future"/>
                    <text class="rmg-name__zh rmg-name__gzmtr--line-num"></text>
                    <text class="rmg-name__zh rmg-name__gzmtr--station-num">06</text>
                </g>
                <g id="big_name"></g>
                <use id="indicator_light" xlink:href="#"/>
                <g id="big_psd">
                    <use xlink:href="#psd" x="-20"/>
                    <text class="rmg-name__en" font-size="20px" dy="12"></text>
                    <text class="rmg-name__zh" font-size="12px" dy="26">屏蔽门</text>
                    <text class="rmg-name__en" font-size="6.5px" dy="36">Screen Door</text>
                </g>
            </g>

        </svg>
    </div>
    <div class="show">
        <svg 
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink" 
        id="railmap" style="
            --rmg-svg-width: 0px;
            --rmg-svg-height: 0px;
            width: var(--rmg-svg-width);
            height: var(--rmg-svg-height);">
            <defs>
                <path id="arrow" d="M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z" fill="black"/>

                <circle id="stn_hk" r="8" class="rmg-stn__mtr"/>
                <path id="stn2_hk" d="M -5.809475019,5.5 a 8,8 0 1,1 11.61895004,0 a 8,8 0 1,1 -11.61895004,0 Z" class="rmg-stn__mtr"/>
                <path id="int2_hk" d="M -8,0 v 18 a 8,8 0 0,0 16,0 v -18 a 8,8 0 0,0 -16,0 Z" class="rmg-stn__mtr"/>
                <path id="int3_hk" d="M -8,0 v 36 a 8,8 0 0,0 16,0 v -36 a 8,8 0 0,0 -16,0 Z" class="rmg-stn__mtr"/>

                <g id="osi11_hk">
                    <path d="M 0,0 V 26"/>
                    <use xlink:href="#stn_hk"/>
                    <use xlink:href="#stn_hk" y="26"/>
                </g>

                <g id="osi12_hk">
                    <path d="M 0,0 V 26"/>
                    <use xlink:href="#stn_hk"/>
                    <use xlink:href="#int2_hk" y="26"/>
                </g>

                <g id="osi22end_hk">
                    <path d="M 0,0 H 41"/>
                    <use xlink:href="#stn_hk"/>
                    <use xlink:href="#int2_hk" x="41"/>
                </g>

                <path id="stn_gz" class="rmg-stn" d="M 0,9.25 V -9.25 H -9.25 a 9.25,9.25 0 0,0 0,18.5 h 18.5 a 9.25,9.25 0 0,0 0,-18.5 H 0 "/>
                <path id="stn_gz_pass" stroke="#aaa" fill="#fff" stroke-width="2" d="M 0,9.25 V -9.25 H -9.25 a 9.25,9.25 0 0,0 0,18.5 h 18.5 a 9.25,9.25 0 0,0 0,-18.5 H 0 "/> 
                <!-- <path id="stn_sh" fill="#fff" stroke-width="2" d="M -5,0 a 5,5 0 1,0 10,0 a 5,5 0 1,0 -10,0"/> -->
                <circle id="stn_sh" fill="#fff" stroke-width="2" r="5"/>
                <circle id="stn_sh_pass" fill="#fff" stroke="#aaa" stroke-width="2" r="5"/>
                <!-- <path id="stn_sh_pass" fill="#fff" stroke-width="2" d="M -5,0 a 5,5 0 1,0 10,0 a 5,5 0 1,0 -10,0"/> -->
                <path id="int2_sh" fill="#fff" stroke-width="2" d="M -5,0 a 5,5 0 1 1 10,0 V10 a 5,5 0 1 1 -10,0Z"/>
                <path id="int2_sh_pass" fill="#fff" stroke="#aaa" stroke-width="2" d="M -5,0 a 5,5 0 1 1 10,0 V10 a 5,5 0 1 1 -10,0Z"/>

                <path id="inttick_hk" d="M 0,0 v 17" stroke-linecap="round"/>
                <path id="inttick_gz" d="M 0,0 v 18" stroke-linecap="square"/>
                <rect id="int_sh_number" height="30" width="20"/>
                <rect id="int_sh_letter" height="30" width="60"/>

                <rect id="intbox_gz" x="-22.5" height="24" width="45" rx="4.5"/>
            </defs>

            <rect id="outer" x="0" y="0"/>
            <rect id="box" x="0" y="0" fill="none" stroke="black"/>
            
            <rect id="strip" style="display: none;" mtr-specific/>
            <rect id="strip_gz" style="display: none;" gzmtr-specific/>

            <g id="main">
                <g class="rmg-line rmg-line__mtr rmg-line__pass" id="line_pass"></g>
                <g class="rmg-line rmg-line__mtr" id="line_main"></g>

                <rect id="current_bg" x="0" y="0" width="100" height="20" fill="#000" style="display: none;" mtr-specific/>

                <g id="line_name" text-anchor="middle" style="display: none;" gzmtr-specific></g>
            
                <g id="stn_icons"></g>
            </g>
            

            <g id="direction_gz" style="display: none;" gzmtr-specific>
                <use xlink:href="#arrow"/>
                <g text-anchor="start">
                    <text class="rmg-name__zh rmg-name__gzmtr--direc">方向</text>
                    <text class="rmg-name__en rmg-name__gzmtr--direc" dy="22">Towards</text>
                </g>
                <g text-anchor="start">
                    <text class="rmg-name__zh rmg-name__gzmtr--direc2" y="-21"></text>
                    <text class="rmg-name__en rmg-name__gzmtr--direc2" y="-1"></text>
                    <text class="rmg-name__zh rmg-name__gzmtr--direc2" y="21"></text>
                    <text class="rmg-name__en rmg-name__gzmtr--direc2" y="41"></text>
                    <text class="rmg-name__zh rmg-name__gzmtr--direc" x="150" y="5">方向</text>
                </g>
            </g>

            <g id="terminus_gz" style="display: none;">
                <text class="rmg-name__zh">终 点 站</text>
                <text dy="70" class="rmg-name__en">Terminal</text>
                <g stroke-width="8" stroke="#000">
                    <path d="M -160,68 h -160"/>
                    <path d="M 160,68 h 160"/>
                </g>
            </g>
        </svg>
    </div>
</div>

<div id="toggle">
    <!-- <span class="mdc-tab__ripple"></span> -->
    <span class="material-icons">menu</span>
    <ul>
        <li style="display: none;" mtr-specific shmetro-specific><span>P1</span></li>
        <li style="display: none;" gzmtr-specific><span>P1</span></li>
        <li><span>P2</span></li>
    </ul>
</div>

<div id="panels">

    ${require('./html/tab-bar.html')}

    <div role="progressbar" class="mdc-linear-progress mdc-linear-progress--indeterminate mdc-linear-progress--closed" aria-label="Example Progress Bar" aria-valuemin="0" aria-valuemax="1" aria-valuenow="0">
        <div class="mdc-linear-progress__buffering-dots"></div>
        <div class="mdc-linear-progress__buffer"></div>
        <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
            <span class="mdc-linear-progress__bar-inner"></span>
        </div>
        <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
            <span class="mdc-linear-progress__bar-inner"></span>
        </div>
    </div>

    ${require('./html/panel-save.html')}

    ${require('./html/panel-layout.html')}

    ${require('./html/panel-design.html')}

    ${require('./html/panel-stations.html')}
    
    ${require('./html/panel-info.html')}

</div>

<canvas style="display: none;"></canvas>
<script>
    window.urlParams = new URLSearchParams(window.location.search);
</script>

</body>
</html>