<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Editor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
    <!-- <script src="html2canvas.min.js"></script> -->
    <script src="utils.js"></script>
    <script src="Station.js"></script>
    <script src="Line.js"></script>
    <script src="page_loader.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Noto+Serif+KR:700|Noto+Serif+JP:700|Noto+Serif+TC:700|Noto+Serif+SC:700&display=swap" rel="stylesheet">

    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <style type="text/css">
        body {width: 100%; height: 100%; margin: 0; display: flex; flex-direction: column; overflow: auto;}
        #svgs {height: 305px; overflow: auto;}
        #panels {flex-grow: 1; overflow: auto; font-family: "Vegur";}
        .panel {display: none;}
        .panel--active {display: block;}
    </style>
</head>
<body>
<div id="svgs" align="center">
<svg 
xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" 
id="destination" width="0" height="0">

    <style type="text/css">
        .Strip {fill:none;stroke-width:20} 
        .DestNameZH {
            font-size:90px;
            alignment-baseline:central;
        }
        .DestNameEN {
            font-size:45px;
            alignment-baseline:middle;
        }
        .PlatformNum {
            font-size:135px;
            alignment-baseline:central;
            text-anchor: middle;
            fill: #fff;
        }
    </style>

    <defs>
        <path id="arrow" d="M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z" fill="black"/>
    </defs>

    <g class="Strip">
        <path id="dest_strip"/>
    </g>

    <g id="dest_name">
        <use xlink:href="#arrow"/>
        <g id="platform">
            <circle cx="0" cy="0" r="75"/>
            <text class="PlatformNum" dy="0"></text>
            <!-- dy=12 if use Myriad Pro -->
        </g>
    </g>

    <rect id="dest_outer" x="0" y="0" fill="none"/>
</svg>
<svg 
xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" 
id="railmap" width="0" height="0">
    <style type="text/css">
        @font-face {
            font-family: 'Vegur';
            src: url('fonts/Vegur-Regular.otf');
        }

        .LineDiagram {fill:none}

        .LineDiagram.HK {stroke-width:11}
        .LineDiagram.HK.Change {stroke-width:10}

        .LineDiagram.GZ {stroke-width:4}
        .LineDiagram.GZ.Pass {stroke-dasharray:4,4}

        .Strip {fill:none;stroke-width:20}

        .Name.Pass {fill: #AAAAAA;}
        .Name.Current {fill: #FFFFFF;}
        .Name.Future {fill: #000000;}


        .PassedName {
            fill: #AAAAAA;
        }
        .CurrentName {
            fill: #FFFFFF;
        }
        .CurrentNameGZ {
            fill: #FF0000;
        }
        .FutureName {
            fill: #000000;
        }

        .StnNameEN {
            font-size:10px;
            alignment-baseline:middle;
        }
        .StnNameZH {
            font-size:17px;
            alignment-baseline:central;
        }

        .OSINameEN {
            font-size:9px;
            alignment-baseline:middle;
        }
        .OSINameZH {
            font-size:14px;
            alignment-baseline:central;
        }

        .IntNameEN {
            font-size:7px;
            alignment-baseline:middle;
        }
        .IntNameZH {
            font-size:10px;
            alignment-baseline:central;
        }

        .StnNum{
            font-family: Arial;
            font-size: 14px;
            text-anchor: middle;
            alignment-baseline: central;
        }

        .cpassed {stroke:#AAAAAA}
        .cnone {stroke:none}
        .cunknown {stroke:#999999}

    </style>

    <defs>
        <path id="st" class="StationTick" d="M 2,0 H 7"/>
        <path id="term" class="StationTick" d="M -7,0 H 7"/>
        <g id="stn_hk">
            <circle cx="0" cy="0" r="9" fill="#000"/>
            <circle cx="0" cy="0" r="7" fill="#fff"/>
        </g>
        <g id="stn_hk_pass">
            <circle cx="0" cy="0" r="9" fill="#AAAAAA"/>
            <circle cx="0" cy="0" r="7" fill="#fff"/>
        </g>
        <g id="int3_hk">
            <circle cx="0" cy="0" r="9" fill="#000"/>
            <circle cx="0" cy="36" r="9" fill="#000"/>
            <rect x="-9" y="0" width="18" height="36" fill="#000"/>
            <circle cx="0" cy="0" r="7" fill="#fff"/>
            <circle cx="0" cy="36" r="7" fill="#fff"/>
            <rect x="-7" y="0" width="14" height="36" fill="#fff"/>
        </g>
        <g id="int3_hk_pass">
            <circle cx="0" cy="0" r="9" fill="#aaa"/>
            <circle cx="0" cy="36" r="9" fill="#aaa"/>
            <rect x="-9" y="0" width="18" height="36" fill="#aaa"/>
            <circle cx="0" cy="0" r="7" fill="#fff"/>
            <circle cx="0" cy="36" r="7" fill="#fff"/>
            <rect x="-7" y="0" width="14" height="36" fill="#fff"/>
        </g>
        <g id="osi11_hk">
            <circle cx="0" cy="0" r="9" fill="#000"/>
            <circle cx="0" cy="26" r="9" fill="#000"/>
            <circle cx="0" cy="0" r="7" fill="#fff"/>
            <circle cx="0" cy="26" r="7" fill="#fff"/>
        </g>
        <g id="osi11_hk_pass">
            <circle cx="0" cy="0" r="9" fill="#aaa"/>
            <circle cx="0" cy="26" r="9" fill="#aaa"/>
            <circle cx="0" cy="0" r="7" fill="#fff"/>
            <circle cx="0" cy="26" r="7" fill="#fff"/>
        </g>
        <g id="osi11u_hk">
            <path stroke="black" stroke-width="2.5" stroke-dasharray="2,2" d="M 0,0 V 26"/>
            <use xlink:href="#osi11_hk"/>
        </g>
        <g id="osi11u_hk_pass">
            <path stroke="#AAA" stroke-width="2.5" stroke-dasharray="2,2" d="M 0,0 V 26"/>
            <use xlink:href="#osi11_hk_pass"/>
        </g>
        <g id="osi11p_hk">
            <path stroke="black" stroke-width="2.5" d="M 0,0 V 26"/>
            <use xlink:href="#osi11_hk"/>
        </g>
        <g id="osi11p_hk_pass">
            <path stroke="#AAA" stroke-width="2.5" d="M 0,0 V 26"/>
            <use xlink:href="#osi11_hk_pass"/>
        </g>
        <g id="osi12_hk">
            <circle cx="0" cy="0" r="9" fill="#000"/>
            <circle cx="0" cy="26" r="9" fill="#000"/>
            <circle cx="0" cy="44" r="9" fill="#000"/>
            <rect x="-9" y="26" width="18" height="18" fill="#000"/>
            <circle cx="0" cy="0" r="7" fill="#fff"/>
            <circle cx="0" cy="26" r="7" fill="#fff"/>
            <circle cx="0" cy="44" r="7" fill="#fff"/>
            <rect x="-7" y="26" width="14" height="18" fill="#fff"/>
        </g>
        <g id="osi12_hk_pass">
            <circle cx="0" cy="0" r="9" fill="#aaa"/>
            <circle cx="0" cy="26" r="9" fill="#aaa"/>
            <circle cx="0" cy="44" r="9" fill="#aaa"/>
            <rect x="-9" y="26" width="18" height="18" fill="#aaa"/>
            <circle cx="0" cy="0" r="7" fill="#fff"/>
            <circle cx="0" cy="26" r="7" fill="#fff"/>
            <circle cx="0" cy="44" r="7" fill="#fff"/>
            <rect x="-7" y="26" width="14" height="18" fill="#fff"/>
        </g>
        <g id="osi12u_hk">
            <path stroke="black" stroke-width="2.5" stroke-dasharray="2,2" d="M 0,0 V 26"/>
            <use xlink:href="#osi12_hk"/>
        </g>
        <g id="osi12u_hk_pass">
            <path stroke="#AAA" stroke-width="2.5" stroke-dasharray="2,2" d="M 0,0 V 26"/>
            <use xlink:href="#osi12_hk_pass"/>
        </g>
        <g id="osi12p_hk">
            <path stroke="black" stroke-width="2.5" d="M 0,0 V 28"/>
            <use xlink:href="#osi12_hk"/>
        </g>
        <g id="osi12p_hk_pass">
            <path stroke="#AAA" stroke-width="2.5" d="M 0,0 V 28"/>
            <use xlink:href="#osi12_hk_pass"/>
        </g>
        <path id="stn_gz" stroke-width="2" fill="#fff" d="M 0,9.25 V -9.25 H -9.25 a 9.25,9.25 0 0,0 0,18.5 h 18.5 a 9.25,9.25 0 0,0 0,-18.5 H 0 "/>

        <path id="intline_up" d="M 0,0 v -17" stroke-linecap="round"/>
        <path id="intline_down" d="M 0,0 v 17" stroke-linecap="round"/>
    </defs>


    
    <g class="LineDiagram HK Pass" id="line_pass" stroke="#aaa">

    </g>

    <g class="LineDiagram HK" id="line_main">

    </g>

    <g class="Strip">
        <path id="strip"/>
    </g>

    <g class="LineDiagram HK Change" id="stn_int2s"></g>
    <g class="LineDiagram HK Change" id="stn_int3s"></g>
    <g class="LineDiagram HK Change" id="stn_osi11s"></g>
    <g class="LineDiagram HK Change" id="stn_osi12s"></g>

    <rect id="current_bg" x="0" y="0" width="100" height="20" fill="#000"/>
    <g id="stn_icons"></g>

    <g id="station_number" style="display:none">
        <g id="stn_num_0" class="FutureName">
            <text transform="translate(16,100)scale(1)" class="StnNum" id="ln">1</text>
            <text x="34" y="100" class="StnNum" id="stn">01</text>
        </g>
    </g>

    <g id="stn_names"></g>
    <g id="osi11_stn_names"></g>
    <g id="osi12_stn_names"></g>

    <g id="change_bgs" style="display:none;">
        <rect id="int_bg_0" x="25" y="0" rx="3" ry="3" width="37" height="20" fill="none"/>
    </g>

    <g id="int2_names"></g>
    <g id="int3_names"></g>
    <g id="osi11_names"></g>
    <g id="osi12_names"></g>

    <rect id="outer" x="0" y="0" fill="none"/>
</svg>
</div>

<div id="panels">

<div class="mdc-tab-bar" role="tablist">
    <div class="mdc-tab-scroller">
        <div class="mdc-tab-scroller__scroll-area">
        <div class="mdc-tab-scroller__scroll-content">
            <button class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0">
                <span class="mdc-tab__content">
                    <span class="mdc-tab__icon material-icons" aria-hidden="true">panorama</span>
                    <span class="mdc-tab__text-label">Layout</span>
                </span>
                <span class="mdc-tab-indicator mdc-tab-indicator--active">
                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                </span>
                <span class="mdc-tab__ripple"></span>
            </button>

            <button class="mdc-tab" role="tab" aria-selected="true" tabindex="0">
            <span class="mdc-tab__content">
                <span class="mdc-tab__icon material-icons" aria-hidden="true">style</span>
                <span class="mdc-tab__text-label">Design</span>
            </span>
            <span class="mdc-tab-indicator">
                <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
            </span>
            <span class="mdc-tab__ripple"></span>
            </button>

            <button class="mdc-tab" role="tab" aria-selected="true" tabindex="0">
                <span class="mdc-tab__content">
                    <span class="mdc-tab__icon material-icons" aria-hidden="true">directions_transit</span>
                    <span class="mdc-tab__text-label">Stations</span>
                </span>
                <span class="mdc-tab-indicator ">
                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                </span>
                <span class="mdc-tab__ripple"></span>
            </button>

            <button class="mdc-tab" role="tab" aria-selected="true" tabindex="0">
                <span class="mdc-tab__content">
                    <span class="mdc-tab__icon material-icons" aria-hidden="true">save_alt</span>
                    <span class="mdc-tab__text-label">Save</span>
                </span>
                <span class="mdc-tab-indicator ">
                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                </span>
                <span class="mdc-tab__ripple"></span>
            </button>
        </div>
        </div>
    </div>
</div>

<div id="panel_layout" class="panel panel--active">

<div>
    <div id="svg_width" class="mdc-text-field mdc-text-field--outlined">
        <input type="text" id="tf-outlined" class="mdc-text-field__input">
        <div class="mdc-notched-outline">
            <div class="mdc-notched-outline__leading"></div>
            <div class="mdc-notched-outline__notch">
            <label for="tf-outlined" class="mdc-floating-label">Width</label>
            </div>
            <div class="mdc-notched-outline__trailing"></div>
        </div>
    </div>
</div>

<div>
    <span>Vertical Position of Line</span>
    <div id="y_pc" class="mdc-slider" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Select Value">
        <div class="mdc-slider__track-container">
            <div class="mdc-slider__track"></div>
        </div>
        <div class="mdc-slider__thumb-container">
            <svg class="mdc-slider__thumb" width="21" height="21">
                <circle cx="10.5" cy="10.5" r="7.875"></circle>
            </svg>
        <div class="mdc-slider__focus-ring"></div>
        </div>
    </div>
</div>

<div>
    <span>Branch Spacing</span>
    <div id="branch_spacing" class="mdc-slider" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Select Value">
        <div class="mdc-slider__track-container">
            <div class="mdc-slider__track"></div>
        </div>
        <div class="mdc-slider__thumb-container">
            <svg class="mdc-slider__thumb" width="21" height="21">
                <circle cx="10.5" cy="10.5" r="7.875"></circle>
            </svg>
        <div class="mdc-slider__focus-ring"></div>
        </div>
    </div>
</div>

</div>

<div id="panel_design" class="panel">

<div>
    <div id="theme_city" class="mdc-select mdc-select--outlined">
        <i class="mdc-select__dropdown-icon"></i>
        <select class="mdc-select__native-control">
            <!-- <option value="nullcity" selected>Customise...</option> -->
        </select>
        <div class="mdc-notched-outline">
            <div class="mdc-notched-outline__leading"></div>
            <div class="mdc-notched-outline__notch">
                <label class="mdc-floating-label">City</label>
            </div>
            <div class="mdc-notched-outline__trailing"></div>
        </div>
    </div>

    <div id="theme_line" class="mdc-select mdc-select--outlined">
        <i class="mdc-select__dropdown-icon"></i>
        <select class="mdc-select__native-control">
            <!-- <option value="nullcity" selected>Customise...</option> -->
        </select>
        <div class="mdc-notched-outline">
            <div class="mdc-notched-outline__leading"></div>
            <div class="mdc-notched-outline__notch">
                <label class="mdc-floating-label">Line</label>
            </div>
            <div class="mdc-notched-outline__trailing"></div>
        </div>
    </div>
</div>

<div>
    <span>Train Direction</span>
    <button id="direction_l" class="mdc-icon-button" aria-label="Add to favorites" aria-hidden="true" aria-pressed="false">
        <i class="material-icons mdc-icon-button__icon mdc-icon-button__icon--on" style="transform:rotate(180deg)">play_circle_filled</i>
        <i class="material-icons mdc-icon-button__icon" style="transform:rotate(180deg)">play_circle_outline</i>
    </button>
    <button id="direction_r" class="mdc-icon-button" aria-label="Add to favorites" aria-hidden="true" aria-pressed="false">
        <i class="material-icons mdc-icon-button__icon mdc-icon-button__icon--on">play_circle_filled</i>
        <i class="material-icons mdc-icon-button__icon">play_circle_outline</i>
    </button>
</div>

<div>
    <div id="platform_num" class="mdc-text-field mdc-text-field--outlined">
        <input type="text" id="tf-outlined" class="mdc-text-field__input">
        <div class="mdc-notched-outline">
            <div class="mdc-notched-outline__leading"></div>
            <div class="mdc-notched-outline__notch">
            <label for="tf-outlined" class="mdc-floating-label">Platform</label>
            </div>
            <div class="mdc-notched-outline__trailing"></div>
        </div>
    </div>
</div>

<div>
    <span>Station Name Position</span>
    <button id="txt_flip" class="mdc-icon-button material-icons">swap_vert</button>
</div>

</div>

<div id="panel_stations" class="panel">

<div>
    <span>Add a station</span>
    <button id="stn_add" class="mdc-icon-button material-icons">add_box</button>
</div>

<!-- <div id="stn_add_diag" class="mdc-dialog"
     role="alertdialog"
     aria-modal="true"
     aria-labelledby="my-dialog-title"
     aria-describedby="my-dialog-content">
  <div class="mdc-dialog__container">
    <div class="mdc-dialog__surface">
      
      <h2 class="mdc-dialog__title" id="my-dialog-title">Add a station</h2>
      <div class="mdc-dialog__content" id="my-dialog-content">
        <span>Please select the existing station(s) followed by the new station. </span>

        <div id="stn_l1" class="mdc-select mdc-select--outlined">
            <i class="mdc-select__dropdown-icon"></i>
            <select class="mdc-select__native-control">
                
            </select>
            <div class="mdc-notched-outline">
                <div class="mdc-notched-outline__leading"></div>
                <div class="mdc-notched-outline__notch">
                    <label class="mdc-floating-label">Station Left 1</label>
                </div>
                <div class="mdc-notched-outline__trailing"></div>
            </div>
        </div>
        <div id="stn_l2" class="mdc-select mdc-select--outlined">
            <i class="mdc-select__dropdown-icon"></i>
            <select class="mdc-select__native-control">
                
            </select>
            <div class="mdc-notched-outline">
                <div class="mdc-notched-outline__leading"></div>
                <div class="mdc-notched-outline__notch">
                    <label class="mdc-floating-label">Station Left 2</label>
                </div>
                <div class="mdc-notched-outline__trailing"></div>
            </div>
        </div>

        <br>

        <span>Please select the existing station(s) following the new station. </span>

        <div id="stn_r1" class="mdc-select mdc-select--outlined">
            <i class="mdc-select__dropdown-icon"></i>
            <select class="mdc-select__native-control">
                <option value="null" selected>Select a station...</option>
            </select>
            <div class="mdc-notched-outline">
                <div class="mdc-notched-outline__leading"></div>
                <div class="mdc-notched-outline__notch">
                    <label class="mdc-floating-label">Station Right 1</label>
                </div>
                <div class="mdc-notched-outline__trailing"></div>
            </div>
        </div>
        <div id="stn_r2" class="mdc-select mdc-select--outlined">
            <i class="mdc-select__dropdown-icon"></i>
            <select class="mdc-select__native-control">
                <option value="null" selected>Select a station...</option>
            </select>
            <div class="mdc-notched-outline">
                <div class="mdc-notched-outline__leading"></div>
                <div class="mdc-notched-outline__notch">
                    <label class="mdc-floating-label">Station Right 2</label>
                </div>
                <div class="mdc-notched-outline__trailing"></div>
            </div>
        </div>
      </div>
      <footer class="mdc-dialog__actions">
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
          <span class="mdc-button__label">Cancel</span>
        </button>
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="accept" data-mdc-dialog-button-default>
          <span class="mdc-button__label">Confirm</span>
        </button>
      </footer>
    </div>
  </div>
  <div class="mdc-dialog__scrim"></div>
</div> -->

<div id="stn_add_diag" class="mdc-dialog"
     role="alertdialog"
     aria-modal="true"
     aria-labelledby="my-dialog-title"
     aria-describedby="my-dialog-content">
  <div class="mdc-dialog__container">
    <div class="mdc-dialog__surface">
      <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
      <h2 class="mdc-dialog__title" id="my-dialog-title">Add a station</h2>
      <div class="mdc-dialog__content" id="my-dialog-content">
        <div>
        <div id="prep" class="mdc-select mdc-select--outlined">
            <i class="mdc-select__dropdown-icon"></i>
            <select class="mdc-select__native-control">
                <option value="before" selected>Before</option>
                <option value="after">After</option>
            </select>
            <div class="mdc-notched-outline">
                <div class="mdc-notched-outline__leading"></div>
                <div class="mdc-notched-outline__notch">
                    <label class="mdc-floating-label">Preposition</label>
                </div>
                <div class="mdc-notched-outline__trailing"></div>
            </div>
        </div>

        <span>station</span>

        <div id="pivot" class="mdc-select mdc-select--outlined">
            <i class="mdc-select__dropdown-icon"></i>
            <select class="mdc-select__native-control">
                <!-- <option value="null" selected>Select a station...</option> -->
            </select>
            <div class="mdc-notched-outline">
                <div class="mdc-notched-outline__leading"></div>
                <div class="mdc-notched-outline__notch">
                    <label class="mdc-floating-label">Pivot</label>
                </div>
                <div class="mdc-notched-outline__trailing"></div>
            </div>
        </div>
        </div>

        <div>
        <span>On</span>

        <div id="loc" class="mdc-select mdc-select--outlined">
            <i class="mdc-select__dropdown-icon"></i>
            <select class="mdc-select__native-control">
                <option value="centre" selected>centre line</option>
                <option value="upper">upper branch</option>
                <option value="lower">lower branch</option>
                <option value="newupper">new upper branch</option>
                <option value="newlower">new lower branch</option>
            </select>
            <div class="mdc-notched-outline">
                <div class="mdc-notched-outline__leading"></div>
                <div class="mdc-notched-outline__notch">
                    <label class="mdc-floating-label">Location</label>
                </div>
                <div class="mdc-notched-outline__trailing"></div>
            </div>
        </div>
        </div>

        <div id="new_branch">
        <span>Bypass all stations until</span>
        <div id="end" class="mdc-select mdc-select--outlined">
            <i class="mdc-select__dropdown-icon"></i>
            <select class="mdc-select__native-control">

            </select>
            <div class="mdc-notched-outline">
                <div class="mdc-notched-outline__leading"></div>
                <div class="mdc-notched-outline__notch">
                    <label class="mdc-floating-label">End of Branch</label>
                </div>
                <div class="mdc-notched-outline__trailing"></div>
            </div>
        </div>
        </div>

      </div>
      <footer class="mdc-dialog__actions">
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
          <span class="mdc-button__label">Cancel</span>
        </button>
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="accept" data-mdc-dialog-button-default>
          <span class="mdc-button__label">Confirm</span>
        </button>
      </footer>
    </div>
  </div>
  <div class="mdc-dialog__scrim"></div>
</div>

<div>
    <span>Modify or delete a current station</span>
    <div id="stn_list" class="mdc-select mdc-select--outlined">
        <i class="mdc-select__dropdown-icon"></i>
        <select class="mdc-select__native-control">
            <option value="null" selected disabled>Select a station...</option>
        </select>
        <div class="mdc-notched-outline">
            <div class="mdc-notched-outline__leading"></div>
            <div class="mdc-notched-outline__notch">
                <label class="mdc-floating-label">Station</label>
            </div>
            <div class="mdc-notched-outline__trailing"></div>
        </div>
    </div>
    <button id="stn_modify" class="mdc-icon-button material-icons">text_fields</button>
    <button id="stn_transfer" class="mdc-icon-button material-icons">transfer_within_a_station</button>
    <button id="stn_delete" class="mdc-icon-button material-icons">delete</button>
</div>

<div id="stn_modify_diag" class="mdc-dialog"
     role="alertdialog"
     aria-modal="true"
     aria-labelledby="my-dialog-title"
     aria-describedby="my-dialog-content">
  <div class="mdc-dialog__container">
    <div class="mdc-dialog__surface">
      <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
      <h2 class="mdc-dialog__title" id="my-dialog-title">Edit station name</h2>
      <div class="mdc-dialog__content" id="my-dialog-content">
            <span>Please enter station name in both Chinese and Latin characters. </span>
            <div id="name_zh" class="mdc-text-field mdc-text-field--outlined">
                <input type="text" id="tf-outlined" class="mdc-text-field__input">
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                    <label for="tf-outlined" class="mdc-floating-label">Name in Chinese Characters</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <div id="name_en" class="mdc-text-field mdc-text-field--outlined">
                <input type="text" id="tf-outlined" class="mdc-text-field__input">
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                    <label for="tf-outlined" class="mdc-floating-label">Name in Latin Characters</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
      </div>
      <footer class="mdc-dialog__actions">
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="yes" data-mdc-dialog-button-default>
          <span class="mdc-button__label">Done</span>
        </button>
      </footer>
    </div>
  </div>
  <div class="mdc-dialog__scrim"></div>
</div>

<div id="stn_transfer_diag" class="mdc-dialog"
     role="alertdialog"
     aria-modal="true"
     aria-labelledby="my-dialog-title"
     aria-describedby="my-dialog-content">
  <div class="mdc-dialog__container">
    <div class="mdc-dialog__surface">
      <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
      <h2 class="mdc-dialog__title" id="my-dialog-title">Edit type of interchange</h2>
      <div class="mdc-dialog__content" id="my-dialog-content">
            <span>Please select the type of interchange. </span>
            <div id="change_type" class="mdc-select mdc-select--outlined">
                <i class="mdc-select__dropdown-icon"></i>
                <select class="mdc-select__native-control">
                    <option value="none" selected>None</option>
                    <option value="int2">Interchange (2 stations)</option>
                    <option value="int3">Interchange (3 stations)</option>
                    <option value="osi11">Out-station-interchange (1-1)</option>
                    <option value="osi12">Out-station-interchange (1-2)</option>
                </select>
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                        <label class="mdc-floating-label">Interchange</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <button id="tick_direc" class="mdc-icon-button" aria-label="Interchange Direction" aria-hidden="false" aria-pressed="false">
                <i class="material-icons mdc-icon-button__icon mdc-icon-button__icon--on">toggle_on</i>
                <i class="material-icons mdc-icon-button__icon">toggle_off</i>
            </button>

            <br>

            <div id="osi_name_zh" class="mdc-text-field mdc-text-field--outlined">
                <input type="text" id="tf-outlined" class="mdc-text-field__input">
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                    <label for="tf-outlined" class="mdc-floating-label">OSI Name in Chinese Characters</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <div id="osi_name_en" class="mdc-text-field mdc-text-field--outlined">
                <input type="text" id="tf-outlined" class="mdc-text-field__input">
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                    <label for="tf-outlined" class="mdc-floating-label">OSI Name in Latin Characters</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <button id="paid_area" class="mdc-icon-button" aria-label="Paid Area" aria-hidden="false" aria-pressed="false">
                <i class="material-icons mdc-icon-button__icon mdc-icon-button__icon--on">attach_money</i>
                <i class="material-icons mdc-icon-button__icon">money_off</i>
            </button>

            <br>

            <div id="int_city_1" class="mdc-select mdc-select--outlined">
                <i class="mdc-select__dropdown-icon"></i>
                <select class="mdc-select__native-control">
                    <!-- <option value="nullcity" selected>Customise...</option> -->
                </select>
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                        <label class="mdc-floating-label">1st City</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <div id="int_line_1" class="mdc-select mdc-select--outlined">
                <i class="mdc-select__dropdown-icon"></i>
                <select class="mdc-select__native-control">
                    <!-- <option value="nullcity" selected>Customise...</option> -->
                </select>
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                        <label class="mdc-floating-label">1st Line</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <div id="int_name_zh_1" class="mdc-text-field mdc-text-field--outlined">
                <input type="text" id="tf-outlined" class="mdc-text-field__input">
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                    <label for="tf-outlined" class="mdc-floating-label">1st Name in Chinese Characters</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <div id="int_name_en_1" class="mdc-text-field mdc-text-field--outlined">
                <input type="text" id="tf-outlined" class="mdc-text-field__input">
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                    <label for="tf-outlined" class="mdc-floating-label">1st Name in Latin Characters</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>

            <br>

            <div id="int_city_2" class="mdc-select mdc-select--outlined">
                <i class="mdc-select__dropdown-icon"></i>
                <select class="mdc-select__native-control">
                    <!-- <option value="nullcity" selected>Customise...</option> -->
                </select>
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                        <label class="mdc-floating-label">2nd City</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <div id="int_line_2" class="mdc-select mdc-select--outlined">
                <i class="mdc-select__dropdown-icon"></i>
                <select class="mdc-select__native-control">
                    <!-- <option value="nullcity" selected>Customise...</option> -->
                </select>
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                        <label class="mdc-floating-label">2nd Line</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <div id="int_name_zh_2" class="mdc-text-field mdc-text-field--outlined">
                <input type="text" id="tf-outlined" class="mdc-text-field__input">
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                    <label for="tf-outlined" class="mdc-floating-label">2nd Name in Chinese Characters</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <div id="int_name_en_2" class="mdc-text-field mdc-text-field--outlined">
                <input type="text" id="tf-outlined" class="mdc-text-field__input">
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                    <label for="tf-outlined" class="mdc-floating-label">2nd Name in Latin Characters</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>

            <br>

            Please note that changes will not be applied to SVG until the 'save' button is pressed.
      </div>
      <footer class="mdc-dialog__actions">
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
            <span class="mdc-button__label">Discard</span>
        </button>
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="accept" data-mdc-dialog-button-default>
          <span class="mdc-button__label">Save</span>
        </button>
      </footer>
    </div>
  </div>
  <div class="mdc-dialog__scrim"></div>
</div>


<div id="stn_delete_diag" class="mdc-dialog"
     role="alertdialog"
     aria-modal="true"
     aria-labelledby="my-dialog-title"
     aria-describedby="my-dialog-content">
  <div class="mdc-dialog__container">
    <div class="mdc-dialog__surface">
      <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
      <h2 class="mdc-dialog__title" id="my-dialog-title">Warning</h2>
      <div class="mdc-dialog__content" id="my-dialog-content">
        Dialog body text goes here.
      </div>
      <footer class="mdc-dialog__actions">
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
          <span class="mdc-button__label">Cancel</span>
        </button>
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="accept" data-mdc-dialog-button-default>
          <span class="mdc-button__label">Delete</span>
        </button>
      </footer>
    </div>
  </div>
  <div class="mdc-dialog__scrim"></div>
</div>

<div id="stn_delete_err" class="mdc-dialog"
     role="alertdialog"
     aria-modal="true"
     aria-labelledby="my-dialog-title"
     aria-describedby="my-dialog-content">
  <div class="mdc-dialog__container">
    <div class="mdc-dialog__surface">
      <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
      <h2 class="mdc-dialog__title" id="my-dialog-title">Error</h2>
      <div class="mdc-dialog__content" id="my-dialog-content">
        You are not allowed to delete this station!
      </div>
      <footer class="mdc-dialog__actions">
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="yes">
          <span class="mdc-button__label">OK</span>
        </button>
      </footer>
    </div>
  </div>
  <div class="mdc-dialog__scrim"></div>
</div>

</div>

<div id="panel_save" class="panel">
    <span>To save your work, please execute the following command in the console of your browser's DevTools and save the result as plain text. Importing configuration file feature will be added in the future. <br>
        <tt>&gt; JSON.stringify(getParams())</tt>
    </span>
</div>


</div>

<script>
    var template = 'test'
    $.ajax({
        url: 'templates/' + template + '.json', 
        success: function (data) {
            sessionStorage.all_params = JSON.stringify(data);
            
        }, 
        async: false
    });

    var param_instance = getParams();
    console.log(Date.now());
    var ktl = new Line(param_instance);
    ktl.drawSVGFrame();
    ktl.showFrameOuter();
    ktl.drawStns();
    ktl.updateStnNameBg();
    ktl.fillThemeColour();
    ktl.drawLine();
    ktl.drawStrip();
    ktl.drawDestInfo();
    ktl.loadFonts();
    console.log(Date.now());
    
</script>

<script>
    var designPanelFirstInit = true;
    var stationsPanelFirstInit = true;
    // $('.mdc-tab-bar').each((i, elem) => mdc.tabBar.MDCTabBar.attachTo(elem));
    var tabBar = new mdc.tabBar.MDCTabBar.attachTo($('.mdc-tab-bar')[0]);
    tabBar.listen('MDCTabBar:activated', event => {
        $('.panel--active').removeClass('panel--active');
        $('.panel').eq(event.detail.index).addClass('panel--active');

        if (event.detail.index == 1 && designPanelFirstInit) {
            initDesignPanel();
            designPanelFirstInit = false;
        }
        if (event.detail.index == 2 && stationsPanelFirstInit) {
            initStationsPanel();
            stationsPanelFirstInit = false;
        }
    });

    initLayoutPanel();

    console.log(`panel`, Date.now())
</script>

</body>
</html>