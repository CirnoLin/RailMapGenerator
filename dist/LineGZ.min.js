(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["LineGZ"],{

/***/ "./src/Line/LineGZ.ts":
/*!****************************!*\
  !*** ./src/Line/LineGZ.ts ***!
  \****************************/
/*! exports provided: RMGLineGZ */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RMGLineGZ", function() { return RMGLineGZ; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./src/utils.ts");
/* harmony import */ var _Station_StationGZ__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Station/StationGZ */ "./src/Station/StationGZ.ts");
/* harmony import */ var _Line__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Line */ "./src/Line/Line.ts");



class RMGLineGZ extends _Line__WEBPACK_IMPORTED_MODULE_2__["RMGLine"] {
    constructor(param) {
        super(param);
        this._psdNum = param.psd_num;
        this._lineNum = param.line_num;
        this._infoPanelType = param.info_panel_type;
        this._directionGZX = param.direction_gz_x;
        this._directionGZY = param.direction_gz_y;
    }
    _initStnInstance(stnId, stnInfo) {
        if (stnInfo.children.length === 2 || stnInfo.parents.length === 2) {
            return new _Station_StationGZ__WEBPACK_IMPORTED_MODULE_1__["BranchStationGZ"](stnId, stnInfo, [this.themeCity, this.themeLine, this._themeColour, this._fgColour, ...this._lineNames]);
        }
        switch (stnInfo.transfer.type) {
            case 'int2':
            case 'int3':
                return new _Station_StationGZ__WEBPACK_IMPORTED_MODULE_1__["IntStationGZ"](stnId, stnInfo);
            case 'osi11':
            case 'osi12':
            case 'osi13':
            case 'osi21':
            case 'osi22':
            case 'osi31':
                return new _Station_StationGZ__WEBPACK_IMPORTED_MODULE_1__["OSIStationGZ"](stnId, stnInfo);
            default:
                return new _Station_StationGZ__WEBPACK_IMPORTED_MODULE_1__["RMGStationGZ"](stnId, stnInfo);
        }
        // switch (stnInfo.change_type) {
        //     case 'int2':
        //         // return new Int2StationGZ(stnId, stnInfo);
        //     case 'int3_l':
        //     case 'int3_r':
        //         return new IntStationGZ(stnId, stnInfo);
        //     case 'osi11_ul':
        //     case 'osi11_pl':
        //     case 'osi11_ur':
        //     case 'osi11_pr':
        //         // return new OSI11StationGZ(stnId, stnInfo);
        //     case 'osi12_ul':
        //     case 'osi12_pl':
        //     case 'osi12_ur':
        //     case 'osi12_pr':
        //     case 'osi22_ul':
        //     case 'osi22_pl':
        //     case 'osi22_ur':
        //     case 'osi22_pr':
        //         return new OSIStationGZ(stnId, stnInfo);
        //     case 'osi22_end_p':
        //     case 'osi22_end_u':
        //         if (stnInfo.parents[0] == 'linestart' || stnInfo.children[0] == 'lineend') {
        //             return new OSIStationGZ(stnId, stnInfo);
        //         }
        //     default:
        //         return new RMGStationGZ(stnId, stnInfo);
        // }
    }
    get lineXs() {
        if (this._direction == 'r') {
            return [
                this._svgWidth * this._padding / 100 + 65,
                this._svgWidth * (1 - this._padding / 100)
            ];
        }
        else {
            return [
                this._svgWidth * this._padding / 100,
                this._svgWidth * (1 - this._padding / 100) - 65
            ];
        }
    }
    set svgWidth(val) {
        super.svgWidth = val;
        this.loadLineNum();
        this.loadLineName();
        this.loadDirection();
    }
    set padding(val) {
        super.padding = val;
        this.loadLineNum();
        this.loadLineName();
    }
    set branchSpacing(val) {
        super.branchSpacing = val;
        this.loadLineNum();
    }
    set direction(val) {
        this._direction = val;
        Object(_utils__WEBPACK_IMPORTED_MODULE_0__["setParams"])('direction', val);
        for (let [stnId, stnInstance] of Object.entries(this.stations)) {
            if (['linestart', 'lineend'].includes(stnId)) {
                continue;
            }
            stnInstance.x = this._stnRealX(stnId);
            stnInstance.y = this._stnRealY(stnId);
            stnInstance.state = this._stnState(stnId);
        }
        RMGLineGZ.clearSVG();
        this.drawStns();
        this.drawLine();
        this.drawDestInfo();
        this.loadLineNum();
        this.loadLineName();
        this.loadDirection();
        this.loadFonts();
    }
    set currentStnId(val) {
        super.currentStnId = val;
        this.loadLineNum();
        this.loadDirection();
    }
    set lineNum(val) {
        this._lineNum = val;
        Object(_utils__WEBPACK_IMPORTED_MODULE_0__["setParams"])('line_num', val);
        this.loadLineNum();
        this.loadFonts();
    }
    set lineNames(val) {
        this._lineNames = val;
        Object(_utils__WEBPACK_IMPORTED_MODULE_0__["setParams"])('line_name', val);
        this.loadLineName();
        // (to be fixed) redraw branching station
        this.loadFonts();
    }
    set psdNum(val) {
        this._psdNum = val;
        Object(_utils__WEBPACK_IMPORTED_MODULE_0__["setParams"])('psd_num', val);
        $('.rmg-psd-num').text(val);
    }
    set infoPanelType(val) {
        this._infoPanelType = val;
        Object(_utils__WEBPACK_IMPORTED_MODULE_0__["setParams"])('info_panel_type', val);
        $('#station_info_gzmtr #indicator_light').attr('xlink:href', '#indicator_' + val);
        // $('#dest_strip, #strip').removeAttr('class').addClass(`rmg-strip__gzmtr--${this._infoPanelType}`);
        this.drawStrip();
        this.fillThemeColour();
        this.drawPSD();
    }
    set directionGZX(val) {
        this._directionGZX = val;
        Object(_utils__WEBPACK_IMPORTED_MODULE_0__["setParams"])('direction_gz_x', val);
        let x = this._svgWidth * this._directionGZX / 100;
        let y = this._svgHeight * this._directionGZY / 100;
        $('#direction_gz').attr('transform', `translate(${x},${y})`);
    }
    set directionGZY(val) {
        this._directionGZY = val;
        Object(_utils__WEBPACK_IMPORTED_MODULE_0__["setParams"])('direction_gz_y', val);
        let x = this._svgWidth * this._directionGZX / 100;
        let y = this._svgHeight * this._directionGZY / 100;
        $('#direction_gz').attr('transform', `translate(${x},${y})`);
    }
    _stnXShare(stnId) {
        let { criticalPath, branches } = this;
        let self = this;
        if (criticalPath.nodes.includes(stnId)) {
            return super._stnXShare(stnId);
        }
        if (this.criticalPath.nodes.join(',') !== branches[0].join(',')) {
            return super._stnXShare(stnId);
        }
        else {
            let branchWithStn = branches.slice(1).filter(branch => branch.includes(stnId))[0];
            let lenToLeft = this._cp(branchWithStn[0], stnId).len;
            let lenToRight = this._cp(stnId, branchWithStn[branchWithStn.length - 1]).len;
            if (branches[0].includes(branchWithStn[0]) && branches[0].includes(branchWithStn[branchWithStn.length - 1])) {
                return (self._stnXShare(branchWithStn[0]) * lenToRight + self._stnXShare(branchWithStn[branchWithStn.length - 1]) * lenToLeft) / (lenToLeft + lenToRight);
            }
            else if (branches[0].includes(branchWithStn[0])) {
                return self._stnXShare(branchWithStn[0]) + lenToLeft;
            }
            else {
                return self._stnXShare(branchWithStn[branchWithStn.length - 1]) - lenToRight;
            }
        }
    }
    /**
     * Vertical position (in shares) of station icon.
     */
    _stnYShare(stnId) {
        if (['linestart', 'lineend'].includes(stnId)) {
            return 0;
        }
        var branches = this.branches;
        if (branches[0].includes(stnId)) {
            return 0;
        }
        else {
            let i = 1;
            while (i < branches.length) {
                if (branches[i].includes(stnId)) {
                    break;
                }
                i++;
            }
            if (branches[0].includes(branches[i][0])) {
                var branchingStnId = branches[i][0];
                var neToFind = 'children';
                if (this.stations[branchingStnId][neToFind].indexOf(branches[i][1]) == 0) {
                    return 2;
                }
                else {
                    return -2;
                }
            }
            else {
                var branchingStnId = branches[i].slice().reverse()[0];
                var neToFind = 'parents';
                if (this.stations[branchingStnId][neToFind].indexOf(branches[i].slice().reverse()[1]) == 0) {
                    return 2;
                }
                else {
                    return -2;
                }
            }
        }
    }
    drawStrip() {
        let stripHeight = (type => {
            switch (type) {
                case 'gz28':
                case 'gzgf':
                    return 60;
                case 'gz3':
                    return 40;
                case 'gz1421':
                    return 20;
            }
        })(this._infoPanelType);
        $('#dest_strip_gz, #strip_gz').attr({
            y: this._svgHeight - stripHeight,
            height: stripHeight
        });
    }
    _rightWideFactor(stnId) {
        if (this.stations[stnId] instanceof _Station_StationGZ__WEBPACK_IMPORTED_MODULE_1__["BranchStationGZ"] && this.stations[stnId]._tickRotation === 0) {
            return 0.25;
        }
        else {
            return 0;
        }
    }
    _leftWideFactor(stnId) {
        if (this.stations[stnId] instanceof _Station_StationGZ__WEBPACK_IMPORTED_MODULE_1__["BranchStationGZ"] && this.stations[stnId]._tickRotation !== 0) {
            return 0.25;
        }
        else {
            return 0;
        }
    }
    _pathWeight(stnId1, stnId2) {
        if (!this.stations[stnId1].children.includes(stnId2)) {
            return -Infinity;
        }
        return 1 + this._rightWideFactor(stnId1) + this._leftWideFactor(stnId2);
        // return 1;
    }
    /**
     * Set width for colour strips. (Height of strips are controlled by `RMGLineGZ.drawStrip`. )
     */
    drawSVGFrame() {
        super.drawSVGFrame();
        $('#dest_strip_gz').attr('width', this._svgDestWidth);
        $('#strip_gz').attr('width', this._svgWidth);
    }
    _linePath(stnIds) {
        let prevY;
        var path = [];
        stnIds.forEach(stnId => {
            var [x, y] = ['_stnRealX', '_stnRealY'].map(fun => this[fun](stnId));
            if (!prevY && prevY !== 0) {
                prevY = y;
                path.push(`M ${x},${y}`);
                return;
            }
            if (y === 0) {
                if (y < prevY) {
                    path.push(`H ${x - 30}`, 'a 30,30 0 0,0 30,-30', `V ${y}`);
                }
                if (y > prevY) {
                    path.push(`H ${x - 30}`, 'a 30,30 0 0,1 30,30', `V ${y}`);
                }
            }
            else {
                if (y < prevY) {
                    path.push(`V ${y + 30}`, 'a 30,30 0 0,1 30,-30', `H ${x}`);
                }
                if (y > prevY) {
                    path.push(`V ${y - 30}`, 'a 30,30 0 0,0 30,30', `H ${x}`);
                }
            }
            path.push(`H ${x}`);
            prevY = y;
        });
        // simplify path
        return path.join(' ').replace(/( H ([\d.]+))+/g, ' H $2');
    }
    drawLine() {
        $('.rmg-line').removeClass('rmg-line__mtr').addClass('rmg-line__gzmtr');
        super.drawLine();
    }
    loadFonts() {
        // $('.rmg-name__zh, .rmg-name__en').addClass('rmg-name__gzmtr');
    }
    initFonts() {
        let styleSheet = $('link#css_share')[0].sheet;
        let idx = [];
        Array.from(styleSheet.cssRules).forEach((rule, i) => {
            if (rule.cssText.indexOf('.rmg-name__zh') !== -1) {
                idx.push(i);
            }
            else if (rule.cssText.indexOf('.rmg-name__en') !== -1) {
                idx.push(i);
            }
        });
        idx.forEach(i => styleSheet.deleteRule(i));
        styleSheet.insertRule('.rmg-name__zh {alignment-baseline: central; font-family: Arial, SimHei, STHeiti, PingFangSC-Regular, sans-serif;}');
        styleSheet.insertRule('.rmg-name__en {alignment-baseline: middle; font-family: Arial, sans-serif;}');
    }
    fillThemeColour() {
        super.fillThemeColour();
        $('#dest_strip_gz, #strip_gz').attr('fill', this._themeColour);
        if (['gz3', 'gz1421'].includes(this._infoPanelType)) {
            $('#big_psd use').attr('fill', this._themeColour);
            if (this._fgColour === '#fff') {
                $('#big_psd text').addClass('rmg-name__gzmtr--white-fg');
            }
            else {
                $('#big_psd text').removeClass('rmg-name__gzmtr--white-fg');
            }
        }
        else {
            $('#big_psd use').attr('fill', 'white');
            $('#big_psd text').removeClass('rmg-name__gzmtr--white-fg');
        }
        $('path#stn_gz').attr('stroke', this._themeColour);
        $('#station_info_gzmtr > #platform > circle').attr('fill', this._themeColour);
        $('#line_name use').attr('fill', this._themeColour);
        if (this._fgColour === '#fff') {
            $('#station_info_gzmtr > #platform text').addClass('rmg-name__gzmtr--white-fg');
            $('#line_name text').addClass('rmg-name__gzmtr--white-fg');
        }
        else {
            $('#station_info_gzmtr > #platform text').removeClass('rmg-name__gzmtr--white-fg');
            $('#line_name text').removeClass('rmg-name__gzmtr--white-fg');
        }
    }
    loadLineNum() {
        const LINE_NUM_MAX_WIDTH = 15.59375;
        $('.rmg-name__gzmtr--line-num').text(this._lineNum).attr('transform', `translate(-9.25,0)`);
        var lineNumDim = Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getTxtBoxDim"])($('.rmg-name__gzmtr--line-num')[1], 'railmap');
        if (this._lineNum.length === 2) {
            var lineNumScale = lineNumDim.width > LINE_NUM_MAX_WIDTH ? LINE_NUM_MAX_WIDTH / lineNumDim.width : 1;
            $('.rmg-name__gzmtr--line-num').attr('transform', `translate(-9.25,0)scale(${lineNumScale})`);
            $('.rmg-name__gzmtr--station-num').attr('transform', `translate(9.25,0)scale(${lineNumScale})`);
        }
        else {
            var lineNumScale = lineNumDim.width > LINE_NUM_MAX_WIDTH ? LINE_NUM_MAX_WIDTH / lineNumDim.width : 1;
            $('.rmg-name__gzmtr--line-num').attr('transform', `translate(-9.25,0)scale(${lineNumScale})`);
            $('.rmg-name__gzmtr--station-num').attr('transform', `translate(9.25,0)`);
        }
    }
    loadLineName() {
        // simulate interchange info
        let info = [this.themeCity, this.themeLine, this._themeColour, this._fgColour, this._lineNames[0], this._lineNames[1]];
        $('#line_name')
            .empty()
            .append(Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getIntBoxGZ"])(info, 1));
        $('#line_name').html($('#line_name').html());
        var lineNameX = this._direction == 'r' ? this.lineXs[0] - 65 : this.lineXs[1] + 65;
        $('#line_name')
            .attr({
            transform: `translate(${lineNameX},-18)scale(1.5)`
        });
        this.loadFonts();
    }
    loadDirection() {
        let validDest;
        let x = this._svgWidth * this._directionGZX / 100;
        let y = this._svgHeight * this._directionGZY / 100;
        $('#direction_gz').attr('transform', `translate(${x},${y})`);
        // to be fixed: validDest ordering
        if (this._direction == 'l') {
            $('#direction_gz use').attr('transform', `scale(0.35)`);
            $('#direction_gz g').attr({
                'text-anchor': 'start',
                transform: 'translate(65,-5)'
            });
            validDest = this.lValidDests;
        }
        else {
            $('#direction_gz use').attr('transform', `scale(0.35)rotate(180)`);
            $('#direction_gz g').attr({
                'text-anchor': 'end',
                transform: 'translate(-65,-5)'
            });
            validDest = this.rValidDests;
        }
        if (validDest.length !== 2) {
            var [destNameZH, destNameEN] = [0, 1].map(idx => {
                return validDest.map(stnId => this.stations[stnId].name[idx].replace(/\\/g, ' ')).join('/');
            });
            $('#direction_gz g').eq(0).find('text').eq(0).text(destNameZH + '方向');
            $('#direction_gz g').eq(0).find('text').eq(1).text('Towards ' + destNameEN.replace('\\', ' '));
            $('#direction_gz g').eq(0).show();
            $('#direction_gz g').eq(1).hide();
        }
        else {
            // flatMap and flat are not supported by some browsers!
            // however targeting ES5 caused other issues?
            validDest
                .map(stnId => this.stations[stnId].name)
                .reduce((acc, val) => acc.concat(val), [])
                .forEach((txt, i) => {
                if (i % 2) {
                    txt = 'Towards ' + txt.replace('\\', ' ');
                }
                $('#direction_gz g').eq(1).find('text').eq(i).text(txt);
            });
            $('#direction_gz g').eq(1).find('text').css('letter-spacing', 0);
            let charCounts = validDest.map(stnId => this.stations[stnId].name[0].length);
            let minCharCounts = Math.min(...charCounts);
            if (minCharCounts > 1 && charCounts[0] !== charCounts[1]) {
                let charSpacing = Math.abs(charCounts[0] - charCounts[1]) / (minCharCounts - 1);
                $('#direction_gz g').eq(1).find('text')
                    .eq(charCounts[0] > charCounts[1] ? 2 : 0)
                    .css('letter-spacing', `${charSpacing}em`);
            }
            if (this._direction === 'l') {
                let maxCharCount = Math.max(...charCounts);
                $('#direction_gz g').eq(1).find('text').eq(4).attr('x', 25 * (maxCharCount + 1));
                $('#direction_gz g').eq(1).find('text').slice(0, 4).removeAttr('x');
            }
            else {
                $('#direction_gz g').eq(1).find('text').eq(4).removeAttr('x');
                $('#direction_gz g').eq(1).find('text').slice(0, 4).attr('x', '-75');
            }
            $('#direction_gz g').eq(0).hide();
            $('#direction_gz g').eq(1).show();
        }
    }
    updateStnName(stnId, names, stnNum) {
        super.updateStnName(stnId, names, stnNum);
        this.loadLineNum();
        if (this.stations[this._currentStnId].parents.includes(stnId) || this.stations[this._currentStnId].children.includes(stnId)) {
            this.drawDestInfo();
            this.loadFonts();
        }
        if (this._currentStnId === stnId) {
            this.drawDestInfo();
            this.loadFonts();
        }
        if (this.leftDests.includes(stnId) || this.rightDests.includes(stnId)) {
            this.loadDirection();
        }
    }
    drawDestInfo() {
        $('#station_info_gzmtr #big_stn_num text').eq(1).text(this.stations[this._currentStnId].stnNum);
        $('#station_info_gzmtr > #platform > text').eq(0).text(this._platformNum);
        $('#station_info_gzmtr > #big_psd text').eq(0).text(this._psdNum);
        $('#station_info_gzmtr #big_name').empty()
            .attr('transform', `translate(${this._svgDestWidth / 2},${100 - (this.stations[this._currentStnId].name[1].split('\\').length - 1) * 20})`)
            .append($('<text>', { class: 'rmg-name__zh rmg-name__gzmtr--dest' })
            .text(this.stations[this._currentStnId].name[0]))
            .append($('<text>', { dy: 70, class: 'rmg-name__en rmg-name__gzmtr--dest' })
            .text(this.stations[this._currentStnId].name[1].split('\\')[0])
            .append($('<tspan>', { x: 0, dy: 40, 'alignment-baseline': 'middle' }).text(this.stations[this._currentStnId].name[1].split('\\')[1] || '')));
        $('#terminus_gz').attr('transform', `translate(${this._svgWidth / 2},100)`);
        let nextStnId = this
            .stations[this._currentStnId][this._direction === 'l' ? 'parents' : 'children']
            .filter(stnId => {
            let branchTmp = this.stations[this._currentStnId].branch[this._direction === 'l' ? 'left' : 'right'];
            if (branchTmp.length) {
                return true;
                // return branchTmp[0] === 'through' ? true : stnId !== branchTmp[1];
            }
            else {
                return true;
            }
        });
        if (['linestart', 'lineend'].includes(nextStnId[0])) {
            $('#station_info_gzmtr').find('#big_next, #big_next_2').hide();
            $('#station_info_gzmtr > use').eq(0).hide();
            $('#line_main, #line_pass, #line_name, #stn_icons, #direction_gz').hide();
            $('#terminus_gz').show();
        }
        else {
            if (nextStnId.length === 1) {
                $('#station_info_gzmtr #big_next').show();
                $('#station_info_gzmtr #big_next_2').hide();
            }
            else {
                $('#station_info_gzmtr #big_next').hide();
                $('#station_info_gzmtr #big_next_2').show();
            }
            $('#station_info_gzmtr > use').eq(0).show();
            $('#line_main, #line_pass, #line_name, #stn_icons, #direction_gz').show();
            $('#terminus_gz').hide();
        }
        let [nextNameZH, nextNameEN] = ['', ''];
        let nextNameZHCount = 0;
        if (nextStnId.length === 1) {
            var nextStnInfo = this.stations[nextStnId[0]];
            [nextNameZH, nextNameEN] = nextStnInfo.name;
            nextNameZHCount = nextNameZH.length;
            $('#station_info_gzmtr #big_next g:nth-child(2) text').eq(0).text(nextNameZH);
            $('#station_info_gzmtr #big_next g:nth-child(2) text').eq(1).text(nextNameEN.split('\\')[0])
                .append($('<tspan>', { x: 0, dy: 17, 'alignment-baseline': 'middle' }).text(nextNameEN.split('\\')[1] || ''));
        }
        else {
            nextStnId.forEach((stnId, idx) => {
                let nextStnInfo = this.stations[stnId];
                [nextNameZH, nextNameEN] = nextStnInfo.name;
                if (nextNameZH.length > nextNameZHCount) {
                    nextNameZHCount = nextNameZH.length;
                }
                $(`#station_info_gzmtr #big_next_2 g:nth-child(${2 * (idx + 1)}) text`).eq(2).text(nextNameZH);
                $(`#station_info_gzmtr #big_next_2 g:nth-child(${2 * (idx + 1)}) text`).eq(3).text(nextNameEN.split('\\')[0])
                    .append($('<tspan>', { x: 0, dy: 13, 'alignment-baseline': 'middle' }).text(nextNameEN.split('\\')[1] || ''));
                let validRoutes = this.routes
                    .filter(route => route.indexOf(stnId) !== -1)
                    .map(route => route.filter(s => s !== 'linestart' && s !== 'lineend'));
                let validEnds;
                if (this._direction === 'l') {
                    validEnds = Array.from(new Set(validRoutes.map(route => route[0]))).reverse();
                }
                else {
                    validEnds = Array.from(new Set(validRoutes.map(route => route.reverse()[0])));
                }
                $(`#station_info_gzmtr #big_next_2 g:nth-child(${2 * (idx + 1)}) text`).eq(0)
                    .text(validEnds.map(s => this.stations[s].name[0]).join('/') + '方向');
                $(`#station_info_gzmtr #big_next_2 g:nth-child(${2 * (idx + 1)}) text`).eq(1)
                    .text('Towards ' + validEnds.map(s => this.stations[s].name[1]).join('/'));
            });
        }
        $('#station_info_gzmtr').html($('#station_info_gzmtr').html());
        // Position big name
        var bigNameDim = Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getTxtBoxDim"])($('#station_info_gzmtr #big_name text')[0], 'destination');
        $('#station_info_gzmtr #big_stn_num')
            .attr('transform', `translate(${(this._svgDestWidth + bigNameDim.width) / 2 + 55},${120 - (this.stations[this._currentStnId].name[1].split('\\').length - 1) * 20})scale(1.4)`);
        let bigNextDim = { x: 0, y: 0, width: 0, height: 0 };
        if (nextStnId.length === 1) {
            bigNextDim = Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getTxtBoxDim"])($('#station_info_gzmtr #big_next g:nth-child(2)')[0], 'destination');
        }
        else {
            let bigNextDims = [
                Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getTxtBoxDim"])($('#station_info_gzmtr #big_next_2 g:nth-child(2)')[0], 'destination'),
                Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getTxtBoxDim"])($('#station_info_gzmtr #big_next_2 g:nth-child(4)')[0], 'destination')
            ];
            if (bigNextDims[0].width > bigNextDims[1].width) {
                bigNextDim = bigNextDims[0];
            }
            else {
                bigNextDim = bigNextDims[1];
            }
        }
        // var nextNameZHCount = nextNameZH.length;
        if (this._direction == 'l') {
            $('#station_info_gzmtr #platform').attr('transform', `translate(${this._svgDestWidth - 100},120)`);
            if (nextStnId.length === 1) {
                if (nextNameZHCount <= 2) {
                    $('#station_info_gzmtr #big_next g:nth-child(2)').attr('transform', `translate(${115 + 35},110)`);
                    $('#station_info_gzmtr > use').eq(0).attr('transform', `translate(${(115 + 35 * (1 + nextNameZHCount) + bigNameDim.x) / 2 - 20},120)scale(0.25)`);
                }
                else {
                    $('#station_info_gzmtr #big_next g:nth-child(2)').attr('transform', `translate(${115 + 35 * 0.5},110)`);
                    $('#station_info_gzmtr > use').eq(0).attr('transform', `translate(${(115 + 35 * (0.5 + nextNameZHCount) + bigNameDim.x) / 2 - 20},120)scale(0.25)`);
                }
            }
            else {
                $('#station_info_gzmtr #big_next_2 g:nth-child(2)').attr('transform', `translate(113,80)`);
                $('#station_info_gzmtr #big_next_2 g:nth-child(4)').attr('transform', `translate(113,190)`);
                $('#station_info_gzmtr > use').eq(0).attr('transform', `translate(${(99 + 27 * (1 + nextNameZHCount) + bigNameDim.x) / 2 - 20},120)scale(0.25)`);
            }
            $('#station_info_gzmtr #big_next g:first-child').attr('transform', `translate(80,110)`);
            $('#station_info_gzmtr #big_next_2 g:first-child').attr('transform', `translate(72,80)`);
            $('#station_info_gzmtr #big_next_2 g:nth-child(3)').attr('transform', `translate(72,190)`);
        }
        else {
            $('#station_info_gzmtr #platform').attr('transform', `translate(100,120)`);
            if (nextStnId.length === 1) {
                $('#station_info_gzmtr #big_next g:nth-child(2)').attr('transform', `translate(${this._svgDestWidth - 45 - bigNextDim.width},110)`);
                if (nextNameZHCount <= 2) {
                    $('#station_info_gzmtr #big_next g:first-child').attr('transform', `translate(${this._svgDestWidth - 45 - bigNextDim.width - 70},110)`);
                    $('#station_info_gzmtr > use').eq(0).attr('transform', `translate(${(this._svgDestWidth - 45 - bigNextDim.width - 70 - 35 + bigNameDim.x + bigNameDim.width + 55 + 18.5 * 1.4) / 2 + 20},120)scale(0.25)rotate(180)`);
                }
                else {
                    $('#station_info_gzmtr #big_next g:first-child').attr('transform', `translate(${this._svgDestWidth - 45 - bigNextDim.width - 35 * 1.5},110)`);
                    $('#station_info_gzmtr > use').eq(0).attr('transform', `translate(${(this._svgDestWidth - 45 - bigNextDim.width - 35 * 2.5 + bigNameDim.x + bigNameDim.width + 55 + 18.5 * 1.4) / 2 + 20},120)scale(0.25)rotate(180)`);
                }
            }
            else {
                $('#station_info_gzmtr #big_next_2 g:nth-child(2)').attr('transform', `translate(${this._svgDestWidth - 45 - bigNextDim.width},80)`);
                $('#station_info_gzmtr #big_next_2 g:nth-child(4)').attr('transform', `translate(${this._svgDestWidth - 45 - bigNextDim.width},190)`);
                $('#station_info_gzmtr #big_next_2 g:first-child').attr('transform', `translate(${this._svgDestWidth - 45 - bigNextDim.width - 41},80)`);
                $('#station_info_gzmtr #big_next_2 g:nth-child(3)').attr('transform', `translate(${this._svgDestWidth - 45 - bigNextDim.width - 41},190)`);
                $('#station_info_gzmtr > use').eq(0).attr('transform', `translate(${(this._svgDestWidth - 45 - bigNextDim.width - 41 - 27 + bigNameDim.x + bigNameDim.width + 55 + 18.5 * 1.4) / 2 + 20},120)scale(0.25)rotate(180)`);
            }
        }
        $('#station_info_gzmtr #indicator_light').attr({
            x: this._svgDestWidth / 2, y: 270,
            'xlink:href': '#indicator_' + this._infoPanelType
        });
        this.drawPSD();
    }
    drawPSD() {
        $('#station_info_gzmtr #big_psd').attr('transform', `translate(${this._svgDestWidth / 2 + 80},${(type => {
            switch (type) {
                case 'gz3': return 218;
                case 'gz1421': return 238;
                default: return 242;
            }
        })(this._infoPanelType)})`);
    }
    addStn(prep, stnId, loc, end) {
        var res = super.addStn(prep, stnId, loc, end);
        this.loadLineNum();
        this.loadDirection();
        return res;
    }
    removeStn(stnId) {
        if (super.removeStn(stnId)) {
            this.loadLineNum();
            this.loadDirection();
            return true;
        }
        else {
            return false;
        }
    }
    updateStnTransfer(stnId, type, info = null) {
        super.updateStnTransfer(stnId, type, info);
        this.loadLineNum();
    }
    updateBranchType(stnId, direction, type) {
        super.updateBranchType(stnId, direction, type);
        this.loadLineNum();
        this.loadDirection();
    }
    updateBranchFirst(stnId, direction, first) {
        if (!super.updateBranchFirst(stnId, direction, first)) {
            return false;
        }
        this.loadLineNum();
        this.loadDirection();
        return true;
    }
    updateBranchPos(stnId, direction, pos) {
        super.updateBranchPos(stnId, direction, pos);
        this.loadLineNum();
        this.loadDirection();
    }
    static initSVG(line) {
        super.initSVG(line);
        line.loadLineNum();
        line.loadLineName();
        line.loadDirection();
    }
}



/***/ }),

/***/ "./src/Station/StationGZ.ts":
/*!**********************************!*\
  !*** ./src/Station/StationGZ.ts ***!
  \**********************************/
/*! exports provided: RMGStationGZ, IntStationGZ, BranchStationGZ, OSIStationGZ */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RMGStationGZ", function() { return RMGStationGZ; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntStationGZ", function() { return IntStationGZ; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BranchStationGZ", function() { return BranchStationGZ; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OSIStationGZ", function() { return OSIStationGZ; });
/* harmony import */ var _Station__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Station */ "./src/Station/Station.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./src/utils.ts");


class RMGStationGZ extends _Station__WEBPACK_IMPORTED_MODULE_0__["RMGStation"] {
    constructor(id, data) {
        super(id, data);
        this.stnNum = data.num;
    }
    get nameClass() {
        switch (this.state) {
            case -1:
                return 'Pass';
            case 0:
                return 'CurrentGZ';
            default:
                return 'Future';
        }
    }
    get _nameShift() { return false; }
    get _tickRotation() { return this.y > 0 ? 180 : 0; }
    get iconHTML() {
        var [iconType, numClass] = (this.state == -1) ? ['stn_gz_pass', 'Pass'] : ['stn_gz', 'Future'];
        return $('<g>', { transform: `translate(${this.x},${this.y})` })
            .append($('<use>', { 'xlink:href': '#' + iconType, class: 'rmg-stn' }))
            .append($('<g>', { class: 'Name ' + numClass })
            .append($('<text>', { class: 'rmg-name__zh rmg-name__gzmtr--line-num' }))
            .append($('<text>', { class: 'rmg-name__zh rmg-name__gzmtr--station-num', x: 0 }).text(this.stnNum)));
    }
    get nameHTML() {
        var nameENLn = this.name[1].split('\\').length;
        let dx;
        if (this._nameShift) {
            dx = this._tickRotation === 0 ? -9 : 16 + (nameENLn - 1) * 12 * Math.cos(-45);
        }
        else {
            dx = this._tickRotation === 0 ? (24 + (nameENLn - 1) * 12) * Math.cos(-45) : -6;
        }
        // let dx = this._nameShift ? -8 : (24 + (nameENLn-1)*12) * Math.cos(-45);
        let dy = this._tickRotation === 0 ? (-4 - 21.921875 - (nameENLn - 1) * 12 * Math.cos(-45)) : 17.5;
        // var dy = (-4 - 21.921875 - (nameENLn-1)*12*Math.cos(-45)) * (this._tickRotation === 0 ? 1 : -1);
        return $('<g>', {
            'transform': `translate(${this.x - dx},${this.y + dy})rotate(-45)`,
            'text-anchor': this._tickRotation === 0 ? 'start' : 'end',
            class: `Name ${this.nameClass}`
        }).append($('<text>').addClass('rmg-name__zh rmg-name__gzmtr--station').text(this.name[0])).append($('<text>', {
            dy: 15, class: 'rmg-name__en rmg-name__gzmtr--station'
        }).text(this.name[1].split('\\')[0]).append($('<tspan>', {
            'x': 0, 'dy': 10, class: 'rmg-name__en rmg-name__gzmtr--station'
        }).text(this.name[1].split('\\')[1])));
    }
}
class IntStationGZ extends RMGStationGZ {
    constructor(id, data) {
        super(id, data);
        this._intInfos = data.transfer.info[0];
    }
    // get _tickRotation() {return 0;}
    get intTickHTML() {
        var ticks = this._intInfos
            .map(info => info[_utils__WEBPACK_IMPORTED_MODULE_1__["IntInfoTag"].colour])
            .map((colour, idx) => {
            let x = this.x - 2 * (this._intInfos.length - 1) + 4 * idx;
            return $('<use>', {
                'xlink:href': '#inttick_gz',
                stroke: this.state == -1 ? '#aaa' : colour,
                transform: `translate(${x},${this.y})rotate(${this._tickRotation})`
            });
        });
        return $('<g>', { class: 'rmg-line rmg-line__gzmtr rmg-line__change' })
            .append(...ticks);
    }
    get intNameHTML() {
        let intBoxEls = this._intInfos.map(info => Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getIntBoxGZ"])(info, this.state));
        intBoxEls.forEach((el, i) => {
            $(el).attr('transform', `translate(0,${i * 28 * (this._tickRotation === 0 ? 1 : -1)})`);
        });
        return $('<g>', {
            'text-anchor': 'middle',
            transform: `translate(${this.x},${this.y + (this._tickRotation === 0 ? 23 : -47)})`
        }).append(...intBoxEls);
    }
    get ungrpHTML() {
        return [this.intTickHTML, this.iconHTML, this.nameHTML, this.intNameHTML];
    }
}
class BranchStationGZ extends IntStationGZ {
    constructor(id, data, lineInf) {
        data.transfer.info[0].unshift(lineInf);
        if (data.transfer.info[1]) {
            data.transfer.info[0].push(...data.transfer.info[1]);
        }
        super(id, data);
    }
    get _nameShift() { return true; }
    get _tickRotation() {
        return (this.parents.indexOf(this.branch.left[1]) === 0 || this.children.indexOf(this.branch.right[1]) === 0) ? 0 : 180;
    }
}
class OSIStationGZ extends IntStationGZ {
    constructor(id, data) {
        // data.transfer.info[0].push(...data.transfer.info[1]);
        super(id, data);
    }
}



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvTGluZS9MaW5lR1oudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1N0YXRpb24vU3RhdGlvbkdaLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQWtIO0FBQ2pCO0FBQ2hFO0FBUWpDLE1BQU0sU0FBVSxTQUFRLDZDQUFPO0lBUTNCLFlBQWEsS0FBZTtRQUN4QixLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFYixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUM7UUFDN0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO1FBQy9CLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDLGVBQWUsQ0FBQztRQUM1QyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUM7UUFDMUMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsY0FBYyxDQUFDO0lBQzlDLENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxLQUFTLEVBQUUsT0FBb0I7UUFDNUMsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQy9ELE9BQU8sSUFBSSxrRUFBZSxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7U0FDdkk7UUFDRCxRQUFRLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFO1lBQzNCLEtBQUssTUFBTSxDQUFDO1lBQ1osS0FBSyxNQUFNO2dCQUNQLE9BQU8sSUFBSSwrREFBWSxDQUFDLEtBQUssRUFBRSxP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QyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ3ZCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDeEQ7UUFDRCxLQUFLLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3BCLENBQUM7SUFFRCxJQUFJLFVBQVUsS0FBSSxPQUFPLElBQUksQ0FBQyxFQUFDO0lBQy9CLElBQUksYUFBYTtRQUNiLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUM1SCxDQUFDO0NBQ0o7QUFFRCxNQUFNLFlBQWEsU0FBUSxZQUFZO0lBQ25DLFlBQWEsRUFBTSxFQUFFLElBQWlCO1FBQ2xDLHdEQUF3RDtRQUN4RCxLQUFLLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3BCLENBQUM7Q0FDSjtBQUVvRSIsImZpbGUiOiJMaW5lR1oubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0VHh0Qm94RGltLCBzZXRQYXJhbXMsIGdldFBhcmFtcywgcHV0UGFyYW1zLCBnZXRSYW5kb21JZCwgRGlyZWN0aW9uTG9uZywgZ2V0SW50Qm94R1ogfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7IFJNR1N0YXRpb25HWiwgSW50U3RhdGlvbkdaLCBCcmFuY2hTdGF0aW9uR1osIE9TSVN0YXRpb25HWiB9IGZyb20gJy4uL1N0YXRpb24vU3RhdGlvbkdaJztcclxuaW1wb3J0IHsgUk1HTGluZSB9IGZyb20gJy4vTGluZSc7XHJcblxyXG5pbXBvcnQgeyBJRCwgTmFtZSwgU3RhdGlvbkluZm8sIFJNR1BhcmFtLCBJbnRlcmNoYW5nZUluZm8gfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgU3RhdGlvbkRpY3RHWiB7XHJcbiAgICBbaW5kZXg6IHN0cmluZ106IFJNR1N0YXRpb25HWjtcclxufVxyXG5cclxuY2xhc3MgUk1HTGluZUdaIGV4dGVuZHMgUk1HTGluZSB7XHJcbiAgICBwcml2YXRlIF9wc2ROdW06IHN0cmluZztcclxuICAgIHByaXZhdGUgX2xpbmVOdW06IHN0cmluZztcclxuICAgIHByaXZhdGUgX2luZm9QYW5lbFR5cGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgX2RpcmVjdGlvbkdaWDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfZGlyZWN0aW9uR1pZOiBudW1iZXI7XHJcbiAgICBzdGF0aW9uczogU3RhdGlvbkRpY3RHWjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAocGFyYW06IFJNR1BhcmFtKSB7XHJcbiAgICAgICAgc3VwZXIocGFyYW0pO1xyXG5cclxuICAgICAgICB0aGlzLl9wc2ROdW0gPSBwYXJhbS5wc2RfbnVtO1xyXG4gICAgICAgIHRoaXMuX2xpbmVOdW0gPSBwYXJhbS5saW5lX251bTtcclxuICAgICAgICB0aGlzLl9pbmZvUGFuZWxUeXBlID0gcGFyYW0uaW5mb19wYW5lbF90eXBlO1xyXG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbkdaWCA9IHBhcmFtLmRpcmVjdGlvbl9nel94O1xyXG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbkdaWSA9IHBhcmFtLmRpcmVjdGlvbl9nel95O1xyXG4gICAgfVxyXG5cclxuICAgIF9pbml0U3RuSW5zdGFuY2Uoc3RuSWQ6IElELCBzdG5JbmZvOiBTdGF0aW9uSW5mbykge1xyXG4gICAgICAgIGlmIChzdG5JbmZvLmNoaWxkcmVuLmxlbmd0aCA9PT0gMiB8fCBzdG5JbmZvLnBhcmVudHMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQnJhbmNoU3RhdGlvbkdaKHN0bklkLCBzdG5JbmZvLCBbdGhpcy50aGVtZUNpdHksIHRoaXMudGhlbWVMaW5lLCB0aGlzLl90aGVtZUNvbG91ciwgdGhpcy5fZmdDb2xvdXIsIC4uLnRoaXMuX2xpbmVOYW1lc10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKHN0bkluZm8udHJhbnNmZXIudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdpbnQyJzpcclxuICAgICAgICAgICAgY2FzZSAnaW50Myc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludFN0YXRpb25HWihzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTExJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMTInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kxMyc6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTIxJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kzMSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9TSVN0YXRpb25HWihzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJNR1N0YXRpb25HWihzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHN3aXRjaCAoc3RuSW5mby5jaGFuZ2VfdHlwZSkge1xyXG4gICAgICAgIC8vICAgICBjYXNlICdpbnQyJzpcclxuICAgICAgICAvLyAgICAgICAgIC8vIHJldHVybiBuZXcgSW50MlN0YXRpb25HWihzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgLy8gICAgIGNhc2UgJ2ludDNfbCc6XHJcbiAgICAgICAgLy8gICAgIGNhc2UgJ2ludDNfcic6XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gbmV3IEludFN0YXRpb25HWihzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgLy8gICAgIGNhc2UgJ29zaTExX3VsJzpcclxuICAgICAgICAvLyAgICAgY2FzZSAnb3NpMTFfcGwnOlxyXG4gICAgICAgIC8vICAgICBjYXNlICdvc2kxMV91cic6XHJcbiAgICAgICAgLy8gICAgIGNhc2UgJ29zaTExX3ByJzpcclxuICAgICAgICAvLyAgICAgICAgIC8vIHJldHVybiBuZXcgT1NJMTFTdGF0aW9uR1ooc3RuSWQsIHN0bkluZm8pO1xyXG4gICAgICAgIC8vICAgICBjYXNlICdvc2kxMl91bCc6XHJcbiAgICAgICAgLy8gICAgIGNhc2UgJ29zaTEyX3BsJzpcclxuICAgICAgICAvLyAgICAgY2FzZSAnb3NpMTJfdXInOlxyXG4gICAgICAgIC8vICAgICBjYXNlICdvc2kxMl9wcic6XHJcbiAgICAgICAgLy8gICAgIGNhc2UgJ29zaTIyX3VsJzpcclxuICAgICAgICAvLyAgICAgY2FzZSAnb3NpMjJfcGwnOlxyXG4gICAgICAgIC8vICAgICBjYXNlICdvc2kyMl91cic6XHJcbiAgICAgICAgLy8gICAgIGNhc2UgJ29zaTIyX3ByJzpcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiBuZXcgT1NJU3RhdGlvbkdaKHN0bklkLCBzdG5JbmZvKTtcclxuICAgICAgICAvLyAgICAgY2FzZSAnb3NpMjJfZW5kX3AnOlxyXG4gICAgICAgIC8vICAgICBjYXNlICdvc2kyMl9lbmRfdSc6XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAoc3RuSW5mby5wYXJlbnRzWzBdID09ICdsaW5lc3RhcnQnIHx8IHN0bkluZm8uY2hpbGRyZW5bMF0gPT0gJ2xpbmVlbmQnKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmV0dXJuIG5ldyBPU0lTdGF0aW9uR1ooc3RuSWQsIHN0bkluZm8pO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIG5ldyBSTUdTdGF0aW9uR1ooc3RuSWQsIHN0bkluZm8pO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgbGluZVhzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaXJlY3Rpb24gPT0gJ3InKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdmdXaWR0aCAqIHRoaXMuX3BhZGRpbmcgLyAxMDAgKyA2NSwgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdmdXaWR0aCAqICgxIC0gdGhpcy5fcGFkZGluZy8xMDApXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N2Z1dpZHRoICogdGhpcy5fcGFkZGluZyAvIDEwMCwgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdmdXaWR0aCAqICgxIC0gdGhpcy5fcGFkZGluZy8xMDApIC0gNjVcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHN2Z1dpZHRoKHZhbDogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIuc3ZnV2lkdGggPSB2YWw7XHJcbiAgICAgICAgdGhpcy5sb2FkTGluZU51bSgpO1xyXG4gICAgICAgIHRoaXMubG9hZExpbmVOYW1lKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkRGlyZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBhZGRpbmcodmFsOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlci5wYWRkaW5nID0gdmFsO1xyXG4gICAgICAgIHRoaXMubG9hZExpbmVOdW0oKTtcclxuICAgICAgICB0aGlzLmxvYWRMaW5lTmFtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBicmFuY2hTcGFjaW5nKHZhbDogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIuYnJhbmNoU3BhY2luZyA9IHZhbDtcclxuICAgICAgICB0aGlzLmxvYWRMaW5lTnVtKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGRpcmVjdGlvbih2YWwpIHtcclxuICAgICAgICB0aGlzLl9kaXJlY3Rpb24gPSB2YWw7XHJcbiAgICAgICAgc2V0UGFyYW1zKCdkaXJlY3Rpb24nLCB2YWwpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBbc3RuSWQsIHN0bkluc3RhbmNlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN0YXRpb25zKSkge1xyXG4gICAgICAgICAgICBpZiAoWydsaW5lc3RhcnQnLCAnbGluZWVuZCddLmluY2x1ZGVzKHN0bklkKSkge2NvbnRpbnVlO31cclxuICAgICAgICAgICAgc3RuSW5zdGFuY2UueCA9IHRoaXMuX3N0blJlYWxYKHN0bklkKTtcclxuICAgICAgICAgICAgc3RuSW5zdGFuY2UueSA9IHRoaXMuX3N0blJlYWxZKHN0bklkKTtcclxuICAgICAgICAgICAgc3RuSW5zdGFuY2Uuc3RhdGUgPSB0aGlzLl9zdG5TdGF0ZShzdG5JZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBSTUdMaW5lR1ouY2xlYXJTVkcoKTtcclxuICAgICAgICB0aGlzLmRyYXdTdG5zKCk7XHJcbiAgICAgICAgdGhpcy5kcmF3TGluZSgpO1xyXG4gICAgICAgIHRoaXMuZHJhd0Rlc3RJbmZvKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkTGluZU51bSgpO1xyXG4gICAgICAgIHRoaXMubG9hZExpbmVOYW1lKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkRGlyZWN0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkRm9udHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgY3VycmVudFN0bklkKHZhbDogSUQpIHtcclxuICAgICAgICBzdXBlci5jdXJyZW50U3RuSWQgPSB2YWw7XHJcbiAgICAgICAgdGhpcy5sb2FkTGluZU51bSgpO1xyXG4gICAgICAgIHRoaXMubG9hZERpcmVjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBsaW5lTnVtKHZhbDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fbGluZU51bSA9IHZhbDtcclxuICAgICAgICBzZXRQYXJhbXMoJ2xpbmVfbnVtJywgdmFsKTtcclxuICAgICAgICB0aGlzLmxvYWRMaW5lTnVtKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkRm9udHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgbGluZU5hbWVzKHZhbDogTmFtZSkge1xyXG4gICAgICAgIHRoaXMuX2xpbmVOYW1lcyA9IHZhbDtcclxuICAgICAgICBzZXRQYXJhbXMoJ2xpbmVfbmFtZScsIHZhbCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZExpbmVOYW1lKCk7XHJcbiAgICAgICAgLy8gKHRvIGJlIGZpeGVkKSByZWRyYXcgYnJhbmNoaW5nIHN0YXRpb25cclxuICAgICAgICB0aGlzLmxvYWRGb250cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwc2ROdW0odmFsOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9wc2ROdW0gPSB2YWw7XHJcbiAgICAgICAgc2V0UGFyYW1zKCdwc2RfbnVtJywgdmFsKTtcclxuICAgICAgICAkKCcucm1nLXBzZC1udW0nKS50ZXh0KHZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGluZm9QYW5lbFR5cGUodmFsOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9pbmZvUGFuZWxUeXBlID0gdmFsO1xyXG4gICAgICAgIHNldFBhcmFtcygnaW5mb19wYW5lbF90eXBlJywgdmFsKTtcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNpbmRpY2F0b3JfbGlnaHQnKS5hdHRyKCd4bGluazpocmVmJywgJyNpbmRpY2F0b3JfJyt2YWwpO1xyXG4gICAgICAgIC8vICQoJyNkZXN0X3N0cmlwLCAjc3RyaXAnKS5yZW1vdmVBdHRyKCdjbGFzcycpLmFkZENsYXNzKGBybWctc3RyaXBfX2d6bXRyLS0ke3RoaXMuX2luZm9QYW5lbFR5cGV9YCk7XHJcbiAgICAgICAgdGhpcy5kcmF3U3RyaXAoKTtcclxuICAgICAgICB0aGlzLmZpbGxUaGVtZUNvbG91cigpO1xyXG4gICAgICAgIHRoaXMuZHJhd1BTRCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBkaXJlY3Rpb25HWlgodmFsOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9kaXJlY3Rpb25HWlggPSB2YWw7XHJcbiAgICAgICAgc2V0UGFyYW1zKCdkaXJlY3Rpb25fZ3pfeCcsIHZhbCk7XHJcblxyXG4gICAgICAgIGxldCB4ID0gdGhpcy5fc3ZnV2lkdGggKiB0aGlzLl9kaXJlY3Rpb25HWlggLyAxMDA7XHJcbiAgICAgICAgbGV0IHkgPSB0aGlzLl9zdmdIZWlnaHQgKiB0aGlzLl9kaXJlY3Rpb25HWlkgLyAxMDA7XHJcbiAgICAgICAgJCgnI2RpcmVjdGlvbl9neicpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt4fSwke3l9KWApO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBkaXJlY3Rpb25HWlkodmFsOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9kaXJlY3Rpb25HWlkgPSB2YWw7XHJcbiAgICAgICAgc2V0UGFyYW1zKCdkaXJlY3Rpb25fZ3pfeScsIHZhbCk7XHJcblxyXG4gICAgICAgIGxldCB4ID0gdGhpcy5fc3ZnV2lkdGggKiB0aGlzLl9kaXJlY3Rpb25HWlggLyAxMDA7XHJcbiAgICAgICAgbGV0IHkgPSB0aGlzLl9zdmdIZWlnaHQgKiB0aGlzLl9kaXJlY3Rpb25HWlkgLyAxMDA7XHJcbiAgICAgICAgJCgnI2RpcmVjdGlvbl9neicpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt4fSwke3l9KWApO1xyXG4gICAgfVxyXG5cclxuICAgIF9zdG5YU2hhcmUoc3RuSWQ6IElEKSB7XHJcbiAgICAgICAgbGV0IHsgY3JpdGljYWxQYXRoLCBicmFuY2hlcyB9ID0gdGhpcztcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGNyaXRpY2FsUGF0aC5ub2Rlcy5pbmNsdWRlcyhzdG5JZCkpIHtyZXR1cm4gc3VwZXIuX3N0blhTaGFyZShzdG5JZCk7fVxyXG4gICAgICAgIGlmICh0aGlzLmNyaXRpY2FsUGF0aC5ub2Rlcy5qb2luKCcsJykgIT09IGJyYW5jaGVzWzBdLmpvaW4oJywnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuX3N0blhTaGFyZShzdG5JZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGJyYW5jaFdpdGhTdG4gPSBicmFuY2hlcy5zbGljZSgxKS5maWx0ZXIoYnJhbmNoID0+IGJyYW5jaC5pbmNsdWRlcyhzdG5JZCkpWzBdO1xyXG4gICAgICAgICAgICBsZXQgbGVuVG9MZWZ0ID0gdGhpcy5fY3AoYnJhbmNoV2l0aFN0blswXSwgc3RuSWQpLmxlbjtcclxuICAgICAgICAgICAgbGV0IGxlblRvUmlnaHQgPSB0aGlzLl9jcChzdG5JZCwgYnJhbmNoV2l0aFN0blticmFuY2hXaXRoU3RuLmxlbmd0aC0xXSkubGVuO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJyYW5jaGVzWzBdLmluY2x1ZGVzKGJyYW5jaFdpdGhTdG5bMF0pICYmIGJyYW5jaGVzWzBdLmluY2x1ZGVzKGJyYW5jaFdpdGhTdG5bYnJhbmNoV2l0aFN0bi5sZW5ndGgtMV0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKCBzZWxmLl9zdG5YU2hhcmUoYnJhbmNoV2l0aFN0blswXSkgKiBsZW5Ub1JpZ2h0ICsgc2VsZi5fc3RuWFNoYXJlKGJyYW5jaFdpdGhTdG5bYnJhbmNoV2l0aFN0bi5sZW5ndGgtMV0pICogbGVuVG9MZWZ0ICkgLyAobGVuVG9MZWZ0ICsgbGVuVG9SaWdodCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYnJhbmNoZXNbMF0uaW5jbHVkZXMoYnJhbmNoV2l0aFN0blswXSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9zdG5YU2hhcmUoYnJhbmNoV2l0aFN0blswXSkgKyBsZW5Ub0xlZnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fc3RuWFNoYXJlKGJyYW5jaFdpdGhTdG5bYnJhbmNoV2l0aFN0bi5sZW5ndGgtMV0pIC0gbGVuVG9SaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFZlcnRpY2FsIHBvc2l0aW9uIChpbiBzaGFyZXMpIG9mIHN0YXRpb24gaWNvbi4gXHJcbiAgICAgKi9cclxuICAgIF9zdG5ZU2hhcmUoc3RuSWQ6IElEKSB7XHJcbiAgICAgICAgaWYgKFsnbGluZXN0YXJ0JywgJ2xpbmVlbmQnXS5pbmNsdWRlcyhzdG5JZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBicmFuY2hlcyA9IHRoaXMuYnJhbmNoZXM7XHJcbiAgICAgICAgaWYgKGJyYW5jaGVzWzBdLmluY2x1ZGVzKHN0bklkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDsgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGkgPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IGJyYW5jaGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJyYW5jaGVzW2ldLmluY2x1ZGVzKHN0bklkKSkge2JyZWFrO31cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYnJhbmNoZXNbMF0uaW5jbHVkZXMoYnJhbmNoZXNbaV1bMF0pKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnJhbmNoaW5nU3RuSWQgPSBicmFuY2hlc1tpXVswXTtcclxuICAgICAgICAgICAgICAgIHZhciBuZVRvRmluZCA9ICdjaGlsZHJlbic7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0aW9uc1ticmFuY2hpbmdTdG5JZF1bbmVUb0ZpbmRdLmluZGV4T2YoYnJhbmNoZXNbaV1bMV0pID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJyYW5jaGluZ1N0bklkID0gYnJhbmNoZXNbaV0uc2xpY2UoKS5yZXZlcnNlKClbMF07XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVUb0ZpbmQgPSAncGFyZW50cyc7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0aW9uc1ticmFuY2hpbmdTdG5JZF1bbmVUb0ZpbmRdLmluZGV4T2YoYnJhbmNoZXNbaV0uc2xpY2UoKS5yZXZlcnNlKClbMV0pID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdTdHJpcCgpIHtcclxuICAgICAgICBsZXQgc3RyaXBIZWlnaHQgPSAodHlwZSA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZ3oyOCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdnemdmJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNjA7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdnejMnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA0MDtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2d6MTQyMSc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkodGhpcy5faW5mb1BhbmVsVHlwZSk7XHJcbiAgICAgICAgJCgnI2Rlc3Rfc3RyaXBfZ3osICNzdHJpcF9neicpLmF0dHIoe1xyXG4gICAgICAgICAgICB5OiB0aGlzLl9zdmdIZWlnaHQgLSBzdHJpcEhlaWdodCwgXHJcbiAgICAgICAgICAgIGhlaWdodDogc3RyaXBIZWlnaHRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfcmlnaHRXaWRlRmFjdG9yKHN0bklkOiBJRCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRpb25zW3N0bklkXSBpbnN0YW5jZW9mIEJyYW5jaFN0YXRpb25HWiAmJiB0aGlzLnN0YXRpb25zW3N0bklkXS5fdGlja1JvdGF0aW9uID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwLjI1O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfbGVmdFdpZGVGYWN0b3Ioc3RuSWQ6IElEKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGlvbnNbc3RuSWRdIGluc3RhbmNlb2YgQnJhbmNoU3RhdGlvbkdaICYmIHRoaXMuc3RhdGlvbnNbc3RuSWRdLl90aWNrUm90YXRpb24gIT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIDAuMjU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9wYXRoV2VpZ2h0KHN0bklkMTogSUQsIHN0bklkMjogSUQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGlvbnNbc3RuSWQxXS5jaGlsZHJlbi5pbmNsdWRlcyhzdG5JZDIpKSB7cmV0dXJuIC1JbmZpbml0eTt9XHJcblxyXG4gICAgICAgIHJldHVybiAxICsgdGhpcy5fcmlnaHRXaWRlRmFjdG9yKHN0bklkMSkgKyB0aGlzLl9sZWZ0V2lkZUZhY3RvcihzdG5JZDIpO1xyXG4gICAgICAgIC8vIHJldHVybiAxO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHdpZHRoIGZvciBjb2xvdXIgc3RyaXBzLiAoSGVpZ2h0IG9mIHN0cmlwcyBhcmUgY29udHJvbGxlZCBieSBgUk1HTGluZUdaLmRyYXdTdHJpcGAuIClcclxuICAgICAqL1xyXG4gICAgZHJhd1NWR0ZyYW1lKCkge1xyXG4gICAgICAgIHN1cGVyLmRyYXdTVkdGcmFtZSgpO1xyXG4gICAgICAgICQoJyNkZXN0X3N0cmlwX2d6JykuYXR0cignd2lkdGgnLCB0aGlzLl9zdmdEZXN0V2lkdGgpO1xyXG4gICAgICAgICQoJyNzdHJpcF9neicpLmF0dHIoJ3dpZHRoJywgdGhpcy5fc3ZnV2lkdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9saW5lUGF0aChzdG5JZHM6IElEW10pIHtcclxuICAgICAgICBsZXQgcHJldlk6IG51bWJlcjtcclxuICAgICAgICB2YXIgcGF0aCA9IFtdO1xyXG5cclxuICAgICAgICBzdG5JZHMuZm9yRWFjaChzdG5JZCA9PiB7XHJcbiAgICAgICAgICAgIHZhciBbeCx5XSA9IFsnX3N0blJlYWxYJywgJ19zdG5SZWFsWSddLm1hcChmdW4gPT4gdGhpc1tmdW5dKHN0bklkKSk7XHJcbiAgICAgICAgICAgIGlmICghcHJldlkgJiYgcHJldlkgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHByZXZZID0geTtcclxuICAgICAgICAgICAgICAgIHBhdGgucHVzaChgTSAke3h9LCR7eX1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoeSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPCBwcmV2WSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGgucHVzaChgSCAke3gtMzB9YCwgJ2EgMzAsMzAgMCAwLDAgMzAsLTMwJywgYFYgJHt5fWApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA+IHByZXZZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKGBIICR7eC0zMH1gLCAnYSAzMCwzMCAwIDAsMSAzMCwzMCcsIGBWICR7eX1gKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPCBwcmV2WSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGgucHVzaChgViAke3krMzB9YCwgJ2EgMzAsMzAgMCAwLDEgMzAsLTMwJywgYEggJHt4fWApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA+IHByZXZZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKGBWICR7eS0zMH1gLCAnYSAzMCwzMCAwIDAsMCAzMCwzMCcsIGBIICR7eH1gKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhdGgucHVzaChgSCAke3h9YCk7XHJcbiAgICAgICAgICAgIHByZXZZID0geTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gc2ltcGxpZnkgcGF0aFxyXG4gICAgICAgIHJldHVybiBwYXRoLmpvaW4oJyAnKS5yZXBsYWNlKC8oIEggKFtcXGQuXSspKSsvZywgJyBIICQyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0xpbmUoKSB7XHJcbiAgICAgICAgJCgnLnJtZy1saW5lJykucmVtb3ZlQ2xhc3MoJ3JtZy1saW5lX19tdHInKS5hZGRDbGFzcygncm1nLWxpbmVfX2d6bXRyJyk7XHJcbiAgICAgICAgc3VwZXIuZHJhd0xpbmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkRm9udHMoKSB7XHJcbiAgICAgICAgLy8gJCgnLnJtZy1uYW1lX196aCwgLnJtZy1uYW1lX19lbicpLmFkZENsYXNzKCdybWctbmFtZV9fZ3ptdHInKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0Rm9udHMoKSB7XHJcbiAgICAgICAgbGV0IHN0eWxlU2hlZXQgPSAoPEhUTUxMaW5rRWxlbWVudD4kKCdsaW5rI2Nzc19zaGFyZScpWzBdKS5zaGVldCBhcyBDU1NTdHlsZVNoZWV0O1xyXG4gICAgICAgIGxldCBpZHg6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgQXJyYXkuZnJvbShzdHlsZVNoZWV0LmNzc1J1bGVzKS5mb3JFYWNoKChydWxlLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChydWxlLmNzc1RleHQuaW5kZXhPZignLnJtZy1uYW1lX196aCcpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgaWR4LnB1c2goaSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocnVsZS5jc3NUZXh0LmluZGV4T2YoJy5ybWctbmFtZV9fZW4nKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGlkeC5wdXNoKGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWR4LmZvckVhY2goaSA9PiBzdHlsZVNoZWV0LmRlbGV0ZVJ1bGUoaSkpO1xyXG4gICAgICAgIHN0eWxlU2hlZXQuaW5zZXJ0UnVsZSgnLnJtZy1uYW1lX196aCB7YWxpZ25tZW50LWJhc2VsaW5lOiBjZW50cmFsOyBmb250LWZhbWlseTogQXJpYWwsIFNpbUhlaSwgU1RIZWl0aSwgUGluZ0ZhbmdTQy1SZWd1bGFyLCBzYW5zLXNlcmlmO30nKTtcclxuICAgICAgICBzdHlsZVNoZWV0Lmluc2VydFJ1bGUoJy5ybWctbmFtZV9fZW4ge2FsaWdubWVudC1iYXNlbGluZTogbWlkZGxlOyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7fScpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbGxUaGVtZUNvbG91cigpIHtcclxuICAgICAgICBzdXBlci5maWxsVGhlbWVDb2xvdXIoKTtcclxuICAgICAgICAkKCcjZGVzdF9zdHJpcF9neiwgI3N0cmlwX2d6JykuYXR0cignZmlsbCcsIHRoaXMuX3RoZW1lQ29sb3VyKTtcclxuICAgICAgICBpZiAoWydnejMnLCAnZ3oxNDIxJ10uaW5jbHVkZXModGhpcy5faW5mb1BhbmVsVHlwZSkpIHtcclxuICAgICAgICAgICAgJCgnI2JpZ19wc2QgdXNlJykuYXR0cignZmlsbCcsIHRoaXMuX3RoZW1lQ29sb3VyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2ZnQ29sb3VyID09PSAnI2ZmZicpIHtcclxuICAgICAgICAgICAgICAgICQoJyNiaWdfcHNkIHRleHQnKS5hZGRDbGFzcygncm1nLW5hbWVfX2d6bXRyLS13aGl0ZS1mZycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI2JpZ19wc2QgdGV4dCcpLnJlbW92ZUNsYXNzKCdybWctbmFtZV9fZ3ptdHItLXdoaXRlLWZnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcjYmlnX3BzZCB1c2UnKS5hdHRyKCdmaWxsJywgJ3doaXRlJyk7XHJcbiAgICAgICAgICAgICQoJyNiaWdfcHNkIHRleHQnKS5yZW1vdmVDbGFzcygncm1nLW5hbWVfX2d6bXRyLS13aGl0ZS1mZycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgncGF0aCNzdG5fZ3onKS5hdHRyKCdzdHJva2UnLCB0aGlzLl90aGVtZUNvbG91cik7XHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciA+ICNwbGF0Zm9ybSA+IGNpcmNsZScpLmF0dHIoJ2ZpbGwnLCB0aGlzLl90aGVtZUNvbG91cik7XHJcbiAgICAgICAgJCgnI2xpbmVfbmFtZSB1c2UnKS5hdHRyKCdmaWxsJywgdGhpcy5fdGhlbWVDb2xvdXIpO1xyXG4gICAgICAgIGlmICh0aGlzLl9mZ0NvbG91ciA9PT0gJyNmZmYnKSB7XHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgPiAjcGxhdGZvcm0gdGV4dCcpLmFkZENsYXNzKCdybWctbmFtZV9fZ3ptdHItLXdoaXRlLWZnJyk7XHJcbiAgICAgICAgICAgICQoJyNsaW5lX25hbWUgdGV4dCcpLmFkZENsYXNzKCdybWctbmFtZV9fZ3ptdHItLXdoaXRlLWZnJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciA+ICNwbGF0Zm9ybSB0ZXh0JykucmVtb3ZlQ2xhc3MoJ3JtZy1uYW1lX19nem10ci0td2hpdGUtZmcnKTtcclxuICAgICAgICAgICAgJCgnI2xpbmVfbmFtZSB0ZXh0JykucmVtb3ZlQ2xhc3MoJ3JtZy1uYW1lX19nem10ci0td2hpdGUtZmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgbG9hZExpbmVOdW0oKSB7XHJcbiAgICAgICAgY29uc3QgTElORV9OVU1fTUFYX1dJRFRIID0gMTUuNTkzNzU7XHJcbiAgICAgICAgJCgnLnJtZy1uYW1lX19nem10ci0tbGluZS1udW0nKS50ZXh0KHRoaXMuX2xpbmVOdW0pLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoLTkuMjUsMClgKTtcclxuXHJcbiAgICAgICAgdmFyIGxpbmVOdW1EaW0gPSBnZXRUeHRCb3hEaW0oJCgnLnJtZy1uYW1lX19nem10ci0tbGluZS1udW0nKVsxXSBhcyBFbGVtZW50IGFzIFNWR0dyYXBoaWNzRWxlbWVudCwgJ3JhaWxtYXAnKTtcclxuICAgICAgICBpZiAodGhpcy5fbGluZU51bS5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmVOdW1TY2FsZSA9IGxpbmVOdW1EaW0ud2lkdGg+TElORV9OVU1fTUFYX1dJRFRIID8gTElORV9OVU1fTUFYX1dJRFRIL2xpbmVOdW1EaW0ud2lkdGggOiAxO1xyXG4gICAgICAgICAgICAkKCcucm1nLW5hbWVfX2d6bXRyLS1saW5lLW51bScpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoLTkuMjUsMClzY2FsZSgke2xpbmVOdW1TY2FsZX0pYCk7XHJcbiAgICAgICAgICAgICQoJy5ybWctbmFtZV9fZ3ptdHItLXN0YXRpb24tbnVtJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSg5LjI1LDApc2NhbGUoJHtsaW5lTnVtU2NhbGV9KWApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5lTnVtU2NhbGUgPSBsaW5lTnVtRGltLndpZHRoPkxJTkVfTlVNX01BWF9XSURUSCA/IExJTkVfTlVNX01BWF9XSURUSC9saW5lTnVtRGltLndpZHRoIDogMTtcclxuICAgICAgICAgICAgJCgnLnJtZy1uYW1lX19nem10ci0tbGluZS1udW0nKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKC05LjI1LDApc2NhbGUoJHtsaW5lTnVtU2NhbGV9KWApO1xyXG4gICAgICAgICAgICAkKCcucm1nLW5hbWVfX2d6bXRyLS1zdGF0aW9uLW51bScpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoOS4yNSwwKWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2FkTGluZU5hbWUoKSB7XHJcbiAgICAgICAgLy8gc2ltdWxhdGUgaW50ZXJjaGFuZ2UgaW5mb1xyXG4gICAgICAgIGxldCBpbmZvID0gW3RoaXMudGhlbWVDaXR5LCB0aGlzLnRoZW1lTGluZSwgdGhpcy5fdGhlbWVDb2xvdXIsIHRoaXMuX2ZnQ29sb3VyLCB0aGlzLl9saW5lTmFtZXNbMF0sIHRoaXMuX2xpbmVOYW1lc1sxXV0gYXMgSW50ZXJjaGFuZ2VJbmZvO1xyXG5cclxuICAgICAgICAkKCcjbGluZV9uYW1lJylcclxuICAgICAgICAgICAgLmVtcHR5KClcclxuICAgICAgICAgICAgLmFwcGVuZChnZXRJbnRCb3hHWihpbmZvLCAxKSk7XHJcbiAgICAgICAgJCgnI2xpbmVfbmFtZScpLmh0bWwoJCgnI2xpbmVfbmFtZScpLmh0bWwoKSk7XHJcblxyXG4gICAgICAgIHZhciBsaW5lTmFtZVggPSB0aGlzLl9kaXJlY3Rpb249PSdyJyA/IHRoaXMubGluZVhzWzBdLTY1IDogdGhpcy5saW5lWHNbMV0rNjU7XHJcblxyXG4gICAgICAgICQoJyNsaW5lX25hbWUnKVxyXG4gICAgICAgICAgICAuYXR0cih7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtsaW5lTmFtZVh9LC0xOClzY2FsZSgxLjUpYFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmxvYWRGb250cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWREaXJlY3Rpb24oKSB7XHJcbiAgICAgICAgbGV0IHZhbGlkRGVzdDogSURbXTtcclxuICAgICAgICBsZXQgeCA9IHRoaXMuX3N2Z1dpZHRoICogdGhpcy5fZGlyZWN0aW9uR1pYIC8gMTAwO1xyXG4gICAgICAgIGxldCB5ID0gdGhpcy5fc3ZnSGVpZ2h0ICogdGhpcy5fZGlyZWN0aW9uR1pZIC8gMTAwO1xyXG4gICAgICAgICQoJyNkaXJlY3Rpb25fZ3onKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7eH0sJHt5fSlgKTtcclxuICAgICAgICAvLyB0byBiZSBmaXhlZDogdmFsaWREZXN0IG9yZGVyaW5nXHJcbiAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PSAnbCcpIHtcclxuICAgICAgICAgICAgJCgnI2RpcmVjdGlvbl9neiB1c2UnKS5hdHRyKCd0cmFuc2Zvcm0nLCBgc2NhbGUoMC4zNSlgKTtcclxuICAgICAgICAgICAgJCgnI2RpcmVjdGlvbl9neiBnJykuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAndGV4dC1hbmNob3InOiAnc3RhcnQnLCBcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSg2NSwtNSknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YWxpZERlc3QgPSB0aGlzLmxWYWxpZERlc3RzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJyNkaXJlY3Rpb25fZ3ogdXNlJykuYXR0cigndHJhbnNmb3JtJywgYHNjYWxlKDAuMzUpcm90YXRlKDE4MClgKTtcclxuICAgICAgICAgICAgJCgnI2RpcmVjdGlvbl9neiBnJykuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAndGV4dC1hbmNob3InOiAnZW5kJywgXHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoLTY1LC01KSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhbGlkRGVzdCA9IHRoaXMuclZhbGlkRGVzdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWxpZERlc3QubGVuZ3RoICE9PSAyKSB7XHJcbiAgICAgICAgICAgIHZhciBbZGVzdE5hbWVaSCwgZGVzdE5hbWVFTl0gPSBbMCwxXS5tYXAoaWR4ID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZERlc3QubWFwKHN0bklkID0+IHRoaXMuc3RhdGlvbnNbc3RuSWRdLm5hbWVbaWR4XS5yZXBsYWNlKC9cXFxcL2csICcgJykpLmpvaW4oJy8nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJyNkaXJlY3Rpb25fZ3ogZycpLmVxKDApLmZpbmQoJ3RleHQnKS5lcSgwKS50ZXh0KGRlc3ROYW1lWkggKyAn5pa55ZCRJyk7XHJcbiAgICAgICAgICAgICQoJyNkaXJlY3Rpb25fZ3ogZycpLmVxKDApLmZpbmQoJ3RleHQnKS5lcSgxKS50ZXh0KCdUb3dhcmRzICcgKyBkZXN0TmFtZUVOLnJlcGxhY2UoJ1xcXFwnLCAnICcpKTtcclxuXHJcbiAgICAgICAgICAgICQoJyNkaXJlY3Rpb25fZ3ogZycpLmVxKDApLnNob3coKTtcclxuICAgICAgICAgICAgJCgnI2RpcmVjdGlvbl9neiBnJykuZXEoMSkuaGlkZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGZsYXRNYXAgYW5kIGZsYXQgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgc29tZSBicm93c2VycyFcclxuICAgICAgICAgICAgLy8gaG93ZXZlciB0YXJnZXRpbmcgRVM1IGNhdXNlZCBvdGhlciBpc3N1ZXM/XHJcbiAgICAgICAgICAgIHZhbGlkRGVzdFxyXG4gICAgICAgICAgICAgICAgLm1hcChzdG5JZCA9PiB0aGlzLnN0YXRpb25zW3N0bklkXS5uYW1lKVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYy5jb25jYXQodmFsKSwgW10pXHJcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgodHh0LCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGklMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eHQgPSAnVG93YXJkcyAnICsgdHh0LnJlcGxhY2UoJ1xcXFwnLCAnICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkKCcjZGlyZWN0aW9uX2d6IGcnKS5lcSgxKS5maW5kKCd0ZXh0JykuZXEoaSkudGV4dCh0eHQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJyNkaXJlY3Rpb25fZ3ogZycpLmVxKDEpLmZpbmQoJ3RleHQnKS5jc3MoJ2xldHRlci1zcGFjaW5nJywgMCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2hhckNvdW50cyA9IHZhbGlkRGVzdC5tYXAoc3RuSWQgPT4gdGhpcy5zdGF0aW9uc1tzdG5JZF0ubmFtZVswXS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBsZXQgbWluQ2hhckNvdW50cyA9IE1hdGgubWluKC4uLmNoYXJDb3VudHMpO1xyXG4gICAgICAgICAgICBpZiAobWluQ2hhckNvdW50cyA+IDEgJiYgY2hhckNvdW50c1swXSAhPT0gY2hhckNvdW50c1sxXSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoYXJTcGFjaW5nID0gTWF0aC5hYnMoY2hhckNvdW50c1swXSAtIGNoYXJDb3VudHNbMV0pIC8gKG1pbkNoYXJDb3VudHMgLSAxKTtcclxuICAgICAgICAgICAgICAgICQoJyNkaXJlY3Rpb25fZ3ogZycpLmVxKDEpLmZpbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5lcShjaGFyQ291bnRzWzBdID4gY2hhckNvdW50c1sxXSA/IDIgOiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jc3MoJ2xldHRlci1zcGFjaW5nJywgYCR7Y2hhclNwYWNpbmd9ZW1gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gJ2wnKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4Q2hhckNvdW50ID0gTWF0aC5tYXgoLi4uY2hhckNvdW50cyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjZGlyZWN0aW9uX2d6IGcnKS5lcSgxKS5maW5kKCd0ZXh0JykuZXEoNCkuYXR0cigneCcsIDI1KihtYXhDaGFyQ291bnQrMSkpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2RpcmVjdGlvbl9neiBnJykuZXEoMSkuZmluZCgndGV4dCcpLnNsaWNlKDAsNCkucmVtb3ZlQXR0cigneCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI2RpcmVjdGlvbl9neiBnJykuZXEoMSkuZmluZCgndGV4dCcpLmVxKDQpLnJlbW92ZUF0dHIoJ3gnKTtcclxuICAgICAgICAgICAgICAgICQoJyNkaXJlY3Rpb25fZ3ogZycpLmVxKDEpLmZpbmQoJ3RleHQnKS5zbGljZSgwLDQpLmF0dHIoJ3gnLCAnLTc1Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICQoJyNkaXJlY3Rpb25fZ3ogZycpLmVxKDApLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnI2RpcmVjdGlvbl9neiBnJykuZXEoMSkuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTdG5OYW1lKHN0bklkOiBJRCwgbmFtZXM6IE5hbWUsIHN0bk51bTogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlU3RuTmFtZShzdG5JZCwgbmFtZXMsIHN0bk51bSk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZExpbmVOdW0oKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGlvbnNbdGhpcy5fY3VycmVudFN0bklkXS5wYXJlbnRzLmluY2x1ZGVzKHN0bklkKSB8fCB0aGlzLnN0YXRpb25zW3RoaXMuX2N1cnJlbnRTdG5JZF0uY2hpbGRyZW4uaW5jbHVkZXMoc3RuSWQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0Rlc3RJbmZvKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZEZvbnRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fY3VycmVudFN0bklkID09PSBzdG5JZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdEZXN0SW5mbygpOyBcclxuICAgICAgICAgICAgdGhpcy5sb2FkRm9udHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxlZnREZXN0cy5pbmNsdWRlcyhzdG5JZCkgfHwgdGhpcy5yaWdodERlc3RzLmluY2x1ZGVzKHN0bklkKSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWREaXJlY3Rpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGRyYXdEZXN0SW5mbygpIHtcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfc3RuX251bSB0ZXh0JykuZXEoMSkudGV4dCh0aGlzLnN0YXRpb25zW3RoaXMuX2N1cnJlbnRTdG5JZF0uc3RuTnVtKTtcclxuXHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciA+ICNwbGF0Zm9ybSA+IHRleHQnKS5lcSgwKS50ZXh0KHRoaXMuX3BsYXRmb3JtTnVtKTtcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyID4gI2JpZ19wc2QgdGV4dCcpLmVxKDApLnRleHQodGhpcy5fcHNkTnVtKTtcclxuXHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciAjYmlnX25hbWUnKS5lbXB0eSgpXHJcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5fc3ZnRGVzdFdpZHRoLzJ9LCR7MTAwIC0gKHRoaXMuc3RhdGlvbnNbdGhpcy5fY3VycmVudFN0bklkXS5uYW1lWzFdLnNwbGl0KCdcXFxcJykubGVuZ3RoIC0gMSkqMjB9KWApXHJcbiAgICAgICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAkKCc8dGV4dD4nLCB7IGNsYXNzOidybWctbmFtZV9femggcm1nLW5hbWVfX2d6bXRyLS1kZXN0JyB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KHRoaXMuc3RhdGlvbnNbdGhpcy5fY3VycmVudFN0bklkXS5uYW1lWzBdKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAkKCc8dGV4dD4nLCB7IGR5OjcwLCBjbGFzczoncm1nLW5hbWVfX2VuIHJtZy1uYW1lX19nem10ci0tZGVzdCcgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGV4dCh0aGlzLnN0YXRpb25zW3RoaXMuX2N1cnJlbnRTdG5JZF0ubmFtZVsxXS5zcGxpdCgnXFxcXCcpWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJzx0c3Bhbj4nLCB7IHg6MCwgZHk6NDAsICdhbGlnbm1lbnQtYmFzZWxpbmUnOidtaWRkbGUnIH0pLnRleHQodGhpcy5zdGF0aW9uc1t0aGlzLl9jdXJyZW50U3RuSWRdLm5hbWVbMV0uc3BsaXQoJ1xcXFwnKVsxXSB8fCAnJylcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJCgnI3Rlcm1pbnVzX2d6JykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3RoaXMuX3N2Z1dpZHRoLzJ9LDEwMClgKTtcclxuXHJcbiAgICAgICAgbGV0IG5leHRTdG5JZCA9IHRoaXNcclxuICAgICAgICAgICAgLnN0YXRpb25zW3RoaXMuX2N1cnJlbnRTdG5JZF1bdGhpcy5fZGlyZWN0aW9uID09PSAnbCcgPyAncGFyZW50cycgOiAnY2hpbGRyZW4nXVxyXG4gICAgICAgICAgICAuZmlsdGVyKHN0bklkID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBicmFuY2hUbXAgPSB0aGlzLnN0YXRpb25zW3RoaXMuX2N1cnJlbnRTdG5JZF0uYnJhbmNoW3RoaXMuX2RpcmVjdGlvbiA9PT0gJ2wnID8gJ2xlZnQnIDogJ3JpZ2h0J11cclxuICAgICAgICAgICAgICAgIGlmIChicmFuY2hUbXAubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGJyYW5jaFRtcFswXSA9PT0gJ3Rocm91Z2gnID8gdHJ1ZSA6IHN0bklkICE9PSBicmFuY2hUbXBbMV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKFsnbGluZXN0YXJ0JywgJ2xpbmVlbmQnXS5pbmNsdWRlcyhuZXh0U3RuSWRbMF0pKSB7XHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHInKS5maW5kKCcjYmlnX25leHQsICNiaWdfbmV4dF8yJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyID4gdXNlJykuZXEoMCkuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcjbGluZV9tYWluLCAjbGluZV9wYXNzLCAjbGluZV9uYW1lLCAjc3RuX2ljb25zLCAjZGlyZWN0aW9uX2d6JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcjdGVybWludXNfZ3onKS5zaG93KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG5leHRTdG5JZC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciAjYmlnX25leHRfMicpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciAjYmlnX25leHRfMicpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyID4gdXNlJykuZXEoMCkuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcjbGluZV9tYWluLCAjbGluZV9wYXNzLCAjbGluZV9uYW1lLCAjc3RuX2ljb25zLCAjZGlyZWN0aW9uX2d6Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcjdGVybWludXNfZ3onKS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgW25leHROYW1lWkgsIG5leHROYW1lRU5dID0gWycnLCAnJ107XHJcbiAgICAgICAgbGV0IG5leHROYW1lWkhDb3VudCA9IDA7XHJcbiAgICAgICAgaWYgKG5leHRTdG5JZC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgdmFyIG5leHRTdG5JbmZvID0gdGhpcy5zdGF0aW9uc1tuZXh0U3RuSWRbMF1dO1xyXG4gICAgICAgICAgICBbbmV4dE5hbWVaSCwgbmV4dE5hbWVFTl0gPSBuZXh0U3RuSW5mby5uYW1lO1xyXG4gICAgICAgICAgICBuZXh0TmFtZVpIQ291bnQgPSBuZXh0TmFtZVpILmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0IGc6bnRoLWNoaWxkKDIpIHRleHQnKS5lcSgwKS50ZXh0KG5leHROYW1lWkgpO1xyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfbmV4dCBnOm50aC1jaGlsZCgyKSB0ZXh0JykuZXEoMSkudGV4dChuZXh0TmFtZUVOLnNwbGl0KCdcXFxcJylbMF0pXHJcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0c3Bhbj4nLCB7IHg6MCwgZHk6MTcsICdhbGlnbm1lbnQtYmFzZWxpbmUnOidtaWRkbGUnIH0pLnRleHQobmV4dE5hbWVFTi5zcGxpdCgnXFxcXCcpWzFdIHx8ICcnKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV4dFN0bklkLmZvckVhY2goKHN0bklkLCBpZHgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXh0U3RuSW5mbyA9IHRoaXMuc3RhdGlvbnNbc3RuSWRdO1xyXG4gICAgICAgICAgICAgICAgW25leHROYW1lWkgsIG5leHROYW1lRU5dID0gbmV4dFN0bkluZm8ubmFtZTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0TmFtZVpILmxlbmd0aCA+IG5leHROYW1lWkhDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHROYW1lWkhDb3VudCA9IG5leHROYW1lWkgubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICQoYCNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0XzIgZzpudGgtY2hpbGQoJHsyKihpZHgrMSl9KSB0ZXh0YCkuZXEoMikudGV4dChuZXh0TmFtZVpIKTtcclxuICAgICAgICAgICAgICAgICQoYCNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0XzIgZzpudGgtY2hpbGQoJHsyKihpZHgrMSl9KSB0ZXh0YCkuZXEoMykudGV4dChuZXh0TmFtZUVOLnNwbGl0KCdcXFxcJylbMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dHNwYW4+JywgeyB4OjAsIGR5OjEzLCAnYWxpZ25tZW50LWJhc2VsaW5lJzonbWlkZGxlJyB9KS50ZXh0KG5leHROYW1lRU4uc3BsaXQoJ1xcXFwnKVsxXSB8fCAnJykpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB2YWxpZFJvdXRlcyA9IHRoaXMucm91dGVzXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihyb3V0ZSA9PiByb3V0ZS5pbmRleE9mKHN0bklkKSAhPT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChyb3V0ZSA9PiByb3V0ZS5maWx0ZXIocyA9PiBzICE9PSAnbGluZXN0YXJ0JyAmJiBzICE9PSAnbGluZWVuZCcpKTtcclxuICAgICAgICAgICAgICAgIGxldCB2YWxpZEVuZHM6IElEW107XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSAnbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWxpZEVuZHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgU2V0KHZhbGlkUm91dGVzLm1hcChyb3V0ZSA9PiByb3V0ZVswXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgKS5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkRW5kcyA9IEFycmF5LmZyb20oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTZXQodmFsaWRSb3V0ZXMubWFwKHJvdXRlID0+IHJvdXRlLnJldmVyc2UoKVswXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoYCNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0XzIgZzpudGgtY2hpbGQoJHsyKihpZHgrMSl9KSB0ZXh0YCkuZXEoMClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dCh2YWxpZEVuZHMubWFwKHMgPT4gdGhpcy5zdGF0aW9uc1tzXS5uYW1lWzBdKS5qb2luKCcvJykgKyAn5pa55ZCRJyk7XHJcbiAgICAgICAgICAgICAgICAkKGAjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfbmV4dF8yIGc6bnRoLWNoaWxkKCR7MiooaWR4KzEpfSkgdGV4dGApLmVxKDEpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoJ1Rvd2FyZHMgJyArIHZhbGlkRW5kcy5tYXAocyA9PiB0aGlzLnN0YXRpb25zW3NdLm5hbWVbMV0pLmpvaW4oJy8nKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyJykuaHRtbCgkKCcjc3RhdGlvbl9pbmZvX2d6bXRyJykuaHRtbCgpKTtcclxuXHJcbiAgICAgICAgLy8gUG9zaXRpb24gYmlnIG5hbWVcclxuICAgICAgICB2YXIgYmlnTmFtZURpbSA9IGdldFR4dEJveERpbShcclxuICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciAjYmlnX25hbWUgdGV4dCcpWzBdIGFzIEVsZW1lbnQgYXMgU1ZHR3JhcGhpY3NFbGVtZW50LCBcclxuICAgICAgICAgICAgJ2Rlc3RpbmF0aW9uJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciAjYmlnX3N0bl9udW0nKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkeyh0aGlzLl9zdmdEZXN0V2lkdGgrYmlnTmFtZURpbS53aWR0aCkvMis1NX0sJHsxMjAgLSAodGhpcy5zdGF0aW9uc1t0aGlzLl9jdXJyZW50U3RuSWRdLm5hbWVbMV0uc3BsaXQoJ1xcXFwnKS5sZW5ndGggLSAxKSoyMH0pc2NhbGUoMS40KWApO1xyXG5cclxuICAgICAgICBsZXQgYmlnTmV4dERpbSA9IHt4OjAsIHk6MCwgd2lkdGg6MCwgaGVpZ2h0OjB9O1xyXG4gICAgICAgIGlmIChuZXh0U3RuSWQubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIGJpZ05leHREaW0gPSBnZXRUeHRCb3hEaW0oXHJcbiAgICAgICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfbmV4dCBnOm50aC1jaGlsZCgyKScpWzBdIGFzIEVsZW1lbnQgYXMgU1ZHR3JhcGhpY3NFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgJ2Rlc3RpbmF0aW9uJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBiaWdOZXh0RGltcyA9IFtcclxuICAgICAgICAgICAgICAgIGdldFR4dEJveERpbShcclxuICAgICAgICAgICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfbmV4dF8yIGc6bnRoLWNoaWxkKDIpJylbMF0gYXMgRWxlbWVudCBhcyBTVkdHcmFwaGljc0VsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Rlc3RpbmF0aW9uJ1xyXG4gICAgICAgICAgICAgICAgKSwgXHJcbiAgICAgICAgICAgICAgICBnZXRUeHRCb3hEaW0oXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciAjYmlnX25leHRfMiBnOm50aC1jaGlsZCg0KScpWzBdIGFzIEVsZW1lbnQgYXMgU1ZHR3JhcGhpY3NFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICdkZXN0aW5hdGlvbidcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgaWYgKGJpZ05leHREaW1zWzBdLndpZHRoID4gYmlnTmV4dERpbXNbMV0ud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGJpZ05leHREaW0gPSBiaWdOZXh0RGltc1swXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJpZ05leHREaW0gPSBiaWdOZXh0RGltc1sxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB2YXIgbmV4dE5hbWVaSENvdW50ID0gbmV4dE5hbWVaSC5sZW5ndGg7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9kaXJlY3Rpb24gPT0gJ2wnKSB7XHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgI3BsYXRmb3JtJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3RoaXMuX3N2Z0Rlc3RXaWR0aC0xMDB9LDEyMClgKTtcclxuICAgICAgICAgICAgaWYgKG5leHRTdG5JZC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0TmFtZVpIQ291bnQgPD0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0IGc6bnRoLWNoaWxkKDIpJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkezExNSszNX0sMTEwKWApO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgPiB1c2UnKS5lcSgwKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7KDExNSszNSooMStuZXh0TmFtZVpIQ291bnQpK2JpZ05hbWVEaW0ueCkvMi0yMH0sMTIwKXNjYWxlKDAuMjUpYCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0IGc6bnRoLWNoaWxkKDIpJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkezExNSszNSowLjV9LDExMClgKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyID4gdXNlJykuZXEoMCkuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkeygxMTUrMzUqKDAuNStuZXh0TmFtZVpIQ291bnQpK2JpZ05hbWVEaW0ueCkvMi0yMH0sMTIwKXNjYWxlKDAuMjUpYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfbmV4dF8yIGc6bnRoLWNoaWxkKDIpJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgxMTMsODApYCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfbmV4dF8yIGc6bnRoLWNoaWxkKDQpJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgxMTMsMTkwKWApO1xyXG4gICAgICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciA+IHVzZScpLmVxKDApLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHsoOTkrMjcqKDErbmV4dE5hbWVaSENvdW50KStiaWdOYW1lRGltLngpLzItMjB9LDEyMClzY2FsZSgwLjI1KWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfbmV4dCBnOmZpcnN0LWNoaWxkJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSg4MCwxMTApYCk7XHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0XzIgZzpmaXJzdC1jaGlsZCcpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoNzIsODApYCk7XHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0XzIgZzpudGgtY2hpbGQoMyknKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDcyLDE5MClgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNwbGF0Zm9ybScpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoMTAwLDEyMClgKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChuZXh0U3RuSWQubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfbmV4dCBnOm50aC1jaGlsZCgyKScpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt0aGlzLl9zdmdEZXN0V2lkdGgtNDUtYmlnTmV4dERpbS53aWR0aH0sMTEwKWApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXh0TmFtZVpIQ291bnQgPD0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0IGc6Zmlyc3QtY2hpbGQnKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5fc3ZnRGVzdFdpZHRoLTQ1LWJpZ05leHREaW0ud2lkdGgtNzB9LDExMClgKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyID4gdXNlJykuZXEoMCkuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkeyh0aGlzLl9zdmdEZXN0V2lkdGgtNDUtYmlnTmV4dERpbS53aWR0aC03MC0zNStiaWdOYW1lRGltLngrYmlnTmFtZURpbS53aWR0aCs1NSsxOC41KjEuNCkvMisyMH0sMTIwKXNjYWxlKDAuMjUpcm90YXRlKDE4MClgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciAjYmlnX25leHQgZzpmaXJzdC1jaGlsZCcpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt0aGlzLl9zdmdEZXN0V2lkdGgtNDUtYmlnTmV4dERpbS53aWR0aC0zNSoxLjV9LDExMClgKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyID4gdXNlJykuZXEoMCkuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgkeyh0aGlzLl9zdmdEZXN0V2lkdGgtNDUtYmlnTmV4dERpbS53aWR0aC0zNSoyLjUrYmlnTmFtZURpbS54K2JpZ05hbWVEaW0ud2lkdGgrNTUrMTguNSoxLjQpLzIrMjB9LDEyMClzY2FsZSgwLjI1KXJvdGF0ZSgxODApYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfbmV4dF8yIGc6bnRoLWNoaWxkKDIpJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3RoaXMuX3N2Z0Rlc3RXaWR0aC00NS1iaWdOZXh0RGltLndpZHRofSw4MClgKTtcclxuICAgICAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgI2JpZ19uZXh0XzIgZzpudGgtY2hpbGQoNCknKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5fc3ZnRGVzdFdpZHRoLTQ1LWJpZ05leHREaW0ud2lkdGh9LDE5MClgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfbmV4dF8yIGc6Zmlyc3QtY2hpbGQnKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5fc3ZnRGVzdFdpZHRoLTQ1LWJpZ05leHREaW0ud2lkdGgtNDF9LDgwKWApO1xyXG4gICAgICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19nem10ciAjYmlnX25leHRfMiBnOm50aC1jaGlsZCgzKScpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt0aGlzLl9zdmdEZXN0V2lkdGgtNDUtYmlnTmV4dERpbS53aWR0aC00MX0sMTkwKWApO1xyXG5cclxuICAgICAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fZ3ptdHIgPiB1c2UnKS5lcSgwKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7KHRoaXMuX3N2Z0Rlc3RXaWR0aC00NS1iaWdOZXh0RGltLndpZHRoLTQxLTI3K2JpZ05hbWVEaW0ueCtiaWdOYW1lRGltLndpZHRoKzU1KzE4LjUqMS40KS8yKzIwfSwxMjApc2NhbGUoMC4yNSlyb3RhdGUoMTgwKWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNpbmRpY2F0b3JfbGlnaHQnKS5hdHRyKHtcclxuICAgICAgICAgICAgeDp0aGlzLl9zdmdEZXN0V2lkdGgvMiwgeToyNzAsIFxyXG4gICAgICAgICAgICAneGxpbms6aHJlZic6ICcjaW5kaWNhdG9yXycgKyB0aGlzLl9pbmZvUGFuZWxUeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5kcmF3UFNEKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1BTRCgpIHtcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX2d6bXRyICNiaWdfcHNkJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3RoaXMuX3N2Z0Rlc3RXaWR0aC8yKzgwfSwke1xyXG4gICAgICAgICAgICAodHlwZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdnejMnOiByZXR1cm4gMjE4O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2d6MTQyMSc6IHJldHVybiAyMzg7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIDI0MjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkodGhpcy5faW5mb1BhbmVsVHlwZSlcclxuICAgICAgICB9KWApO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFN0bihwcmVwLCBzdG5JZDogSUQsIGxvYywgZW5kKSB7XHJcbiAgICAgICAgdmFyIHJlcyA9IHN1cGVyLmFkZFN0bihwcmVwLCBzdG5JZCwgbG9jLCBlbmQpO1xyXG4gICAgICAgIHRoaXMubG9hZExpbmVOdW0oKTtcclxuICAgICAgICB0aGlzLmxvYWREaXJlY3Rpb24oKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVN0bihzdG5JZDogSUQpIHtcclxuICAgICAgICBpZiAoc3VwZXIucmVtb3ZlU3RuKHN0bklkKSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRMaW5lTnVtKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZERpcmVjdGlvbigpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVN0blRyYW5zZmVyKHN0bklkOiBJRCwgdHlwZSwgaW5mbz1udWxsKSB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlU3RuVHJhbnNmZXIoc3RuSWQsIHR5cGUsIGluZm8pO1xyXG4gICAgICAgIHRoaXMubG9hZExpbmVOdW0oKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVCcmFuY2hUeXBlKHN0bklkOiBJRCwgZGlyZWN0aW9uOiBEaXJlY3Rpb25Mb25nLCB0eXBlOiAndGhyb3VnaCcgfCAnbm9udGhyb3VnaCcpIHtcclxuICAgICAgICBzdXBlci51cGRhdGVCcmFuY2hUeXBlKHN0bklkLCBkaXJlY3Rpb24sIHR5cGUpO1xyXG4gICAgICAgIHRoaXMubG9hZExpbmVOdW0oKTtcclxuICAgICAgICB0aGlzLmxvYWREaXJlY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVCcmFuY2hGaXJzdChzdG5JZDogSUQsIGRpcmVjdGlvbjogRGlyZWN0aW9uTG9uZywgZmlyc3Q6IElEKSB7XHJcbiAgICAgICAgaWYgKCFzdXBlci51cGRhdGVCcmFuY2hGaXJzdChzdG5JZCwgZGlyZWN0aW9uLCBmaXJzdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvYWRMaW5lTnVtKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkRGlyZWN0aW9uKCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQnJhbmNoUG9zKHN0bklkOiBJRCwgZGlyZWN0aW9uOiBEaXJlY3Rpb25Mb25nLCBwb3M6IDAgfCAxKSB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlQnJhbmNoUG9zKHN0bklkLCBkaXJlY3Rpb24sIHBvcyk7XHJcbiAgICAgICAgdGhpcy5sb2FkTGluZU51bSgpO1xyXG4gICAgICAgIHRoaXMubG9hZERpcmVjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpbml0U1ZHKGxpbmUpIHtcclxuICAgICAgICBzdXBlci5pbml0U1ZHKGxpbmUpO1xyXG4gICAgICAgIGxpbmUubG9hZExpbmVOdW0oKTtcclxuICAgICAgICBsaW5lLmxvYWRMaW5lTmFtZSgpO1xyXG4gICAgICAgIGxpbmUubG9hZERpcmVjdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBSTUdMaW5lR1ogfTsiLCJpbXBvcnQgeyBSTUdTdGF0aW9uIH0gZnJvbSAnLi9TdGF0aW9uJztcclxuaW1wb3J0IHsgSUQsIE5hbWUsIEludEluZm9UYWcsIEludGVyY2hhbmdlSW5mbywgQnJhbmNoSW5mbywgU3RhdGlvbkluZm8sIGdldEludEJveEdaIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY2xhc3MgUk1HU3RhdGlvbkdaIGV4dGVuZHMgUk1HU3RhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihpZDogSUQsIGRhdGE6IFN0YXRpb25JbmZvKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIGRhdGEpO1xyXG4gICAgICAgIHRoaXMuc3RuTnVtID0gZGF0YS5udW07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWVDbGFzcygpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSAtMTpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnUGFzcyc7XHJcbiAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnQ3VycmVudEdaJztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnRnV0dXJlJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF9uYW1lU2hpZnQoKSB7cmV0dXJuIGZhbHNlO31cclxuICAgIGdldCBfdGlja1JvdGF0aW9uKCkge3JldHVybiB0aGlzLnkgPiAwID8gMTgwIDogMDt9XHJcblxyXG4gICAgZ2V0IGljb25IVE1MKCkge1xyXG4gICAgICAgIHZhciBbaWNvblR5cGUsIG51bUNsYXNzXSA9ICh0aGlzLnN0YXRlID09IC0xKSA/IFsnc3RuX2d6X3Bhc3MnLCdQYXNzJ10gOiBbJ3N0bl9neicsJ0Z1dHVyZSddO1xyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7IHRyYW5zZm9ybTpgdHJhbnNsYXRlKCR7dGhpcy54fSwke3RoaXMueX0pYCB9KVxyXG4gICAgICAgICAgICAuYXBwZW5kKCQoJzx1c2U+JywgeyAneGxpbms6aHJlZic6ICcjJyArIGljb25UeXBlLCBjbGFzczogJ3JtZy1zdG4nIH0pKVxyXG4gICAgICAgICAgICAuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgJCgnPGc+JywgeyBjbGFzczogJ05hbWUgJyArIG51bUNsYXNzIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGV4dD4nLCB7IGNsYXNzOidybWctbmFtZV9femggcm1nLW5hbWVfX2d6bXRyLS1saW5lLW51bScgfSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGV4dD4nLCB7IGNsYXNzOidybWctbmFtZV9femggcm1nLW5hbWVfX2d6bXRyLS1zdGF0aW9uLW51bScsIHg6MCB9KS50ZXh0KHRoaXMuc3RuTnVtKSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmFtZUhUTUwoKSB7XHJcbiAgICAgICAgdmFyIG5hbWVFTkxuID0gdGhpcy5uYW1lWzFdLnNwbGl0KCdcXFxcJykubGVuZ3RoO1xyXG4gICAgICAgIGxldCBkeDogbnVtYmVyO1xyXG4gICAgICAgIGlmICh0aGlzLl9uYW1lU2hpZnQpIHtcclxuICAgICAgICAgICAgZHggPSB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAtOSA6IDE2ICsgKG5hbWVFTkxuLTEpKjEyICogTWF0aC5jb3MoLTQ1KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkeCA9IHRoaXMuX3RpY2tSb3RhdGlvbiA9PT0gMCA/ICgyNCArIChuYW1lRU5Mbi0xKSoxMikgKiBNYXRoLmNvcygtNDUpIDogLTY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGxldCBkeCA9IHRoaXMuX25hbWVTaGlmdCA/IC04IDogKDI0ICsgKG5hbWVFTkxuLTEpKjEyKSAqIE1hdGguY29zKC00NSk7XHJcbiAgICAgICAgbGV0IGR5ID0gdGhpcy5fdGlja1JvdGF0aW9uID09PSAwID8gKC00IC0gMjEuOTIxODc1IC0gKG5hbWVFTkxuLTEpKjEyKk1hdGguY29zKC00NSkpIDogMTcuNTtcclxuICAgICAgICAvLyB2YXIgZHkgPSAoLTQgLSAyMS45MjE4NzUgLSAobmFtZUVOTG4tMSkqMTIqTWF0aC5jb3MoLTQ1KSkgKiAodGhpcy5fdGlja1JvdGF0aW9uID09PSAwID8gMSA6IC0xKTtcclxuICAgICAgICByZXR1cm4gJCgnPGc+Jywge1xyXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZSgke3RoaXMueCAtIGR4fSwke3RoaXMueSArIGR5fSlyb3RhdGUoLTQ1KWAsIFxyXG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAnc3RhcnQnIDogJ2VuZCcsIFxyXG4gICAgICAgICAgICBjbGFzczogYE5hbWUgJHt0aGlzLm5hbWVDbGFzc31gXHJcbiAgICAgICAgfSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAkKCc8dGV4dD4nKS5hZGRDbGFzcygncm1nLW5hbWVfX3poIHJtZy1uYW1lX19nem10ci0tc3RhdGlvbicpLnRleHQodGhpcy5uYW1lWzBdKVxyXG4gICAgICAgICkuYXBwZW5kKFxyXG4gICAgICAgICAgICAkKCc8dGV4dD4nLCB7XHJcbiAgICAgICAgICAgICAgICBkeTogMTUsIGNsYXNzOiAncm1nLW5hbWVfX2VuIHJtZy1uYW1lX19nem10ci0tc3RhdGlvbidcclxuICAgICAgICAgICAgfSkudGV4dCh0aGlzLm5hbWVbMV0uc3BsaXQoJ1xcXFwnKVswXSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgJCgnPHRzcGFuPicsIHtcclxuICAgICAgICAgICAgICAgICAgICAneCc6IDAsICdkeSc6IDEwLCBjbGFzczogJ3JtZy1uYW1lX19lbiBybWctbmFtZV9fZ3ptdHItLXN0YXRpb24nXHJcbiAgICAgICAgICAgICAgICB9KS50ZXh0KHRoaXMubmFtZVsxXS5zcGxpdCgnXFxcXCcpWzFdKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgSW50U3RhdGlvbkdaIGV4dGVuZHMgUk1HU3RhdGlvbkdaIHtcclxuICAgIHByaXZhdGUgX2ludEluZm9zOiBJbnRlcmNoYW5nZUluZm9bXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogSUQsIGRhdGE6IFN0YXRpb25JbmZvKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIGRhdGEpO1xyXG4gICAgICAgIHRoaXMuX2ludEluZm9zID0gZGF0YS50cmFuc2Zlci5pbmZvWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldCBfdGlja1JvdGF0aW9uKCkge3JldHVybiAwO31cclxuXHJcbiAgICBnZXQgaW50VGlja0hUTUwoKSB7XHJcbiAgICAgICAgdmFyIHRpY2tzID0gdGhpcy5faW50SW5mb3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChpbmZvID0+IGluZm9bSW50SW5mb1RhZy5jb2xvdXJdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChjb2xvdXIsaWR4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IHRoaXMueCAtIDIqKHRoaXMuX2ludEluZm9zLmxlbmd0aC0xKSArIDQqaWR4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoJzx1c2U+Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd4bGluazpocmVmJzogJyNpbnR0aWNrX2d6JywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLnN0YXRlPT0tMSA/ICcjYWFhJyA6IGNvbG91ciwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7eH0sJHt0aGlzLnl9KXJvdGF0ZSgke3RoaXMuX3RpY2tSb3RhdGlvbn0pYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7Y2xhc3M6J3JtZy1saW5lIHJtZy1saW5lX19nem10ciBybWctbGluZV9fY2hhbmdlJ30pXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCguLi50aWNrcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGludE5hbWVIVE1MKCkge1xyXG4gICAgICAgIGxldCBpbnRCb3hFbHMgPSB0aGlzLl9pbnRJbmZvcy5tYXAoaW5mbyA9PiBnZXRJbnRCb3hHWihpbmZvLCB0aGlzLnN0YXRlKSk7XHJcbiAgICAgICAgaW50Qm94RWxzLmZvckVhY2goKGVsLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICQoZWwpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoMCwke2kqMjggKiAodGhpcy5fdGlja1JvdGF0aW9uPT09MCA/IDEgOiAtMSl9KWApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gJCgnPGc+Jywge1xyXG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiAnbWlkZGxlJywgXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke3RoaXMueH0sJHt0aGlzLnkgKyAodGhpcy5fdGlja1JvdGF0aW9uID09PSAwID8gMjMgOiAtNDcpfSlgXHJcbiAgICAgICAgfSkuYXBwZW5kKC4uLmludEJveEVscyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVuZ3JwSFRNTCgpIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMuaW50VGlja0hUTUwsIHRoaXMuaWNvbkhUTUwsIHRoaXMubmFtZUhUTUwsIHRoaXMuaW50TmFtZUhUTUxdO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBCcmFuY2hTdGF0aW9uR1ogZXh0ZW5kcyBJbnRTdGF0aW9uR1oge1xyXG4gICAgY29uc3RydWN0b3IgKGlkOiBJRCwgZGF0YTogU3RhdGlvbkluZm8sIGxpbmVJbmYpIHtcclxuICAgICAgICBkYXRhLnRyYW5zZmVyLmluZm9bMF0udW5zaGlmdChsaW5lSW5mKTtcclxuICAgICAgICBpZiAoZGF0YS50cmFuc2Zlci5pbmZvWzFdKSB7XHJcbiAgICAgICAgICAgIGRhdGEudHJhbnNmZXIuaW5mb1swXS5wdXNoKC4uLmRhdGEudHJhbnNmZXIuaW5mb1sxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyKGlkLCBkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgX25hbWVTaGlmdCgpIHtyZXR1cm4gdHJ1ZTt9XHJcbiAgICBnZXQgX3RpY2tSb3RhdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMucGFyZW50cy5pbmRleE9mKHRoaXMuYnJhbmNoLmxlZnRbMV0pID09PSAwIHx8IHRoaXMuY2hpbGRyZW4uaW5kZXhPZih0aGlzLmJyYW5jaC5yaWdodFsxXSkgPT09IDApID8gMCA6IDE4MDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgT1NJU3RhdGlvbkdaIGV4dGVuZHMgSW50U3RhdGlvbkdaIHtcclxuICAgIGNvbnN0cnVjdG9yIChpZDogSUQsIGRhdGE6IFN0YXRpb25JbmZvKSB7XHJcbiAgICAgICAgLy8gZGF0YS50cmFuc2Zlci5pbmZvWzBdLnB1c2goLi4uZGF0YS50cmFuc2Zlci5pbmZvWzFdKTtcclxuICAgICAgICBzdXBlcihpZCwgZGF0YSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFJNR1N0YXRpb25HWiwgSW50U3RhdGlvbkdaLCBCcmFuY2hTdGF0aW9uR1osIE9TSVN0YXRpb25HWiB9OyJdLCJzb3VyY2VSb290IjoiIn0=