(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{16:function(t,e,s){"use strict";s.r(e);var n=s(7),i=s(1);class a extends i.l{constructor(t,e){super(t,e),this.stnNum=e.num}get _nameShift(){return!1}get _tickRotation(){return this.y>0?180:0}get _dxdy(){var t=this.name[1].split("\\").length;let e;return e=this._nameShift?0===this._tickRotation?-9:16+12*(t-1)*Math.cos(-45):0===this._tickRotation?(24+12*(t-1))*Math.cos(-45):-6,[e,0===this._tickRotation?-25.921875-12*(t-1)*Math.cos(-45):17.5]}get iconHTML(){var[t,e]=-1==this.state?["stn_sh_pass","Pass"]:["stn_sh","Future"];return $("<g>",{transform:`translate(${this.x},${this.y})`}).append($("<use>",{"xlink:href":"#"+t,class:"rmg-stn"}))}get nameHTML(){let[t,e]=this._dxdy;return $("<g>",{transform:`translate(${this.x-t},${this.y+e})rotate(-60)`,"text-anchor":0===this._tickRotation?"start":"end",class:"Name Future"}).append($("<text>").addClass("rmg-name__zh rmg-name__shmetro--station").text(this.name[0])).append($("<text>",{dy:15,class:"rmg-name__en rmg-name__shmetro--station"}).text(this.name[1].split("\\")[0]).append($("<tspan>",{x:0,dy:12}).text(this.name[1].split("\\")[1])))}}class r extends a{constructor(t,e){super(t,e),this._intInfos=e.interchange[0]}get html(){return $("<g>",{id:this.id}).append(...this.ungrpHTML)}get ungrpHTML(){return[this.iconHTML,this.nameHTML]}get ungrpIconHTML(){return[...this.intTickHTML]}get iconHTML(){var[t,e]=-1==this.state?["int2_sh_pass","Pass"]:["int2_sh","Future"];return $("<g>",{transform:`translate(${this.x},${this.y})`}).append($("<use>",{"xlink:href":"#"+t,class:"rmg-stn",stroke:this._intInfos[i.d.colour]}))}get nameHTML(){let[t,e]=this._dxdy;return $("<g>",{transform:`translate(${this.x-t},${this.y+e})`}).append($("<g>",{id:`rmg-name__shmetro--${this.id}`,"text-anchor":0===this._tickRotation?"start":"end",class:"Name Future"}).append($("<text>").addClass("rmg-name__zh rmg-name__shmetro--station").text(this.name[0])).append($("<text>",{dy:15,class:"rmg-name__en rmg-name__shmetro--station"}).text(this.name[1].split("\\")[0]).append($("<tspan>",{x:0,dy:12}).text(this.name[1].split("\\")[1]))))}get intTickHTML(){let t=[],e=$(`#rmg-name__shmetro--${this.id}`),s=e.get(0).getBoundingClientRect(),n=s.right-s.left+5;this._intInfos.map((e,s)=>{var a=e[i.d.colour],r=$("<use>",{"xlink:href":"#int_sh",fill:a,transform:`translate(${n+25*s},-12)`,class:"rmg-line__shmetro rmg-line__change"});-1==this.state&&r.addClass("rmg-line__pass");let o=String(e[i.d.nameZH]).match(/(\d*)\w+/);if(o)var h=o[0];else h=String(e[i.d.nameZH]);var l=$("<text>",{transform:`translate(${n+6+25*s},8)`,class:"rmg-name__zh rmg-name__shmetro--line_name"}).text(h);t.push(r,l)});let a=e.parent();return a.attr("transform",`${a.attr("transform")}rotate(-45)`),t}get _nameClass(){return-1==this.state?"Pass":"Future"}}s.d(e,"RMGLineSH",(function(){return o}));class o extends n.a{constructor(t){super(t)}_initStnInstance(t,e){switch(e.change_type){case"int2":case"int3_l":case"int3_r":return new r(t,e);case"osi11_ul":case"osi11_pl":case"osi11_ur":case"osi11_pr":case"osi12_ul":case"osi12_pl":case"osi12_ur":case"osi12_pr":case"osi21_ul":case"osi21_pl":case"osi21_ur":case"osi21_pr":case"osi22_ul":case"osi22_pl":case"osi22_ur":case"osi22_pr":default:return new a(t,e)}}drawDestInfo(){$("#station_info_shmetro > #platform > text").text(this._platformNum);var t=310+$("#station_info_shmetro > #dest_text")[0].getBoundingClientRect().width+45+50,e="l"==this._direction?1:-1,s=(this._svgDestWidth-e*t)/20;s="l"==this._direction?s:this._svgDestWidth-20;var n=90*(1-e);$("#station_info_shmetro > #arrow_left_use").attr("transform",`translate(${s},135)rotate(${n})`);var i=s+285*e;if($("#station_info_shmetro > #platform").attr("transform",`translate(${i},130)`),"r"===this._direction)var a="end",r=.8*this._svgDestWidth;else a="start",r=.2*this._svgDestWidth;$("#station_info_shmetro > #dest_text").attr({transform:`translate(${r},135)`,"text-anchor":a});var[o,h]=[[],[]];this[`${this._direction}ValidDests`].forEach(t=>{o.push(this.stations[t].name[0]),h.push(this.stations[t].name[1])}),$("#station_info_shmetro > #dest_text > text:first-child").text(`往${o.join("，")}`),$("#station_info_shmetro > #dest_text > text:last-child").text(`To ${h.join(", ")}`);let l="l"===this._direction?this._svgDestWidth:320;var[_,m]=this._lineNames,d=_.match(/(\d*)\w+/);d?(l-=180,_="号线",$("#station_info_shmetro > #line_number > rect").attr({style:`fill:${this._themeColour}`,transform:`translate(${l-120},70)`}),$("#station_info_shmetro > #line_number > text").text(d[0]).attr("transform",`translate(${l-100},170)`)):(l-=280,$("#station_info_shmetro > #line_number > rect").attr({style:`fill:${this._themeColour}`,transform:`translate(${l-10},60)`,width:260,height:150}),$("#station_info_shmetro > #line_number > text").hide(),$("#station_info_shmetro > #line_name_text > text:last-child").attr("dx",10)),$("#station_info_shmetro > #line_name_text > text:first-child").text(_),$("#station_info_shmetro > #line_name_text > text:last-child").text(m),$("#station_info_shmetro > #line_name_text").attr({transform:`translate(${l},135)`,"text-anchor":"start"});let c="l"==this._direction?"left":"right";$("#line_shmetro_use").attr({"xlink:href":`#line_shmetro_${c}`,transform:"translate(0,220)"})}drawStns(){for(let[t,e]of Object.entries(this.stations))["linestart","lineend"].includes(t)||$("#stn_icons").append(e.html);$("#stn_icons").html($("#stn_icons").html());for(let[t,e]of Object.entries(this.stations).filter(t=>t[1]instanceof r))$(`#rmg-name__shmetro--${t}`).parent().append(e.ungrpIconHTML);$("#stn_icons").html($("#stn_icons").html())}_stnYShare(t){if(["linestart","lineend"].includes(t)||this._stnIndegree(t)>1||this._stnOutdegree(t)>1)return 0;var e=this.stations[t].parents[0];return e?1==this._stnOutdegree(e)?this._stnYShare(e):0==this.stations[e].children.indexOf(t)?3:0:0}_linePath(t,e){var[s,n,i]=[],a={};if(t.forEach(t=>{var[e,r]=["_stnRealX","_stnRealY"].map(e=>this[e](t));if(!n&&0!==n)return[s,i,n]=[t,e,r],void(a.start=[e,r]);r===this.y?r!=n&&(a.bifurcate=[i,n]):r!=n&&(a.bifurcate=[e,r]),a.end=[e,r],[s,i,n]=[t,e,r]}),console.log(t,e),console.log(a),a.hasOwnProperty("end")){let[t,s]=a.start,n=a.end[0];if(a.hasOwnProperty("bifurcate")){let[n,i]=a.bifurcate,[r,o]=a.end;return"main"===e?"l"===this._direction?o>s?`M ${t-30},${s-6} H ${n} L ${r},${o-6} l 0,12 L ${n},${i+6} L ${t-42},${s+6} Z`:`M ${r},${o-6} H ${n} L ${t},${s-6} l 0,12 L ${n},${i+6} L ${r},${o+6} Z`:o>s?`M ${t},${s-6} H ${n} L ${r},${o-6} l 0,12 L ${n},${i+6} L ${t},${s+6} Z`:`M ${r},${o-6} H ${n} L ${t},${s-6} l 0,12 L ${n},${i+6} L ${r},${o+6} Z`:(this._direction,o>s?`M ${t-30},${s-6} H ${n} L ${r},${o-6} l 0,12 L ${n},${i+6} L ${t-30},${s+6} Z`:`M ${t},${s-6} L ${n},${i-6} H ${r} l 0,12 L ${n},${i+6} L ${t},${s+6} Z`)}return"main"===e?"l"===this._direction?`M ${t-30},${s-6} H ${n} l 0,12 L ${t-42},${s+6} Z`:`M ${t},${s-6} H ${n+30} l 12,12 L ${t},${s+6} Z`:"l"===this._direction?`M ${t},${s-6} H ${n+30} l 0,12 L ${t},${s+6} Z`:`M ${t-30},${s-6} H ${n} l 0,12 L ${t-30},${s+6} Z`}return""}drawLine(){$(".rmg-line").removeClass("rmg-line__mtr").addClass("rmg-line__shmetro"),this.branches.map(t=>{var e=t.filter(t=>this.stations[t].state>=0),s=t.filter(t=>this.stations[t].state<=0);1===e.length&&(s=t),0==e.filter(t=>-1!==s.indexOf(t)).length&&e.length&&(s[0]===t[0]?s.push(e[0]):e[0]===t[0]&&e[e.length-1]===t[t.length-1]&&s.length?(s=t,e=[]):s.unshift(e[e.length-1]));let n=this._linePath(e,"main");(n||""!=n)&&$("#line_main").append($("<path>",{id:"line_main_path",d:n})),n=this._linePath(s,"pass"),(n||""!=n)&&$("#line_pass").append($("<path>",{id:"line_pass_path",d:n}))}),$("#line_main").html($("#line_main").html()),$("#line_pass").html($("#line_pass").html())}fillThemeColour(){super.fillThemeColour(),$("path#stn_sh").attr("stroke",this._themeColour),$("path#int2_sh").attr("stroke",this._themeColour),$("path#stn_sh_pass").attr("stroke","#aaa"),$("path#int2_sh_pass").attr("stroke","#aaa"),$("path#line_main_path").attr("fill",this._themeColour),$("path#line_pass_path").attr("fill","#aaa");let t="l"==this._direction?"left":"right";$(`#line_shmetro_${t}`).attr("fill",this._themeColour),this._lineNames[0].match(/(\d*)\w+/)?$("#station_info_shmetro > #line_number > text").attr("fill","#fff"):$("#station_info_shmetro > #line_name_text").attr("fill","#fff")}updateStnNameBg(){$("#current_bg").hide()}static initSVG(t){t.drawSVGFrame(),t.showFrameOuter(),t.drawStns(),t.drawLine(),t.fillThemeColour(),t.drawStrip(),t.drawDestInfo(),t.loadFonts(),t.updateStnNameBg()}set direction(t){super.direction=t,this.fillThemeColour()}set currentStnId(t){super.currentStnId=t,this.fillThemeColour()}updateStnTransfer(t,e,s=null){super.updateStnTransfer(t,e,s),this.fillThemeColour(),$("#stn_icons").empty(),this.drawStns()}addStn(t,e,s,n){let[i,a]=super.addStn(t,e,s,n);return this.fillThemeColour(),[i,a]}set yPc(t){super.yPc=t;let e=t*this._svgHeight/50;$("g#main").attr("transform",`translate(0,${e})`)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvU3RhdGlvbi9TdGF0aW9uU0gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xpbmUvTGluZVNILnRzIl0sIm5hbWVzIjpbImlkIiwiZGF0YSIsInN1cGVyIiwidGhpcyIsInN0bk51bSIsIm51bSIsInkiLCJuYW1lRU5MbiIsIm5hbWUiLCJzcGxpdCIsImxlbmd0aCIsImR4IiwiX25hbWVTaGlmdCIsIl90aWNrUm90YXRpb24iLCJNYXRoIiwiY29zIiwiaWNvblR5cGUiLCJudW1DbGFzcyIsInN0YXRlIiwic3RhdGlvbl9pZCIsIiQiLCJ0cmFuc2Zvcm0iLCJ4IiwiYXBwZW5kIiwiY2xhc3MiLCJkeSIsIl9keGR5IiwiYWRkQ2xhc3MiLCJ0ZXh0IiwiX2ludEluZm9zIiwiaW50ZXJjaGFuZ2UiLCJ1bmdycEhUTUwiLCJpY29uSFRNTCIsIm5hbWVIVE1MIiwiaW50VGlja0hUTUwiLCJzdHJva2UiLCJjb2xvdXIiLCJsaW5lRWxlbXMiLCJzdG5OYW1lRWxlbSIsImJjciIsImdldCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInJpZ2h0IiwibGVmdCIsIm1hcCIsInN0biIsImluZGV4IiwibGluZUljb25Db2xvdXIiLCJsaW5lSWNvbkVsZW0iLCJmaWxsIiwibGluZU51bWJlciIsIlN0cmluZyIsIm5hbWVaSCIsIm1hdGNoIiwibGluZU5hbWUiLCJsaW5lTmFtZUVsZW0iLCJwdXNoIiwic3RuSW5mb0VsZW0iLCJwYXJlbnQiLCJhdHRyIiwicGFyYW0iLCJzdG5JZCIsInN0bkluZm8iLCJjaGFuZ2VfdHlwZSIsIl9wbGF0Zm9ybU51bSIsImZsYWdMZW5ndGgiLCJ3aWR0aCIsImlzTGVmdCIsIl9kaXJlY3Rpb24iLCJhcnJvd1giLCJfc3ZnRGVzdFdpZHRoIiwiYXJyb3dSb3RhdGUiLCJwbGF0Zm9ybU51bVgiLCJ0eHRBbmNob3IiLCJkZXN0TmFtZVgiLCJkZXN0aW5hdGlvbnNfemgiLCJkZXN0aW5hdGlvbnNfZW4iLCJmb3JFYWNoIiwic3RhdGlvbnMiLCJqb2luIiwibGluZU5hbWVYIiwibGluZU5hbWVaSCIsImxpbmVOYW1lRU4iLCJfbGluZU5hbWVzIiwiX3RoZW1lQ29sb3VyIiwiaGlkZSIsImRpcmVjdGlvbiIsInN0bkluc3RhbmNlIiwiT2JqZWN0IiwiZW50cmllcyIsImluY2x1ZGVzIiwiaHRtbCIsImZpbHRlciIsInVuZ3JwSWNvbkhUTUwiLCJfc3RuSW5kZWdyZWUiLCJfc3RuT3V0ZGVncmVlIiwic3RuUHJlZCIsInBhcmVudHMiLCJfc3RuWVNoYXJlIiwiY2hpbGRyZW4iLCJpbmRleE9mIiwic3RuSWRzIiwidHlwZSIsInByZXZJZCIsInByZXZZIiwicHJldlgiLCJwYXRoIiwiZnVuIiwiY29uc29sZSIsImxvZyIsImhhc093blByb3BlcnR5IiwiaCIsInhiIiwieWIiLCJ4bSIsInltIiwicmVtb3ZlQ2xhc3MiLCJicmFuY2hlcyIsImJyYW5jaCIsImxpbmVNYWluU3RucyIsImxpbmVQYXNzU3RucyIsInVuc2hpZnQiLCJfbGluZVBhdGgiLCJkIiwiZmlsbFRoZW1lQ29sb3VyIiwibGluZSIsImRyYXdTVkdGcmFtZSIsInNob3dGcmFtZU91dGVyIiwiZHJhd1N0bnMiLCJkcmF3TGluZSIsImRyYXdTdHJpcCIsImRyYXdEZXN0SW5mbyIsImxvYWRGb250cyIsInVwZGF0ZVN0bk5hbWVCZyIsInZhbCIsImN1cnJlbnRTdG5JZCIsImluZm8iLCJ1cGRhdGVTdG5UcmFuc2ZlciIsImVtcHR5IiwicHJlcCIsImxvYyIsImVuZCIsIm5ld0lkIiwibmV3SW5mbyIsImFkZFN0biIsInlQYyIsIl9zdmdIZWlnaHQiXSwibWFwcGluZ3MiOiJrSEFLQSxNQUFNLFVBQXFCLElBQ3ZCLFlBQVlBLEVBQVFDLEdBQ2hCQyxNQUFNRixFQUFJQyxHQUNWRSxLQUFLQyxPQUFTSCxFQUFLSSxJQUd2QixpQkFBbUIsT0FBTyxFQUMxQixvQkFBc0IsT0FBT0YsS0FBS0csRUFBSSxFQUFJLElBQU0sRUFDaEQsWUFDSSxJQUFJQyxFQUFXSixLQUFLSyxL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LEVBQU9DLEdBSW5CLFFBQVFULEdBQ0pwSSxNQUFNK0ksSUFBTVgsRUFFWixJQUFJaEksRUFBSWdJLEVBQU1uSSxLQUFLK0ksV0FBYSxHQUNoQzlILEVBQUUsVUFBVXVDLEtBQUssWUFBYSxlQUFlckQiLCJmaWxlIjoiTGluZVNILm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJNR1N0YXRpb24sIEludEluZm9UYWcsIEludGVyY2hhbmdlSW5mbyB9IGZyb20gJy4vU3RhdGlvbic7XHJcbmltcG9ydCB7IElELCBOYW1lLCBCcmFuY2hJbmZvLCBTdGF0aW9uSW5mbyB9IGZyb20gJy4uL3V0aWxzJztcclxuXHJcbmNvbnN0IHN0YXRpb25faWQgPSAnc3RuX3NoJ1xyXG5cclxuY2xhc3MgUk1HU3RhdGlvblNIIGV4dGVuZHMgUk1HU3RhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihpZDogSUQsIGRhdGE6IFN0YXRpb25JbmZvKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIGRhdGEpO1xyXG4gICAgICAgIHRoaXMuc3RuTnVtID0gZGF0YS5udW07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF9uYW1lU2hpZnQoKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgZ2V0IF90aWNrUm90YXRpb24oKSB7IHJldHVybiB0aGlzLnkgPiAwID8gMTgwIDogMDsgfVxyXG4gICAgZ2V0IF9keGR5KCkge1xyXG4gICAgICAgIHZhciBuYW1lRU5MbiA9IHRoaXMubmFtZVsxXS5zcGxpdCgnXFxcXCcpLmxlbmd0aDtcclxuICAgICAgICBsZXQgZHg6IG51bWJlcjtcclxuICAgICAgICBpZiAodGhpcy5fbmFtZVNoaWZ0KSB7XHJcbiAgICAgICAgICAgIGR4ID0gdGhpcy5fdGlja1JvdGF0aW9uID09PSAwID8gLTkgOiAxNiArIChuYW1lRU5MbiAtIDEpICogMTIgKiBNYXRoLmNvcygtNDUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGR4ID0gdGhpcy5fdGlja1JvdGF0aW9uID09PSAwID8gKDI0ICsgKG5hbWVFTkxuIC0gMSkgKiAxMikgKiBNYXRoLmNvcygtNDUpIDogLTY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGxldCBkeCA9IHRoaXMuX25hbWVTaGlmdCA/IC04IDogKDI0ICsgKG5hbWVFTkxuLTEpKjEyKSAqIE1hdGguY29zKC00NSk7XHJcbiAgICAgICAgbGV0IGR5ID0gdGhpcy5fdGlja1JvdGF0aW9uID09PSAwID8gKC00IC0gMjEuOTIxODc1IC0gKG5hbWVFTkxuIC0gMSkgKiAxMiAqIE1hdGguY29zKC00NSkpIDogMTcuNTtcclxuICAgICAgICAvLyB2YXIgZHkgPSAoLTQgLSAyMS45MjE4NzUgLSAobmFtZUVOTG4tMSkqMTIqTWF0aC5jb3MoLTQ1KSkgKiAodGhpcy5fdGlja1JvdGF0aW9uID09PSAwID8gMSA6IC0xKTtcclxuICAgICAgICByZXR1cm4gW2R4LCBkeV1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgaWNvbkhUTUwoKSB7XHJcbiAgICAgICAgdmFyIFtpY29uVHlwZSwgbnVtQ2xhc3NdID0gKHRoaXMuc3RhdGUgPT0gLTEpID8gW3N0YXRpb25faWQgKyAnX3Bhc3MnLCAnUGFzcyddIDogW3N0YXRpb25faWQsICdGdXR1cmUnXTtcclxuICAgICAgICByZXR1cm4gJCgnPGc+JywgeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHt0aGlzLnh9LCR7dGhpcy55fSlgIH0pXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJCgnPHVzZT4nLCB7ICd4bGluazpocmVmJzogJyMnICsgaWNvblR5cGUsIGNsYXNzOiAncm1nLXN0bicgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBuYW1lSFRNTCgpIHtcclxuICAgICAgICBsZXQgW2R4LCBkeV0gPSB0aGlzLl9keGR5XHJcbiAgICAgICAgcmV0dXJuICQoJzxnPicsIHtcclxuICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IGB0cmFuc2xhdGUoJHt0aGlzLnggLSBkeH0sJHt0aGlzLnkgKyBkeX0pcm90YXRlKC02MClgLFxyXG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAnc3RhcnQnIDogJ2VuZCcsXHJcbiAgICAgICAgICAgIC8vIGNsYXNzOiBgTmFtZSAke3RoaXMubmFtZUNsYXNzfWBcclxuICAgICAgICAgICAgY2xhc3M6IGBOYW1lIEZ1dHVyZWAgIC8vIHRvZG86IGZpeCB0aGlzXHJcbiAgICAgICAgfSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAkKCc8dGV4dD4nKS5hZGRDbGFzcygncm1nLW5hbWVfX3poIHJtZy1uYW1lX19zaG1ldHJvLS1zdGF0aW9uJykudGV4dCh0aGlzLm5hbWVbMF0pXHJcbiAgICAgICAgKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICQoJzx0ZXh0PicsIHtcclxuICAgICAgICAgICAgICAgIGR5OiAxNSwgY2xhc3M6ICdybWctbmFtZV9fZW4gcm1nLW5hbWVfX3NobWV0cm8tLXN0YXRpb24nXHJcbiAgICAgICAgICAgIH0pLnRleHQodGhpcy5uYW1lWzFdLnNwbGl0KCdcXFxcJylbMF0pLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICQoJzx0c3Bhbj4nLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3gnOiAwLCAnZHknOiAxMlxyXG4gICAgICAgICAgICAgICAgfSkudGV4dCh0aGlzLm5hbWVbMV0uc3BsaXQoJ1xcXFwnKVsxXSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEludFN0YXRpb25TSCBleHRlbmRzIFJNR1N0YXRpb25TSCB7XHJcbiAgICBwcm90ZWN0ZWQgX2ludEluZm9zOiBJbnRlcmNoYW5nZUluZm9bXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogSUQsIGRhdGE6IFN0YXRpb25JbmZvKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIGRhdGEpO1xyXG4gICAgICAgIHRoaXMuX2ludEluZm9zID0gZGF0YS5pbnRlcmNoYW5nZVswXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXdyaXRlIHRoaXMgdG8gYXBwZW5kIGRvbSBhbmQgdGhlbiBnZXRCb3VuZGluZ0NsaWVudFJlY3RcclxuICAgIC8vIHRvIGdldCB0aGUgZXhhY3QgcG9zaXRpb24gd2hlcmUgaW50IGljb24gY2FuIGJlIGZpdFxyXG4gICAgZ2V0IGh0bWwoKSB7XHJcbiAgICAgICAgcmV0dXJuICQoJzxnPicsIHsgaWQ6IHRoaXMuaWQgfSkuYXBwZW5kKC4uLnRoaXMudW5ncnBIVE1MKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXdyaXRlIHRoaXMgdG8gZ2V0IGFsbCBkcmF3aW5nIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxyXG4gICAgZ2V0IHVuZ3JwSFRNTCgpIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMuaWNvbkhUTUwsIHRoaXMubmFtZUhUTUxdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB1bmdycEljb25IVE1MKCkge1xyXG4gICAgICAgIHJldHVybiBbLi4udGhpcy5pbnRUaWNrSFRNTF1cclxuICAgIH1cclxuXHJcbiAgICAvLyBpbnRlcmNoYW5nZSBzdGF0aW9uIGljb24gb24gbWFpbiBsaW5lXHJcbiAgICBnZXQgaWNvbkhUTUwoKSB7XHJcbiAgICAgICAgdmFyIFtpY29uVHlwZSwgbnVtQ2xhc3NdID0gKHRoaXMuc3RhdGUgPT0gLTEpID8gWydpbnQyX3NoX3Bhc3MnLCAnUGFzcyddIDogWydpbnQyX3NoJywgJ0Z1dHVyZSddO1xyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke3RoaXMueH0sJHt0aGlzLnl9KWAgfSlcclxuICAgICAgICAgICAgLmFwcGVuZCgkKCc8dXNlPicsIHsgJ3hsaW5rOmhyZWYnOiAnIycgKyBpY29uVHlwZSwgY2xhc3M6ICdybWctc3RuJywgc3Ryb2tlOiB0aGlzLl9pbnRJbmZvc1tJbnRJbmZvVGFnLmNvbG91cl0gfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlZ3VsYXIgc3RhdGlvbiBuYW1lXHJcbiAgICBnZXQgbmFtZUhUTUwoKSB7XHJcbiAgICAgICAgbGV0IFtkeCwgZHldID0gdGhpcy5fZHhkeTtcclxuICAgICAgICAvLyB3cmFwIHRoZSBuYW1lLCBkZWNyb19saW5lIGFuZCBpbnRfbGluZSB1bmRlciBnIGluIG9yZGVyIHRvIHJvdGF0ZSBhdCBvbmNlXHJcbiAgICAgICAgcmV0dXJuICQoJzxnPicsIHtcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7dGhpcy54IC0gZHh9LCR7dGhpcy55ICsgZHl9KWAsICAvL3JvdGF0ZSgtNjApXHJcbiAgICAgICAgfSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAvLyB0aGUgb3JpZ2luYWwgbmFtZSB0ZXh0XHJcbiAgICAgICAgICAgICQoJzxnPicsIHtcclxuICAgICAgICAgICAgICAgIGlkOiBgcm1nLW5hbWVfX3NobWV0cm8tLSR7dGhpcy5pZH1gLFxyXG4gICAgICAgICAgICAgICAgJ3RleHQtYW5jaG9yJzogdGhpcy5fdGlja1JvdGF0aW9uID09PSAwID8gJ3N0YXJ0JyA6ICdlbmQnLFxyXG4gICAgICAgICAgICAgICAgY2xhc3M6IGBOYW1lIEZ1dHVyZWAgIC8vIHRvZG86IGZpeCB0aGlzXHJcbiAgICAgICAgICAgIH0pLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICQoJzx0ZXh0PicpLmFkZENsYXNzKCdybWctbmFtZV9femggcm1nLW5hbWVfX3NobWV0cm8tLXN0YXRpb24nKS50ZXh0KHRoaXMubmFtZVswXSlcclxuICAgICAgICAgICAgKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAkKCc8dGV4dD4nLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHk6IDE1LCBjbGFzczogJ3JtZy1uYW1lX19lbiBybWctbmFtZV9fc2htZXRyby0tc3RhdGlvbidcclxuICAgICAgICAgICAgICAgIH0pLnRleHQodGhpcy5uYW1lWzFdLnNwbGl0KCdcXFxcJylbMF0pLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAkKCc8dHNwYW4+Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAneCc6IDAsICdkeSc6IDEyXHJcbiAgICAgICAgICAgICAgICAgICAgfSkudGV4dCh0aGlzLm5hbWVbMV0uc3BsaXQoJ1xcXFwnKVsxXSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBpbnRlcmNoYW5nZSBzdGF0aW9uIGljb24gYWZ0ZXIgdGhlIHN0YXRpb24gbmFtZVxyXG4gICAgZ2V0IGludFRpY2tIVE1MKCkge1xyXG4gICAgICAgIGxldCBsaW5lRWxlbXM6IEpRdWVyeTxIVE1MRWxlbWVudD5bXSA9IFtdXHJcblxyXG4gICAgICAgIC8vIGdldCB0aGUgZXhhY3Qgc3RhdGlvbiBuYW1lIHdpZHRoIHNvIHRoYXQgdGhlXHJcbiAgICAgICAgLy8gaW50ZXJjaGFuZ2Ugc3RhdGlvbiBpY29uIGNhbiBiZSByaWdodCBhZnRlciB0aGUgc3RhdGlvbiBuYW1lXHJcbiAgICAgICAgbGV0IHN0bk5hbWVFbGVtID0gJChgI3JtZy1uYW1lX19zaG1ldHJvLS0ke3RoaXMuaWR9YClcclxuICAgICAgICBsZXQgYmNyID0gc3RuTmFtZUVsZW0uZ2V0KDApLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcbiAgICAgICAgbGV0IGR4ID0gYmNyLnJpZ2h0IC0gYmNyLmxlZnQgKyA1XHJcblxyXG4gICAgICAgIHRoaXMuX2ludEluZm9zLm1hcCgoc3RuLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBpbnRlcmNoYW5nZSBsaW5lIGljb24gYWZ0ZXIgc3RhdGlvbiBuYW1lXHJcbiAgICAgICAgICAgIHZhciBsaW5lSWNvbkNvbG91ciA9IHN0bltJbnRJbmZvVGFnLmNvbG91cl07XHJcbiAgICAgICAgICAgIHZhciBsaW5lSWNvbkVsZW0gPSAkKCc8dXNlPicsIHtcclxuICAgICAgICAgICAgICAgICd4bGluazpocmVmJzogJyNpbnRfc2gnLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogbGluZUljb25Db2xvdXIsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtkeCArIGluZGV4ICogMjV9LC0xMilgLFxyXG4gICAgICAgICAgICAgICAgY2xhc3M6ICdybWctbGluZV9fc2htZXRybyBybWctbGluZV9fY2hhbmdlJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lSWNvbkVsZW0uYWRkQ2xhc3MoJ3JtZy1saW5lX19wYXNzJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGxpbmUgc3RhcnRzIHdpdGggbnVtYmVycyBvciBsZXR0ZXJzXHJcbiAgICAgICAgICAgIGxldCBsaW5lTnVtYmVyID0gU3RyaW5nKHN0bltJbnRJbmZvVGFnLm5hbWVaSF0pLm1hdGNoKC8oXFxkKilcXHcrLylcclxuICAgICAgICAgICAgaWYgKGxpbmVOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaW5lTmFtZSA9IGxpbmVOdW1iZXJbMF1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaW5lTmFtZSA9IFN0cmluZyhzdG5bSW50SW5mb1RhZy5uYW1lWkhdKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGludGVyY2hhbmdlIGxpbmUgbmFtZVxyXG4gICAgICAgICAgICB2YXIgbGluZU5hbWVFbGVtID0gJCgnPHRleHQ+Jywge1xyXG4gICAgICAgICAgICAgICAgLy8gVG9kbzogZml4IHRoaXMgaGFyZC1jb2RlZCBjZW50ZXIoNikgcG9zaXRpb25cclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke2R4ICsgNiArIGluZGV4ICogMjV9LDgpYCxcclxuICAgICAgICAgICAgICAgIGNsYXNzOiAncm1nLW5hbWVfX3poIHJtZy1uYW1lX19zaG1ldHJvLS1saW5lX25hbWUnLFxyXG4gICAgICAgICAgICB9KS50ZXh0KGxpbmVOYW1lKVxyXG5cclxuICAgICAgICAgICAgbGluZUVsZW1zLnB1c2gobGluZUljb25FbGVtLCBsaW5lTmFtZUVsZW0pXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gcm90YXRlIHRoZSBzdGF0aW9uIGluZm8gbm93XHJcbiAgICAgICAgLy8gb3RoZXIgd2lzZSB0aGUgYmNyIHdpbGwgYmUgaW5hY2N1cmF0ZSBkdWUgdG8gdGhlIHJvdGF0aW9uXHJcbiAgICAgICAgbGV0IHN0bkluZm9FbGVtID0gc3RuTmFtZUVsZW0ucGFyZW50KCk7XHJcbiAgICAgICAgc3RuSW5mb0VsZW0uYXR0cigndHJhbnNmb3JtJywgYCR7c3RuSW5mb0VsZW0uYXR0cigndHJhbnNmb3JtJyl9cm90YXRlKC00NSlgKVxyXG5cclxuICAgICAgICByZXR1cm4gbGluZUVsZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBfbmFtZUNsYXNzKCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5zdGF0ZSA9PSAtMSkgPyAnUGFzcycgOiAnRnV0dXJlJztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgUk1HU3RhdGlvblNILCBJbnRTdGF0aW9uU0gsIHN0YXRpb25faWQgfTtcclxuIiwiaW1wb3J0IHsgUk1HTGluZSB9IGZyb20gJy4vTGluZSc7XHJcbmltcG9ydCB7IFJNR1N0YXRpb25TSCwgSW50U3RhdGlvblNILCBzdGF0aW9uX2lkIH0gZnJvbSAnLi4vU3RhdGlvbi9TdGF0aW9uU0gnO1xyXG5pbXBvcnQgeyBSTUdTdGF0aW9uIH0gZnJvbSAnLi4vU3RhdGlvbi9TdGF0aW9uJztcclxuXHJcbmltcG9ydCB7IElELCBOYW1lLCBTdGF0aW9uSW5mbywgUk1HUGFyYW0sIHNldFBhcmFtcyB9IGZyb20gJy4uL3V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSTUdMaW5lU0ggZXh0ZW5kcyBSTUdMaW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtKSB7XHJcbiAgICAgICAgc3VwZXIocGFyYW0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9pbml0U3RuSW5zdGFuY2Uoc3RuSWQ6IElELCBzdG5JbmZvOiBTdGF0aW9uSW5mbyk6IFJNR1N0YXRpb24ge1xyXG4gICAgICAgIHN3aXRjaCAoc3RuSW5mby5jaGFuZ2VfdHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdpbnQyJzpcclxuICAgICAgICAgICAgY2FzZSAnaW50M19sJzpcclxuICAgICAgICAgICAgY2FzZSAnaW50M19yJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW50U3RhdGlvblNIKHN0bklkLCBzdG5JbmZvKTtcclxuICAgICAgICAgICAgY2FzZSAnb3NpMTFfdWwnOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kxMV9wbCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTExX3VyJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMTFfcHInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kxMl91bCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTEyX3BsJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMTJfdXInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kxMl9wcic6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTIxX3VsJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjFfcGwnOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kyMV91cic6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTIxX3ByJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjJfdWwnOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kyMl9wbCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTIyX3VyJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjJfcHInOlxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSTUdTdGF0aW9uU0goc3RuSWQsIHN0bkluZm8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBkcmF3IHRoZSBkZXN0aW5hdGlvblxyXG4gICAgZHJhd0Rlc3RJbmZvKCkge1xyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNwbGF0Zm9ybSA+IHRleHQnKS50ZXh0KHRoaXMuX3BsYXRmb3JtTnVtKTtcclxuXHJcbiAgICAgICAgdmFyIGJjciA9ICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNkZXN0X3RleHQnKVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICB2YXIgZmxhZ0xlbmd0aCA9IDE2MCArIDE1MCArIGJjci53aWR0aCArIDQ1ICsgNTA7XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8gYXJyb3dcclxuICAgICAgICB2YXIgaXNMZWZ0ID0gKHRoaXMuX2RpcmVjdGlvbiA9PSAnbCcpID8gMSA6IC0xO1xyXG4gICAgICAgIHZhciBhcnJvd1ggPSAodGhpcy5fc3ZnRGVzdFdpZHRoIC0gaXNMZWZ0ICogZmxhZ0xlbmd0aCkgLyAyMDtcclxuICAgICAgICBhcnJvd1ggPSAodGhpcy5fZGlyZWN0aW9uID09ICdsJykgPyBhcnJvd1ggOiB0aGlzLl9zdmdEZXN0V2lkdGggLSAyMDtcclxuICAgICAgICB2YXIgYXJyb3dSb3RhdGUgPSA5MCAqICgxIC0gaXNMZWZ0KTtcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjYXJyb3dfbGVmdF91c2UnKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7YXJyb3dYfSwxMzUpcm90YXRlKCR7YXJyb3dSb3RhdGV9KWApO1xyXG5cclxuICAgICAgICAvLyBub3QgaW4gdXNlIG5vd1xyXG4gICAgICAgIHZhciBwbGF0Zm9ybU51bVggPSBhcnJvd1ggKyBpc0xlZnQgKiAoMTYwICsgNTAgKyA3NSk7XHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI3BsYXRmb3JtJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3BsYXRmb3JtTnVtWH0sMTMwKWApO1xyXG5cclxuICAgICAgICAvLyBsaXN0IHRoZSBkZXN0aW5hdGlvbiB0ZXh0XHJcbiAgICAgICAgLy8gVG9kbzogZml4IHN2Z19kZXN0X3dpZHRoKjAuOCwgdGhpcyBoYXMgb25seSBiZWVuIHRlc3RlZCBvbiAxMDAwIHdpZHRoXHJcbiAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gJ3InKSB7XHJcbiAgICAgICAgICAgIHZhciB0eHRBbmNob3IgPSAnZW5kJztcclxuICAgICAgICAgICAgdmFyIGRlc3ROYW1lWCA9IHRoaXMuX3N2Z0Rlc3RXaWR0aCAqIDAuODtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdHh0QW5jaG9yID0gJ3N0YXJ0JztcclxuICAgICAgICAgICAgdmFyIGRlc3ROYW1lWCA9IHRoaXMuX3N2Z0Rlc3RXaWR0aCAqIDAuMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2Rlc3RfdGV4dCcpLmF0dHIoe1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtkZXN0TmFtZVh9LDEzNSlgLFxyXG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiB0eHRBbmNob3JcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gZm9yIGVhY2ggbGVmdCB2YWxpZCBkZXN0aW5hdGlvbnMsIGdldCB0aGUgbmFtZSBmcm9tIGlkXHJcbiAgICAgICAgdmFyIFtkZXN0aW5hdGlvbnNfemgsIGRlc3RpbmF0aW9uc19lbl06IFN0cmluZ1tdW10gPSBbW10sIFtdXVxyXG4gICAgICAgIHRoaXNbYCR7dGhpcy5fZGlyZWN0aW9ufVZhbGlkRGVzdHNgXS5mb3JFYWNoKHN0biA9PiB7XHJcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uc196aC5wdXNoKHRoaXMuc3RhdGlvbnNbc3RuXS5uYW1lWzBdKVxyXG4gICAgICAgICAgICBkZXN0aW5hdGlvbnNfZW4ucHVzaCh0aGlzLnN0YXRpb25zW3N0bl0ubmFtZVsxXSlcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjZGVzdF90ZXh0ID4gdGV4dDpmaXJzdC1jaGlsZCcpLnRleHQoYOW+gCR7ZGVzdGluYXRpb25zX3poLmpvaW4oXCLvvIxcIil9YClcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjZGVzdF90ZXh0ID4gdGV4dDpsYXN0LWNoaWxkJykudGV4dChgVG8gJHtkZXN0aW5hdGlvbnNfZW4uam9pbihcIiwgXCIpfWApXHJcblxyXG4gICAgICAgIC8vIHByZXBhcmUgZm9yIHRoZSBsaW5lIG5hbWVcclxuICAgICAgICBsZXQgbGluZU5hbWVYID0gdGhpcy5fZGlyZWN0aW9uID09PSAnbCcgPyB0aGlzLl9zdmdEZXN0V2lkdGggOiAzMjBcclxuICAgICAgICB2YXIgW2xpbmVOYW1lWkgsIGxpbmVOYW1lRU5dID0gdGhpcy5fbGluZU5hbWVzO1xyXG5cclxuICAgICAgICAvLyBsaW5lIHN0YXJ0cyB3aXRoIG51bWJlcnMgb3IgbGV0dGVyc1xyXG4gICAgICAgIHZhciBsaW5lTnVtYmVyID0gbGluZU5hbWVaSC5tYXRjaCgvKFxcZCopXFx3Ky8pXHJcbiAgICAgICAgaWYgKGxpbmVOdW1iZXIpIHtcclxuICAgICAgICAgICAgbGluZU5hbWVYIC09IDE4MDtcclxuICAgICAgICAgICAgbGluZU5hbWVaSCA9IFwi5Y+357q/XCJcclxuICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbnVtYmVyID4gcmVjdCcpLmF0dHIoe1xyXG4gICAgICAgICAgICAgICAgJ3N0eWxlJzogYGZpbGw6JHt0aGlzLl90aGVtZUNvbG91cn1gLFxyXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IGB0cmFuc2xhdGUoJHtsaW5lTmFtZVggLSAxMjB9LDcwKWBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbnVtYmVyID4gdGV4dCcpXHJcbiAgICAgICAgICAgICAgICAudGV4dChsaW5lTnVtYmVyWzBdKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHtsaW5lTmFtZVggLSAxMDB9LDE3MClgKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxpbmVOYW1lWCAtPSAyODA7XHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX251bWJlciA+IHJlY3QnKS5hdHRyKHtcclxuICAgICAgICAgICAgICAgICdzdHlsZSc6IGBmaWxsOiR7dGhpcy5fdGhlbWVDb2xvdXJ9YCxcclxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBgdHJhbnNsYXRlKCR7bGluZU5hbWVYIC0gMTB9LDYwKWAsXHJcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiAyNjAsXHJcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogMTUwXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX251bWJlciA+IHRleHQnKS5oaWRlKClcclxuXHJcbiAgICAgICAgICAgIC8vIFRvZG86IHNldCB0aGUgZW5nIGluIHRoZSBtaWRkbGVcclxuICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbmFtZV90ZXh0ID4gdGV4dDpsYXN0LWNoaWxkJykuYXR0cignZHgnLCAxMClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNldCB0aGUgbGluZSBuYW1lXHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbmFtZV90ZXh0ID4gdGV4dDpmaXJzdC1jaGlsZCcpLnRleHQobGluZU5hbWVaSClcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9uYW1lX3RleHQgPiB0ZXh0Omxhc3QtY2hpbGQnKS50ZXh0KGxpbmVOYW1lRU4pXHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbmFtZV90ZXh0JykuYXR0cih7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke2xpbmVOYW1lWH0sMTM1KWAsXHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6ICdzdGFydCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gdGhlIGxhc3QgZGVjb3JhdGlvbiBsaW5lXHJcbiAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHRoaXMuX2RpcmVjdGlvbiA9PSAnbCcgPyAnbGVmdCcgOiAncmlnaHQnXHJcbiAgICAgICAgJCgnI2xpbmVfc2htZXRyb191c2UnKS5hdHRyKHtcclxuICAgICAgICAgICAgJ3hsaW5rOmhyZWYnOiBgI2xpbmVfc2htZXRyb18ke2RpcmVjdGlvbn1gLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoMCwyMjApYCxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJld3JpdGUgdGhpcyB0byBhcHBlbmQgZG9tIGFuZCB0aGVuIGdldEJvdW5kaW5nQ2xpZW50UmVjdFxyXG4gICAgLy8gdG8gZ2V0IHRoZSBleGFjdCBwb3NpdGlvbiB3aGVyZSBpbnQgaWNvbiBjYW4gYmUgZml0XHJcbiAgICBkcmF3U3RucygpIHtcclxuICAgICAgICBmb3IgKGxldCBbc3RuSWQsIHN0bkluc3RhbmNlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN0YXRpb25zKSkge1xyXG4gICAgICAgICAgICBpZiAoWydsaW5lc3RhcnQnLCAnbGluZWVuZCddLmluY2x1ZGVzKHN0bklkKSkgeyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAkKCcjc3RuX2ljb25zJykuYXBwZW5kKHN0bkluc3RhbmNlLmh0bWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKCcjc3RuX2ljb25zJykuaHRtbCgkKCcjc3RuX2ljb25zJykuaHRtbCgpKTsgLy8gUmVmcmVzaCBET01cclxuXHJcbiAgICAgICAgZm9yIChsZXQgW3N0bklkLCBzdG5JbnN0YW5jZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zdGF0aW9ucylcclxuICAgICAgICAgICAgLmZpbHRlcihzdG4gPT4gc3RuWzFdIGluc3RhbmNlb2YgSW50U3RhdGlvblNIKSBhcyBbSUQsIEludFN0YXRpb25TSF1bXSkge1xyXG4gICAgICAgICAgICAkKGAjcm1nLW5hbWVfX3NobWV0cm8tLSR7c3RuSWR9YCkucGFyZW50KCkuYXBwZW5kKHN0bkluc3RhbmNlLnVuZ3JwSWNvbkhUTUwpXHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJyNzdG5faWNvbnMnKS5odG1sKCQoJyNzdG5faWNvbnMnKS5odG1sKCkpOyAvLyBSZWZyZXNoIERPTVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJld3JpdGUgdGhpcyB0byBjaGFuZ2UgdGhlIHkgb2YgYnJhbmNoIHN0YXRpb25cclxuICAgIF9zdG5ZU2hhcmUoc3RuSWQpOiBudW1iZXIge1xyXG4gICAgICAgIGlmIChbJ2xpbmVzdGFydCcsICdsaW5lZW5kJ10uaW5jbHVkZXMoc3RuSWQpIHx8IHRoaXMuX3N0bkluZGVncmVlKHN0bklkKSA+IDEgfHwgdGhpcy5fc3RuT3V0ZGVncmVlKHN0bklkKSA+IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzdG5QcmVkID0gdGhpcy5zdGF0aW9uc1tzdG5JZF0ucGFyZW50c1swXTtcclxuICAgICAgICBpZiAoc3RuUHJlZCkge1xyXG4gICAgICAgICAgICAvLyBwYXJlbnQgZXhpc3RcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3N0bk91dGRlZ3JlZShzdG5QcmVkKSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBubyBzaWJsaW5nLCB0aGVuIHkgc2FtZSBhcyBwYXJlbnRcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdG5ZU2hhcmUoc3RuUHJlZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaWJsaW5nIGV4aXN0cywgdGhlbiB5IGRlcGVuZHMgb24gaXRzIGlkeCBvZiBiZWluZyBjaGlsZHJlblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHJld3JpdGUgdGhpcyB0byBtb3ZlIHRoZSBtYWluIGxpbmUgb24gdGhlIHNhbWUgaGVpZ2h0IG9mIHRoZSByZXN0XHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgYnJhbmNoIGEgYml0IGF3YXkgZnJvbSB0aGUgbWFpbiBsaW5lXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuc3RhdGlvbnNbc3RuUHJlZF0uY2hpbGRyZW4uaW5kZXhPZihzdG5JZCkgPT0gMCkgPyAzIDogMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG5vIHBhcmVudCwgbXVzdCBiZSBsaW5lc3RhcnRcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9saW5lUGF0aChzdG5JZHM6IElEW10sIHR5cGU/OiAnbWFpbicgfCAncGFzcycpOiBzdHJpbmcge1xyXG4gICAgICAgIHZhciBbcHJldklkLCBwcmV2WSwgcHJldlhdOiBbc3RyaW5nPywgbnVtYmVyPywgbnVtYmVyP10gPSBbXVxyXG4gICAgICAgIHZhciBwYXRoOiB7IFtrZXk6IHN0cmluZ106IG51bWJlcltdIH0gPSB7fVxyXG5cclxuICAgICAgICBzdG5JZHMuZm9yRWFjaChzdG5JZCA9PiB7XHJcbiAgICAgICAgICAgIHZhciBbeCwgeV0gPSBbJ19zdG5SZWFsWCcsICdfc3RuUmVhbFknXS5tYXAoZnVuID0+IHRoaXNbZnVuXShzdG5JZCkpXHJcbiAgICAgICAgICAgIGlmICghcHJldlkgJiYgcHJldlkgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIFtwcmV2SWQsIHByZXZYLCBwcmV2WV0gPSBbc3RuSWQsIHgsIHldO1xyXG4gICAgICAgICAgICAgICAgcGF0aFsnc3RhcnQnXSA9IFt4LCB5XTtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh5ID09PSB0aGlzLnkpIHtcclxuICAgICAgICAgICAgICAgIC8vIG1lcmdlIGJhY2sgdG8gbWFpbiBsaW5lXHJcbiAgICAgICAgICAgICAgICBpZiAoeSAhPSBwcmV2WSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGhbJ2JpZnVyY2F0ZSddID0gW3ByZXZYLCBwcmV2WV1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBicmFuY2ggbGluZVxyXG4gICAgICAgICAgICAgICAgaWYgKHkgIT0gcHJldlkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoWydiaWZ1cmNhdGUnXSA9IFt4LCB5XVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhdGhbJ2VuZCddID0gW3gsIHldO1xyXG4gICAgICAgICAgICBbcHJldklkLCBwcmV2WCwgcHJldlldID0gW3N0bklkLCB4LCB5XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coc3RuSWRzLCB0eXBlKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHBhdGgpXHJcbiAgICAgICAgaWYgKCFwYXRoLmhhc093blByb3BlcnR5KCdlbmQnKSkge1xyXG4gICAgICAgICAgICAvLyBubyBjb21wbGV0ZSBsaW5lIGdlbmVyYXRlZFxyXG4gICAgICAgICAgICByZXR1cm4gJydcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBbeCwgeV0gPSBwYXRoWydzdGFydCddLCBoID0gcGF0aFsnZW5kJ11bMF1cclxuICAgICAgICAgICAgaWYgKCFwYXRoLmhhc093blByb3BlcnR5KCdiaWZ1cmNhdGUnKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gZ2VuZXJhbCBtYWluIGxpbmVcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnbWFpbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSAnbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eCAtIDMwfSwke3kgLSA2fSBIICR7aH0gbCAwLDEyIEwgJHt4IC0gNDJ9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eH0sJHt5IC0gNn0gSCAke2ggKyAzMH0gbCAxMiwxMiBMICR7eH0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHR5cGUgPT09ICdwYXNzJ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kaXJlY3Rpb24gPT09ICdsJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4fSwke3kgLSA2fSBIICR7aCArIDMwfSBsIDAsMTIgTCAke3h9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eCAtIDMwfSwke3kgLSA2fSBIICR7aH0gbCAwLDEyIEwgJHt4IC0gMzB9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gbWFpbiBsaW5lIGJpZnVyY2F0ZSBoZXJlIHRvIGJlY29tZSB0aGUgYnJhbmNoIGxpbmVcclxuICAgICAgICAgICAgICAgIC8vIGFuZCBwYXRoIHJldHVybiBoZXJlIGFyZSBvbmx5IGJyYW5jaCBsaW5lXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVG9kbzogZGlzYWJsZSBsb3dlciBicmFuY2hcclxuICAgICAgICAgICAgICAgIGxldCBbeGIsIHliXSA9IHBhdGhbJ2JpZnVyY2F0ZSddLCBbeG0sIHltXSA9IHBhdGhbJ2VuZCddXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ21haW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gJ2wnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5bSA+IHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW4gbGluZSwgbGVmdCBkaXJlY3Rpb24sIHVwcGVyIHRvIGNlbnRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eCAtIDMwfSwke3kgLSA2fSBIICR7eGJ9IEwgJHt4bX0sJHt5bSAtIDZ9IGwgMCwxMiBMICR7eGJ9LCR7eWIgKyA2fSBMICR7eCAtIDQyfSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW4gbGluZSwgbGVmdCBkaXJlY3Rpb24sIGNlbnRlciB0byB1cHBlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBzYW1lIGFzIHRoZSBvdGhlciwgYnV0IHJlcGxhY2UgeCB3aXRoIHhtIGFuZCB4bSB3aXRoIHhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3htfSwke3ltIC0gNn0gSCAke3hifSBMICR7eH0sJHt5IC0gNn0gbCAwLDEyIEwgJHt4Yn0sJHt5YiArIDZ9IEwgJHt4bX0sJHt5bSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeW0gPiB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWluIGxpbmUsIHJpZ2h0IGRpcmVjdGlvbiwgdXBwZXIgdG8gY2VudGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4fSwke3kgLSA2fSBIICR7eGJ9IEwgJHt4bX0sJHt5bSAtIDZ9IGwgMCwxMiBMICR7eGJ9LCR7eWIgKyA2fSBMICR7eH0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWluIGxpbmUsIHJpZ2h0IGRpcmVjdGlvbiwgY2VudGVyIHRvIHVwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHNhbWUgYXMgdGhlIG90aGVyLCBidXQgcmVwbGFjZSB4IHdpdGggeG0gYW5kIHhtIHdpdGggeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eG19LCR7eW0gLSA2fSBIICR7eGJ9IEwgJHt4fSwke3kgLSA2fSBsIDAsMTIgTCAke3hifSwke3liICsgNn0gTCAke3htfSwke3ltICsgNn0gWmBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHlwZSA9PT0gJ3Bhc3MnXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gJ2wnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5bSA+IHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhc3MgbGluZSwgbGVmdCBkaXJlY3Rpb24sIHVwcGVyIHRvIGNlbnRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eCAtIDMwfSwke3kgLSA2fSBIICR7eGJ9IEwgJHt4bX0sJHt5bSAtIDZ9IGwgMCwxMiBMICR7eGJ9LCR7eWIgKyA2fSBMICR7eCAtIDMwfSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhc3MgbGluZSwgbGVmdCBkaXJlY3Rpb24sIGNlbnRlciB0byB1cHBlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBzYW1lIGFzIHRoZSBvdGhlciwgYnV0IHJlcGxhY2UgeCB3aXRoIHhtIGFuZCB4bSB3aXRoIHhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3h9LCR7eSAtIDZ9IEwgJHt4Yn0sJHt5YiAtIDZ9IEggJHt4bX0gbCAwLDEyIEwgJHt4Yn0sJHt5YiArIDZ9IEwgJHt4fSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHltID4geSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFzcyBsaW5lLCByaWdodCBkaXJlY3Rpb24sIHVwcGVyIHRvIGNlbnRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eCAtIDMwfSwke3kgLSA2fSBIICR7eGJ9IEwgJHt4bX0sJHt5bSAtIDZ9IGwgMCwxMiBMICR7eGJ9LCR7eWIgKyA2fSBMICR7eCAtIDMwfSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhc3MgbGluZSwgcmlnaHQgZGlyZWN0aW9uLCBjZW50ZXIgdG8gdXBwZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgc2FtZSBhcyB0aGUgb3RoZXIsIGJ1dCByZXBsYWNlIHggd2l0aCB4bSBhbmQgeG0gd2l0aCB4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4fSwke3kgLSA2fSBMICR7eGJ9LCR7eWIgLSA2fSBIICR7eG19IGwgMCwxMiBMICR7eGJ9LCR7eWIgKyA2fSBMICR7eH0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBkcmF3IHRoZSBsaW5lIGluIHJhaWxtYXBcclxuICAgIGRyYXdMaW5lKCkge1xyXG4gICAgICAgICQoJy5ybWctbGluZScpLnJlbW92ZUNsYXNzKCdybWctbGluZV9fbXRyJykuYWRkQ2xhc3MoJ3JtZy1saW5lX19zaG1ldHJvJyk7XHJcblxyXG4gICAgICAgIHRoaXMuYnJhbmNoZXMubWFwKGJyYW5jaCA9PiB7XHJcbiAgICAgICAgICAgIHZhciBsaW5lTWFpblN0bnMgPSBicmFuY2guZmlsdGVyKHN0bklkID0+IHRoaXMuc3RhdGlvbnNbc3RuSWRdLnN0YXRlID49IDApO1xyXG4gICAgICAgICAgICB2YXIgbGluZVBhc3NTdG5zID0gYnJhbmNoLmZpbHRlcihzdG5JZCA9PiB0aGlzLnN0YXRpb25zW3N0bklkXS5zdGF0ZSA8PSAwKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsaW5lTWFpblN0bnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lUGFzc1N0bnMgPSBicmFuY2g7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsaW5lTWFpblN0bnMuZmlsdGVyKHN0bklkID0+IGxpbmVQYXNzU3Rucy5pbmRleE9mKHN0bklkKSAhPT0gLTEpLmxlbmd0aCA9PSAwICYmIGxpbmVNYWluU3Rucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHR3byBzZXQgZGlzam9pbnRcclxuICAgICAgICAgICAgICAgIGlmIChsaW5lUGFzc1N0bnNbMF0gPT09IGJyYW5jaFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIC0xIC0xIDEgMVxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQYXNzU3Rucy5wdXNoKGxpbmVNYWluU3Ruc1swXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVNYWluU3Ruc1swXSA9PT0gYnJhbmNoWzBdICYmIGxpbmVNYWluU3Ruc1tsaW5lTWFpblN0bnMubGVuZ3RoIC0gMV0gPT09IGJyYW5jaFticmFuY2gubGVuZ3RoIC0gMV0gJiYgbGluZVBhc3NTdG5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQYXNzU3RucyA9IGJyYW5jaDtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lTWFpblN0bnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMSAxIC0xIC0xXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZVBhc3NTdG5zLnVuc2hpZnQobGluZU1haW5TdG5zW2xpbmVNYWluU3Rucy5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGRyYXcgdGhlIG1haW4gbGluZVxyXG4gICAgICAgICAgICBsZXQgcGF0aCA9IHRoaXMuX2xpbmVQYXRoKGxpbmVNYWluU3RucywgJ21haW4nKVxyXG4gICAgICAgICAgICBpZiAocGF0aCB8fCBwYXRoICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjbGluZV9tYWluJykuYXBwZW5kKCQoJzxwYXRoPicsIHsgaWQ6ICdsaW5lX21haW5fcGF0aCcsIGQ6IHBhdGggfSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBkcmF3IHRoZSBwYXNzIGxpbmVcclxuICAgICAgICAgICAgcGF0aCA9IHRoaXMuX2xpbmVQYXRoKGxpbmVQYXNzU3RucywgJ3Bhc3MnKVxyXG4gICAgICAgICAgICBpZiAocGF0aCB8fCBwYXRoICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjbGluZV9wYXNzJykuYXBwZW5kKCQoJzxwYXRoPicsIHsgaWQ6ICdsaW5lX3Bhc3NfcGF0aCcsIGQ6IHBhdGggfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJyNsaW5lX21haW4nKS5odG1sKCQoJyNsaW5lX21haW4nKS5odG1sKCkpO1xyXG4gICAgICAgICQoJyNsaW5lX3Bhc3MnKS5odG1sKCQoJyNsaW5lX3Bhc3MnKS5odG1sKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbGxUaGVtZUNvbG91cigpIHtcclxuICAgICAgICBzdXBlci5maWxsVGhlbWVDb2xvdXIoKTtcclxuXHJcbiAgICAgICAgLy8gdGhpcyB3aWxsIGFkZCB0aGUgc3Ryb2tlIG9mIHRoZSBzdGF0aW9uIGNpcmNsZVxyXG4gICAgICAgIC8vIGhvd2V2ZXIgdGhlIHN0cm9rZSBwYXRoIGlzIGRlZmluZWQgaW4gaW5kZXguaHRtbFxyXG4gICAgICAgIC8vIHdoaWNoIG1hZGUgY2hhbmdpbmcgc3RhdGlvbiBzdHlsZSBzdHJhbmdlXHJcbiAgICAgICAgJCgncGF0aCMnICsgc3RhdGlvbl9pZCkuYXR0cignc3Ryb2tlJywgdGhpcy5fdGhlbWVDb2xvdXIpO1xyXG4gICAgICAgICQoJ3BhdGgjaW50Ml9zaCcpLmF0dHIoJ3N0cm9rZScsIHRoaXMuX3RoZW1lQ29sb3VyKTtcclxuXHJcbiAgICAgICAgLy8gcGFzcyBzdHJva2Ugc2hvdWxkIGJlIGFkZGVkIHNvbWV3aGVyZSBlbHNlXHJcbiAgICAgICAgLy8gYnV0IEkgY2FuJ3QgZmlndXJlIGl0IG91dFxyXG4gICAgICAgICQoJ3BhdGgjc3RuX3NoX3Bhc3MnKS5hdHRyKCdzdHJva2UnLCAnI2FhYScpO1xyXG4gICAgICAgICQoJ3BhdGgjaW50Ml9zaF9wYXNzJykuYXR0cignc3Ryb2tlJywgJyNhYWEnKTtcclxuXHJcbiAgICAgICAgLy8gdGhlIHJhaWxtYXAgbWFpbiBsaW5lXHJcbiAgICAgICAgJCgncGF0aCNsaW5lX21haW5fcGF0aCcpLmF0dHIoJ2ZpbGwnLCB0aGlzLl90aGVtZUNvbG91cilcclxuICAgICAgICAkKCdwYXRoI2xpbmVfcGFzc19wYXRoJykuYXR0cignZmlsbCcsICcjYWFhJylcclxuXHJcbiAgICAgICAgLy8gdGhlIGxhc3QgZGVjb3JhdGlvbiBsaW5lXHJcbiAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHRoaXMuX2RpcmVjdGlvbiA9PSAnbCcgPyAnbGVmdCcgOiAncmlnaHQnXHJcbiAgICAgICAgJChgI2xpbmVfc2htZXRyb18ke2RpcmVjdGlvbn1gKS5hdHRyKCdmaWxsJywgdGhpcy5fdGhlbWVDb2xvdXIpXHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9saW5lTmFtZXNbMF0ubWF0Y2goLyhcXGQqKVxcdysvKSkge1xyXG4gICAgICAgICAgICAvLyB0aGUgbGluZSBzdGFydHMgd2l0aCBudW1iZXJcclxuICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbnVtYmVyID4gdGV4dCcpLmF0dHIoJ2ZpbGwnLCAnI2ZmZicpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdGhlIGxpbmUgc3RhcnRzIHdpdGggbGV0dGVyXHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX25hbWVfdGV4dCcpLmF0dHIoJ2ZpbGwnLCAnI2ZmZicpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVN0bk5hbWVCZygpIHtcclxuICAgICAgICAkKCcjY3VycmVudF9iZycpLmhpZGUoKTsgIC8vIGZpeCB0aGUgbXlzdGVyaW91cyBibGFjayByZWN0XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIG1ha2Ugc3VyZSB0aGUgbGluZSBpcyBkcmF3IGJlZm9yZSBjb2xvclxyXG4gICAgc3RhdGljIGluaXRTVkcobGluZSkge1xyXG4gICAgICAgIGxpbmUuZHJhd1NWR0ZyYW1lKCk7XHJcbiAgICAgICAgbGluZS5zaG93RnJhbWVPdXRlcigpO1xyXG4gICAgICAgIGxpbmUuZHJhd1N0bnMoKTtcclxuXHJcbiAgICAgICAgLy8gY2hhbmdlIHRoZSBmdW5jIGNhbGwgaGVyZVxyXG4gICAgICAgIGxpbmUuZHJhd0xpbmUoKTtcclxuICAgICAgICBsaW5lLmZpbGxUaGVtZUNvbG91cigpO1xyXG4gICAgICAgIC8vIGNoYW5nZSB0aGUgZnVuYyBjYWxsIGhlcmVcclxuXHJcbiAgICAgICAgbGluZS5kcmF3U3RyaXAoKTtcclxuICAgICAgICBsaW5lLmRyYXdEZXN0SW5mbygpO1xyXG4gICAgICAgIGxpbmUubG9hZEZvbnRzKCk7XHJcbiAgICAgICAgbGluZS51cGRhdGVTdG5OYW1lQmcoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXdyaXRlIHRoaXMgdG8gY2FsbCBmaWxsVGhlbWVDb2xvdXIgd2hlbiBmbGlwIGRpcmVjdGlvblxyXG4gICAgc2V0IGRpcmVjdGlvbih2YWwpIHtcclxuICAgICAgICBzdXBlci5kaXJlY3Rpb24gPSB2YWxcclxuXHJcbiAgICAgICAgdGhpcy5maWxsVGhlbWVDb2xvdXIoKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJld3JpdGUgdGhpcyB0byBjYWxsIGZpbGxUaGVtZUNvbG91ciB3aGVuIHNldCBjdXJyZW50IHN0YXRpb25cclxuICAgIHNldCBjdXJyZW50U3RuSWQodmFsKSB7XHJcbiAgICAgICAgc3VwZXIuY3VycmVudFN0bklkID0gdmFsXHJcblxyXG4gICAgICAgIHRoaXMuZmlsbFRoZW1lQ29sb3VyKClcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXdyaXRlIHRoaXMgdG8gZ2V0IGRyYXdTdG5zIGFuZCByZWNhbGxlZFxyXG4gICAgdXBkYXRlU3RuVHJhbnNmZXIoc3RuSWQ6IElELCB0eXBlLCBpbmZvID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZVN0blRyYW5zZmVyKHN0bklkLCB0eXBlLCBpbmZvKVxyXG5cclxuICAgICAgICB0aGlzLmZpbGxUaGVtZUNvbG91cigpXHJcblxyXG4gICAgICAgIC8vIGNsZWFyIHRoZSBvcmlnaW5hbCBzdGF0aW9uc1xyXG4gICAgICAgICQoJyNzdG5faWNvbnMnKS5lbXB0eSgpXHJcbiAgICAgICAgdGhpcy5kcmF3U3RucygpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGNhbGwgZmlsbFRoZW1lQ29sb3VyIHdoZW4gYWRkIHN0YXRpb25cclxuICAgIGFkZFN0bihwcmVwOiAnYmVmb3JlJyB8ICdhZnRlcicsIHN0bklkOiBJRCwgbG9jLCBlbmQ6IElEKTogW0lELCBTdGF0aW9uSW5mb10ge1xyXG4gICAgICAgIGxldCBbbmV3SWQsIG5ld0luZm9dID0gc3VwZXIuYWRkU3RuKHByZXAsIHN0bklkLCBsb2MsIGVuZClcclxuICAgICAgICB0aGlzLmZpbGxUaGVtZUNvbG91cigpXHJcbiAgICAgICAgcmV0dXJuIFtuZXdJZCwgbmV3SW5mb11cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXdyaXRlIHRoaXMgdG8gY2hhbmdlIHRoZSByYWlsbWFwIHBvc2l0aW9uXHJcbiAgICBzZXQgeVBjKHZhbCkge1xyXG4gICAgICAgIHN1cGVyLnlQYyA9IHZhbFxyXG5cclxuICAgICAgICBsZXQgeSA9IHZhbCAqIHRoaXMuX3N2Z0hlaWdodCAvIDUwO1xyXG4gICAgICAgICQoJ2cjbWFpbicpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoMCwke3l9KWApO1xyXG4gICAgfVxyXG5cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9