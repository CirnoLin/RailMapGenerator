(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{16:function(t,e,s){"use strict";s.r(e);var n=s(8),i=s(1);class a extends i.m{constructor(t,e){super(t,e),this.stnNum=e.num}get _nameShift(){return!1}get _tickRotation(){return this.y>0?180:0}get _dxdy(){var t=this.name[1].split("\\").length;let e;return e=this._nameShift?0===this._tickRotation?-9:16+12*(t-1)*Math.cos(-45):0===this._tickRotation?(24+12*(t-1))*Math.cos(-45):-6,[e,0===this._tickRotation?-25.921875-12*(t-1)*Math.cos(-45):17.5]}get iconHTML(){var[t,e]=-1==this.state?["stn_sh_pass","Pass"]:["stn_sh","Future"];return $("<g>",{transform:`translate(${this.x},${this.y})`}).append($("<use>",{"xlink:href":"#"+t,class:"rmg-stn"}))}get nameHTML(){let[t,e]=this._dxdy;return $("<g>",{transform:`translate(${this.x-t},${this.y+e})rotate(-60)`,"text-anchor":0===this._tickRotation?"start":"end",class:"Name Future"}).append($("<text>").addClass("rmg-name__zh rmg-name__shmetro--station").text(this.name[0])).append($("<text>",{dy:15,class:"rmg-name__en rmg-name__shmetro--station"}).text(this.name[1].split("\\")[0]).append($("<tspan>",{x:0,dy:12}).text(this.name[1].split("\\")[1])))}}class r extends a{constructor(t,e){super(t,e),this._intInfos=e.interchange[0]}get html(){return $("<g>",{id:this.id}).append(...this.ungrpHTML)}get ungrpHTML(){return[this.iconHTML,this.nameHTML]}get ungrpIconHTML(){return[...this.intTickHTML]}get iconHTML(){var[t,e]=-1==this.state?["int2_sh_pass","Pass"]:["int2_sh","Future"];return $("<g>",{transform:`translate(${this.x},${this.y})`}).append($("<use>",{"xlink:href":"#"+t,class:"rmg-stn",stroke:this._intInfos[i.d.colour]}))}get nameHTML(){let[t,e]=this._dxdy;return $("<g>",{transform:`translate(${this.x-t},${this.y+e})`}).append($("<g>",{id:`rmg-name__shmetro--${this.id}`,"text-anchor":0===this._tickRotation?"start":"end",class:"Name Future"}).append($("<text>").addClass("rmg-name__zh rmg-name__shmetro--station").text(this.name[0])).append($("<text>",{dy:15,class:"rmg-name__en rmg-name__shmetro--station"}).text(this.name[1].split("\\")[0]).append($("<tspan>",{x:0,dy:12}).text(this.name[1].split("\\")[1]))))}get intTickHTML(){let t=[],e=$(`#rmg-name__shmetro--${this.id}`),s=e.get(0).getBoundingClientRect(),n=s.right-s.left+5;this._intInfos.map((e,s)=>{var a=e[i.d.colour],r=$("<use>",{"xlink:href":"#int_sh",fill:a,transform:`translate(${n+25*s},-12)`,class:"rmg-line__shmetro rmg-line__change"});-1==this.state&&r.addClass("rmg-line__pass");let o=String(e[i.d.nameZH]).match(/(\d*)\w+/);if(o)var h=o[0];else h=String(e[i.d.nameZH]);var l=$("<text>",{transform:`translate(${n+6+25*s},8)`,class:"rmg-name__zh rmg-name__shmetro--line_name"}).text(h);t.push(r,l)});let a=e.parent();return a.attr("transform",`${a.attr("transform")}rotate(-45)`),t}get _nameClass(){return-1==this.state?"Pass":"Future"}}s.d(e,"RMGLineSH",(function(){return o}));class o extends n.a{constructor(t){super(t)}_initStnInstance(t,e){switch(e.change_type){case"int2":case"int3_l":case"int3_r":return new r(t,e);case"osi11_ul":case"osi11_pl":case"osi11_ur":case"osi11_pr":case"osi12_ul":case"osi12_pl":case"osi12_ur":case"osi12_pr":case"osi21_ul":case"osi21_pl":case"osi21_ur":case"osi21_pr":case"osi22_ul":case"osi22_pl":case"osi22_ur":case"osi22_pr":default:return new a(t,e)}}drawDestInfo(){$("#station_info_shmetro > #platform > text").text(this._platformNum);var t=310+$("#station_info_shmetro > #dest_text")[0].getBoundingClientRect().width+45+50,e="l"==this._direction?1:-1,s=(this._svgDestWidth-e*t)/20;s="l"==this._direction?s:this._svgDestWidth-20;var n=90*(1-e);$("#station_info_shmetro > #arrow_left_use").attr("transform",`translate(${s},135)rotate(${n})`);var i=s+285*e;if($("#station_info_shmetro > #platform").attr("transform",`translate(${i},130)`),"r"===this._direction)var a="end",r=.8*this._svgDestWidth;else a="start",r=.2*this._svgDestWidth;$("#station_info_shmetro > #dest_text").attr({transform:`translate(${r},135)`,"text-anchor":a});var[o,h]=[[],[]];this[`${this._direction}ValidDests`].forEach(t=>{o.push(this.stations[t].name[0]),h.push(this.stations[t].name[1])}),$("#station_info_shmetro > #dest_text > text:first-child").text(`往${o.join("，")}`),$("#station_info_shmetro > #dest_text > text:last-child").text(`To ${h.join(", ")}`);let l="l"===this._direction?this._svgDestWidth:320;var[_,m]=this._lineNames,d=_.match(/(\d*)\w+/);d?(l-=180,_="号线",$("#station_info_shmetro > #line_number > rect").attr({style:`fill:${this._themeColour}`,transform:`translate(${l-120},70)`}),$("#station_info_shmetro > #line_number > text").text(d[0]).attr("transform",`translate(${l-100},170)`)):(l-=280,$("#station_info_shmetro > #line_number > rect").attr({style:`fill:${this._themeColour}`,transform:`translate(${l-10},60)`,width:260,height:150}),$("#station_info_shmetro > #line_number > text").hide(),$("#station_info_shmetro > #line_name_text > text:last-child").attr("dx",10)),$("#station_info_shmetro > #line_name_text > text:first-child").text(_),$("#station_info_shmetro > #line_name_text > text:last-child").text(m),$("#station_info_shmetro > #line_name_text").attr({transform:`translate(${l},135)`,"text-anchor":"start"});let c="l"==this._direction?"left":"right";$("#line_shmetro_use").attr({"xlink:href":`#line_shmetro_${c}`,transform:"translate(0,220)"})}drawStns(){for(let[t,e]of Object.entries(this.stations))["linestart","lineend"].includes(t)||$("#stn_icons").append(e.html);$("#stn_icons").html($("#stn_icons").html());for(let[t,e]of Object.entries(this.stations).filter(t=>t[1]instanceof r))$(`#rmg-name__shmetro--${t}`).parent().append(e.ungrpIconHTML);$("#stn_icons").html($("#stn_icons").html())}_stnYShare(t){if(["linestart","lineend"].includes(t)||this._stnIndegree(t)>1||this._stnOutdegree(t)>1)return 0;var e=this.stations[t].parents[0];return e?1==this._stnOutdegree(e)?this._stnYShare(e):0==this.stations[e].children.indexOf(t)?3:0:0}_linePath(t,e){var[s,n,i]=[],a={};const r=30;if(t.forEach(t=>{var[e,r]=["_stnRealX","_stnRealY"].map(e=>this[e](t));if(!n&&0!==n)return[s,i,n]=[t,e,r],void(a.start=[e,r]);0===r?r!=n&&(a.bifurcate=[i,n]):r!=n&&(a.bifurcate=[e,r]),a.end=[e,r],[s,i,n]=[t,e,r]}),a.hasOwnProperty("start")){if(a.hasOwnProperty("end")){if(a.hasOwnProperty("bifurcate")){let[t,s]=a.start,[n,i]=(a.end[0],a.bifurcate),[o,h]=a.end;return"main"===e?"l"===this._direction?h>s?`M ${t-r},${s-6} H ${n+r} L ${o},${h-6} l 0,12 L ${n+r},${i+6} L ${t-r-12},${s+6} Z`:`M ${o},${h-6} H ${n-r} L ${t},${s-6} l 0,12 L ${n-r},${i+6} L ${o},${h+6} Z`:h>s?`M ${t},${s-6} H ${n+r} L ${o},${h-6} l 0,12 L ${n+r},${i+6} L ${t},${s+6} Z`:`M ${o+r},${h-6} H ${n-r} L ${t},${s-6} l 0,12 L ${n-r},${i+6} L ${o+r+12},${h+6} Z`:(this._direction,h>s?`M ${t-r},${s-6} H ${n+r} L ${o},${h-6} l 0,12 L ${n+r},${i+6} L ${t-r},${s+6} Z`:`M ${t},${s-6} L ${n-r},${i-6} H ${o+r} l 0,12 L ${n-r},${i+6} L ${t},${s+6} Z`)}{let[t,s]=a.start,n=a.end[0];return"main"===e?"l"===this._direction?`M ${t-r},${s-6} H ${n} l 0,12 L ${t-42},${s+6} Z`:`M ${t},${s-6} H ${n+r} l 12,12 L ${t},${s+6} Z`:(this._direction,`M ${t-r},${s-6} H ${n+r} l 0,12 L ${t-r},${s+6} Z`)}}{let[t,s]=a.start;return"main"===e?"l"===this._direction?`M ${t},${s-6} L ${t-r},${s-6} l -12,12 L ${t},${s+6} Z`:`M ${t},${s-6} L ${t+r},${s-6} l 12,12 L ${t},${s+6} Z`:"l"===this._direction?`M ${t},${s-6} L ${t+r},${s-6} l 0,12 L ${t-r},${s+6} Z`:`M ${t-r},${s-6} L ${t},${s-6} l 0,12 L ${t-r},${s+6} Z`}}return""}drawLine(){$(".rmg-line").removeClass("rmg-line__mtr").addClass("rmg-line__shmetro"),this.branches.map(t=>{var e=t.filter(t=>this.stations[t].state>=0),s=t.filter(t=>this.stations[t].state<=0);1===e.length&&(s=t),0==e.filter(t=>-1!==s.indexOf(t)).length&&e.length&&(s[0]===t[0]?s.push(e[0]):e[0]===t[0]&&e[e.length-1]===t[t.length-1]&&s.length?(s=t,e=[]):s.unshift(e[e.length-1]));let n=this._linePath(e,"main");(n||""!=n)&&$("#line_main").append($("<path>",{id:"line_main_path",d:n})),n=this._linePath(s,"pass"),(n||""!=n)&&$("#line_pass").append($("<path>",{id:"line_pass_path",d:n}))}),$("#line_main").html($("#line_main").html()),$("#line_pass").html($("#line_pass").html())}fillThemeColour(){super.fillThemeColour(),$("path#stn_sh").attr("stroke",this._themeColour),$("path#int2_sh").attr("stroke",this._themeColour),$("path#stn_sh_pass").attr("stroke","#aaa"),$("path#int2_sh_pass").attr("stroke","#aaa"),$("path#line_main_path").attr("fill",this._themeColour),$("path#line_pass_path").attr("fill","#aaa");let t="l"==this._direction?"left":"right";$(`#line_shmetro_${t}`).attr("fill",this._themeColour),this._lineNames[0].match(/(\d*)\w+/)?$("#station_info_shmetro > #line_number > text").attr("fill","#fff"):$("#station_info_shmetro > #line_name_text").attr("fill","#fff")}updateStnNameBg(){$("#current_bg").hide()}static initSVG(t){t.drawSVGFrame(),t.showFrameOuter(),t.drawStns(),t.drawLine(),t.fillThemeColour(),t.drawStrip(),t.drawDestInfo(),t.loadFonts(),t.updateStnNameBg()}set direction(t){super.direction=t,this.fillThemeColour()}set currentStnId(t){super.currentStnId=t,this.fillThemeColour()}updateStnTransfer(t,e,s=null){super.updateStnTransfer(t,e,s),this.fillThemeColour(),$("#stn_icons").empty(),this.drawStns()}addStn(t,e,s,n){let[i,a]=super.addStn(t,e,s,n);return this.fillThemeColour(),[i,a]}set yPc(t){super.yPc=t;let e=t*this._svgHeight/50;$("g#main").attr("transform",`translate(0,${e})`)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvU3RhdGlvbi9TdGF0aW9uU0gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xpbmUvTGluZVNILnRzIl0sIm5hbWVzIjpbImlkIiwiZGF0YSIsInN1cGVyIiwidGhpcyIsInN0bk51bSIsIm51bSIsInkiLCJuYW1lRU5MbiIsIm5hbWUiLCJzcGxpdCIsImxlbmd0aCIsImR4IiwiX25hbWVTaGlmdCIsIl90aWNrUm90YXRpb24iLCJNYXRoIiwiY29zIiwiaWNvblR5cGUiLCJudW1DbGFzcyIsInN0YXRlIiwic3RhdGlvbl9pZCIsIiQiLCJ0cmFuc2Zvcm0iLCJ4IiwiYXBwZW5kIiwiY2xhc3MiLCJkeSIsIl9keGR5IiwiYWRkQ2xhc3MiLCJ0ZXh0IiwiX2ludEluZm9zIiwiaW50ZXJjaGFuZ2UiLCJ1bmdycEhUTUwiLCJpY29uSFRNTCIsIm5hbWVIVE1MIiwiaW50VGlja0hUTUwiLCJzdHJva2UiLCJjb2xvdXIiLCJsaW5lRWxlbXMiLCJzdG5OYW1lRWxlbSIsImJjciIsImdldCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInJpZ2h0IiwibGVmdCIsIm1hcCIsInN0biIsImluZGV4IiwibGluZUljb25Db2xvdXIiLCJsaW5lSWNvbkVsZW0iLCJmaWxsIiwibGluZU51bWJlciIsIlN0cmluZyIsIm5hbWVaSCIsIm1hdGNoIiwibGluZU5hbWUiLCJsaW5lTmFtZUVsZW0iLCJwdXNoIiwic3RuSW5mb0VsZW0iLCJwYXJlbnQiLCJhdHRyIiwicGFyYW0iLCJzdG5JZCIsInN0bkluZm8iLCJjaGFuZ2VfdHlwZSIsIl9wbGF0Zm9ybU51bSIsImZsYWdMZW5ndGgiLCJ3aWR0aCIsImlzTGVmdCIsIl9kaXJlY3Rpb24iLCJhcnJvd1giLCJfc3ZnRGVzdFdpZHRoIiwiYXJyb3dSb3RhdGUiLCJwbGF0Zm9ybU51bVgiLCJ0eHRBbmNob3IiLCJkZXN0TmFtZVgiLCJkZXN0aW5hdGlvbnNfemgiLCJkZXN0aW5hdGlvbnNfZW4iLCJmb3JFYWNoIiwic3RhdGlvbnMiLCJqb2luIiwibGluZU5hbWVYIiwibGluZU5hbWVaSCIsImxpbmVOYW1lRU4iLCJfbGluZU5hbWVzIiwiX3RoZW1lQ29sb3VyIiwiaGlkZSIsImRpcmVjdGlvbiIsInN0bkluc3RhbmNlIiwiT2JqZWN0IiwiZW50cmllcyIsImluY2x1ZGVzIiwiaHRtbCIsImZpbHRlciIsInVuZ3JwSWNvbkhUTUwiLCJfc3RuSW5kZWdyZWUiLCJfc3RuT3V0ZGVncmVlIiwic3RuUHJlZCIsInBhcmVudHMiLCJfc3RuWVNoYXJlIiwiY2hpbGRyZW4iLCJpbmRleE9mIiwic3RuSWRzIiwidHlwZSIsInByZXZJZCIsInByZXZZIiwicHJldlgiLCJwYXRoIiwiZSIsImZ1biIsImhhc093blByb3BlcnR5IiwieGIiLCJ5YiIsInhtIiwieW0iLCJoIiwicmVtb3ZlQ2xhc3MiLCJicmFuY2hlcyIsImJyYW5jaCIsImxpbmVNYWluU3RucyIsImxpbmVQYXNzU3RucyIsInVuc2hpZnQiLCJfbGluZVBhdGgiLCJkIiwiZmlsbFRoZW1lQ29sb3VyIiwibGluZSIsImRyYXdTVkdGcmFtZSIsInNob3dGcmFtZU91dGVyIiwiZHJhd1N0bnMiLCJkcmF3TGluZSIsImRyYXdTdHJpcCIsImRyYXdEZXN0SW5mbyIsImxvYWRGb250cyIsInVwZGF0ZVN0bk5hbWVCZyIsInZhbCIsImN1cnJlbnRTdG5JZCIsImluZm8iLCJ1cGRhdGVTdG5UcmFuc2ZlciIsImVtcHR5IiwicHJlcCIsImxvYyIsImVuZCIsIm5ld0lkIiwibmV3SW5mbyIsImFkZFN0biIsInlQYyIsIl9zdmdIZWlnaHQiXSwibWFwcGluZ3MiOiJrSEFLQSxNQUFNLFVBQXFCLElBQ3ZCLFlBQVlBLEVBQVFDLEdBQ2hCQyxNQUFNRixFQUFJQyxHQUNWRSxLQUFLQyxPQUFTSCxFQUFLSSxJQUd2QixpQkFBbUIsT0FBTyxFQUMxQixvQkFBc0IsT0FBT0YsS0FBS0csRUFBSSxFQUFJLElBQU0sRUFDaEQsWUFDSSxJQUFJQyxFQUFXSixLQUFLSyxLQUFLLEdBQUdDLE1B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QUFlaUUsT0FJckIsZUFBZXVDLEdBQ1hBLEVBQUtDLGVBQ0xELEVBQUtFLGlCQUNMRixFQUFLRyxXQUdMSCxFQUFLSSxXQUNMSixFQUFLRCxrQkFHTEMsRUFBS0ssWUFDTEwsRUFBS00sZUFDTE4sRUFBS08sWUFDTFAsRUFBS1Esa0JBSVQsY0FBY0MsR0FDVm5JLE1BQU1vRixVQUFZK0MsRUFFbEJsSSxLQUFLd0gsa0JBSVQsaUJBQWlCVSxHQUNibkksTUFBTW9JLGFBQWVELEVBRXJCbEksS0FBS3dILGtCQUlULGtCQUFrQjlELEVBQVd5QyxFQUFNaUMsRUFBTyxNQUN0Q3JJLE1BQU1zSSxrQkFBa0IzRSxFQUFPeUMsRUFBTWlDLEdBRXJDcEksS0FBS3dILGtCQUdMdkcsRUFBRSxjQUFjcUgsUUFDaEJ0SSxLQUFLNEgsV0FJVCxPQUFPVyxFQUEwQjdFLEVBQVc4RSxFQUFLQyxHQUM3QyxJQUFLQyxFQUFPQyxHQUFXNUksTUFBTTZJLE9BQU9MLEVBQU03RSxFQUFPOEUsRUFBS0MsR0FFdEQsT0FEQXpJLEtBQUt3SCxrQkFDRSxDQUFDa0IsRUFBT0MsR0FJbkIsUUFBUVQsR0FDSm5JLE1BQU04SSxJQUFNWCxFQUVaLElBQUkvSCxFQUFJK0gsRUFBTWxJLEtBQUs4SSxXQUFhLEdBQ2hDN0gsRUFBRSxVQUFVdUMsS0FBSyxZQUFhLGVBQWVyRCIsImZpbGUiOiJMaW5lU0gubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUk1HU3RhdGlvbiwgSW50SW5mb1RhZywgSW50ZXJjaGFuZ2VJbmZvIH0gZnJvbSAnLi9TdGF0aW9uJztcclxuaW1wb3J0IHsgSUQsIE5hbWUsIEJyYW5jaEluZm8sIFN0YXRpb25JbmZvIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3Qgc3RhdGlvbl9pZCA9ICdzdG5fc2gnXHJcblxyXG5jbGFzcyBSTUdTdGF0aW9uU0ggZXh0ZW5kcyBSTUdTdGF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGlkOiBJRCwgZGF0YTogU3RhdGlvbkluZm8pIHtcclxuICAgICAgICBzdXBlcihpZCwgZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zdG5OdW0gPSBkYXRhLm51bTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgX25hbWVTaGlmdCgpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICBnZXQgX3RpY2tSb3RhdGlvbigpIHsgcmV0dXJuIHRoaXMueSA+IDAgPyAxODAgOiAwOyB9XHJcbiAgICBnZXQgX2R4ZHkoKSB7XHJcbiAgICAgICAgdmFyIG5hbWVFTkxuID0gdGhpcy5uYW1lWzFdLnNwbGl0KCdcXFxcJykubGVuZ3RoO1xyXG4gICAgICAgIGxldCBkeDogbnVtYmVyO1xyXG4gICAgICAgIGlmICh0aGlzLl9uYW1lU2hpZnQpIHtcclxuICAgICAgICAgICAgZHggPSB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAtOSA6IDE2ICsgKG5hbWVFTkxuIC0gMSkgKiAxMiAqIE1hdGguY29zKC00NSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZHggPSB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAoMjQgKyAobmFtZUVOTG4gLSAxKSAqIDEyKSAqIE1hdGguY29zKC00NSkgOiAtNjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gbGV0IGR4ID0gdGhpcy5fbmFtZVNoaWZ0ID8gLTggOiAoMjQgKyAobmFtZUVOTG4tMSkqMTIpICogTWF0aC5jb3MoLTQ1KTtcclxuICAgICAgICBsZXQgZHkgPSB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAoLTQgLSAyMS45MjE4NzUgLSAobmFtZUVOTG4gLSAxKSAqIDEyICogTWF0aC5jb3MoLTQ1KSkgOiAxNy41O1xyXG4gICAgICAgIC8vIHZhciBkeSA9ICgtNCAtIDIxLjkyMTg3NSAtIChuYW1lRU5Mbi0xKSoxMipNYXRoLmNvcygtNDUpKSAqICh0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAxIDogLTEpO1xyXG4gICAgICAgIHJldHVybiBbZHgsIGR5XVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBpY29uSFRNTCgpIHtcclxuICAgICAgICB2YXIgW2ljb25UeXBlLCBudW1DbGFzc10gPSAodGhpcy5zdGF0ZSA9PSAtMSkgPyBbc3RhdGlvbl9pZCArICdfcGFzcycsICdQYXNzJ10gOiBbc3RhdGlvbl9pZCwgJ0Z1dHVyZSddO1xyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke3RoaXMueH0sJHt0aGlzLnl9KWAgfSlcclxuICAgICAgICAgICAgLmFwcGVuZCgkKCc8dXNlPicsIHsgJ3hsaW5rOmhyZWYnOiAnIycgKyBpY29uVHlwZSwgY2xhc3M6ICdybWctc3RuJyB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWVIVE1MKCkge1xyXG4gICAgICAgIGxldCBbZHgsIGR5XSA9IHRoaXMuX2R4ZHlcclxuICAgICAgICByZXR1cm4gJCgnPGc+Jywge1xyXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZSgke3RoaXMueCAtIGR4fSwke3RoaXMueSArIGR5fSlyb3RhdGUoLTYwKWAsXHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6IHRoaXMuX3RpY2tSb3RhdGlvbiA9PT0gMCA/ICdzdGFydCcgOiAnZW5kJyxcclxuICAgICAgICAgICAgLy8gY2xhc3M6IGBOYW1lICR7dGhpcy5uYW1lQ2xhc3N9YFxyXG4gICAgICAgICAgICBjbGFzczogYE5hbWUgRnV0dXJlYCAgLy8gdG9kbzogZml4IHRoaXNcclxuICAgICAgICB9KS5hcHBlbmQoXHJcbiAgICAgICAgICAgICQoJzx0ZXh0PicpLmFkZENsYXNzKCdybWctbmFtZV9femggcm1nLW5hbWVfX3NobWV0cm8tLXN0YXRpb24nKS50ZXh0KHRoaXMubmFtZVswXSlcclxuICAgICAgICApLmFwcGVuZChcclxuICAgICAgICAgICAgJCgnPHRleHQ+Jywge1xyXG4gICAgICAgICAgICAgICAgZHk6IDE1LCBjbGFzczogJ3JtZy1uYW1lX19lbiBybWctbmFtZV9fc2htZXRyby0tc3RhdGlvbidcclxuICAgICAgICAgICAgfSkudGV4dCh0aGlzLm5hbWVbMV0uc3BsaXQoJ1xcXFwnKVswXSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgJCgnPHRzcGFuPicsIHtcclxuICAgICAgICAgICAgICAgICAgICAneCc6IDAsICdkeSc6IDEyXHJcbiAgICAgICAgICAgICAgICB9KS50ZXh0KHRoaXMubmFtZVsxXS5zcGxpdCgnXFxcXCcpWzFdKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgSW50U3RhdGlvblNIIGV4dGVuZHMgUk1HU3RhdGlvblNIIHtcclxuICAgIHByb3RlY3RlZCBfaW50SW5mb3M6IEludGVyY2hhbmdlSW5mb1tdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlkOiBJRCwgZGF0YTogU3RhdGlvbkluZm8pIHtcclxuICAgICAgICBzdXBlcihpZCwgZGF0YSk7XHJcbiAgICAgICAgdGhpcy5faW50SW5mb3MgPSBkYXRhLmludGVyY2hhbmdlWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJld3JpdGUgdGhpcyB0byBhcHBlbmQgZG9tIGFuZCB0aGVuIGdldEJvdW5kaW5nQ2xpZW50UmVjdFxyXG4gICAgLy8gdG8gZ2V0IHRoZSBleGFjdCBwb3NpdGlvbiB3aGVyZSBpbnQgaWNvbiBjYW4gYmUgZml0XHJcbiAgICBnZXQgaHRtbCgpIHtcclxuICAgICAgICByZXR1cm4gJCgnPGc+JywgeyBpZDogdGhpcy5pZCB9KS5hcHBlbmQoLi4udGhpcy51bmdycEhUTUwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJld3JpdGUgdGhpcyB0byBnZXQgYWxsIGRyYXdpbmcgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXHJcbiAgICBnZXQgdW5ncnBIVE1MKCkge1xyXG4gICAgICAgIHJldHVybiBbdGhpcy5pY29uSFRNTCwgdGhpcy5uYW1lSFRNTF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVuZ3JwSWNvbkhUTUwoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmludFRpY2tIVE1MXVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGludGVyY2hhbmdlIHN0YXRpb24gaWNvbiBvbiBtYWluIGxpbmVcclxuICAgIGdldCBpY29uSFRNTCgpIHtcclxuICAgICAgICB2YXIgW2ljb25UeXBlLCBudW1DbGFzc10gPSAodGhpcy5zdGF0ZSA9PSAtMSkgPyBbJ2ludDJfc2hfcGFzcycsICdQYXNzJ10gOiBbJ2ludDJfc2gnLCAnRnV0dXJlJ107XHJcbiAgICAgICAgcmV0dXJuICQoJzxnPicsIHsgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7dGhpcy54fSwke3RoaXMueX0pYCB9KVxyXG4gICAgICAgICAgICAuYXBwZW5kKCQoJzx1c2U+JywgeyAneGxpbms6aHJlZic6ICcjJyArIGljb25UeXBlLCBjbGFzczogJ3JtZy1zdG4nLCBzdHJva2U6IHRoaXMuX2ludEluZm9zW0ludEluZm9UYWcuY29sb3VyXSB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVndWxhciBzdGF0aW9uIG5hbWVcclxuICAgIGdldCBuYW1lSFRNTCgpIHtcclxuICAgICAgICBsZXQgW2R4LCBkeV0gPSB0aGlzLl9keGR5O1xyXG4gICAgICAgIC8vIHdyYXAgdGhlIG5hbWUsIGRlY3JvX2xpbmUgYW5kIGludF9saW5lIHVuZGVyIGcgaW4gb3JkZXIgdG8gcm90YXRlIGF0IG9uY2VcclxuICAgICAgICByZXR1cm4gJCgnPGc+Jywge1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHt0aGlzLnggLSBkeH0sJHt0aGlzLnkgKyBkeX0pYCwgIC8vcm90YXRlKC02MClcclxuICAgICAgICB9KS5hcHBlbmQoXHJcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBuYW1lIHRleHRcclxuICAgICAgICAgICAgJCgnPGc+Jywge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGBybWctbmFtZV9fc2htZXRyby0tJHt0aGlzLmlkfWAsXHJcbiAgICAgICAgICAgICAgICAndGV4dC1hbmNob3InOiB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAnc3RhcnQnIDogJ2VuZCcsXHJcbiAgICAgICAgICAgICAgICBjbGFzczogYE5hbWUgRnV0dXJlYCAgLy8gdG9kbzogZml4IHRoaXNcclxuICAgICAgICAgICAgfSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgJCgnPHRleHQ+JykuYWRkQ2xhc3MoJ3JtZy1uYW1lX196aCBybWctbmFtZV9fc2htZXRyby0tc3RhdGlvbicpLnRleHQodGhpcy5uYW1lWzBdKVxyXG4gICAgICAgICAgICApLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICQoJzx0ZXh0PicsIHtcclxuICAgICAgICAgICAgICAgICAgICBkeTogMTUsIGNsYXNzOiAncm1nLW5hbWVfX2VuIHJtZy1uYW1lX19zaG1ldHJvLS1zdGF0aW9uJ1xyXG4gICAgICAgICAgICAgICAgfSkudGV4dCh0aGlzLm5hbWVbMV0uc3BsaXQoJ1xcXFwnKVswXSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICQoJzx0c3Bhbj4nLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd4JzogMCwgJ2R5JzogMTJcclxuICAgICAgICAgICAgICAgICAgICB9KS50ZXh0KHRoaXMubmFtZVsxXS5zcGxpdCgnXFxcXCcpWzFdKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGludGVyY2hhbmdlIHN0YXRpb24gaWNvbiBhZnRlciB0aGUgc3RhdGlvbiBuYW1lXHJcbiAgICBnZXQgaW50VGlja0hUTUwoKSB7XHJcbiAgICAgICAgbGV0IGxpbmVFbGVtczogSlF1ZXJ5PEhUTUxFbGVtZW50PltdID0gW11cclxuXHJcbiAgICAgICAgLy8gZ2V0IHRoZSBleGFjdCBzdGF0aW9uIG5hbWUgd2lkdGggc28gdGhhdCB0aGVcclxuICAgICAgICAvLyBpbnRlcmNoYW5nZSBzdGF0aW9uIGljb24gY2FuIGJlIHJpZ2h0IGFmdGVyIHRoZSBzdGF0aW9uIG5hbWVcclxuICAgICAgICBsZXQgc3RuTmFtZUVsZW0gPSAkKGAjcm1nLW5hbWVfX3NobWV0cm8tLSR7dGhpcy5pZH1gKVxyXG4gICAgICAgIGxldCBiY3IgPSBzdG5OYW1lRWxlbS5nZXQoMCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuICAgICAgICBsZXQgZHggPSBiY3IucmlnaHQgLSBiY3IubGVmdCArIDVcclxuXHJcbiAgICAgICAgdGhpcy5faW50SW5mb3MubWFwKChzdG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGludGVyY2hhbmdlIGxpbmUgaWNvbiBhZnRlciBzdGF0aW9uIG5hbWVcclxuICAgICAgICAgICAgdmFyIGxpbmVJY29uQ29sb3VyID0gc3RuW0ludEluZm9UYWcuY29sb3VyXTtcclxuICAgICAgICAgICAgdmFyIGxpbmVJY29uRWxlbSA9ICQoJzx1c2U+Jywge1xyXG4gICAgICAgICAgICAgICAgJ3hsaW5rOmhyZWYnOiAnI2ludF9zaCcsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBsaW5lSWNvbkNvbG91cixcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke2R4ICsgaW5kZXggKiAyNX0sLTEyKWAsXHJcbiAgICAgICAgICAgICAgICBjbGFzczogJ3JtZy1saW5lX19zaG1ldHJvIHJtZy1saW5lX19jaGFuZ2UnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGxpbmVJY29uRWxlbS5hZGRDbGFzcygncm1nLWxpbmVfX3Bhc3MnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gbGluZSBzdGFydHMgd2l0aCBudW1iZXJzIG9yIGxldHRlcnNcclxuICAgICAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSBTdHJpbmcoc3RuW0ludEluZm9UYWcubmFtZVpIXSkubWF0Y2goLyhcXGQqKVxcdysvKVxyXG4gICAgICAgICAgICBpZiAobGluZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmVOYW1lID0gbGluZU51bWJlclswXVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmVOYW1lID0gU3RyaW5nKHN0bltJbnRJbmZvVGFnLm5hbWVaSF0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaW50ZXJjaGFuZ2UgbGluZSBuYW1lXHJcbiAgICAgICAgICAgIHZhciBsaW5lTmFtZUVsZW0gPSAkKCc8dGV4dD4nLCB7XHJcbiAgICAgICAgICAgICAgICAvLyBUb2RvOiBmaXggdGhpcyBoYXJkLWNvZGVkIGNlbnRlcig2KSBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7ZHggKyA2ICsgaW5kZXggKiAyNX0sOClgLFxyXG4gICAgICAgICAgICAgICAgY2xhc3M6ICdybWctbmFtZV9femggcm1nLW5hbWVfX3NobWV0cm8tLWxpbmVfbmFtZScsXHJcbiAgICAgICAgICAgIH0pLnRleHQobGluZU5hbWUpXHJcblxyXG4gICAgICAgICAgICBsaW5lRWxlbXMucHVzaChsaW5lSWNvbkVsZW0sIGxpbmVOYW1lRWxlbSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAvLyByb3RhdGUgdGhlIHN0YXRpb24gaW5mbyBub3dcclxuICAgICAgICAvLyBvdGhlciB3aXNlIHRoZSBiY3Igd2lsbCBiZSBpbmFjY3VyYXRlIGR1ZSB0byB0aGUgcm90YXRpb25cclxuICAgICAgICBsZXQgc3RuSW5mb0VsZW0gPSBzdG5OYW1lRWxlbS5wYXJlbnQoKTtcclxuICAgICAgICBzdG5JbmZvRWxlbS5hdHRyKCd0cmFuc2Zvcm0nLCBgJHtzdG5JbmZvRWxlbS5hdHRyKCd0cmFuc2Zvcm0nKX1yb3RhdGUoLTQ1KWApXHJcblxyXG4gICAgICAgIHJldHVybiBsaW5lRWxlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF9uYW1lQ2xhc3MoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnN0YXRlID09IC0xKSA/ICdQYXNzJyA6ICdGdXR1cmUnO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBSTUdTdGF0aW9uU0gsIEludFN0YXRpb25TSCwgc3RhdGlvbl9pZCB9O1xyXG4iLCJpbXBvcnQgeyBSTUdMaW5lIH0gZnJvbSAnLi9MaW5lJztcclxuaW1wb3J0IHsgUk1HU3RhdGlvblNILCBJbnRTdGF0aW9uU0gsIHN0YXRpb25faWQgfSBmcm9tICcuLi9TdGF0aW9uL1N0YXRpb25TSCc7XHJcbmltcG9ydCB7IFJNR1N0YXRpb24gfSBmcm9tICcuLi9TdGF0aW9uL1N0YXRpb24nO1xyXG5cclxuaW1wb3J0IHsgSUQsIE5hbWUsIFN0YXRpb25JbmZvLCBSTUdQYXJhbSwgc2V0UGFyYW1zIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJNR0xpbmVTSCBleHRlbmRzIFJNR0xpbmUge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW0pIHtcclxuICAgICAgICBzdXBlcihwYXJhbSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2luaXRTdG5JbnN0YW5jZShzdG5JZDogSUQsIHN0bkluZm86IFN0YXRpb25JbmZvKTogUk1HU3RhdGlvbiB7XHJcbiAgICAgICAgc3dpdGNoIChzdG5JbmZvLmNoYW5nZV90eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2ludDInOlxyXG4gICAgICAgICAgICBjYXNlICdpbnQzX2wnOlxyXG4gICAgICAgICAgICBjYXNlICdpbnQzX3InOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRTdGF0aW9uU0goc3RuSWQsIHN0bkluZm8pO1xyXG4gICAgICAgICAgICBjYXNlICdvc2kxMV91bCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTExX3BsJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMTFfdXInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kxMV9wcic6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTEyX3VsJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMTJfcGwnOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kxMl91cic6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTEyX3ByJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjFfdWwnOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kyMV9wbCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTIxX3VyJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjFfcHInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kyMl91bCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTIyX3BsJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjJfdXInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kyMl9wcic6XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJNR1N0YXRpb25TSChzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGRyYXcgdGhlIGRlc3RpbmF0aW9uXHJcbiAgICBkcmF3RGVzdEluZm8oKSB7XHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI3BsYXRmb3JtID4gdGV4dCcpLnRleHQodGhpcy5fcGxhdGZvcm1OdW0pO1xyXG5cclxuICAgICAgICB2YXIgYmNyID0gJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2Rlc3RfdGV4dCcpWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHZhciBmbGFnTGVuZ3RoID0gMTYwICsgMTUwICsgYmNyLndpZHRoICsgNDUgKyA1MDtcclxuXHJcblxyXG5cclxuICAgICAgICAvLyBhcnJvd1xyXG4gICAgICAgIHZhciBpc0xlZnQgPSAodGhpcy5fZGlyZWN0aW9uID09ICdsJykgPyAxIDogLTE7XHJcbiAgICAgICAgdmFyIGFycm93WCA9ICh0aGlzLl9zdmdEZXN0V2lkdGggLSBpc0xlZnQgKiBmbGFnTGVuZ3RoKSAvIDIwO1xyXG4gICAgICAgIGFycm93WCA9ICh0aGlzLl9kaXJlY3Rpb24gPT0gJ2wnKSA/IGFycm93WCA6IHRoaXMuX3N2Z0Rlc3RXaWR0aCAtIDIwO1xyXG4gICAgICAgIHZhciBhcnJvd1JvdGF0ZSA9IDkwICogKDEgLSBpc0xlZnQpO1xyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNhcnJvd19sZWZ0X3VzZScpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHthcnJvd1h9LDEzNSlyb3RhdGUoJHthcnJvd1JvdGF0ZX0pYCk7XHJcblxyXG4gICAgICAgIC8vIG5vdCBpbiB1c2Ugbm93XHJcbiAgICAgICAgdmFyIHBsYXRmb3JtTnVtWCA9IGFycm93WCArIGlzTGVmdCAqICgxNjAgKyA1MCArIDc1KTtcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjcGxhdGZvcm0nKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7cGxhdGZvcm1OdW1YfSwxMzApYCk7XHJcblxyXG4gICAgICAgIC8vIGxpc3QgdGhlIGRlc3RpbmF0aW9uIHRleHRcclxuICAgICAgICAvLyBUb2RvOiBmaXggc3ZnX2Rlc3Rfd2lkdGgqMC44LCB0aGlzIGhhcyBvbmx5IGJlZW4gdGVzdGVkIG9uIDEwMDAgd2lkdGhcclxuICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSAncicpIHtcclxuICAgICAgICAgICAgdmFyIHR4dEFuY2hvciA9ICdlbmQnO1xyXG4gICAgICAgICAgICB2YXIgZGVzdE5hbWVYID0gdGhpcy5fc3ZnRGVzdFdpZHRoICogMC44O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciB0eHRBbmNob3IgPSAnc3RhcnQnO1xyXG4gICAgICAgICAgICB2YXIgZGVzdE5hbWVYID0gdGhpcy5fc3ZnRGVzdFdpZHRoICogMC4yO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjZGVzdF90ZXh0JykuYXR0cih7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke2Rlc3ROYW1lWH0sMTM1KWAsXHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6IHR4dEFuY2hvclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBmb3IgZWFjaCBsZWZ0IHZhbGlkIGRlc3RpbmF0aW9ucywgZ2V0IHRoZSBuYW1lIGZyb20gaWRcclxuICAgICAgICB2YXIgW2Rlc3RpbmF0aW9uc196aCwgZGVzdGluYXRpb25zX2VuXTogU3RyaW5nW11bXSA9IFtbXSwgW11dXHJcbiAgICAgICAgdGhpc1tgJHt0aGlzLl9kaXJlY3Rpb259VmFsaWREZXN0c2BdLmZvckVhY2goc3RuID0+IHtcclxuICAgICAgICAgICAgZGVzdGluYXRpb25zX3poLnB1c2godGhpcy5zdGF0aW9uc1tzdG5dLm5hbWVbMF0pXHJcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uc19lbi5wdXNoKHRoaXMuc3RhdGlvbnNbc3RuXS5uYW1lWzFdKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNkZXN0X3RleHQgPiB0ZXh0OmZpcnN0LWNoaWxkJykudGV4dChg5b6AJHtkZXN0aW5hdGlvbnNfemguam9pbihcIu+8jFwiKX1gKVxyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNkZXN0X3RleHQgPiB0ZXh0Omxhc3QtY2hpbGQnKS50ZXh0KGBUbyAke2Rlc3RpbmF0aW9uc19lbi5qb2luKFwiLCBcIil9YClcclxuXHJcbiAgICAgICAgLy8gcHJlcGFyZSBmb3IgdGhlIGxpbmUgbmFtZVxyXG4gICAgICAgIGxldCBsaW5lTmFtZVggPSB0aGlzLl9kaXJlY3Rpb24gPT09ICdsJyA/IHRoaXMuX3N2Z0Rlc3RXaWR0aCA6IDMyMFxyXG4gICAgICAgIHZhciBbbGluZU5hbWVaSCwgbGluZU5hbWVFTl0gPSB0aGlzLl9saW5lTmFtZXM7XHJcblxyXG4gICAgICAgIC8vIGxpbmUgc3RhcnRzIHdpdGggbnVtYmVycyBvciBsZXR0ZXJzXHJcbiAgICAgICAgdmFyIGxpbmVOdW1iZXIgPSBsaW5lTmFtZVpILm1hdGNoKC8oXFxkKilcXHcrLylcclxuICAgICAgICBpZiAobGluZU51bWJlcikge1xyXG4gICAgICAgICAgICBsaW5lTmFtZVggLT0gMTgwO1xyXG4gICAgICAgICAgICBsaW5lTmFtZVpIID0gXCLlj7fnur9cIlxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9udW1iZXIgPiByZWN0JykuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAnc3R5bGUnOiBgZmlsbDoke3RoaXMuX3RoZW1lQ29sb3VyfWAsXHJcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZSgke2xpbmVOYW1lWCAtIDEyMH0sNzApYFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9udW1iZXIgPiB0ZXh0JylcclxuICAgICAgICAgICAgICAgIC50ZXh0KGxpbmVOdW1iZXJbMF0pXHJcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke2xpbmVOYW1lWCAtIDEwMH0sMTcwKWApXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGluZU5hbWVYIC09IDI4MDtcclxuICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbnVtYmVyID4gcmVjdCcpLmF0dHIoe1xyXG4gICAgICAgICAgICAgICAgJ3N0eWxlJzogYGZpbGw6JHt0aGlzLl90aGVtZUNvbG91cn1gLFxyXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IGB0cmFuc2xhdGUoJHtsaW5lTmFtZVggLSAxMH0sNjApYCxcclxuICAgICAgICAgICAgICAgICd3aWR0aCc6IDI2MCxcclxuICAgICAgICAgICAgICAgICdoZWlnaHQnOiAxNTBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbnVtYmVyID4gdGV4dCcpLmhpZGUoKVxyXG5cclxuICAgICAgICAgICAgLy8gVG9kbzogc2V0IHRoZSBlbmcgaW4gdGhlIG1pZGRsZVxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9uYW1lX3RleHQgPiB0ZXh0Omxhc3QtY2hpbGQnKS5hdHRyKCdkeCcsIDEwKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2V0IHRoZSBsaW5lIG5hbWVcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9uYW1lX3RleHQgPiB0ZXh0OmZpcnN0LWNoaWxkJykudGV4dChsaW5lTmFtZVpIKVxyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX25hbWVfdGV4dCA+IHRleHQ6bGFzdC1jaGlsZCcpLnRleHQobGluZU5hbWVFTilcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9uYW1lX3RleHQnKS5hdHRyKHtcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7bGluZU5hbWVYfSwxMzUpYCxcclxuICAgICAgICAgICAgJ3RleHQtYW5jaG9yJzogJ3N0YXJ0J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyB0aGUgbGFzdCBkZWNvcmF0aW9uIGxpbmVcclxuICAgICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5fZGlyZWN0aW9uID09ICdsJyA/ICdsZWZ0JyA6ICdyaWdodCdcclxuICAgICAgICAkKCcjbGluZV9zaG1ldHJvX3VzZScpLmF0dHIoe1xyXG4gICAgICAgICAgICAneGxpbms6aHJlZic6IGAjbGluZV9zaG1ldHJvXyR7ZGlyZWN0aW9ufWAsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgwLDIyMClgLFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGFwcGVuZCBkb20gYW5kIHRoZW4gZ2V0Qm91bmRpbmdDbGllbnRSZWN0XHJcbiAgICAvLyB0byBnZXQgdGhlIGV4YWN0IHBvc2l0aW9uIHdoZXJlIGludCBpY29uIGNhbiBiZSBmaXRcclxuICAgIGRyYXdTdG5zKCkge1xyXG4gICAgICAgIGZvciAobGV0IFtzdG5JZCwgc3RuSW5zdGFuY2VdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3RhdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIGlmIChbJ2xpbmVzdGFydCcsICdsaW5lZW5kJ10uaW5jbHVkZXMoc3RuSWQpKSB7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICQoJyNzdG5faWNvbnMnKS5hcHBlbmQoc3RuSW5zdGFuY2UuaHRtbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJyNzdG5faWNvbnMnKS5odG1sKCQoJyNzdG5faWNvbnMnKS5odG1sKCkpOyAvLyBSZWZyZXNoIERPTVxyXG5cclxuICAgICAgICBmb3IgKGxldCBbc3RuSWQsIHN0bkluc3RhbmNlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN0YXRpb25zKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHN0biA9PiBzdG5bMV0gaW5zdGFuY2VvZiBJbnRTdGF0aW9uU0gpIGFzIFtJRCwgSW50U3RhdGlvblNIXVtdKSB7XHJcbiAgICAgICAgICAgICQoYCNybWctbmFtZV9fc2htZXRyby0tJHtzdG5JZH1gKS5wYXJlbnQoKS5hcHBlbmQoc3RuSW5zdGFuY2UudW5ncnBJY29uSFRNTClcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnI3N0bl9pY29ucycpLmh0bWwoJCgnI3N0bl9pY29ucycpLmh0bWwoKSk7IC8vIFJlZnJlc2ggRE9NXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGNoYW5nZSB0aGUgeSBvZiBicmFuY2ggc3RhdGlvblxyXG4gICAgX3N0bllTaGFyZShzdG5JZCk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKFsnbGluZXN0YXJ0JywgJ2xpbmVlbmQnXS5pbmNsdWRlcyhzdG5JZCkgfHwgdGhpcy5fc3RuSW5kZWdyZWUoc3RuSWQpID4gMSB8fCB0aGlzLl9zdG5PdXRkZWdyZWUoc3RuSWQpID4gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN0blByZWQgPSB0aGlzLnN0YXRpb25zW3N0bklkXS5wYXJlbnRzWzBdO1xyXG4gICAgICAgIGlmIChzdG5QcmVkKSB7XHJcbiAgICAgICAgICAgIC8vIHBhcmVudCBleGlzdFxyXG4gICAgICAgICAgICBpZiAodGhpcy5fc3RuT3V0ZGVncmVlKHN0blByZWQpID09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIG5vIHNpYmxpbmcsIHRoZW4geSBzYW1lIGFzIHBhcmVudFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0bllTaGFyZShzdG5QcmVkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHNpYmxpbmcgZXhpc3RzLCB0aGVuIHkgZGVwZW5kcyBvbiBpdHMgaWR4IG9mIGJlaW5nIGNoaWxkcmVuXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gcmV3cml0ZSB0aGlzIHRvIG1vdmUgdGhlIG1haW4gbGluZSBvbiB0aGUgc2FtZSBoZWlnaHQgb2YgdGhlIHJlc3RcclxuICAgICAgICAgICAgICAgIC8vIGFuZCBicmFuY2ggYSBiaXQgYXdheSBmcm9tIHRoZSBtYWluIGxpbmVcclxuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5zdGF0aW9uc1tzdG5QcmVkXS5jaGlsZHJlbi5pbmRleE9mKHN0bklkKSA9PSAwKSA/IDMgOiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbm8gcGFyZW50LCBtdXN0IGJlIGxpbmVzdGFydFxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2xpbmVQYXRoKHN0bklkczogSURbXSwgdHlwZT86ICdtYWluJyB8ICdwYXNzJyk6IHN0cmluZyB7XHJcbiAgICAgICAgdmFyIFtwcmV2SWQsIHByZXZZLCBwcmV2WF06IFtzdHJpbmc/LCBudW1iZXI/LCBudW1iZXI/XSA9IFtdXHJcbiAgICAgICAgdmFyIHBhdGg6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyW10gfSA9IHt9XHJcbiAgICAgICAgY29uc3QgZSA9IDMwXHJcblxyXG4gICAgICAgIHN0bklkcy5mb3JFYWNoKHN0bklkID0+IHtcclxuICAgICAgICAgICAgdmFyIFt4LCB5XSA9IFsnX3N0blJlYWxYJywgJ19zdG5SZWFsWSddLm1hcChmdW4gPT4gdGhpc1tmdW5dKHN0bklkKSlcclxuICAgICAgICAgICAgaWYgKCFwcmV2WSAmJiBwcmV2WSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgW3ByZXZJZCwgcHJldlgsIHByZXZZXSA9IFtzdG5JZCwgeCwgeV07XHJcbiAgICAgICAgICAgICAgICBwYXRoWydzdGFydCddID0gW3gsIHldO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIG1lcmdlIGJhY2sgdG8gbWFpbiBsaW5lXHJcbiAgICAgICAgICAgICAgICBpZiAoeSAhPSBwcmV2WSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGhbJ2JpZnVyY2F0ZSddID0gW3ByZXZYLCBwcmV2WV1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBicmFuY2ggbGluZVxyXG4gICAgICAgICAgICAgICAgaWYgKHkgIT0gcHJldlkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoWydiaWZ1cmNhdGUnXSA9IFt4LCB5XVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhdGhbJ2VuZCddID0gW3gsIHldO1xyXG4gICAgICAgICAgICBbcHJldklkLCBwcmV2WCwgcHJldlldID0gW3N0bklkLCB4LCB5XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gZ2VuZXJhdGUgcGF0aFxyXG4gICAgICAgIGlmICghcGF0aC5oYXNPd25Qcm9wZXJ0eSgnc3RhcnQnKSkge1xyXG4gICAgICAgICAgICAvLyBubyBsaW5lIGdlbmVyYXRlZFxyXG4gICAgICAgICAgICAvLyBrZXlzIGluIHBhdGg6IG5vbmVcclxuICAgICAgICAgICAgcmV0dXJuICcnXHJcbiAgICAgICAgfSBlbHNlIGlmICghcGF0aC5oYXNPd25Qcm9wZXJ0eSgnZW5kJykpIHtcclxuICAgICAgICAgICAgLy8gbGl0dGUgbGluZSAob25seSBiZXlvbmQgdGVybWluYWwgc3RhdGlvbilcclxuICAgICAgICAgICAgLy8ga2V5cyBpbiBwYXRoOiBzdGFydFxyXG4gICAgICAgICAgICBsZXQgW3gsIHldID0gcGF0aFsnc3RhcnQnXVxyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ21haW4nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjdXJyZW50IGF0IHRlcm1pbmFsKGVuZCkgc3RhdGlvbiwgZHJhdyB0aGUgbGl0dGUgbWFpbiBsaW5lXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSAnbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4fSwke3kgLSA2fSBMICR7eCAtIGV9LCR7eSAtIDZ9IGwgLTEyLDEyIEwgJHt4fSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4fSwke3kgLSA2fSBMICR7eCArIGV9LCR7eSAtIDZ9IGwgMTIsMTIgTCAke3h9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0eXBlID09PSAncGFzcydcclxuICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgYXQgdGVybWluYWwoc3RhcnQpIHN0YXRpb24sIGRyYXcgdGhlIGxpdHRlIHBhc3MgbGluZVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gJ2wnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eH0sJHt5IC0gNn0gTCAke3ggKyBlfSwke3kgLSA2fSBsIDAsMTIgTCAke3ggLSBlfSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4IC0gZX0sJHt5IC0gNn0gTCAke3h9LCR7eSAtIDZ9IGwgMCwxMiBMICR7eCAtIGV9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIXBhdGguaGFzT3duUHJvcGVydHkoJ2JpZnVyY2F0ZScpKSB7XHJcbiAgICAgICAgICAgIC8vIGdlbmVyYWwgbWFpbiBsaW5lXHJcbiAgICAgICAgICAgIC8vIGtleXMgaW4gcGF0aDogc3RhcnQsIGVuZFxyXG4gICAgICAgICAgICBsZXQgW3gsIHldID0gcGF0aFsnc3RhcnQnXSwgaCA9IHBhdGhbJ2VuZCddWzBdXHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbWFpbicpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kaXJlY3Rpb24gPT09ICdsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3ggLSBlfSwke3kgLSA2fSBIICR7aH0gbCAwLDEyIEwgJHt4IC0gNDJ9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3h9LCR7eSAtIDZ9IEggJHtoICsgZX0gbCAxMiwxMiBMICR7eH0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHR5cGUgPT09ICdwYXNzJ1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gJ2wnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eCAtIGV9LCR7eSAtIDZ9IEggJHtoICsgZX0gbCAwLDEyIEwgJHt4IC0gZX0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eCAtIGV9LCR7eSAtIDZ9IEggJHtoICsgZX0gbCAwLDEyIEwgJHt4IC0gZX0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG1haW4gbGluZSBiaWZ1cmNhdGUgaGVyZSB0byBiZWNvbWUgdGhlIGJyYW5jaCBsaW5lXHJcbiAgICAgICAgICAgIC8vIGFuZCBwYXRoIHJldHVybiBoZXJlIGFyZSBvbmx5IGJyYW5jaCBsaW5lXHJcbiAgICAgICAgICAgIC8vIGtleXMgaW4gcGF0aDogc3RhcnQsIGJpZnVyY2F0ZSwgZW5kXHJcblxyXG4gICAgICAgICAgICAvLyBUb2RvOiBkaXNhYmxlIGxvd2VyIGJyYW5jaFxyXG4gICAgICAgICAgICBsZXQgW3gsIHldID0gcGF0aFsnc3RhcnQnXSwgaCA9IHBhdGhbJ2VuZCddWzBdXHJcbiAgICAgICAgICAgIGxldCBbeGIsIHliXSA9IHBhdGhbJ2JpZnVyY2F0ZSddLCBbeG0sIHltXSA9IHBhdGhbJ2VuZCddXHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbWFpbicpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kaXJlY3Rpb24gPT09ICdsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh5bSA+IHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFpbiBsaW5lLCBsZWZ0IGRpcmVjdGlvbiwgY2VudGVyIHRvIHVwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3ggLSBlfSwke3kgLSA2fSBIICR7eGIgKyBlfSBMICR7eG19LCR7eW0gLSA2fSBsIDAsMTIgTCAke3hiICsgZX0sJHt5YiArIDZ9IEwgJHt4IC0gZSAtIDEyfSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW4gbGluZSwgbGVmdCBkaXJlY3Rpb24sIHVwcGVyIHRvIGNlbnRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHNhbWUgYXMgdGhlIG90aGVyLCBidXQgcmVwbGFjZSB4IHdpdGggeG0gYW5kIHhtIHdpdGggeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4bX0sJHt5bSAtIDZ9IEggJHt4YiAtIGV9IEwgJHt4fSwke3kgLSA2fSBsIDAsMTIgTCAke3hiIC0gZX0sJHt5YiArIDZ9IEwgJHt4bX0sJHt5bSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeW0gPiB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW4gbGluZSwgcmlnaHQgZGlyZWN0aW9uLCB1cHBlciB0byBjZW50ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eH0sJHt5IC0gNn0gSCAke3hiICsgZX0gTCAke3htfSwke3ltIC0gNn0gbCAwLDEyIEwgJHt4YiArIGV9LCR7eWIgKyA2fSBMICR7eH0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWluIGxpbmUsIHJpZ2h0IGRpcmVjdGlvbiwgY2VudGVyIHRvIHVwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgc2FtZSBhcyB0aGUgb3RoZXIsIGJ1dCByZXBsYWNlIHggd2l0aCB4bSBhbmQgeG0gd2l0aCB4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3htICsgZX0sJHt5bSAtIDZ9IEggJHt4YiAtIGV9IEwgJHt4fSwke3kgLSA2fSBsIDAsMTIgTCAke3hiIC0gZX0sJHt5YiArIDZ9IEwgJHt4bSArIGUgKyAxMn0sJHt5bSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gdHlwZSA9PT0gJ3Bhc3MnXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSAnbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeW0gPiB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhc3MgbGluZSwgbGVmdCBkaXJlY3Rpb24sIGNlbnRlciB0byB1cHBlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4IC0gZX0sJHt5IC0gNn0gSCAke3hiICsgZX0gTCAke3htfSwke3ltIC0gNn0gbCAwLDEyIEwgJHt4YiArIGV9LCR7eWIgKyA2fSBMICR7eCAtIGV9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFzcyBsaW5lLCBsZWZ0IGRpcmVjdGlvbiwgdXBwZXIgdG8gY2VudGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgc2FtZSBhcyB0aGUgb3RoZXIsIGJ1dCByZXBsYWNlIHggd2l0aCB4bSBhbmQgeG0gd2l0aCB4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3h9LCR7eSAtIDZ9IEwgJHt4YiAtIGV9LCR7eWIgLSA2fSBIICR7eG0gKyBlfSBsIDAsMTIgTCAke3hiIC0gZX0sJHt5YiArIDZ9IEwgJHt4fSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHltID4geSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXNzIGxpbmUsIHJpZ2h0IGRpcmVjdGlvbiwgdXBwZXIgdG8gY2VudGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3ggLSBlfSwke3kgLSA2fSBIICR7eGIgKyBlfSBMICR7eG19LCR7eW0gLSA2fSBsIDAsMTIgTCAke3hiICsgZX0sJHt5YiArIDZ9IEwgJHt4IC0gZX0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXNzIGxpbmUsIHJpZ2h0IGRpcmVjdGlvbiwgY2VudGVyIHRvIHVwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgc2FtZSBhcyB0aGUgb3RoZXIsIGJ1dCByZXBsYWNlIHggd2l0aCB4bSBhbmQgeG0gd2l0aCB4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3h9LCR7eSAtIDZ9IEwgJHt4YiAtIGV9LCR7eWIgLSA2fSBIICR7eG0gKyBlfSBsIDAsMTIgTCAke3hiIC0gZX0sJHt5YiArIDZ9IEwgJHt4fSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBkcmF3IHRoZSBsaW5lIGluIHJhaWxtYXBcclxuICAgIGRyYXdMaW5lKCkge1xyXG4gICAgICAgICQoJy5ybWctbGluZScpLnJlbW92ZUNsYXNzKCdybWctbGluZV9fbXRyJykuYWRkQ2xhc3MoJ3JtZy1saW5lX19zaG1ldHJvJyk7XHJcblxyXG4gICAgICAgIHRoaXMuYnJhbmNoZXMubWFwKGJyYW5jaCA9PiB7XHJcbiAgICAgICAgICAgIHZhciBsaW5lTWFpblN0bnMgPSBicmFuY2guZmlsdGVyKHN0bklkID0+IHRoaXMuc3RhdGlvbnNbc3RuSWRdLnN0YXRlID49IDApO1xyXG4gICAgICAgICAgICB2YXIgbGluZVBhc3NTdG5zID0gYnJhbmNoLmZpbHRlcihzdG5JZCA9PiB0aGlzLnN0YXRpb25zW3N0bklkXS5zdGF0ZSA8PSAwKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsaW5lTWFpblN0bnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lUGFzc1N0bnMgPSBicmFuY2g7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsaW5lTWFpblN0bnMuZmlsdGVyKHN0bklkID0+IGxpbmVQYXNzU3Rucy5pbmRleE9mKHN0bklkKSAhPT0gLTEpLmxlbmd0aCA9PSAwICYmIGxpbmVNYWluU3Rucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHR3byBzZXQgZGlzam9pbnRcclxuICAgICAgICAgICAgICAgIGlmIChsaW5lUGFzc1N0bnNbMF0gPT09IGJyYW5jaFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIC0xIC0xIDEgMVxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQYXNzU3Rucy5wdXNoKGxpbmVNYWluU3Ruc1swXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVNYWluU3Ruc1swXSA9PT0gYnJhbmNoWzBdICYmIGxpbmVNYWluU3Ruc1tsaW5lTWFpblN0bnMubGVuZ3RoIC0gMV0gPT09IGJyYW5jaFticmFuY2gubGVuZ3RoIC0gMV0gJiYgbGluZVBhc3NTdG5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQYXNzU3RucyA9IGJyYW5jaDtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lTWFpblN0bnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMSAxIC0xIC0xXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZVBhc3NTdG5zLnVuc2hpZnQobGluZU1haW5TdG5zW2xpbmVNYWluU3Rucy5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGRyYXcgdGhlIG1haW4gbGluZVxyXG4gICAgICAgICAgICBsZXQgcGF0aCA9IHRoaXMuX2xpbmVQYXRoKGxpbmVNYWluU3RucywgJ21haW4nKVxyXG4gICAgICAgICAgICBpZiAocGF0aCB8fCBwYXRoICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjbGluZV9tYWluJykuYXBwZW5kKCQoJzxwYXRoPicsIHsgaWQ6ICdsaW5lX21haW5fcGF0aCcsIGQ6IHBhdGggfSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBkcmF3IHRoZSBwYXNzIGxpbmVcclxuICAgICAgICAgICAgcGF0aCA9IHRoaXMuX2xpbmVQYXRoKGxpbmVQYXNzU3RucywgJ3Bhc3MnKVxyXG4gICAgICAgICAgICBpZiAocGF0aCB8fCBwYXRoICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjbGluZV9wYXNzJykuYXBwZW5kKCQoJzxwYXRoPicsIHsgaWQ6ICdsaW5lX3Bhc3NfcGF0aCcsIGQ6IHBhdGggfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJyNsaW5lX21haW4nKS5odG1sKCQoJyNsaW5lX21haW4nKS5odG1sKCkpO1xyXG4gICAgICAgICQoJyNsaW5lX3Bhc3MnKS5odG1sKCQoJyNsaW5lX3Bhc3MnKS5odG1sKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbGxUaGVtZUNvbG91cigpIHtcclxuICAgICAgICBzdXBlci5maWxsVGhlbWVDb2xvdXIoKTtcclxuXHJcbiAgICAgICAgLy8gdGhpcyB3aWxsIGFkZCB0aGUgc3Ryb2tlIG9mIHRoZSBzdGF0aW9uIGNpcmNsZVxyXG4gICAgICAgIC8vIGhvd2V2ZXIgdGhlIHN0cm9rZSBwYXRoIGlzIGRlZmluZWQgaW4gaW5kZXguaHRtbFxyXG4gICAgICAgIC8vIHdoaWNoIG1hZGUgY2hhbmdpbmcgc3RhdGlvbiBzdHlsZSBzdHJhbmdlXHJcbiAgICAgICAgJCgncGF0aCMnICsgc3RhdGlvbl9pZCkuYXR0cignc3Ryb2tlJywgdGhpcy5fdGhlbWVDb2xvdXIpO1xyXG4gICAgICAgICQoJ3BhdGgjaW50Ml9zaCcpLmF0dHIoJ3N0cm9rZScsIHRoaXMuX3RoZW1lQ29sb3VyKTtcclxuXHJcbiAgICAgICAgLy8gcGFzcyBzdHJva2Ugc2hvdWxkIGJlIGFkZGVkIHNvbWV3aGVyZSBlbHNlXHJcbiAgICAgICAgLy8gYnV0IEkgY2FuJ3QgZmlndXJlIGl0IG91dFxyXG4gICAgICAgICQoJ3BhdGgjc3RuX3NoX3Bhc3MnKS5hdHRyKCdzdHJva2UnLCAnI2FhYScpO1xyXG4gICAgICAgICQoJ3BhdGgjaW50Ml9zaF9wYXNzJykuYXR0cignc3Ryb2tlJywgJyNhYWEnKTtcclxuXHJcbiAgICAgICAgLy8gdGhlIHJhaWxtYXAgbGluZVxyXG4gICAgICAgICQoJ3BhdGgjbGluZV9tYWluX3BhdGgnKS5hdHRyKCdmaWxsJywgdGhpcy5fdGhlbWVDb2xvdXIpXHJcbiAgICAgICAgJCgncGF0aCNsaW5lX3Bhc3NfcGF0aCcpLmF0dHIoJ2ZpbGwnLCAnI2FhYScpXHJcblxyXG4gICAgICAgIC8vIHRoZSBsYXN0IGRlY29yYXRpb24gbGluZVxyXG4gICAgICAgIGxldCBkaXJlY3Rpb24gPSB0aGlzLl9kaXJlY3Rpb24gPT0gJ2wnID8gJ2xlZnQnIDogJ3JpZ2h0J1xyXG4gICAgICAgICQoYCNsaW5lX3NobWV0cm9fJHtkaXJlY3Rpb259YCkuYXR0cignZmlsbCcsIHRoaXMuX3RoZW1lQ29sb3VyKVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fbGluZU5hbWVzWzBdLm1hdGNoKC8oXFxkKilcXHcrLykpIHtcclxuICAgICAgICAgICAgLy8gdGhlIGxpbmUgc3RhcnRzIHdpdGggbnVtYmVyXHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX251bWJlciA+IHRleHQnKS5hdHRyKCdmaWxsJywgJyNmZmYnKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRoZSBsaW5lIHN0YXJ0cyB3aXRoIGxldHRlclxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9uYW1lX3RleHQnKS5hdHRyKCdmaWxsJywgJyNmZmYnKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTdG5OYW1lQmcoKSB7XHJcbiAgICAgICAgJCgnI2N1cnJlbnRfYmcnKS5oaWRlKCk7ICAvLyBmaXggdGhlIG15c3RlcmlvdXMgYmxhY2sgcmVjdFxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJld3JpdGUgdGhpcyB0byBtYWtlIHN1cmUgdGhlIGxpbmUgaXMgZHJhdyBiZWZvcmUgY29sb3JcclxuICAgIHN0YXRpYyBpbml0U1ZHKGxpbmUpIHtcclxuICAgICAgICBsaW5lLmRyYXdTVkdGcmFtZSgpO1xyXG4gICAgICAgIGxpbmUuc2hvd0ZyYW1lT3V0ZXIoKTtcclxuICAgICAgICBsaW5lLmRyYXdTdG5zKCk7XHJcblxyXG4gICAgICAgIC8vIGNoYW5nZSB0aGUgZnVuYyBjYWxsIGhlcmVcclxuICAgICAgICBsaW5lLmRyYXdMaW5lKCk7XHJcbiAgICAgICAgbGluZS5maWxsVGhlbWVDb2xvdXIoKTtcclxuICAgICAgICAvLyBjaGFuZ2UgdGhlIGZ1bmMgY2FsbCBoZXJlXHJcblxyXG4gICAgICAgIGxpbmUuZHJhd1N0cmlwKCk7XHJcbiAgICAgICAgbGluZS5kcmF3RGVzdEluZm8oKTtcclxuICAgICAgICBsaW5lLmxvYWRGb250cygpO1xyXG4gICAgICAgIGxpbmUudXBkYXRlU3RuTmFtZUJnKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGNhbGwgZmlsbFRoZW1lQ29sb3VyIHdoZW4gZmxpcCBkaXJlY3Rpb25cclxuICAgIHNldCBkaXJlY3Rpb24odmFsKSB7XHJcbiAgICAgICAgc3VwZXIuZGlyZWN0aW9uID0gdmFsXHJcblxyXG4gICAgICAgIHRoaXMuZmlsbFRoZW1lQ29sb3VyKClcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXdyaXRlIHRoaXMgdG8gY2FsbCBmaWxsVGhlbWVDb2xvdXIgd2hlbiBzZXQgY3VycmVudCBzdGF0aW9uXHJcbiAgICBzZXQgY3VycmVudFN0bklkKHZhbCkge1xyXG4gICAgICAgIHN1cGVyLmN1cnJlbnRTdG5JZCA9IHZhbFxyXG5cclxuICAgICAgICB0aGlzLmZpbGxUaGVtZUNvbG91cigpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGdldCBkcmF3U3RucyBhbmQgcmVjYWxsZWRcclxuICAgIHVwZGF0ZVN0blRyYW5zZmVyKHN0bklkOiBJRCwgdHlwZSwgaW5mbyA9IG51bGwpIHtcclxuICAgICAgICBzdXBlci51cGRhdGVTdG5UcmFuc2ZlcihzdG5JZCwgdHlwZSwgaW5mbylcclxuXHJcbiAgICAgICAgdGhpcy5maWxsVGhlbWVDb2xvdXIoKVxyXG5cclxuICAgICAgICAvLyBjbGVhciB0aGUgb3JpZ2luYWwgc3RhdGlvbnNcclxuICAgICAgICAkKCcjc3RuX2ljb25zJykuZW1wdHkoKVxyXG4gICAgICAgIHRoaXMuZHJhd1N0bnMoKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJld3JpdGUgdGhpcyB0byBjYWxsIGZpbGxUaGVtZUNvbG91ciB3aGVuIGFkZCBzdGF0aW9uXHJcbiAgICBhZGRTdG4ocHJlcDogJ2JlZm9yZScgfCAnYWZ0ZXInLCBzdG5JZDogSUQsIGxvYywgZW5kOiBJRCk6IFtJRCwgU3RhdGlvbkluZm9dIHtcclxuICAgICAgICBsZXQgW25ld0lkLCBuZXdJbmZvXSA9IHN1cGVyLmFkZFN0bihwcmVwLCBzdG5JZCwgbG9jLCBlbmQpXHJcbiAgICAgICAgdGhpcy5maWxsVGhlbWVDb2xvdXIoKVxyXG4gICAgICAgIHJldHVybiBbbmV3SWQsIG5ld0luZm9dXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGNoYW5nZSB0aGUgcmFpbG1hcCBwb3NpdGlvblxyXG4gICAgc2V0IHlQYyh2YWwpIHtcclxuICAgICAgICBzdXBlci55UGMgPSB2YWxcclxuXHJcbiAgICAgICAgbGV0IHkgPSB2YWwgKiB0aGlzLl9zdmdIZWlnaHQgLyA1MDtcclxuICAgICAgICAkKCdnI21haW4nKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsJHt5fSlgKTtcclxuICAgIH1cclxuXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==