(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{16:function(t,e,s){"use strict";s.r(e);var n=s(7),a=s(1);class i extends a.l{constructor(t,e){super(t,e),this.stnNum=e.num}get _nameShift(){return!1}get _tickRotation(){return this.y>0?180:0}get _dxdy(){var t=this.name[1].split("\\").length;let e;return e=this._nameShift?0===this._tickRotation?-9:16+12*(t-1)*Math.cos(-45):0===this._tickRotation?(24+12*(t-1))*Math.cos(-45):-6,[e,0===this._tickRotation?-25.921875-12*(t-1)*Math.cos(-45):17.5]}get iconHTML(){var[t,e]=-1==this.state?["stn_sh_pass","Pass"]:["stn_sh","Future"];return $("<g>",{transform:`translate(${this.x},${this.y})`}).append($("<use>",{"xlink:href":"#"+t,class:"rmg-stn"}))}get nameHTML(){let[t,e]=this._dxdy;return $("<g>",{transform:`translate(${this.x-t},${this.y+e})rotate(-60)`,"text-anchor":0===this._tickRotation?"start":"end",class:"Name Future"}).append($("<text>").addClass("rmg-name__zh rmg-name__shmetro--station").text(this.name[0])).append($("<text>",{dy:15,class:"rmg-name__en rmg-name__shmetro--station"}).text(this.name[1].split("\\")[0]).append($("<tspan>",{x:0,dy:12}).text(this.name[1].split("\\")[1])))}}class r extends i{constructor(t,e){super(t,e),this._intInfos=e.interchange[0][0]}get ungrpHTML(){return[this.iconHTML,this.nameHTML,...this.intTickHTML]}get iconHTML(){var[t,e]=-1==this.state?["int2_sh_pass","Pass"]:["int2_sh","Future"];return $("<g>",{transform:`translate(${this.x},${this.y})`}).append($("<use>",{"xlink:href":"#"+t,class:"rmg-stn",stroke:this._intInfos[a.d.colour]}))}get nameHTML(){let[t,e]=this._dxdy;return $("<g>",{transform:`translate(${this.x-t},${this.y+e})`}).append($("<g>",{"text-anchor":0===this._tickRotation?"start":"end",class:"Name Future"}).append($("<text>").addClass("rmg-name__zh rmg-name__shmetro--station").text(this.name[0])).append($("<text>",{dy:15,class:"rmg-name__en rmg-name__shmetro--station"}).text(this.name[1].split("\\")[0]).append($("<tspan>",{x:0,dy:12}).text(this.name[1].split("\\")[1]))))}get intTickHTML(){var t=1==this.namePos?180:0,e=this._intInfos[a.d.colour],s=$("<use>",{"xlink:href":"#int_sh",fill:e,transform:`translate(10,-10)rotate(${t})`,class:"rmg-line__shmetro rmg-line__change"});-1==this.state&&s.addClass("rmg-line__pass");var n=String(this._intInfos[a.d.nameZH]).match(/(\d*)\w+/);if(n)var i=n[0];else i=String(this._intInfos[a.d.nameZH]);return[s,$("<text>",{transform:`translate(15,10)rotate(${t})`,class:"rmg-name__zh rmg-name__shmetro--line_name"}).text(i)]}get _nameClass(){return-1==this.state?"Pass":"Future"}}var h=s(0);s.d(e,"RMGLineSH",(function(){return o}));class o extends n.a{constructor(t){super(t)}_initStnInstance(t,e){switch(e.change_type){case"int2":return new r(t,e);default:return new i(t,e)}}drawLine(){$(".rmg-line").removeClass("rmg-line__mtr").addClass("rmg-line__shmetro"),this.branches.map(t=>{var e=t.filter(t=>this.stations[t].state>=0),s=t.filter(t=>this.stations[t].state<=0);1===e.length&&(s=t),0==e.filter(t=>-1!==s.indexOf(t)).length&&e.length&&(s[0]===t[0]?s.push(e[0]):e[0]===t[0]&&e[e.length-1]===t[t.length-1]&&s.length?(s=t,e=[]):s.unshift(e[e.length-1]));var n=this._linePath(e),[a,i,r]=n.match(/[\d.]+/g).map(t=>Number(t));n="r"===this._direction?`M ${a},${i-6} H ${r+30} l 12,12 L ${a},${i+6} Z`:`M ${a-30},${i-6} H ${r} l 0,12 L ${a-42},${i+6} Z`,$("#line_main").append($("<path>",{id:"line_main_path",d:n}));n=this._linePath(s);var[a,i,r]=n.match(/[\d.]+/g).map(t=>Number(t));n="r"===this._direction?`M ${a-30},${i-6} H ${r} l 0,12 L ${a-30},${i+6} Z`:`M ${a},${i-6} H ${r+30} l 0,12 L ${a},${i+6} Z`,$("#line_pass").append($("<path>",{id:"line_pass_path",d:n}))}),$("#line_main").html($("#line_main").html()),$("#line_pass").html($("#line_pass").html())}fillThemeColour(){super.fillThemeColour(),$("path#stn_sh").attr("stroke",this._themeColour),$("path#int2_sh").attr("stroke",this._themeColour),$("path#stn_sh_pass").attr("stroke","#aaa"),$("path#int2_sh_pass").attr("stroke","#aaa"),$("path#line_main_path").attr("fill",this._themeColour),$("path#line_pass_path").attr("fill","#aaa");let t="l"==this._direction?"left":"right";$(`#line_shmetro_${t}`).attr("fill",this._themeColour),this._lineNames[0].match(/(\d*)\w+/)?$("#station_info_shmetro > #line_number > text").attr("fill","#fff"):$("#station_info_shmetro > #line_name_text").attr("fill","#fff")}drawDestInfo(){$("#station_info_shmetro > #platform > text").text(this._platformNum);var t=310+$("#station_info_shmetro > #dest_text")[0].getBoundingClientRect().width+45+50,e="l"==this._direction?1:-1,s=(this._svgDestWidth-e*t)/20;s="l"==this._direction?s:this._svgDestWidth-20;var n=90*(1-e);$("#station_info_shmetro > #arrow_left_use").attr("transform",`translate(${s},135)rotate(${n})`);var a=s+285*e;if($("#station_info_shmetro > #platform").attr("transform",`translate(${a},130)`),"r"===this._direction)var i="end",r=.8*this._svgDestWidth;else i="start",r=.2*this._svgDestWidth;$("#station_info_shmetro > #dest_text").attr({transform:`translate(${r},135)`,"text-anchor":i});var[h,o]=["",""];this[`${this._direction}ValidDests`].forEach(t=>{h+=this.stations[t].name[0],o+=this.stations[t].name[1]}),$("#station_info_shmetro > #dest_text > text:first-child").text(`往${h}`),$("#station_info_shmetro > #dest_text > text:last-child").text(`To ${o}`);let l="l"===this._direction?this._svgDestWidth:320;var[_,m]=this._lineNames,d=_.match(/(\d*)\w+/);d?(l-=180,_="号线",$("#station_info_shmetro > #line_number > rect").attr({style:`fill:${this._themeColour}`,transform:`translate(${l-120},70)`}),$("#station_info_shmetro > #line_number > text").text(d[0]).attr("transform",`translate(${l-100},170)`)):(l-=280,$("#station_info_shmetro > #line_number > rect").attr({style:`fill:${this._themeColour}`,transform:`translate(${l-10},60)`,width:260,height:150}),$("#station_info_shmetro > #line_number > text").hide(),$("#station_info_shmetro > #line_name_text > text:last-child").attr("dx",10)),$("#station_info_shmetro > #line_name_text > text:first-child").text(_),$("#station_info_shmetro > #line_name_text > text:last-child").text(m),$("#station_info_shmetro > #line_name_text").attr({transform:`translate(${l},135)`,"text-anchor":"start"});let f="l"==this._direction?"left":"right";$("#line_shmetro_use").attr({"xlink:href":`#line_shmetro_${f}`,transform:"translate(0,220)"})}updateStnNameBg(){$("#current_bg").hide()}static initSVG(t){t.drawSVGFrame(),t.showFrameOuter(),t.drawStns(),t.drawLine(),t.fillThemeColour(),t.drawStrip(),t.drawDestInfo(),t.loadFonts(),t.updateStnNameBg()}set direction(t){this._direction=t,Object(h.l)("direction",t);for(let[t,e]of Object.entries(this.stations))["linestart","lineend"].includes(t)||(e.state=this._stnState(t));n.a.clearSVG(),this.drawStns(),this.drawLine(),this.fillThemeColour(),this.drawDestInfo(),this.loadFonts()}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvU3RhdGlvbi9TdGF0aW9uU0gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xpbmUvTGluZVNILnRzIl0sIm5hbWVzIjpbImlkIiwiZGF0YSIsInN1cGVyIiwidGhpcyIsInN0bk51bSIsIm51bSIsInkiLCJuYW1lRU5MbiIsIm5hbWUiLCJzcGxpdCIsImxlbmd0aCIsImR4IiwiX25hbWVTaGlmdCIsIl90aWNrUm90YXRpb24iLCJNYXRoIiwiY29zIiwiaWNvblR5cGUiLCJudW1DbGFzcyIsInN0YXRlIiwic3RhdGlvbl9pZCIsIiQiLCJ0cmFuc2Zvcm0iLCJ4IiwiYXBwZW5kIiwiY2xhc3MiLCJkeSIsIl9keGR5IiwiYWRkQ2xhc3MiLCJ0ZXh0IiwiX2ludEluZm9zIiwiaW50ZXJjaGFuZ2UiLCJpY29uSFRNTCIsIm5hbWVIVE1MIiwiaW50VGlja0hUTUwiLCJzdHJva2UiLCJjb2xvdXIiLCJ0aWNrUm90YXRpb24iLCJuYW1lUG9zIiwidGlja0NvbG91ciIsInRpY2siLCJmaWxsIiwibGluZU51bWJlciIsIlN0cmluZyIsIm5hbWVaSCIsIm1hdGNoIiwibGluZU5hbWUiLCJwYXJhbSIsInN0bklkIiwic3RuSW5mbyIsImNoYW5nZV90eXBlIiwicmVtb3ZlQ2xhc3MiLCJicmFuY2hlcyIsIm1hcCIsImJyYW5jaCIsImxpbmVNYWluU3RucyIsImZpbHRlciIsInN0YXRpb25zIiwibGluZVBhc3NTdG5zIiwiaW5kZXhPZiIsInB1c2giLCJ1bnNoaWZ0IiwicGF0aCIsIl9saW5lUGF0aCIsImgiLCJwb3MiLCJOdW1iZXIiLCJfZGlyZWN0aW9uIiwiZCIsImh0bWwiLCJmaWxsVGhlbWVDb2xvdXIiLCJhdHRyIiwiX3RoZW1lQ29sb3VyIiwiZGlyZWN0aW9uIiwiX2xpbmVOYW1lcyIsIl9wbGF0Zm9ybU51bSIsImZsYWdMZW5ndGgiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsImlzTGVmdCIsImFycm93WCIsIl9zdmdEZXN0V2lkdGgiLCJhcnJvd1JvdGF0ZSIsInBsYXRmb3JtTnVtWCIsInR4dEFuY2hvciIsImRlc3ROYW1lWCIsImRlc3RpbmF0aW9uc196aCIsImRlc3RpbmF0aW9uc19lbiIsImZvckVhY2giLCJzdG4iLCJsaW5lTmFtZVgiLCJsaW5lTmFtZVpIIiwibGluZU5hbWVFTiIsImhpZGUiLCJsaW5lIiwiZHJhd1NWR0ZyYW1lIiwic2hvd0ZyYW1lT3V0ZXIiLCJkcmF3U3RucyIsImRyYXdMaW5lIiwiZHJhd1N0cmlwIiwiZHJhd0Rlc3RJbmZvIiwibG9hZEZvbnRzIiwidXBkYXRlU3RuTmFtZUJnIiwidmFsIiwic3RuSW5zdGFuY2UiLCJPYmplY3QiLCJlbnRyaWVzIiwiaW5jbHVkZXMiLCJfc3RuU3RhdGUiLCJjbGVhclNWRyJdLCJtYXBwaW5ncyI6ImtIQUtBLE1BQU0sVUFBcUIsSUFDdkIsWUFBWUEsRUFBUUMsR0FDaEJDLE1BQU1GLEVBQUlDLEdBQ1ZFLEtBQUtDLE9BQVNILEVBQUtJLElBR3ZCLGlCQUFtQixPQUFPLEVBQzFCLG9CQUFzQixPQUFPRixLQUFLRyxFQUFJLEVBQUksSUFBTSxFQUNoRCxZQUNJLElBQUlDLEVBQVdKLEtBQUtLLEtBQUssR0FBR0MsTUFBTSxNQUFNQyxPQUN4QyxJQUFJQyxFQVNKLE9BUElBLEVBREFSLEtBQUtTLFdBQ3VCLElBQXZCVCxLQUFLVSxlQUF1QixFQUFJLEdBQXNCLElBQWhCTixFQUFXLEdBQVVPLEtBQUtDLEtBQUssSUFFOUMsSUFBdkJaLEtBQUtVLGVBQXVCLEdBQXNCLElBQWhCTixFQUFXLElBQVdPLEtBQUtDLEtBQUssS0FBTyxFQUszRSxDQUFDSixFQUZ3QixJQUF2QlIsS0FBS1UsZUFBdUIsVUFBa0MsSUFBaEJOLEVBQVcsR0FBVU8sS0FBS0MsS0FBSyxJQUFPLE1BS2pHLGVBQ0ksSUFBS0MsRUFBVUMsSUFBNEIsR0FBZmQsS0FBS2UsTUFBZSxDQUFDQyxjQUFzQixRQUFVLENBekJ0RSxTQXlCbUYsVUFDOUYsT0FBT0MsRUFBRSxNQUFPLENBQUVDLFVBQVcs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YnJFLEVBQUUsK0NBQStDa0QsS0FBSyxDQUNsRCxNQUFTLFFBQVFuRSxLQUFLb0UsZUFDdEIsVUFBYSxhQUFha0IsRUFBWSxTQUN0QyxNQUFTLElBQ1QsT0FBVSxNQUVkckUsRUFBRSwrQ0FBK0N3RSxPQUdqRHhFLEVBQUUsNkRBQTZEa0QsS0FBSyxLQUFNLEtBSTlFbEQsRUFBRSw4REFBOERRLEtBQUs4RCxHQUNyRXRFLEVBQUUsNkRBQTZEUSxLQUFLK0QsR0FDcEV2RSxFQUFFLDJDQUEyQ2tELEtBQUssQ0FDOUNqRCxVQUFXLGFBQWFvRSxTQUN4QixjQUFlLFVBSW5CLElBQUlqQixFQUErQixLQUFuQnJFLEtBQUsrRCxXQUFvQixPQUFTLFFBQ2xEOUMsRUFBRSxxQkFBcUJrRCxLQUFLLENBQ3hCLGFBQWMsaUJBQWlCRSxJQUMvQm5ELFVBQVcscUJBSW5CLGtCQUNJRCxFQUFFLGVBQWV3RSxPQUlyQixlQUFlQyxHQUNYQSxFQUFLQyxlQUNMRCxFQUFLRSxpQkFDTEYsRUFBS0csV0FHTEgsRUFBS0ksV0FDTEosRUFBS3hCLGtCQUdMd0IsRUFBS0ssWUFDTEwsRUFBS00sZUFDTE4sRUFBS08sWUFDTFAsRUFBS1Esa0JBSVQsY0FBY0MsR0FDVm5HLEtBQUsrRCxXQUFhb0MsRUFDbEIsWUFBVSxZQUFhQSxHQUV2QixJQUFLLElBQUt2RCxFQUFPd0QsS0FBZ0JDLE9BQU9DLFFBQVF0RyxLQUFLcUQsVUFDN0MsQ0FBQyxZQUFhLFdBQVdrRCxTQUFTM0QsS0FDdEN3RCxFQUFZckYsTUFBUWYsS0FBS3dHLFVBQVU1RCxJQUd2QyxJQUFRNkQsV0FDUnpHLEtBQUs2RixXQUNMN0YsS0FBSzhGLFdBR0w5RixLQUFLa0Usa0JBRUxsRSxLQUFLZ0csZUFFTGhHLEtBQUtpRyIsImZpbGUiOiJMaW5lU0gubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUk1HU3RhdGlvbiwgSW50SW5mb1RhZywgSW50ZXJjaGFuZ2VJbmZvIH0gZnJvbSAnLi9TdGF0aW9uJztcclxuaW1wb3J0IHsgSUQsIE5hbWUsIEJyYW5jaEluZm8sIFN0YXRpb25JbmZvIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3Qgc3RhdGlvbl9pZCA9ICdzdG5fc2gnXHJcblxyXG5jbGFzcyBSTUdTdGF0aW9uU0ggZXh0ZW5kcyBSTUdTdGF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGlkOiBJRCwgZGF0YTogU3RhdGlvbkluZm8pIHtcclxuICAgICAgICBzdXBlcihpZCwgZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zdG5OdW0gPSBkYXRhLm51bTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgX25hbWVTaGlmdCgpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICBnZXQgX3RpY2tSb3RhdGlvbigpIHsgcmV0dXJuIHRoaXMueSA+IDAgPyAxODAgOiAwOyB9XHJcbiAgICBnZXQgX2R4ZHkoKSB7XHJcbiAgICAgICAgdmFyIG5hbWVFTkxuID0gdGhpcy5uYW1lWzFdLnNwbGl0KCdcXFxcJykubGVuZ3RoO1xyXG4gICAgICAgIGxldCBkeDogbnVtYmVyO1xyXG4gICAgICAgIGlmICh0aGlzLl9uYW1lU2hpZnQpIHtcclxuICAgICAgICAgICAgZHggPSB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAtOSA6IDE2ICsgKG5hbWVFTkxuIC0gMSkgKiAxMiAqIE1hdGguY29zKC00NSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZHggPSB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAoMjQgKyAobmFtZUVOTG4gLSAxKSAqIDEyKSAqIE1hdGguY29zKC00NSkgOiAtNjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gbGV0IGR4ID0gdGhpcy5fbmFtZVNoaWZ0ID8gLTggOiAoMjQgKyAobmFtZUVOTG4tMSkqMTIpICogTWF0aC5jb3MoLTQ1KTtcclxuICAgICAgICBsZXQgZHkgPSB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAoLTQgLSAyMS45MjE4NzUgLSAobmFtZUVOTG4gLSAxKSAqIDEyICogTWF0aC5jb3MoLTQ1KSkgOiAxNy41O1xyXG4gICAgICAgIC8vIHZhciBkeSA9ICgtNCAtIDIxLjkyMTg3NSAtIChuYW1lRU5Mbi0xKSoxMipNYXRoLmNvcygtNDUpKSAqICh0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAxIDogLTEpO1xyXG4gICAgICAgIHJldHVybiBbZHgsIGR5XVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBpY29uSFRNTCgpIHtcclxuICAgICAgICB2YXIgW2ljb25UeXBlLCBudW1DbGFzc10gPSAodGhpcy5zdGF0ZSA9PSAtMSkgPyBbc3RhdGlvbl9pZCArICdfcGFzcycsICdQYXNzJ10gOiBbc3RhdGlvbl9pZCwgJ0Z1dHVyZSddO1xyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke3RoaXMueH0sJHt0aGlzLnl9KWAgfSlcclxuICAgICAgICAgICAgLmFwcGVuZCgkKCc8dXNlPicsIHsgJ3hsaW5rOmhyZWYnOiAnIycgKyBpY29uVHlwZSwgY2xhc3M6ICdybWctc3RuJyB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWVIVE1MKCkge1xyXG4gICAgICAgIGxldCBbZHgsIGR5XSA9IHRoaXMuX2R4ZHlcclxuICAgICAgICByZXR1cm4gJCgnPGc+Jywge1xyXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZSgke3RoaXMueCAtIGR4fSwke3RoaXMueSArIGR5fSlyb3RhdGUoLTYwKWAsXHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6IHRoaXMuX3RpY2tSb3RhdGlvbiA9PT0gMCA/ICdzdGFydCcgOiAnZW5kJyxcclxuICAgICAgICAgICAgLy8gY2xhc3M6IGBOYW1lICR7dGhpcy5uYW1lQ2xhc3N9YFxyXG4gICAgICAgICAgICBjbGFzczogYE5hbWUgRnV0dXJlYCAgLy8gdG9kbzogZml4IHRoaXNcclxuICAgICAgICB9KS5hcHBlbmQoXHJcbiAgICAgICAgICAgICQoJzx0ZXh0PicpLmFkZENsYXNzKCdybWctbmFtZV9femggcm1nLW5hbWVfX3NobWV0cm8tLXN0YXRpb24nKS50ZXh0KHRoaXMubmFtZVswXSlcclxuICAgICAgICApLmFwcGVuZChcclxuICAgICAgICAgICAgJCgnPHRleHQ+Jywge1xyXG4gICAgICAgICAgICAgICAgZHk6IDE1LCBjbGFzczogJ3JtZy1uYW1lX19lbiBybWctbmFtZV9fc2htZXRyby0tc3RhdGlvbidcclxuICAgICAgICAgICAgfSkudGV4dCh0aGlzLm5hbWVbMV0uc3BsaXQoJ1xcXFwnKVswXSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgJCgnPHRzcGFuPicsIHtcclxuICAgICAgICAgICAgICAgICAgICAneCc6IDAsICdkeSc6IDEyXHJcbiAgICAgICAgICAgICAgICB9KS50ZXh0KHRoaXMubmFtZVsxXS5zcGxpdCgnXFxcXCcpWzFdKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgSW50U3RhdGlvblNIIGV4dGVuZHMgUk1HU3RhdGlvblNIIHtcclxuICAgIHByaXZhdGUgX2ludEluZm9zOiBJbnRlcmNoYW5nZUluZm9bXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogSUQsIGRhdGE6IFN0YXRpb25JbmZvKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIGRhdGEpO1xyXG4gICAgICAgIHRoaXMuX2ludEluZm9zID0gZGF0YS5pbnRlcmNoYW5nZVswXVswXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXdyaXRlIHRoaXMgdG8gZ2V0IGFsbCBkcmF3aW5nIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxyXG4gICAgZ2V0IHVuZ3JwSFRNTCgpIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMuaWNvbkhUTUwsIHRoaXMubmFtZUhUTUwsIC4uLnRoaXMuaW50VGlja0hUTUxdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGludGVyY2hhbmdlIHN0YXRpb24gaWNvbiBvbiBtYWluIGxpbmVcclxuICAgIGdldCBpY29uSFRNTCgpIHtcclxuICAgICAgICB2YXIgW2ljb25UeXBlLCBudW1DbGFzc10gPSAodGhpcy5zdGF0ZSA9PSAtMSkgPyBbJ2ludDJfc2hfcGFzcycsICdQYXNzJ10gOiBbJ2ludDJfc2gnLCAnRnV0dXJlJ107XHJcbiAgICAgICAgcmV0dXJuICQoJzxnPicsIHsgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7dGhpcy54fSwke3RoaXMueX0pYCB9KVxyXG4gICAgICAgICAgICAuYXBwZW5kKCQoJzx1c2U+JywgeyAneGxpbms6aHJlZic6ICcjJyArIGljb25UeXBlLCBjbGFzczogJ3JtZy1zdG4nLCBzdHJva2U6IHRoaXMuX2ludEluZm9zW0ludEluZm9UYWcuY29sb3VyXSB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVndWxhciBzdGF0aW9uIG5hbWVcclxuICAgIGdldCBuYW1lSFRNTCgpIHtcclxuICAgICAgICBsZXQgW2R4LCBkeV0gPSB0aGlzLl9keGR5O1xyXG4gICAgICAgIC8vIHdyYXAgdGhlIG5hbWUsIGRlY3JvX2xpbmUgYW5kIGludF9saW5lIHVuZGVyIGcgaW4gb3JkZXIgdG8gcm90YXRlIGF0IG9uY2VcclxuICAgICAgICByZXR1cm4gJCgnPGc+Jywge1xyXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZSgke3RoaXMueCAtIGR4fSwke3RoaXMueSArIGR5fSlgLCAgLy9yb3RhdGUoLTYwKVxyXG4gICAgICAgIH0pLmFwcGVuZChcclxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG5hbWUgdGV4dFxyXG4gICAgICAgICAgICAkKCc8Zz4nLCB7XHJcbiAgICAgICAgICAgICAgICAndGV4dC1hbmNob3InOiB0aGlzLl90aWNrUm90YXRpb24gPT09IDAgPyAnc3RhcnQnIDogJ2VuZCcsXHJcbiAgICAgICAgICAgICAgICBjbGFzczogYE5hbWUgRnV0dXJlYCAgLy8gdG9kbzogZml4IHRoaXNcclxuICAgICAgICAgICAgfSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgJCgnPHRleHQ+JykuYWRkQ2xhc3MoJ3JtZy1uYW1lX196aCBybWctbmFtZV9fc2htZXRyby0tc3RhdGlvbicpLnRleHQodGhpcy5uYW1lWzBdKVxyXG4gICAgICAgICAgICApLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICQoJzx0ZXh0PicsIHtcclxuICAgICAgICAgICAgICAgICAgICBkeTogMTUsIGNsYXNzOiAncm1nLW5hbWVfX2VuIHJtZy1uYW1lX19zaG1ldHJvLS1zdGF0aW9uJ1xyXG4gICAgICAgICAgICAgICAgfSkudGV4dCh0aGlzLm5hbWVbMV0uc3BsaXQoJ1xcXFwnKVswXSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICQoJzx0c3Bhbj4nLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd4JzogMCwgJ2R5JzogMTJcclxuICAgICAgICAgICAgICAgICAgICB9KS50ZXh0KHRoaXMubmFtZVsxXS5zcGxpdCgnXFxcXCcpWzFdKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGludGVyY2hhbmdlIHN0YXRpb24gaWNvbiBhZnRlciBzdGF0aW9uIG5hbWVcclxuICAgIGdldCBpbnRUaWNrSFRNTCgpIHtcclxuICAgICAgICAvLyB2YXIgbmFtZVRleHQgPSAkKGAjc3RuX2ljb25zID4gIyR7dGhpcy5pZH0gPiBnOmZpcnN0LWNoaWxkYClcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgI3N0bl9pY29ucyA+ICMke3RoaXMuaWR9ID4gZzpmaXJzdC1jaGlsZGAsIG5hbWVUZXh0KVxyXG5cclxuICAgICAgICAvLyBpbnRlcmNoYW5nZSBsaW5lIGljb24gYWZ0ZXIgc3RhdGlvbiBuYW1lXHJcbiAgICAgICAgdmFyIHRpY2tSb3RhdGlvbiA9ICh0aGlzLm5hbWVQb3MgPT0gMSkgPyAxODAgOiAwO1xyXG4gICAgICAgIHZhciB0aWNrQ29sb3VyID0gdGhpcy5faW50SW5mb3NbSW50SW5mb1RhZy5jb2xvdXJdO1xyXG4gICAgICAgIHZhciB0aWNrID0gJCgnPHVzZT4nLCB7XHJcbiAgICAgICAgICAgICd4bGluazpocmVmJzogJyNpbnRfc2gnLFxyXG4gICAgICAgICAgICBmaWxsOiB0aWNrQ29sb3VyLFxyXG4gICAgICAgICAgICAvLyBUb2RvOiBmaXggdGhpcyBoYXJkLWNvZGVkIHBvc2l0aW9uIGJ5IGdldHRpbmcgdGhlIG5hbWUgdGV4dCBlbGVtXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgxMCwtMTApcm90YXRlKCR7dGlja1JvdGF0aW9ufSlgLFxyXG4gICAgICAgICAgICBjbGFzczogJ3JtZy1saW5lX19zaG1ldHJvIHJtZy1saW5lX19jaGFuZ2UnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IC0xKSB7XHJcbiAgICAgICAgICAgIHRpY2suYWRkQ2xhc3MoJ3JtZy1saW5lX19wYXNzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBsaW5lIHN0YXJ0cyB3aXRoIG51bWJlcnMgb3IgbGV0dGVyc1xyXG4gICAgICAgIHZhciBsaW5lTnVtYmVyID0gU3RyaW5nKHRoaXMuX2ludEluZm9zW0ludEluZm9UYWcubmFtZVpIXSkubWF0Y2goLyhcXGQqKVxcdysvKVxyXG4gICAgICAgIGlmIChsaW5lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5lTmFtZSA9IGxpbmVOdW1iZXJbMF1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgbGluZU5hbWUgPSBTdHJpbmcodGhpcy5faW50SW5mb3NbSW50SW5mb1RhZy5uYW1lWkhdKVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpbnRlcmNoYW5nZSBsaW5lIG5hbWVcclxuICAgICAgICB2YXIgbGluZU5hbWVFbGVtID0gJCgnPHRleHQ+Jywge1xyXG4gICAgICAgICAgICAvLyBUb2RvOiBmaXggdGhpcyBoYXJkLWNvZGVkIHBvc2l0aW9uIGJ5IGdldHRpbmcgdGhlIG5hbWUgdGV4dCBlbGVtXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgxNSwxMClyb3RhdGUoJHt0aWNrUm90YXRpb259KWAsXHJcbiAgICAgICAgICAgIGNsYXNzOiAncm1nLW5hbWVfX3poIHJtZy1uYW1lX19zaG1ldHJvLS1saW5lX25hbWUnLFxyXG4gICAgICAgIH0pLnRleHQobGluZU5hbWUpXHJcblxyXG4gICAgICAgIHJldHVybiBbdGljaywgbGluZU5hbWVFbGVtXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgX25hbWVDbGFzcygpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc3RhdGUgPT0gLTEpID8gJ1Bhc3MnIDogJ0Z1dHVyZSc7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBSTUdTdGF0aW9uU0gsIEludFN0YXRpb25TSCwgc3RhdGlvbl9pZCB9O1xyXG4iLCJpbXBvcnQgeyBSTUdMaW5lIH0gZnJvbSAnLi9MaW5lJztcclxuaW1wb3J0IHsgUk1HU3RhdGlvblNILCBJbnRTdGF0aW9uU0gsIHN0YXRpb25faWQgfSBmcm9tICcuLi9TdGF0aW9uL1N0YXRpb25TSCc7XHJcbmltcG9ydCB7IFJNR1N0YXRpb24gfSBmcm9tICcuLi9TdGF0aW9uL1N0YXRpb24nO1xyXG5cclxuaW1wb3J0IHsgSUQsIE5hbWUsIFN0YXRpb25JbmZvLCBSTUdQYXJhbSwgc2V0UGFyYW1zIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJNR0xpbmVTSCBleHRlbmRzIFJNR0xpbmUge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW0pIHtcclxuICAgICAgICBzdXBlcihwYXJhbSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2luaXRTdG5JbnN0YW5jZShzdG5JZDogSUQsIHN0bkluZm86IFN0YXRpb25JbmZvKTogUk1HU3RhdGlvbiB7XHJcbiAgICAgICAgc3dpdGNoIChzdG5JbmZvLmNoYW5nZV90eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2ludDInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRTdGF0aW9uU0goc3RuSWQsIHN0bkluZm8pO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSTUdTdGF0aW9uU0goc3RuSWQsIHN0bkluZm8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBkcmF3IHRoZSBsaW5lIGluIHJhaWxtYXBcclxuICAgIGRyYXdMaW5lKCkge1xyXG4gICAgICAgICQoJy5ybWctbGluZScpLnJlbW92ZUNsYXNzKCdybWctbGluZV9fbXRyJykuYWRkQ2xhc3MoJ3JtZy1saW5lX19zaG1ldHJvJyk7XHJcblxyXG4gICAgICAgIHRoaXMuYnJhbmNoZXMubWFwKGJyYW5jaCA9PiB7XHJcbiAgICAgICAgICAgIHZhciBsaW5lTWFpblN0bnMgPSBicmFuY2guZmlsdGVyKHN0bklkID0+IHRoaXMuc3RhdGlvbnNbc3RuSWRdLnN0YXRlID49IDApO1xyXG4gICAgICAgICAgICB2YXIgbGluZVBhc3NTdG5zID0gYnJhbmNoLmZpbHRlcihzdG5JZCA9PiB0aGlzLnN0YXRpb25zW3N0bklkXS5zdGF0ZSA8PSAwKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsaW5lTWFpblN0bnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lUGFzc1N0bnMgPSBicmFuY2g7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsaW5lTWFpblN0bnMuZmlsdGVyKHN0bklkID0+IGxpbmVQYXNzU3Rucy5pbmRleE9mKHN0bklkKSAhPT0gLTEpLmxlbmd0aCA9PSAwICYmIGxpbmVNYWluU3Rucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHR3byBzZXQgZGlzam9pbnRcclxuICAgICAgICAgICAgICAgIGlmIChsaW5lUGFzc1N0bnNbMF0gPT09IGJyYW5jaFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIC0xIC0xIDEgMVxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQYXNzU3Rucy5wdXNoKGxpbmVNYWluU3Ruc1swXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVNYWluU3Ruc1swXSA9PT0gYnJhbmNoWzBdICYmIGxpbmVNYWluU3Ruc1tsaW5lTWFpblN0bnMubGVuZ3RoIC0gMV0gPT09IGJyYW5jaFticmFuY2gubGVuZ3RoIC0gMV0gJiYgbGluZVBhc3NTdG5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQYXNzU3RucyA9IGJyYW5jaDtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lTWFpblN0bnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMSAxIC0xIC0xXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZVBhc3NTdG5zLnVuc2hpZnQobGluZU1haW5TdG5zW2xpbmVNYWluU3Rucy5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHN0cmV0Y2ggdGhlIG1haW4gbGluZVxyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IHRoaXMuX2xpbmVQYXRoKGxpbmVNYWluU3RucylcclxuICAgICAgICAgICAgdmFyIFt4LCB5LCBoXSA9IHBhdGgubWF0Y2goL1tcXGQuXSsvZykubWFwKHBvcyA9PiBOdW1iZXIocG9zKSlcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gJ3InKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gYE0gJHt4fSwke3kgLSA2fSBIICR7aCArIDMwfSBsIDEyLDEyIEwgJHt4fSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGF0aCA9IGBNICR7eCAtIDMwfSwke3kgLSA2fSBIICR7aH0gbCAwLDEyIEwgJHt4IC0gNDJ9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGRyYXcgdGhlIG1haW4gbGluZVxyXG4gICAgICAgICAgICAkKCcjbGluZV9tYWluJykuYXBwZW5kKCQoJzxwYXRoPicsIHsgaWQ6ICdsaW5lX21haW5fcGF0aCcsIGQ6IHBhdGggfSkpO1xyXG5cclxuICAgICAgICAgICAgLy8gc3RyZXRjaCB0aGUgcGFzcyBsaW5lXHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5fbGluZVBhdGgobGluZVBhc3NTdG5zKVxyXG4gICAgICAgICAgICB2YXIgW3gsIHksIGhdID0gcGF0aC5tYXRjaCgvW1xcZC5dKy9nKS5tYXAocG9zID0+IE51bWJlcihwb3MpKVxyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSAncicpIHtcclxuICAgICAgICAgICAgICAgIHBhdGggPSBgTSAke3ggLSAzMH0sJHt5IC0gNn0gSCAke2h9IGwgMCwxMiBMICR7eCAtIDMwfSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGF0aCA9IGBNICR7eH0sJHt5IC0gNn0gSCAke2ggKyAzMH0gbCAwLDEyIEwgJHt4fSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBkcmF3IHRoZSBwYXNzIGxpbmVcclxuICAgICAgICAgICAgJCgnI2xpbmVfcGFzcycpLmFwcGVuZCgkKCc8cGF0aD4nLCB7IGlkOiAnbGluZV9wYXNzX3BhdGgnLCBkOiBwYXRoIH0pKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnI2xpbmVfbWFpbicpLmh0bWwoJCgnI2xpbmVfbWFpbicpLmh0bWwoKSk7XHJcbiAgICAgICAgJCgnI2xpbmVfcGFzcycpLmh0bWwoJCgnI2xpbmVfcGFzcycpLmh0bWwoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsbFRoZW1lQ29sb3VyKCkge1xyXG4gICAgICAgIHN1cGVyLmZpbGxUaGVtZUNvbG91cigpO1xyXG5cclxuICAgICAgICAvLyB0aGlzIHdpbGwgYWRkIHRoZSBzdHJva2Ugb2YgdGhlIHN0YXRpb24gY2lyY2xlXHJcbiAgICAgICAgLy8gaG93ZXZlciB0aGUgc3Ryb2tlIHBhdGggaXMgZGVmaW5lZCBpbiBpbmRleC5odG1sXHJcbiAgICAgICAgLy8gd2hpY2ggbWFkZSBjaGFuZ2luZyBzdGF0aW9uIHN0eWxlIHN0cmFuZ2VcclxuICAgICAgICAkKCdwYXRoIycgKyBzdGF0aW9uX2lkKS5hdHRyKCdzdHJva2UnLCB0aGlzLl90aGVtZUNvbG91cik7XHJcbiAgICAgICAgJCgncGF0aCNpbnQyX3NoJykuYXR0cignc3Ryb2tlJywgdGhpcy5fdGhlbWVDb2xvdXIpO1xyXG5cclxuICAgICAgICAvLyBwYXNzIHN0cm9rZSBzaG91bGQgYmUgYWRkZWQgc29tZXdoZXJlIGVsc2VcclxuICAgICAgICAvLyBidXQgSSBjYW4ndCBmaWd1cmUgaXQgb3V0XHJcbiAgICAgICAgJCgncGF0aCNzdG5fc2hfcGFzcycpLmF0dHIoJ3N0cm9rZScsICcjYWFhJyk7XHJcbiAgICAgICAgJCgncGF0aCNpbnQyX3NoX3Bhc3MnKS5hdHRyKCdzdHJva2UnLCAnI2FhYScpO1xyXG5cclxuICAgICAgICAvLyB0aGUgcmFpbG1hcCBtYWluIGxpbmVcclxuICAgICAgICAkKCdwYXRoI2xpbmVfbWFpbl9wYXRoJykuYXR0cignZmlsbCcsIHRoaXMuX3RoZW1lQ29sb3VyKVxyXG4gICAgICAgICQoJ3BhdGgjbGluZV9wYXNzX3BhdGgnKS5hdHRyKCdmaWxsJywgJyNhYWEnKVxyXG5cclxuICAgICAgICAvLyB0aGUgbGFzdCBkZWNvcmF0aW9uIGxpbmVcclxuICAgICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5fZGlyZWN0aW9uID09ICdsJyA/ICdsZWZ0JyA6ICdyaWdodCdcclxuICAgICAgICAkKGAjbGluZV9zaG1ldHJvXyR7ZGlyZWN0aW9ufWApLmF0dHIoJ2ZpbGwnLCB0aGlzLl90aGVtZUNvbG91cilcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2xpbmVOYW1lc1swXS5tYXRjaCgvKFxcZCopXFx3Ky8pKSB7XHJcbiAgICAgICAgICAgIC8vIHRoZSBsaW5lIHN0YXJ0cyB3aXRoIG51bWJlclxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9udW1iZXIgPiB0ZXh0JykuYXR0cignZmlsbCcsICcjZmZmJylcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0aGUgbGluZSBzdGFydHMgd2l0aCBsZXR0ZXJcclxuICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbmFtZV90ZXh0JykuYXR0cignZmlsbCcsICcjZmZmJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0Rlc3RJbmZvKCkge1xyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNwbGF0Zm9ybSA+IHRleHQnKS50ZXh0KHRoaXMuX3BsYXRmb3JtTnVtKTtcclxuXHJcbiAgICAgICAgdmFyIGJjciA9ICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNkZXN0X3RleHQnKVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICB2YXIgZmxhZ0xlbmd0aCA9IDE2MCArIDE1MCArIGJjci53aWR0aCArIDQ1ICsgNTA7XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8gYXJyb3dcclxuICAgICAgICB2YXIgaXNMZWZ0ID0gKHRoaXMuX2RpcmVjdGlvbiA9PSAnbCcpID8gMSA6IC0xO1xyXG4gICAgICAgIHZhciBhcnJvd1ggPSAodGhpcy5fc3ZnRGVzdFdpZHRoIC0gaXNMZWZ0ICogZmxhZ0xlbmd0aCkgLyAyMDtcclxuICAgICAgICBhcnJvd1ggPSAodGhpcy5fZGlyZWN0aW9uID09ICdsJykgPyBhcnJvd1ggOiB0aGlzLl9zdmdEZXN0V2lkdGggLSAyMDtcclxuICAgICAgICB2YXIgYXJyb3dSb3RhdGUgPSA5MCAqICgxIC0gaXNMZWZ0KTtcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjYXJyb3dfbGVmdF91c2UnKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7YXJyb3dYfSwxMzUpcm90YXRlKCR7YXJyb3dSb3RhdGV9KWApO1xyXG5cclxuICAgICAgICAvLyBub3QgaW4gdXNlIG5vd1xyXG4gICAgICAgIHZhciBwbGF0Zm9ybU51bVggPSBhcnJvd1ggKyBpc0xlZnQgKiAoMTYwICsgNTAgKyA3NSk7XHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI3BsYXRmb3JtJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3BsYXRmb3JtTnVtWH0sMTMwKWApO1xyXG5cclxuICAgICAgICAvLyBsaXN0IHRoZSBkZXN0aW5hdGlvbiB0ZXh0XHJcbiAgICAgICAgLy8gVG9kbzogZml4IHN2Z19kZXN0X3dpZHRoKjAuOCwgdGhpcyBoYXMgb25seSBiZWVuIHRlc3RlZCBvbiAxMDAwIHdpZHRoXHJcbiAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gJ3InKSB7XHJcbiAgICAgICAgICAgIHZhciB0eHRBbmNob3IgPSAnZW5kJztcclxuICAgICAgICAgICAgdmFyIGRlc3ROYW1lWCA9IHRoaXMuX3N2Z0Rlc3RXaWR0aCAqIDAuODtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdHh0QW5jaG9yID0gJ3N0YXJ0JztcclxuICAgICAgICAgICAgdmFyIGRlc3ROYW1lWCA9IHRoaXMuX3N2Z0Rlc3RXaWR0aCAqIDAuMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2Rlc3RfdGV4dCcpLmF0dHIoe1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtkZXN0TmFtZVh9LDEzNSlgLFxyXG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiB0eHRBbmNob3JcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gZm9yIGVhY2ggbGVmdCB2YWxpZCBkZXN0aW5hdGlvbnMsIGdldCB0aGUgbmFtZSBmcm9tIGlkXHJcbiAgICAgICAgdmFyIFtkZXN0aW5hdGlvbnNfemgsIGRlc3RpbmF0aW9uc19lbl0gPSBbXCJcIiwgXCJcIl1cclxuICAgICAgICB0aGlzW2Ake3RoaXMuX2RpcmVjdGlvbn1WYWxpZERlc3RzYF0uZm9yRWFjaChzdG4gPT4ge1xyXG4gICAgICAgICAgICBkZXN0aW5hdGlvbnNfemggKz0gdGhpcy5zdGF0aW9uc1tzdG5dLm5hbWVbMF1cclxuICAgICAgICAgICAgZGVzdGluYXRpb25zX2VuICs9IHRoaXMuc3RhdGlvbnNbc3RuXS5uYW1lWzFdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2Rlc3RfdGV4dCA+IHRleHQ6Zmlyc3QtY2hpbGQnKS50ZXh0KGDlvoAke2Rlc3RpbmF0aW9uc196aH1gKVxyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNkZXN0X3RleHQgPiB0ZXh0Omxhc3QtY2hpbGQnKS50ZXh0KGBUbyAke2Rlc3RpbmF0aW9uc19lbn1gKVxyXG5cclxuICAgICAgICAvLyBwcmVwYXJlIGZvciB0aGUgbGluZSBuYW1lXHJcbiAgICAgICAgbGV0IGxpbmVOYW1lWCA9IHRoaXMuX2RpcmVjdGlvbiA9PT0gJ2wnID8gdGhpcy5fc3ZnRGVzdFdpZHRoIDogMzIwXHJcbiAgICAgICAgdmFyIFtsaW5lTmFtZVpILCBsaW5lTmFtZUVOXSA9IHRoaXMuX2xpbmVOYW1lcztcclxuXHJcbiAgICAgICAgLy8gbGluZSBzdGFydHMgd2l0aCBudW1iZXJzIG9yIGxldHRlcnNcclxuICAgICAgICB2YXIgbGluZU51bWJlciA9IGxpbmVOYW1lWkgubWF0Y2goLyhcXGQqKVxcdysvKVxyXG4gICAgICAgIGlmIChsaW5lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGxpbmVOYW1lWCAtPSAxODA7XHJcbiAgICAgICAgICAgIGxpbmVOYW1lWkggPSBcIuWPt+e6v1wiXHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX251bWJlciA+IHJlY3QnKS5hdHRyKHtcclxuICAgICAgICAgICAgICAgICdzdHlsZSc6IGBmaWxsOiR7dGhpcy5fdGhlbWVDb2xvdXJ9YCxcclxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBgdHJhbnNsYXRlKCR7bGluZU5hbWVYIC0gMTIwfSw3MClgXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX251bWJlciA+IHRleHQnKVxyXG4gICAgICAgICAgICAgICAgLnRleHQobGluZU51bWJlclswXSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7bGluZU5hbWVYIC0gMTAwfSwxNzApYClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsaW5lTmFtZVggLT0gMjgwO1xyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9udW1iZXIgPiByZWN0JykuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAnc3R5bGUnOiBgZmlsbDoke3RoaXMuX3RoZW1lQ29sb3VyfWAsXHJcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZSgke2xpbmVOYW1lWCAtIDEwfSw2MClgLFxyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogMjYwLFxyXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6IDE1MFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9udW1iZXIgPiB0ZXh0JykuaGlkZSgpXHJcblxyXG4gICAgICAgICAgICAvLyBUb2RvOiBzZXQgdGhlIGVuZyBpbiB0aGUgbWlkZGxlXHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX25hbWVfdGV4dCA+IHRleHQ6bGFzdC1jaGlsZCcpLmF0dHIoJ2R4JywgMTApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzZXQgdGhlIGxpbmUgbmFtZVxyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX25hbWVfdGV4dCA+IHRleHQ6Zmlyc3QtY2hpbGQnKS50ZXh0KGxpbmVOYW1lWkgpXHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbmFtZV90ZXh0ID4gdGV4dDpsYXN0LWNoaWxkJykudGV4dChsaW5lTmFtZUVOKVxyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX25hbWVfdGV4dCcpLmF0dHIoe1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtsaW5lTmFtZVh9LDEzNSlgLFxyXG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiAnc3RhcnQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHRoZSBsYXN0IGRlY29yYXRpb24gbGluZVxyXG4gICAgICAgIGxldCBkaXJlY3Rpb24gPSB0aGlzLl9kaXJlY3Rpb24gPT0gJ2wnID8gJ2xlZnQnIDogJ3JpZ2h0J1xyXG4gICAgICAgICQoJyNsaW5lX3NobWV0cm9fdXNlJykuYXR0cih7XHJcbiAgICAgICAgICAgICd4bGluazpocmVmJzogYCNsaW5lX3NobWV0cm9fJHtkaXJlY3Rpb259YCxcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKDAsMjIwKWAsXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTdG5OYW1lQmcoKSB7XHJcbiAgICAgICAgJCgnI2N1cnJlbnRfYmcnKS5oaWRlKCk7ICAvLyBmaXggdGhlIG15c3RlcmlvdXMgYmxhY2sgcmVjdFxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJld3JpdGUgdGhpcyB0byBtYWtlIHN1cmUgdGhlIGxpbmUgaXMgZHJhdyBiZWZvcmUgY29sb3JcclxuICAgIHN0YXRpYyBpbml0U1ZHKGxpbmUpIHtcclxuICAgICAgICBsaW5lLmRyYXdTVkdGcmFtZSgpO1xyXG4gICAgICAgIGxpbmUuc2hvd0ZyYW1lT3V0ZXIoKTtcclxuICAgICAgICBsaW5lLmRyYXdTdG5zKCk7XHJcblxyXG4gICAgICAgIC8vIGNoYW5nZSB0aGUgZnVuYyBjYWxsIGhlcmVcclxuICAgICAgICBsaW5lLmRyYXdMaW5lKCk7XHJcbiAgICAgICAgbGluZS5maWxsVGhlbWVDb2xvdXIoKTtcclxuICAgICAgICAvLyBjaGFuZ2UgdGhlIGZ1bmMgY2FsbCBoZXJlXHJcblxyXG4gICAgICAgIGxpbmUuZHJhd1N0cmlwKCk7XHJcbiAgICAgICAgbGluZS5kcmF3RGVzdEluZm8oKTtcclxuICAgICAgICBsaW5lLmxvYWRGb250cygpO1xyXG4gICAgICAgIGxpbmUudXBkYXRlU3RuTmFtZUJnKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGNhbGwgZmlsbFRoZW1lQ29sb3VyIHdoZW4gZmxpcCBkaXJlY3Rpb25cclxuICAgIHNldCBkaXJlY3Rpb24odmFsKSB7XHJcbiAgICAgICAgdGhpcy5fZGlyZWN0aW9uID0gdmFsO1xyXG4gICAgICAgIHNldFBhcmFtcygnZGlyZWN0aW9uJywgdmFsKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgW3N0bklkLCBzdG5JbnN0YW5jZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zdGF0aW9ucykpIHtcclxuICAgICAgICAgICAgaWYgKFsnbGluZXN0YXJ0JywgJ2xpbmVlbmQnXS5pbmNsdWRlcyhzdG5JZCkpIHsgY29udGludWU7IH1cclxuICAgICAgICAgICAgc3RuSW5zdGFuY2Uuc3RhdGUgPSB0aGlzLl9zdG5TdGF0ZShzdG5JZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBSTUdMaW5lLmNsZWFyU1ZHKCk7XHJcbiAgICAgICAgdGhpcy5kcmF3U3RucygpO1xyXG4gICAgICAgIHRoaXMuZHJhd0xpbmUoKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIHRoZSBmdW5jIGNhbGwgaGVyZVxyXG4gICAgICAgIHRoaXMuZmlsbFRoZW1lQ29sb3VyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhd0Rlc3RJbmZvKCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZEZvbnRzKCk7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==