(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{16:function(t,e,s){"use strict";s.r(e);var n=s(8),r=s(1);class i extends r.m{constructor(t,e){super(t,e),this.stnNum=e.num}get _nameShift(){return!1}get _tickRotation(){return this.y>0?180:0}get _dxdy(){var t=this.name[1].split("\\").length;let e;return e=this._nameShift?0===this._tickRotation?-9:16+12*(t-1)*Math.cos(-45):0===this._tickRotation?(24+12*(t-1))*Math.cos(-45):-6,[e,0===this._tickRotation?-25.921875-12*(t-1)*Math.cos(-45):17.5]}get iconHTML(){var[t,e]=-1==this.state?["stn_sh_pass","Pass"]:["stn_sh","Future"];return $("<g>",{transform:`translate(${this.x},${this.y})`}).append($("<use>",{"xlink:href":"#"+t,class:"rmg-stn"}))}get nameHTML(){let[t,e]=this._dxdy;return $("<g>",{transform:`translate(${this.x-t},${this.y+e})rotate(-50)`,"text-anchor":0===this._tickRotation?"start":"end",class:"Name Future"}).append($("<text>").addClass("rmg-name__zh rmg-name__shmetro--station").text(this.name[0])).append($("<text>",{dy:15,class:"rmg-name__en rmg-name__shmetro--station"}).text(this.name[1].split("\\")[0]).append($("<tspan>",{x:0,dy:12}).text(this.name[1].split("\\")[1])))}}class a extends i{constructor(t,e){super(t,e),this._intInfos=e.interchange[0]}get html(){return $("<g>",{id:this.id}).append(...this.ungrpHTML)}get ungrpHTML(){return[this.iconHTML,this.nameHTML]}get ungrpIconHTML(){return[...this.intTickHTML]}get iconHTML(){var[t,e]=-1==this.state?["int2_sh_pass","Pass"]:["int2_sh","Future"];return $("<g>",{transform:`translate(${this.x},${this.y})`}).append($("<use>",{"xlink:href":"#"+t,class:"rmg-stn",stroke:this._intInfos[r.d.colour]}))}get nameHTML(){let[t,e]=this._dxdy;return $("<g>",{transform:`translate(${this.x-t},${this.y+e})`}).append($("<g>",{id:`rmg-name__shmetro--${this.id}`,"text-anchor":0===this._tickRotation?"start":"end",class:"Name Future"}).append($("<text>").addClass("rmg-name__zh rmg-name__shmetro--station").text(this.name[0])).append($("<text>",{dy:15,class:"rmg-name__en rmg-name__shmetro--station"}).text(this.name[1].split("\\")[0]).append($("<tspan>",{x:0,dy:12}).text(this.name[1].split("\\")[1]))))}get intTickHTML(){let t=[],e=$(`#rmg-name__shmetro--${this.id}`),s=e.get(0).getBoundingClientRect(),n=s.right-s.left+5;this._intInfos.map((e,s)=>{var i=e[r.d.colour],a=$("<use>",{"xlink:href":"#int_sh",fill:i,transform:`translate(${n+25*s},-12)`,class:"rmg-line__shmetro rmg-line__change"});-1==this.state&&a.addClass("rmg-line__pass");let o=String(e[r.d.nameZH]).match(/(\d*)\w+/);if(o)var h=o[0];else h=String(e[r.d.nameZH]);var l=$("<text>",{transform:`translate(${n+10+25*s},8)`,class:"rmg-name__zh rmg-name__shmetro--line_name","text-anchor":"middle",fill:e[r.d.fg]}).text(h);t.push(a,l)});let i=e.parent();return i.attr("transform",`${i.attr("transform")}rotate(-50)`),t}get _nameClass(){return-1==this.state?"Pass":"Future"}}s.d(e,"RMGLineSH",(function(){return o}));class o extends n.a{constructor(t){super(t)}_initStnInstance(t,e){switch(e.change_type){case"int2":case"int3_l":case"int3_r":return new a(t,e);case"osi11_ul":case"osi11_pl":case"osi11_ur":case"osi11_pr":case"osi12_ul":case"osi12_pl":case"osi12_ur":case"osi12_pr":case"osi21_ul":case"osi21_pl":case"osi21_ur":case"osi21_pr":case"osi22_ul":case"osi22_pl":case"osi22_ur":case"osi22_pr":default:return new i(t,e)}}drawDestInfo(){$("#station_info_shmetro > #platform > text").text(this._platformNum);var t=310+$("#station_info_shmetro > #dest_text")[0].getBoundingClientRect().width+45+50,e="l"==this._direction?1:-1,s=(this._svgDestWidth-e*t)/20;s="l"==this._direction?s:this._svgDestWidth-20;var n=90*(1-e);$("#station_info_shmetro > #arrow_left_use").attr("transform",`translate(${s},135)rotate(${n})`);var r=s+285*e;if($("#station_info_shmetro > #platform").attr("transform",`translate(${r},130)`),"r"===this._direction)var i="end",a=.8*this._svgDestWidth;else i="start",a=.2*this._svgDestWidth;$("#station_info_shmetro > #dest_text").attr({transform:`translate(${a},135)`,"text-anchor":i});var[o,h]=[[],[]];this[`${this._direction}ValidDests`].forEach(t=>{o.push(this.stations[t].name[0]),h.push(this.stations[t].name[1])}),$("#station_info_shmetro > #dest_text > text:first-child").text(`往${o.join("，")}`),$("#station_info_shmetro > #dest_text > text:last-child").text(`To ${h.join(", ")}`);let l="l"===this._direction?this._svgDestWidth:320;var[_,m]=this._lineNames,d=_.match(/(\d*)\w+/);d?(l-=180,_="号线",$("#station_info_shmetro > #line_number > rect").attr({style:`fill:${this._themeColour}`,transform:`translate(${l-120},70)`}),$("#station_info_shmetro > #line_number > text").text(d[0]).attr("transform",`translate(${l-70},170)`)):(l-=280,$("#station_info_shmetro > #line_number > rect").attr({style:`fill:${this._themeColour}`,transform:`translate(${l-10},60)`,width:260,height:150}),$("#station_info_shmetro > #line_number > text").hide(),$("#station_info_shmetro > #line_name_text > text:last-child").attr("dx",10)),$("#station_info_shmetro > #line_name_text > text:first-child").text(_),$("#station_info_shmetro > #line_name_text > text:last-child").text(m),$("#station_info_shmetro > #line_name_text").attr({transform:`translate(${l},135)`,"text-anchor":"start"});let c="";c="l"==this._direction?`M30,10 H ${this._svgDestWidth-20} V 20 H 20 Z`:`M20,10 H ${this._svgDestWidth-30} l 10,10 H 20 Z`,$("#line_shmetro_use").attr({transform:"translate(0,220)",d:c})}drawStns(){for(let[t,e]of Object.entries(this.stations))["linestart","lineend"].includes(t)||$("#stn_icons").append(e.html);$("#stn_icons").html($("#stn_icons").html());for(let[t,e]of Object.entries(this.stations).filter(t=>t[1]instanceof a))$(`#rmg-name__shmetro--${t}`).parent().append(e.ungrpIconHTML);$("#stn_icons").html($("#stn_icons").html())}_stnYShare(t){return this.branches[0].includes(t)?0:3}_linePath(t,e){var[s,n,r]=[],i={};const a=30;if(t.forEach(t=>{var[e,a]=["_stnRealX","_stnRealY"].map(e=>this[e](t));if(!n&&0!==n)return[s,r,n]=[t,e,a],void(i.start=[e,a]);0===a?a!=n&&(i.bifurcate=[r,n]):a!=n&&(i.bifurcate=[e,a]),i.end=[e,a],[s,r,n]=[t,e,a]}),i.hasOwnProperty("start")){if(i.hasOwnProperty("end")){if(i.hasOwnProperty("bifurcate")){let[t,s]=i.start,[n,r]=(i.end[0],i.bifurcate),[o,h]=i.end;return"main"===e?"l"===this._direction?h>s?`M ${t-a},${s-6} H ${n+a} L ${o},${h-6} l 0,12 L ${n+a},${r+6} L ${t-a-12},${s+6} Z`:`M ${o},${h-6} H ${n-a} L ${t},${s-6} l 0,12 L ${n-a},${r+6} L ${o},${h+6} Z`:h>s?`M ${t},${s-6} H ${n+a} L ${o},${h-6} l 0,12 L ${n+a},${r+6} L ${t},${s+6} Z`:`M ${o+a},${h-6} H ${n-a} L ${t},${s-6} l 0,12 L ${n-a},${r+6} L ${o+a+12},${h+6} Z`:(this._direction,h>s?`M ${t-a},${s-6} H ${n+a} L ${o},${h-6} l 0,12 L ${n+a},${r+6} L ${t-a},${s+6} Z`:`M ${t},${s-6} L ${n-a},${r-6} H ${o+a} l 0,12 L ${n-a},${r+6} L ${t},${s+6} Z`)}{let[t,s]=i.start,n=i.end[0];return"main"===e?"l"===this._direction?`M ${t-a},${s-6} H ${n} l 0,12 L ${t-42},${s+6} Z`:`M ${t},${s-6} H ${n+a} l 12,12 L ${t},${s+6} Z`:(this._direction,`M ${t-a},${s-6} H ${n+a} l 0,12 L ${t-a},${s+6} Z`)}}{let[t,s]=i.start;return"main"===e?"l"===this._direction?`M ${t},${s-6} L ${t-a},${s-6} l -12,12 L ${t},${s+6} Z`:`M ${t},${s-6} L ${t+a},${s-6} l 12,12 L ${t},${s+6} Z`:"l"===this._direction?`M ${t},${s-6} L ${t+a},${s-6} l 0,12 L ${t-a},${s+6} Z`:`M ${t-a},${s-6} L ${t},${s-6} l 0,12 L ${t-a},${s+6} Z`}}return""}drawLine(){$(".rmg-line").removeClass("rmg-line__mtr").addClass("rmg-line__shmetro"),super.drawLine()}fillThemeColour(){super.fillThemeColour(),$("path#stn_sh").attr("stroke",this._themeColour),$("path#int2_sh").attr("stroke",this._themeColour),$("path#stn_sh_pass").attr("stroke","#aaa"),$("path#int2_sh_pass").attr("stroke","#aaa"),$("#line_main").children().attr("fill",this._themeColour),$("#line_pass").children().attr("fill","#aaa"),$("#line_shmetro_use").attr("fill",this._themeColour),this._lineNames[0].match(/(\d*)\w+/)?$("#station_info_shmetro > #line_number > text").attr("fill","#fff"):$("#station_info_shmetro > #line_name_text").attr("fill","#fff"),$("#station_info_shmetro > #line_number > text").attr("fill",this._fgColour)}updateStnNameBg(){$("#current_bg").hide()}static initSVG(t){t.drawSVGFrame(),t.showFrameOuter(),t.drawStns(),t.drawLine(),t.fillThemeColour(),t.drawStrip(),t.drawDestInfo(),t.loadFonts(),t.updateStnNameBg()}set direction(t){super.direction=t,this.fillThemeColour()}set currentStnId(t){super.currentStnId=t,this.fillThemeColour()}updateStnTransfer(t,e,s=null){super.updateStnTransfer(t,e,s),this.fillThemeColour(),$("#stn_icons").empty(),this.drawStns()}addStn(t,e,s,n){let[r,i]=super.addStn(t,e,s,n);return this.fillThemeColour(),[r,i]}set yPc(t){super.yPc=t;let e=t*this._svgHeight/50;$("g#main").attr("transform",`translate(0,${e})`)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvU3RhdGlvbi9TdGF0aW9uU0gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xpbmUvTGluZVNILnRzIl0sIm5hbWVzIjpbImlkIiwiZGF0YSIsInN1cGVyIiwidGhpcyIsInN0bk51bSIsIm51bSIsInkiLCJuYW1lRU5MbiIsIm5hbWUiLCJzcGxpdCIsImxlbmd0aCIsImR4IiwiX25hbWVTaGlmdCIsIl90aWNrUm90YXRpb24iLCJNYXRoIiwiY29zIiwiaWNvblR5cGUiLCJudW1DbGFzcyIsInN0YXRlIiwic3RhdGlvbl9pZCIsIiQiLCJ0cmFuc2Zvcm0iLCJ4IiwiYXBwZW5kIiwiY2xhc3MiLCJkeSIsIl9keGR5IiwiYWRkQ2xhc3MiLCJ0ZXh0IiwiX2ludEluZm9zIiwiaW50ZXJjaGFuZ2UiLCJ1bmdycEhUTUwiLCJpY29uSFRNTCIsIm5hbWVIVE1MIiwiaW50VGlja0hUTUwiLCJzdHJva2UiLCJjb2xvdXIiLCJsaW5lRWxlbXMiLCJzdG5OYW1lRWxlbSIsImJjciIsImdldCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInJpZ2h0IiwibGVmdCIsIm1hcCIsInN0biIsImluZGV4IiwibGluZUljb25Db2xvdXIiLCJsaW5lSWNvbkVsZW0iLCJmaWxsIiwibGluZU51bWJlciIsIlN0cmluZyIsIm5hbWVaSCIsIm1hdGNoIiwibGluZU5hbWUiLCJsaW5lTmFtZUVsZW0iLCJmZyIsInB1c2giLCJzdG5JbmZvRWxlbSIsInBhcmVudCIsImF0dHIiLCJwYXJhbSIsInN0bklkIiwic3RuSW5mbyIsImNoYW5nZV90eXBlIiwiX3BsYXRmb3JtTnVtIiwiZmxhZ0xlbmd0aCIsIndpZHRoIiwiaXNMZWZ0IiwiX2RpcmVjdGlvbiIsImFycm93WCIsIl9zdmdEZXN0V2lkdGgiLCJhcnJvd1JvdGF0ZSIsInBsYXRmb3JtTnVtWCIsInR4dEFuY2hvciIsImRlc3ROYW1lWCIsImRlc3RpbmF0aW9uc196aCIsImRlc3RpbmF0aW9uc19lbiIsImZvckVhY2giLCJzdGF0aW9ucyIsImpvaW4iLCJsaW5lTmFtZVgiLCJsaW5lTmFtZVpIIiwibGluZU5hbWVFTiIsIl9saW5lTmFtZXMiLCJfdGhlbWVDb2xvdXIiLCJoaWRlIiwicGF0aCIsImQiLCJzdG5JbnN0YW5jZSIsIk9iamVjdCIsImVudHJpZXMiLCJpbmNsdWRlcyIsImh0bWwiLCJmaWx0ZXIiLCJ1bmdycEljb25IVE1MIiwiYnJhbmNoZXMiLCJzdG5JZHMiLCJ0eXBlIiwicHJldklkIiwicHJldlkiLCJwcmV2WCIsImUiLCJmdW4iLCJoYXNPd25Qcm9wZXJ0eSIsInhiIiwieWIiLCJ4bSIsInltIiwiaCIsInJlbW92ZUNsYXNzIiwiZHJhd0xpbmUiLCJmaWxsVGhlbWVDb2xvdXIiLCJjaGlsZHJlbiIsIl9mZ0NvbG91ciIsImxpbmUiLCJkcmF3U1ZHRnJhbWUiLCJzaG93RnJhbWVPdXRlciIsImRyYXdTdG5zIiwiZHJhd1N0cmlwIiwiZHJhd0Rlc3RJbmZvIiwibG9hZEZvbnRzIiwidXBkYXRlU3RuTmFtZUJnIiwidmFsIiwiZGlyZWN0aW9uIiwiY3VycmVudFN0bklkIiwiaW5mbyIsInVwZGF0ZVN0blRyYW5zZmVyIiwiZW1wdHkiLCJwcmVwIiwibG9jIiwiZW5kIiwibmV3SWQiLCJuZXdJbmZvIiwiYWRkU3RuIiwieVBjIiwiX3N2Z0hlaWdodCJdLCJtYXBwaW5ncyI6ImtIQUtBLE1BQU0sVUFBcUIsSUFDdkIsWUFBWUEsRUFBUUMsR0FDaEJDLE1BQU1GLEVBQUlDLEdBQ1ZFLEtBQUtDLE9BQVNILEVBQUtJLElBR3ZCLGlCQUFtQixPQUFPLEVBQzFCLG9CQUFzQixPQUFPRixLQUFLRyxFQUFJLEVBQUksSUFBTSxFQUNoRCxZQUNJLElBQUlDLEVBQVdKLEtBQUtLLEtBQUssR0FBR0MsTUFBTSxNQUFNQyxPQUN4QyxJQUFJQyxFQVNKLE9BUElBLEVBREFSLEtBQUtTLFdBQ3VCLElBQXZCVCxLQUFLVSxlQUF1QixFQUFJLEdBQXNCLElBQWhCTixFQUFXLEdBQVVPLEtBQUtDLEtBQUssSUFFOUMsSUFB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RUFBS0ssZUFDTEwsRUFBS00sWUFDTE4sRUFBS08sa0JBSVQsY0FBY0MsR0FDVnpILE1BQU0wSCxVQUFZRCxFQUVsQnhILEtBQUs2RyxrQkFJVCxpQkFBaUJXLEdBQ2J6SCxNQUFNMkgsYUFBZUYsRUFFckJ4SCxLQUFLNkcsa0JBSVQsa0JBQWtCbEQsRUFBV29DLEVBQU00QixFQUFPLE1BQ3RDNUgsTUFBTTZILGtCQUFrQmpFLEVBQU9vQyxFQUFNNEIsR0FFckMzSCxLQUFLNkcsa0JBR0w1RixFQUFFLGNBQWM0RyxRQUNoQjdILEtBQUttSCxXQUlULE9BQU9XLEVBQTBCbkUsRUFBV29FLEVBQUtDLEdBQzdDLElBQUtDLEVBQU9DLEdBQVduSSxNQUFNb0ksT0FBT0wsRUFBTW5FLEVBQU9vRSxFQUFLQyxHQUV0RCxPQURBaEksS0FBSzZHLGtCQUNFLENBQUNvQixFQUFPQyxHQUluQixRQUFRVixHQUNKekgsTUFBTXFJLElBQU1aLEVBRVosSUFBSXJILEVBQUlxSCxFQUFNeEgsS0FBS3FJLFdBQWEsR0FDaENwSCxFQUFFLFVBQVV3QyxLQUFLLFlBQWEsZUFBZXREIiwiZmlsZSI6IkxpbmVTSC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSTUdTdGF0aW9uLCBJbnRJbmZvVGFnLCBJbnRlcmNoYW5nZUluZm8gfSBmcm9tICcuL1N0YXRpb24nO1xyXG5pbXBvcnQgeyBJRCwgTmFtZSwgQnJhbmNoSW5mbywgU3RhdGlvbkluZm8gfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG5jb25zdCBzdGF0aW9uX2lkID0gJ3N0bl9zaCdcclxuXHJcbmNsYXNzIFJNR1N0YXRpb25TSCBleHRlbmRzIFJNR1N0YXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoaWQ6IElELCBkYXRhOiBTdGF0aW9uSW5mbykge1xyXG4gICAgICAgIHN1cGVyKGlkLCBkYXRhKTtcclxuICAgICAgICB0aGlzLnN0bk51bSA9IGRhdGEubnVtO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBfbmFtZVNoaWZ0KCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgIGdldCBfdGlja1JvdGF0aW9uKCkgeyByZXR1cm4gdGhpcy55ID4gMCA/IDE4MCA6IDA7IH1cclxuICAgIGdldCBfZHhkeSgpIHtcclxuICAgICAgICB2YXIgbmFtZUVOTG4gPSB0aGlzLm5hbWVbMV0uc3BsaXQoJ1xcXFwnKS5sZW5ndGg7XHJcbiAgICAgICAgbGV0IGR4OiBudW1iZXI7XHJcbiAgICAgICAgaWYgKHRoaXMuX25hbWVTaGlmdCkge1xyXG4gICAgICAgICAgICBkeCA9IHRoaXMuX3RpY2tSb3RhdGlvbiA9PT0gMCA/IC05IDogMTYgKyAobmFtZUVOTG4gLSAxKSAqIDEyICogTWF0aC5jb3MoLTQ1KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkeCA9IHRoaXMuX3RpY2tSb3RhdGlvbiA9PT0gMCA/ICgyNCArIChuYW1lRU5MbiAtIDEpICogMTIpICogTWF0aC5jb3MoLTQ1KSA6IC02O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBsZXQgZHggPSB0aGlzLl9uYW1lU2hpZnQgPyAtOCA6ICgyNCArIChuYW1lRU5Mbi0xKSoxMikgKiBNYXRoLmNvcygtNDUpO1xyXG4gICAgICAgIGxldCBkeSA9IHRoaXMuX3RpY2tSb3RhdGlvbiA9PT0gMCA/ICgtNCAtIDIxLjkyMTg3NSAtIChuYW1lRU5MbiAtIDEpICogMTIgKiBNYXRoLmNvcygtNDUpKSA6IDE3LjU7XHJcbiAgICAgICAgLy8gdmFyIGR5ID0gKC00IC0gMjEuOTIxODc1IC0gKG5hbWVFTkxuLTEpKjEyKk1hdGguY29zKC00NSkpICogKHRoaXMuX3RpY2tSb3RhdGlvbiA9PT0gMCA/IDEgOiAtMSk7XHJcbiAgICAgICAgcmV0dXJuIFtkeCwgZHldXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGljb25IVE1MKCkge1xyXG4gICAgICAgIHZhciBbaWNvblR5cGUsIG51bUNsYXNzXSA9ICh0aGlzLnN0YXRlID09IC0xKSA/IFtzdGF0aW9uX2lkICsgJ19wYXNzJywgJ1Bhc3MnXSA6IFtzdGF0aW9uX2lkLCAnRnV0dXJlJ107XHJcbiAgICAgICAgcmV0dXJuICQoJzxnPicsIHsgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7dGhpcy54fSwke3RoaXMueX0pYCB9KVxyXG4gICAgICAgICAgICAuYXBwZW5kKCQoJzx1c2U+JywgeyAneGxpbms6aHJlZic6ICcjJyArIGljb25UeXBlLCBjbGFzczogJ3JtZy1zdG4nIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmFtZUhUTUwoKSB7XHJcbiAgICAgICAgbGV0IFtkeCwgZHldID0gdGhpcy5fZHhkeVxyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7XHJcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBgdHJhbnNsYXRlKCR7dGhpcy54IC0gZHh9LCR7dGhpcy55ICsgZHl9KXJvdGF0ZSgtNTApYCxcclxuICAgICAgICAgICAgJ3RleHQtYW5jaG9yJzogdGhpcy5fdGlja1JvdGF0aW9uID09PSAwID8gJ3N0YXJ0JyA6ICdlbmQnLFxyXG4gICAgICAgICAgICAvLyBjbGFzczogYE5hbWUgJHt0aGlzLm5hbWVDbGFzc31gXHJcbiAgICAgICAgICAgIGNsYXNzOiBgTmFtZSBGdXR1cmVgICAvLyB0b2RvOiBmaXggdGhpc1xyXG4gICAgICAgIH0pLmFwcGVuZChcclxuICAgICAgICAgICAgJCgnPHRleHQ+JykuYWRkQ2xhc3MoJ3JtZy1uYW1lX196aCBybWctbmFtZV9fc2htZXRyby0tc3RhdGlvbicpLnRleHQodGhpcy5uYW1lWzBdKVxyXG4gICAgICAgICkuYXBwZW5kKFxyXG4gICAgICAgICAgICAkKCc8dGV4dD4nLCB7XHJcbiAgICAgICAgICAgICAgICBkeTogMTUsIGNsYXNzOiAncm1nLW5hbWVfX2VuIHJtZy1uYW1lX19zaG1ldHJvLS1zdGF0aW9uJ1xyXG4gICAgICAgICAgICB9KS50ZXh0KHRoaXMubmFtZVsxXS5zcGxpdCgnXFxcXCcpWzBdKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAkKCc8dHNwYW4+Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICd4JzogMCwgJ2R5JzogMTJcclxuICAgICAgICAgICAgICAgIH0pLnRleHQodGhpcy5uYW1lWzFdLnNwbGl0KCdcXFxcJylbMV0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBJbnRTdGF0aW9uU0ggZXh0ZW5kcyBSTUdTdGF0aW9uU0gge1xyXG4gICAgcHJvdGVjdGVkIF9pbnRJbmZvczogSW50ZXJjaGFuZ2VJbmZvW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoaWQ6IElELCBkYXRhOiBTdGF0aW9uSW5mbykge1xyXG4gICAgICAgIHN1cGVyKGlkLCBkYXRhKTtcclxuICAgICAgICB0aGlzLl9pbnRJbmZvcyA9IGRhdGEuaW50ZXJjaGFuZ2VbMF07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGFwcGVuZCBkb20gYW5kIHRoZW4gZ2V0Qm91bmRpbmdDbGllbnRSZWN0XHJcbiAgICAvLyB0byBnZXQgdGhlIGV4YWN0IHBvc2l0aW9uIHdoZXJlIGludCBpY29uIGNhbiBiZSBmaXRcclxuICAgIGdldCBodG1sKCkge1xyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7IGlkOiB0aGlzLmlkIH0pLmFwcGVuZCguLi50aGlzLnVuZ3JwSFRNTCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGdldCBhbGwgZHJhd2luZyBmdW5jdGlvbiB0byBiZSBjYWxsZWRcclxuICAgIGdldCB1bmdycEhUTUwoKSB7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLmljb25IVE1MLCB0aGlzLm5hbWVIVE1MXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdW5ncnBJY29uSFRNTCgpIHtcclxuICAgICAgICByZXR1cm4gWy4uLnRoaXMuaW50VGlja0hUTUxdXHJcbiAgICB9XHJcblxyXG4gICAgLy8gaW50ZXJjaGFuZ2Ugc3RhdGlvbiBpY29uIG9uIG1haW4gbGluZVxyXG4gICAgZ2V0IGljb25IVE1MKCkge1xyXG4gICAgICAgIHZhciBbaWNvblR5cGUsIG51bUNsYXNzXSA9ICh0aGlzLnN0YXRlID09IC0xKSA/IFsnaW50Ml9zaF9wYXNzJywgJ1Bhc3MnXSA6IFsnaW50Ml9zaCcsICdGdXR1cmUnXTtcclxuICAgICAgICByZXR1cm4gJCgnPGc+JywgeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHt0aGlzLnh9LCR7dGhpcy55fSlgIH0pXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJCgnPHVzZT4nLCB7ICd4bGluazpocmVmJzogJyMnICsgaWNvblR5cGUsIGNsYXNzOiAncm1nLXN0bicsIHN0cm9rZTogdGhpcy5faW50SW5mb3NbSW50SW5mb1RhZy5jb2xvdXJdIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZWd1bGFyIHN0YXRpb24gbmFtZVxyXG4gICAgZ2V0IG5hbWVIVE1MKCkge1xyXG4gICAgICAgIGxldCBbZHgsIGR5XSA9IHRoaXMuX2R4ZHk7XHJcbiAgICAgICAgLy8gd3JhcCB0aGUgbmFtZSwgZGVjcm9fbGluZSBhbmQgaW50X2xpbmUgdW5kZXIgZyBpbiBvcmRlciB0byByb3RhdGUgYXQgb25jZVxyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke3RoaXMueCAtIGR4fSwke3RoaXMueSArIGR5fSlgLCAgLy9yb3RhdGUoLTYwKVxyXG4gICAgICAgIH0pLmFwcGVuZChcclxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG5hbWUgdGV4dFxyXG4gICAgICAgICAgICAkKCc8Zz4nLCB7XHJcbiAgICAgICAgICAgICAgICBpZDogYHJtZy1uYW1lX19zaG1ldHJvLS0ke3RoaXMuaWR9YCxcclxuICAgICAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6IHRoaXMuX3RpY2tSb3RhdGlvbiA9PT0gMCA/ICdzdGFydCcgOiAnZW5kJyxcclxuICAgICAgICAgICAgICAgIGNsYXNzOiBgTmFtZSBGdXR1cmVgICAvLyB0b2RvOiBmaXggdGhpc1xyXG4gICAgICAgICAgICB9KS5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAkKCc8dGV4dD4nKS5hZGRDbGFzcygncm1nLW5hbWVfX3poIHJtZy1uYW1lX19zaG1ldHJvLS1zdGF0aW9uJykudGV4dCh0aGlzLm5hbWVbMF0pXHJcbiAgICAgICAgICAgICkuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgJCgnPHRleHQ+Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIGR5OiAxNSwgY2xhc3M6ICdybWctbmFtZV9fZW4gcm1nLW5hbWVfX3NobWV0cm8tLXN0YXRpb24nXHJcbiAgICAgICAgICAgICAgICB9KS50ZXh0KHRoaXMubmFtZVsxXS5zcGxpdCgnXFxcXCcpWzBdKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnPHRzcGFuPicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3gnOiAwLCAnZHknOiAxMlxyXG4gICAgICAgICAgICAgICAgICAgIH0pLnRleHQodGhpcy5uYW1lWzFdLnNwbGl0KCdcXFxcJylbMV0pXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gaW50ZXJjaGFuZ2Ugc3RhdGlvbiBpY29uIGFmdGVyIHRoZSBzdGF0aW9uIG5hbWVcclxuICAgIGdldCBpbnRUaWNrSFRNTCgpIHtcclxuICAgICAgICBsZXQgbGluZUVsZW1zOiBKUXVlcnk8SFRNTEVsZW1lbnQ+W10gPSBbXVxyXG5cclxuICAgICAgICAvLyBnZXQgdGhlIGV4YWN0IHN0YXRpb24gbmFtZSB3aWR0aCBzbyB0aGF0IHRoZVxyXG4gICAgICAgIC8vIGludGVyY2hhbmdlIHN0YXRpb24gaWNvbiBjYW4gYmUgcmlnaHQgYWZ0ZXIgdGhlIHN0YXRpb24gbmFtZVxyXG4gICAgICAgIGxldCBzdG5OYW1lRWxlbSA9ICQoYCNybWctbmFtZV9fc2htZXRyby0tJHt0aGlzLmlkfWApXHJcbiAgICAgICAgbGV0IGJjciA9IHN0bk5hbWVFbGVtLmdldCgwKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxyXG4gICAgICAgIGxldCBkeCA9IGJjci5yaWdodCAtIGJjci5sZWZ0ICsgNVxyXG5cclxuICAgICAgICB0aGlzLl9pbnRJbmZvcy5tYXAoKHN0biwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgLy8gaW50ZXJjaGFuZ2UgbGluZSBpY29uIGFmdGVyIHN0YXRpb24gbmFtZVxyXG4gICAgICAgICAgICB2YXIgbGluZUljb25Db2xvdXIgPSBzdG5bSW50SW5mb1RhZy5jb2xvdXJdO1xyXG4gICAgICAgICAgICB2YXIgbGluZUljb25FbGVtID0gJCgnPHVzZT4nLCB7XHJcbiAgICAgICAgICAgICAgICAneGxpbms6aHJlZic6ICcjaW50X3NoJyxcclxuICAgICAgICAgICAgICAgIGZpbGw6IGxpbmVJY29uQ29sb3VyLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7ZHggKyBpbmRleCAqIDI1fSwtMTIpYCxcclxuICAgICAgICAgICAgICAgIGNsYXNzOiAncm1nLWxpbmVfX3NobWV0cm8gcm1nLWxpbmVfX2NoYW5nZScsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgbGluZUljb25FbGVtLmFkZENsYXNzKCdybWctbGluZV9fcGFzcycpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBsaW5lIHN0YXJ0cyB3aXRoIG51bWJlcnMgb3IgbGV0dGVyc1xyXG4gICAgICAgICAgICBsZXQgbGluZU51bWJlciA9IFN0cmluZyhzdG5bSW50SW5mb1RhZy5uYW1lWkhdKS5tYXRjaCgvKFxcZCopXFx3Ky8pXHJcbiAgICAgICAgICAgIGlmIChsaW5lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluZU5hbWUgPSBsaW5lTnVtYmVyWzBdXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluZU5hbWUgPSBTdHJpbmcoc3RuW0ludEluZm9UYWcubmFtZVpIXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpbnRlcmNoYW5nZSBsaW5lIG5hbWVcclxuICAgICAgICAgICAgdmFyIGxpbmVOYW1lRWxlbSA9ICQoJzx0ZXh0PicsIHtcclxuICAgICAgICAgICAgICAgIC8vIFRvZG86IGZpeCB0aGlzIGhhcmQtY29kZWQgY2VudGVyKDEwKSBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7ZHggKyAxMCArIGluZGV4ICogMjV9LDgpYCxcclxuICAgICAgICAgICAgICAgIGNsYXNzOiAncm1nLW5hbWVfX3poIHJtZy1uYW1lX19zaG1ldHJvLS1saW5lX25hbWUnLFxyXG4gICAgICAgICAgICAgICAgJ3RleHQtYW5jaG9yJzogJ21pZGRsZScsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBzdG5bSW50SW5mb1RhZy5mZ10sXHJcbiAgICAgICAgICAgIH0pLnRleHQobGluZU5hbWUpXHJcblxyXG4gICAgICAgICAgICBsaW5lRWxlbXMucHVzaChsaW5lSWNvbkVsZW0sIGxpbmVOYW1lRWxlbSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAvLyByb3RhdGUgdGhlIHN0YXRpb24gaW5mbyBub3dcclxuICAgICAgICAvLyBvdGhlciB3aXNlIHRoZSBiY3Igd2lsbCBiZSBpbmFjY3VyYXRlIGR1ZSB0byB0aGUgcm90YXRpb25cclxuICAgICAgICBsZXQgc3RuSW5mb0VsZW0gPSBzdG5OYW1lRWxlbS5wYXJlbnQoKTtcclxuICAgICAgICBzdG5JbmZvRWxlbS5hdHRyKCd0cmFuc2Zvcm0nLCBgJHtzdG5JbmZvRWxlbS5hdHRyKCd0cmFuc2Zvcm0nKX1yb3RhdGUoLTUwKWApXHJcblxyXG4gICAgICAgIHJldHVybiBsaW5lRWxlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF9uYW1lQ2xhc3MoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnN0YXRlID09IC0xKSA/ICdQYXNzJyA6ICdGdXR1cmUnO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBSTUdTdGF0aW9uU0gsIEludFN0YXRpb25TSCwgc3RhdGlvbl9pZCB9O1xyXG4iLCJpbXBvcnQgeyBSTUdMaW5lIH0gZnJvbSAnLi9MaW5lJztcclxuaW1wb3J0IHsgUk1HU3RhdGlvblNILCBJbnRTdGF0aW9uU0gsIHN0YXRpb25faWQgfSBmcm9tICcuLi9TdGF0aW9uL1N0YXRpb25TSCc7XHJcbmltcG9ydCB7IFJNR1N0YXRpb24gfSBmcm9tICcuLi9TdGF0aW9uL1N0YXRpb24nO1xyXG5cclxuaW1wb3J0IHsgSUQsIE5hbWUsIFN0YXRpb25JbmZvLCBSTUdQYXJhbSwgc2V0UGFyYW1zIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJNR0xpbmVTSCBleHRlbmRzIFJNR0xpbmUge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW0pIHtcclxuICAgICAgICBzdXBlcihwYXJhbSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2luaXRTdG5JbnN0YW5jZShzdG5JZDogSUQsIHN0bkluZm86IFN0YXRpb25JbmZvKTogUk1HU3RhdGlvbiB7XHJcbiAgICAgICAgc3dpdGNoIChzdG5JbmZvLmNoYW5nZV90eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2ludDInOlxyXG4gICAgICAgICAgICBjYXNlICdpbnQzX2wnOlxyXG4gICAgICAgICAgICBjYXNlICdpbnQzX3InOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRTdGF0aW9uU0goc3RuSWQsIHN0bkluZm8pO1xyXG4gICAgICAgICAgICBjYXNlICdvc2kxMV91bCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTExX3BsJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMTFfdXInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kxMV9wcic6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTEyX3VsJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMTJfcGwnOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kxMl91cic6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTEyX3ByJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjFfdWwnOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kyMV9wbCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTIxX3VyJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjFfcHInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kyMl91bCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTIyX3BsJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjJfdXInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kyMl9wcic6XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJNR1N0YXRpb25TSChzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGRyYXcgdGhlIGRlc3RpbmF0aW9uXHJcbiAgICBkcmF3RGVzdEluZm8oKSB7XHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI3BsYXRmb3JtID4gdGV4dCcpLnRleHQodGhpcy5fcGxhdGZvcm1OdW0pO1xyXG5cclxuICAgICAgICB2YXIgYmNyID0gJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2Rlc3RfdGV4dCcpWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHZhciBmbGFnTGVuZ3RoID0gMTYwICsgMTUwICsgYmNyLndpZHRoICsgNDUgKyA1MDtcclxuXHJcblxyXG5cclxuICAgICAgICAvLyBhcnJvd1xyXG4gICAgICAgIHZhciBpc0xlZnQgPSAodGhpcy5fZGlyZWN0aW9uID09ICdsJykgPyAxIDogLTE7XHJcbiAgICAgICAgdmFyIGFycm93WCA9ICh0aGlzLl9zdmdEZXN0V2lkdGggLSBpc0xlZnQgKiBmbGFnTGVuZ3RoKSAvIDIwO1xyXG4gICAgICAgIGFycm93WCA9ICh0aGlzLl9kaXJlY3Rpb24gPT0gJ2wnKSA/IGFycm93WCA6IHRoaXMuX3N2Z0Rlc3RXaWR0aCAtIDIwO1xyXG4gICAgICAgIHZhciBhcnJvd1JvdGF0ZSA9IDkwICogKDEgLSBpc0xlZnQpO1xyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNhcnJvd19sZWZ0X3VzZScpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHthcnJvd1h9LDEzNSlyb3RhdGUoJHthcnJvd1JvdGF0ZX0pYCk7XHJcblxyXG4gICAgICAgIC8vIG5vdCBpbiB1c2Ugbm93XHJcbiAgICAgICAgdmFyIHBsYXRmb3JtTnVtWCA9IGFycm93WCArIGlzTGVmdCAqICgxNjAgKyA1MCArIDc1KTtcclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjcGxhdGZvcm0nKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7cGxhdGZvcm1OdW1YfSwxMzApYCk7XHJcblxyXG4gICAgICAgIC8vIGxpc3QgdGhlIGRlc3RpbmF0aW9uIHRleHRcclxuICAgICAgICAvLyBUb2RvOiBmaXggc3ZnX2Rlc3Rfd2lkdGgqMC44LCB0aGlzIGhhcyBvbmx5IGJlZW4gdGVzdGVkIG9uIDEwMDAgd2lkdGhcclxuICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSAncicpIHtcclxuICAgICAgICAgICAgdmFyIHR4dEFuY2hvciA9ICdlbmQnO1xyXG4gICAgICAgICAgICB2YXIgZGVzdE5hbWVYID0gdGhpcy5fc3ZnRGVzdFdpZHRoICogMC44O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciB0eHRBbmNob3IgPSAnc3RhcnQnO1xyXG4gICAgICAgICAgICB2YXIgZGVzdE5hbWVYID0gdGhpcy5fc3ZnRGVzdFdpZHRoICogMC4yO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjZGVzdF90ZXh0JykuYXR0cih7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke2Rlc3ROYW1lWH0sMTM1KWAsXHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6IHR4dEFuY2hvclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBmb3IgZWFjaCBsZWZ0IHZhbGlkIGRlc3RpbmF0aW9ucywgZ2V0IHRoZSBuYW1lIGZyb20gaWRcclxuICAgICAgICB2YXIgW2Rlc3RpbmF0aW9uc196aCwgZGVzdGluYXRpb25zX2VuXTogU3RyaW5nW11bXSA9IFtbXSwgW11dXHJcbiAgICAgICAgdGhpc1tgJHt0aGlzLl9kaXJlY3Rpb259VmFsaWREZXN0c2BdLmZvckVhY2goc3RuID0+IHtcclxuICAgICAgICAgICAgZGVzdGluYXRpb25zX3poLnB1c2godGhpcy5zdGF0aW9uc1tzdG5dLm5hbWVbMF0pXHJcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uc19lbi5wdXNoKHRoaXMuc3RhdGlvbnNbc3RuXS5uYW1lWzFdKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNkZXN0X3RleHQgPiB0ZXh0OmZpcnN0LWNoaWxkJykudGV4dChg5b6AJHtkZXN0aW5hdGlvbnNfemguam9pbihcIu+8jFwiKX1gKVxyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNkZXN0X3RleHQgPiB0ZXh0Omxhc3QtY2hpbGQnKS50ZXh0KGBUbyAke2Rlc3RpbmF0aW9uc19lbi5qb2luKFwiLCBcIil9YClcclxuXHJcbiAgICAgICAgLy8gcHJlcGFyZSBmb3IgdGhlIGxpbmUgbmFtZVxyXG4gICAgICAgIGxldCBsaW5lTmFtZVggPSB0aGlzLl9kaXJlY3Rpb24gPT09ICdsJyA/IHRoaXMuX3N2Z0Rlc3RXaWR0aCA6IDMyMFxyXG4gICAgICAgIHZhciBbbGluZU5hbWVaSCwgbGluZU5hbWVFTl0gPSB0aGlzLl9saW5lTmFtZXM7XHJcblxyXG4gICAgICAgIC8vIGxpbmUgc3RhcnRzIHdpdGggbnVtYmVycyBvciBsZXR0ZXJzXHJcbiAgICAgICAgdmFyIGxpbmVOdW1iZXIgPSBsaW5lTmFtZVpILm1hdGNoKC8oXFxkKilcXHcrLylcclxuICAgICAgICBpZiAobGluZU51bWJlcikge1xyXG4gICAgICAgICAgICBsaW5lTmFtZVggLT0gMTgwO1xyXG4gICAgICAgICAgICBsaW5lTmFtZVpIID0gXCLlj7fnur9cIlxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9udW1iZXIgPiByZWN0JykuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAnc3R5bGUnOiBgZmlsbDoke3RoaXMuX3RoZW1lQ29sb3VyfWAsXHJcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZSgke2xpbmVOYW1lWCAtIDEyMH0sNzApYFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9udW1iZXIgPiB0ZXh0JylcclxuICAgICAgICAgICAgICAgIC50ZXh0KGxpbmVOdW1iZXJbMF0pXHJcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke2xpbmVOYW1lWCAtIDcwfSwxNzApYClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsaW5lTmFtZVggLT0gMjgwO1xyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9udW1iZXIgPiByZWN0JykuYXR0cih7XHJcbiAgICAgICAgICAgICAgICAnc3R5bGUnOiBgZmlsbDoke3RoaXMuX3RoZW1lQ29sb3VyfWAsXHJcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZSgke2xpbmVOYW1lWCAtIDEwfSw2MClgLFxyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogMjYwLFxyXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6IDE1MFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9udW1iZXIgPiB0ZXh0JykuaGlkZSgpXHJcblxyXG4gICAgICAgICAgICAvLyBUb2RvOiBzZXQgdGhlIGVuZyBpbiB0aGUgbWlkZGxlXHJcbiAgICAgICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX25hbWVfdGV4dCA+IHRleHQ6bGFzdC1jaGlsZCcpLmF0dHIoJ2R4JywgMTApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzZXQgdGhlIGxpbmUgbmFtZVxyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX25hbWVfdGV4dCA+IHRleHQ6Zmlyc3QtY2hpbGQnKS50ZXh0KGxpbmVOYW1lWkgpXHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbmFtZV90ZXh0ID4gdGV4dDpsYXN0LWNoaWxkJykudGV4dChsaW5lTmFtZUVOKVxyXG4gICAgICAgICQoJyNzdGF0aW9uX2luZm9fc2htZXRybyA+ICNsaW5lX25hbWVfdGV4dCcpLmF0dHIoe1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtsaW5lTmFtZVh9LDEzNSlgLFxyXG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiAnc3RhcnQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHRoZSBsYXN0IGRlY29yYXRpb24gbGluZVxyXG4gICAgICAgIGxldCBwYXRoID0gJydcclxuICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09ICdsJykge1xyXG4gICAgICAgICAgICBwYXRoID0gYE0zMCwxMCBIICR7dGhpcy5fc3ZnRGVzdFdpZHRoIC0gMjB9IFYgMjAgSCAyMCBaYFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBhdGggPSBgTTIwLDEwIEggJHt0aGlzLl9zdmdEZXN0V2lkdGggLSAzMH0gbCAxMCwxMCBIIDIwIFpgXHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJyNsaW5lX3NobWV0cm9fdXNlJykuYXR0cih7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgwLDIyMClgLFxyXG4gICAgICAgICAgICBkOiBwYXRoLFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGFwcGVuZCBkb20gYW5kIHRoZW4gZ2V0Qm91bmRpbmdDbGllbnRSZWN0XHJcbiAgICAvLyB0byBnZXQgdGhlIGV4YWN0IHBvc2l0aW9uIHdoZXJlIGludCBpY29uIGNhbiBiZSBmaXRcclxuICAgIGRyYXdTdG5zKCkge1xyXG4gICAgICAgIGZvciAobGV0IFtzdG5JZCwgc3RuSW5zdGFuY2VdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3RhdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIGlmIChbJ2xpbmVzdGFydCcsICdsaW5lZW5kJ10uaW5jbHVkZXMoc3RuSWQpKSB7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICQoJyNzdG5faWNvbnMnKS5hcHBlbmQoc3RuSW5zdGFuY2UuaHRtbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJyNzdG5faWNvbnMnKS5odG1sKCQoJyNzdG5faWNvbnMnKS5odG1sKCkpOyAvLyBSZWZyZXNoIERPTVxyXG5cclxuICAgICAgICBmb3IgKGxldCBbc3RuSWQsIHN0bkluc3RhbmNlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN0YXRpb25zKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHN0biA9PiBzdG5bMV0gaW5zdGFuY2VvZiBJbnRTdGF0aW9uU0gpIGFzIFtJRCwgSW50U3RhdGlvblNIXVtdKSB7XHJcbiAgICAgICAgICAgICQoYCNybWctbmFtZV9fc2htZXRyby0tJHtzdG5JZH1gKS5wYXJlbnQoKS5hcHBlbmQoc3RuSW5zdGFuY2UudW5ncnBJY29uSFRNTClcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnI3N0bl9pY29ucycpLmh0bWwoJCgnI3N0bl9pY29ucycpLmh0bWwoKSk7IC8vIFJlZnJlc2ggRE9NXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGNoYW5nZSB0aGUgeSBvZiBicmFuY2ggc3RhdGlvblxyXG4gICAgX3N0bllTaGFyZShzdG5JZCk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKHRoaXMuYnJhbmNoZXNbMF0uaW5jbHVkZXMoc3RuSWQpKSByZXR1cm4gMDtcclxuICAgICAgICBlbHNlIHJldHVybiAzXHJcbiAgICB9XHJcblxyXG4gICAgX2xpbmVQYXRoKHN0bklkczogSURbXSwgdHlwZT86ICdtYWluJyB8ICdwYXNzJyk6IHN0cmluZyB7XHJcbiAgICAgICAgdmFyIFtwcmV2SWQsIHByZXZZLCBwcmV2WF06IFtzdHJpbmc/LCBudW1iZXI/LCBudW1iZXI/XSA9IFtdXHJcbiAgICAgICAgdmFyIHBhdGg6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyW10gfSA9IHt9XHJcbiAgICAgICAgY29uc3QgZSA9IDMwXHJcblxyXG4gICAgICAgIHN0bklkcy5mb3JFYWNoKHN0bklkID0+IHtcclxuICAgICAgICAgICAgdmFyIFt4LCB5XSA9IFsnX3N0blJlYWxYJywgJ19zdG5SZWFsWSddLm1hcChmdW4gPT4gdGhpc1tmdW5dKHN0bklkKSlcclxuICAgICAgICAgICAgaWYgKCFwcmV2WSAmJiBwcmV2WSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgW3ByZXZJZCwgcHJldlgsIHByZXZZXSA9IFtzdG5JZCwgeCwgeV07XHJcbiAgICAgICAgICAgICAgICBwYXRoWydzdGFydCddID0gW3gsIHldO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIG1lcmdlIGJhY2sgdG8gbWFpbiBsaW5lXHJcbiAgICAgICAgICAgICAgICBpZiAoeSAhPSBwcmV2WSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGhbJ2JpZnVyY2F0ZSddID0gW3ByZXZYLCBwcmV2WV1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBicmFuY2ggbGluZVxyXG4gICAgICAgICAgICAgICAgaWYgKHkgIT0gcHJldlkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoWydiaWZ1cmNhdGUnXSA9IFt4LCB5XVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhdGhbJ2VuZCddID0gW3gsIHldO1xyXG4gICAgICAgICAgICBbcHJldklkLCBwcmV2WCwgcHJldlldID0gW3N0bklkLCB4LCB5XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gZ2VuZXJhdGUgcGF0aFxyXG4gICAgICAgIGlmICghcGF0aC5oYXNPd25Qcm9wZXJ0eSgnc3RhcnQnKSkge1xyXG4gICAgICAgICAgICAvLyBubyBsaW5lIGdlbmVyYXRlZFxyXG4gICAgICAgICAgICAvLyBrZXlzIGluIHBhdGg6IG5vbmVcclxuICAgICAgICAgICAgcmV0dXJuICcnXHJcbiAgICAgICAgfSBlbHNlIGlmICghcGF0aC5oYXNPd25Qcm9wZXJ0eSgnZW5kJykpIHtcclxuICAgICAgICAgICAgLy8gbGl0dGUgbGluZSAob25seSBiZXlvbmQgdGVybWluYWwgc3RhdGlvbilcclxuICAgICAgICAgICAgLy8ga2V5cyBpbiBwYXRoOiBzdGFydFxyXG4gICAgICAgICAgICBsZXQgW3gsIHldID0gcGF0aFsnc3RhcnQnXVxyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ21haW4nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjdXJyZW50IGF0IHRlcm1pbmFsKGVuZCkgc3RhdGlvbiwgZHJhdyB0aGUgbGl0dGUgbWFpbiBsaW5lXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSAnbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4fSwke3kgLSA2fSBMICR7eCAtIGV9LCR7eSAtIDZ9IGwgLTEyLDEyIEwgJHt4fSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4fSwke3kgLSA2fSBMICR7eCArIGV9LCR7eSAtIDZ9IGwgMTIsMTIgTCAke3h9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0eXBlID09PSAncGFzcydcclxuICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgYXQgdGVybWluYWwoc3RhcnQpIHN0YXRpb24sIGRyYXcgdGhlIGxpdHRlIHBhc3MgbGluZVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gJ2wnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eH0sJHt5IC0gNn0gTCAke3ggKyBlfSwke3kgLSA2fSBsIDAsMTIgTCAke3ggLSBlfSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4IC0gZX0sJHt5IC0gNn0gTCAke3h9LCR7eSAtIDZ9IGwgMCwxMiBMICR7eCAtIGV9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIXBhdGguaGFzT3duUHJvcGVydHkoJ2JpZnVyY2F0ZScpKSB7XHJcbiAgICAgICAgICAgIC8vIGdlbmVyYWwgbWFpbiBsaW5lXHJcbiAgICAgICAgICAgIC8vIGtleXMgaW4gcGF0aDogc3RhcnQsIGVuZFxyXG4gICAgICAgICAgICBsZXQgW3gsIHldID0gcGF0aFsnc3RhcnQnXSwgaCA9IHBhdGhbJ2VuZCddWzBdXHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbWFpbicpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kaXJlY3Rpb24gPT09ICdsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3ggLSBlfSwke3kgLSA2fSBIICR7aH0gbCAwLDEyIEwgJHt4IC0gNDJ9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3h9LCR7eSAtIDZ9IEggJHtoICsgZX0gbCAxMiwxMiBMICR7eH0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHR5cGUgPT09ICdwYXNzJ1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gJ2wnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eCAtIGV9LCR7eSAtIDZ9IEggJHtoICsgZX0gbCAwLDEyIEwgJHt4IC0gZX0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eCAtIGV9LCR7eSAtIDZ9IEggJHtoICsgZX0gbCAwLDEyIEwgJHt4IC0gZX0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG1haW4gbGluZSBiaWZ1cmNhdGUgaGVyZSB0byBiZWNvbWUgdGhlIGJyYW5jaCBsaW5lXHJcbiAgICAgICAgICAgIC8vIGFuZCBwYXRoIHJldHVybiBoZXJlIGFyZSBvbmx5IGJyYW5jaCBsaW5lXHJcbiAgICAgICAgICAgIC8vIGtleXMgaW4gcGF0aDogc3RhcnQsIGJpZnVyY2F0ZSwgZW5kXHJcblxyXG4gICAgICAgICAgICAvLyBUb2RvOiBkaXNhYmxlIGxvd2VyIGJyYW5jaFxyXG4gICAgICAgICAgICBsZXQgW3gsIHldID0gcGF0aFsnc3RhcnQnXSwgaCA9IHBhdGhbJ2VuZCddWzBdXHJcbiAgICAgICAgICAgIGxldCBbeGIsIHliXSA9IHBhdGhbJ2JpZnVyY2F0ZSddLCBbeG0sIHltXSA9IHBhdGhbJ2VuZCddXHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbWFpbicpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kaXJlY3Rpb24gPT09ICdsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh5bSA+IHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFpbiBsaW5lLCBsZWZ0IGRpcmVjdGlvbiwgY2VudGVyIHRvIHVwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3ggLSBlfSwke3kgLSA2fSBIICR7eGIgKyBlfSBMICR7eG19LCR7eW0gLSA2fSBsIDAsMTIgTCAke3hiICsgZX0sJHt5YiArIDZ9IEwgJHt4IC0gZSAtIDEyfSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW4gbGluZSwgbGVmdCBkaXJlY3Rpb24sIHVwcGVyIHRvIGNlbnRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHNhbWUgYXMgdGhlIG90aGVyLCBidXQgcmVwbGFjZSB4IHdpdGggeG0gYW5kIHhtIHdpdGggeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4bX0sJHt5bSAtIDZ9IEggJHt4YiAtIGV9IEwgJHt4fSwke3kgLSA2fSBsIDAsMTIgTCAke3hiIC0gZX0sJHt5YiArIDZ9IEwgJHt4bX0sJHt5bSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeW0gPiB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW4gbGluZSwgcmlnaHQgZGlyZWN0aW9uLCB1cHBlciB0byBjZW50ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBNICR7eH0sJHt5IC0gNn0gSCAke3hiICsgZX0gTCAke3htfSwke3ltIC0gNn0gbCAwLDEyIEwgJHt4YiArIGV9LCR7eWIgKyA2fSBMICR7eH0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWluIGxpbmUsIHJpZ2h0IGRpcmVjdGlvbiwgY2VudGVyIHRvIHVwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgc2FtZSBhcyB0aGUgb3RoZXIsIGJ1dCByZXBsYWNlIHggd2l0aCB4bSBhbmQgeG0gd2l0aCB4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3htICsgZX0sJHt5bSAtIDZ9IEggJHt4YiAtIGV9IEwgJHt4fSwke3kgLSA2fSBsIDAsMTIgTCAke3hiIC0gZX0sJHt5YiArIDZ9IEwgJHt4bSArIGUgKyAxMn0sJHt5bSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gdHlwZSA9PT0gJ3Bhc3MnXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSAnbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeW0gPiB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhc3MgbGluZSwgbGVmdCBkaXJlY3Rpb24sIGNlbnRlciB0byB1cHBlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYE0gJHt4IC0gZX0sJHt5IC0gNn0gSCAke3hiICsgZX0gTCAke3htfSwke3ltIC0gNn0gbCAwLDEyIEwgJHt4YiArIGV9LCR7eWIgKyA2fSBMICR7eCAtIGV9LCR7eSArIDZ9IFpgXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFzcyBsaW5lLCBsZWZ0IGRpcmVjdGlvbiwgdXBwZXIgdG8gY2VudGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgc2FtZSBhcyB0aGUgb3RoZXIsIGJ1dCByZXBsYWNlIHggd2l0aCB4bSBhbmQgeG0gd2l0aCB4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3h9LCR7eSAtIDZ9IEwgJHt4YiAtIGV9LCR7eWIgLSA2fSBIICR7eG0gKyBlfSBsIDAsMTIgTCAke3hiIC0gZX0sJHt5YiArIDZ9IEwgJHt4fSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHltID4geSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXNzIGxpbmUsIHJpZ2h0IGRpcmVjdGlvbiwgdXBwZXIgdG8gY2VudGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3ggLSBlfSwke3kgLSA2fSBIICR7eGIgKyBlfSBMICR7eG19LCR7eW0gLSA2fSBsIDAsMTIgTCAke3hiICsgZX0sJHt5YiArIDZ9IEwgJHt4IC0gZX0sJHt5ICsgNn0gWmBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXNzIGxpbmUsIHJpZ2h0IGRpcmVjdGlvbiwgY2VudGVyIHRvIHVwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgc2FtZSBhcyB0aGUgb3RoZXIsIGJ1dCByZXBsYWNlIHggd2l0aCB4bSBhbmQgeG0gd2l0aCB4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgTSAke3h9LCR7eSAtIDZ9IEwgJHt4YiAtIGV9LCR7eWIgLSA2fSBIICR7eG0gKyBlfSBsIDAsMTIgTCAke3hiIC0gZX0sJHt5YiArIDZ9IEwgJHt4fSwke3kgKyA2fSBaYFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBkcmF3IHRoZSBsaW5lIGluIHJhaWxtYXBcclxuICAgIGRyYXdMaW5lKCkge1xyXG4gICAgICAgICQoJy5ybWctbGluZScpLnJlbW92ZUNsYXNzKCdybWctbGluZV9fbXRyJykuYWRkQ2xhc3MoJ3JtZy1saW5lX19zaG1ldHJvJyk7XHJcbiAgICAgICAgc3VwZXIuZHJhd0xpbmUoKVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxUaGVtZUNvbG91cigpIHtcclxuICAgICAgICBzdXBlci5maWxsVGhlbWVDb2xvdXIoKTtcclxuXHJcbiAgICAgICAgLy8gdGhpcyB3aWxsIGFkZCB0aGUgc3Ryb2tlIG9mIHRoZSBzdGF0aW9uIGNpcmNsZVxyXG4gICAgICAgIC8vIGhvd2V2ZXIgdGhlIHN0cm9rZSBwYXRoIGlzIGRlZmluZWQgaW4gaW5kZXguaHRtbFxyXG4gICAgICAgIC8vIHdoaWNoIG1hZGUgY2hhbmdpbmcgc3RhdGlvbiBzdHlsZSBzdHJhbmdlXHJcbiAgICAgICAgJCgncGF0aCMnICsgc3RhdGlvbl9pZCkuYXR0cignc3Ryb2tlJywgdGhpcy5fdGhlbWVDb2xvdXIpO1xyXG4gICAgICAgICQoJ3BhdGgjaW50Ml9zaCcpLmF0dHIoJ3N0cm9rZScsIHRoaXMuX3RoZW1lQ29sb3VyKTtcclxuXHJcbiAgICAgICAgLy8gcGFzcyBzdHJva2Ugc2hvdWxkIGJlIGFkZGVkIHNvbWV3aGVyZSBlbHNlXHJcbiAgICAgICAgLy8gYnV0IEkgY2FuJ3QgZmlndXJlIGl0IG91dFxyXG4gICAgICAgICQoJ3BhdGgjc3RuX3NoX3Bhc3MnKS5hdHRyKCdzdHJva2UnLCAnI2FhYScpO1xyXG4gICAgICAgICQoJ3BhdGgjaW50Ml9zaF9wYXNzJykuYXR0cignc3Ryb2tlJywgJyNhYWEnKTtcclxuXHJcbiAgICAgICAgLy8gdGhlIHJhaWxtYXAgbGluZVxyXG4gICAgICAgICQoJyNsaW5lX21haW4nKS5jaGlsZHJlbigpLmF0dHIoJ2ZpbGwnLCB0aGlzLl90aGVtZUNvbG91cilcclxuICAgICAgICAkKCcjbGluZV9wYXNzJykuY2hpbGRyZW4oKS5hdHRyKCdmaWxsJywgJyNhYWEnKVxyXG5cclxuICAgICAgICAvLyB0aGUgbGFzdCBkZWNvcmF0aW9uIGxpbmVcclxuICAgICAgICAkKGAjbGluZV9zaG1ldHJvX3VzZWApLmF0dHIoJ2ZpbGwnLCB0aGlzLl90aGVtZUNvbG91cilcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2xpbmVOYW1lc1swXS5tYXRjaCgvKFxcZCopXFx3Ky8pKSB7XHJcbiAgICAgICAgICAgIC8vIHRoZSBsaW5lIHN0YXJ0cyB3aXRoIG51bWJlclxyXG4gICAgICAgICAgICAkKCcjc3RhdGlvbl9pbmZvX3NobWV0cm8gPiAjbGluZV9udW1iZXIgPiB0ZXh0JykuYXR0cignZmlsbCcsICcjZmZmJylcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0aGUgbGluZSBzdGFydHMgd2l0aCBsZXR0ZXJcclxuICAgICAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbmFtZV90ZXh0JykuYXR0cignZmlsbCcsICcjZmZmJylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRlc3QgaW5mbyBsaW5lIGNvbG9yXHJcbiAgICAgICAgJCgnI3N0YXRpb25faW5mb19zaG1ldHJvID4gI2xpbmVfbnVtYmVyID4gdGV4dCcpLmF0dHIoJ2ZpbGwnLCB0aGlzLl9mZ0NvbG91cilcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTdG5OYW1lQmcoKSB7XHJcbiAgICAgICAgJCgnI2N1cnJlbnRfYmcnKS5oaWRlKCk7ICAvLyBmaXggdGhlIG15c3RlcmlvdXMgYmxhY2sgcmVjdFxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJld3JpdGUgdGhpcyB0byBtYWtlIHN1cmUgdGhlIGxpbmUgaXMgZHJhdyBiZWZvcmUgY29sb3JcclxuICAgIHN0YXRpYyBpbml0U1ZHKGxpbmUpIHtcclxuICAgICAgICBsaW5lLmRyYXdTVkdGcmFtZSgpO1xyXG4gICAgICAgIGxpbmUuc2hvd0ZyYW1lT3V0ZXIoKTtcclxuICAgICAgICBsaW5lLmRyYXdTdG5zKCk7XHJcblxyXG4gICAgICAgIC8vIGNoYW5nZSB0aGUgZnVuYyBjYWxsIGhlcmVcclxuICAgICAgICBsaW5lLmRyYXdMaW5lKCk7XHJcbiAgICAgICAgbGluZS5maWxsVGhlbWVDb2xvdXIoKTtcclxuICAgICAgICAvLyBjaGFuZ2UgdGhlIGZ1bmMgY2FsbCBoZXJlXHJcblxyXG4gICAgICAgIGxpbmUuZHJhd1N0cmlwKCk7XHJcbiAgICAgICAgbGluZS5kcmF3RGVzdEluZm8oKTtcclxuICAgICAgICBsaW5lLmxvYWRGb250cygpO1xyXG4gICAgICAgIGxpbmUudXBkYXRlU3RuTmFtZUJnKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGNhbGwgZmlsbFRoZW1lQ29sb3VyIHdoZW4gZmxpcCBkaXJlY3Rpb25cclxuICAgIHNldCBkaXJlY3Rpb24odmFsKSB7XHJcbiAgICAgICAgc3VwZXIuZGlyZWN0aW9uID0gdmFsXHJcblxyXG4gICAgICAgIHRoaXMuZmlsbFRoZW1lQ29sb3VyKClcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXdyaXRlIHRoaXMgdG8gY2FsbCBmaWxsVGhlbWVDb2xvdXIgd2hlbiBzZXQgY3VycmVudCBzdGF0aW9uXHJcbiAgICBzZXQgY3VycmVudFN0bklkKHZhbCkge1xyXG4gICAgICAgIHN1cGVyLmN1cnJlbnRTdG5JZCA9IHZhbFxyXG5cclxuICAgICAgICB0aGlzLmZpbGxUaGVtZUNvbG91cigpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGdldCBkcmF3U3RucyBhbmQgcmVjYWxsZWRcclxuICAgIHVwZGF0ZVN0blRyYW5zZmVyKHN0bklkOiBJRCwgdHlwZSwgaW5mbyA9IG51bGwpIHtcclxuICAgICAgICBzdXBlci51cGRhdGVTdG5UcmFuc2ZlcihzdG5JZCwgdHlwZSwgaW5mbylcclxuXHJcbiAgICAgICAgdGhpcy5maWxsVGhlbWVDb2xvdXIoKVxyXG5cclxuICAgICAgICAvLyBjbGVhciB0aGUgb3JpZ2luYWwgc3RhdGlvbnNcclxuICAgICAgICAkKCcjc3RuX2ljb25zJykuZW1wdHkoKVxyXG4gICAgICAgIHRoaXMuZHJhd1N0bnMoKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJld3JpdGUgdGhpcyB0byBjYWxsIGZpbGxUaGVtZUNvbG91ciB3aGVuIGFkZCBzdGF0aW9uXHJcbiAgICBhZGRTdG4ocHJlcDogJ2JlZm9yZScgfCAnYWZ0ZXInLCBzdG5JZDogSUQsIGxvYywgZW5kOiBJRCk6IFtJRCwgU3RhdGlvbkluZm9dIHtcclxuICAgICAgICBsZXQgW25ld0lkLCBuZXdJbmZvXSA9IHN1cGVyLmFkZFN0bihwcmVwLCBzdG5JZCwgbG9jLCBlbmQpXHJcbiAgICAgICAgdGhpcy5maWxsVGhlbWVDb2xvdXIoKVxyXG4gICAgICAgIHJldHVybiBbbmV3SWQsIG5ld0luZm9dXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV3cml0ZSB0aGlzIHRvIGNoYW5nZSB0aGUgcmFpbG1hcCBwb3NpdGlvblxyXG4gICAgc2V0IHlQYyh2YWwpIHtcclxuICAgICAgICBzdXBlci55UGMgPSB2YWxcclxuXHJcbiAgICAgICAgbGV0IHkgPSB2YWwgKiB0aGlzLl9zdmdIZWlnaHQgLyA1MDtcclxuICAgICAgICAkKCdnI21haW4nKS5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsJHt5fSlgKTtcclxuICAgIH1cclxuXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==