(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{35:function(e,t,n){"use strict";var r=n(0),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};t.a=function(e){var t,n=function(e){switch(e){case"gz28":case"gzgf":return 60;case"gz1":case"gz3":return 40;case"gz1421":return 20;default:return 0}}(e.variant),i=r.useMemo((function(){switch(e.variant){case"gz1":return r.createElement("circle",{cy:-28,r:16,fill:"red"});case"gz28":return r.createElement("ellipse",{rx:24,ry:12,fill:"orange"});case"gz3":return r.createElement("rect",{x:-15,y:-25,height:30,width:30,fill:"red"});case"gzgf":return r.createElement("ellipse",{rx:24,ry:12,fill:"white"});case"gz1421":return r.createElement("ellipse",{cy:-8,rx:24,ry:12,fill:"orange"});default:return r.createElement(r.Fragment,null)}}),[e.variant]);return r.createElement("g",null,r.createElement("rect",{id:"strip_gz",style:(t={},t["--height"]=n+"px",t)}),r.createElement("g",{style:{transform:"translate(calc(var(--rmg-svg-width) / 2),calc(var(--rmg-svg-height) - 30px))"}},e.isShowLight&&i),e.isShowPSD&&r.createElement(l,a({},e)))};var l=r.memo((function(e){var t;return r.createElement("g",{id:"big_psd",fill:["gz3","gz1421","gz1"].includes(e.variant)?"var(--rmg-theme-fg)":"#000",style:(t={},t["--psd-dy"]=["gz1","gz3"].includes(e.variant)?"82px":"gz1421"===e.variant?"62px":"58px",t)},r.createElement("rect",{height:40,width:40,rx:4,x:-20,fill:["gz3","gz1421","gz1"].includes(e.variant)?"var(--rmg-theme-colour)":"#fff"}),r.createElement("text",{className:"rmg-name__en",fontSize:20,dy:12},e.isShowPSD),r.createElement("text",{className:"rmg-name__zh",fontSize:12,dy:26},"屏蔽门"),r.createElement("text",{className:"rmg-name__en",fontSize:6.5,dy:36},"Screen Door"))}),(function(e,t){return e.variant===t.variant&&e.isShowPSD===t.isShowPSD}))},36:function(e,t,n){"use strict";var r=n(0),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,l=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(a)throw a.error}}return i};t.a=function(e){var t=e.lineNum,n=e.stnNum,c=l(e,["lineNum","stnNum"]),m=r.useRef(),s=i(r.useState({width:15.03125}),2),o=s[0],u=s[1];r.useEffect((function(){return u(m.current.getBBox())}),[t]);var f=o.width>15.03125?15.03125/o.width:1,g=2===t.length?f:1;return r.createElement("g",a({textAnchor:"middle",fontSize:13.5},c),r.useMemo((function(){return r.createElement(r.Fragment,null,r.createElement("g",{transform:"translate(-9.25,0)scale("+f+")"},r.createElement("text",{ref:m,className:"rmg-name__zh"},t)),r.createElement("g",{transform:"translate(9.25,0)scale("+g+")"},r.createElement("text",{className:"rmg-name__zh"},n)))}),[o.width,t,n]))}},84:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(2),l=n(35),i=n(36),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,l=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(a)throw a.error}}return i},o=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},u=function(){var e,t,n=r.useContext(a.b).param,l=n.stn_list[n.current_stn_idx],i=r.useRef(),c=s(r.useState({width:0}),2),m=c[0],o=c[1];r.useEffect((function(){return o(i.current.getBBox())}),[l.name[0],l.name[1]]);var u=l["l"===n.direction?"parents":"children"];return r.createElement("g",null,r.createElement(f,{ref:i,curName:l.name,style:(e={},e["--translate-y"]=.5*n.svg_height-50-18*(l.name[1].split("\\").length-1)+"px",e)}),r.createElement(g,{lineNum:n.line_num,stnNum:l.num,style:(t={},t["--translate-x"]=(n.svgWidth.runin+m.width)/2+55+"px",t["--translate-y"]=.5*n.svg_height-30-18*(l.name[1].split("\\").length-1)+"px",t)}),u.includes("linestart")||u.includes("lineend")?r.createElement(r.Fragment,null):1===u.length?r.createElement(d,{nextId:u[0],nameBBox:m}):r.createElement(p,{nextIds:u,nameBBox:m}))},f=r.forwardRef((function(e,t){var n=e.curName,a=m(e,["curName"]);return r.createElement("g",c({id:"big_name",ref:t},a),r.useMemo((function(){return r.createElement(r.Fragment,null,r.createElement("text",{className:"rmg-name__zh",fontSize:90},n[0]),r.createElement("g",{fontSize:36,className:"rmg-name__en"},n[1].split("\\").map((function(e,t){return r.createElement("text",{key:t,dy:70+36*t},e)}))))}),[n]))})),g=function(e){var t=e.lineNum,n=e.stnNum,a=m(e,["lineNum","stnNum"]);return r.createElement("g",c({id:"big_stn_num"},a),r.useMemo((function(){return r.createElement(r.Fragment,null,r.createElement("path",{className:"rmg-stn rmg-stn--future",d:"M 0,12.95 V -12.95 H -12.95 a 12.95,12.95 0 0,0 0,25.9 h 25.9 a 12.95,12.95 0 0,0 0,-25.9 H 0 "}),r.createElement(i.a,c({transform:"scale(1.4)"},{lineNum:t,stnNum:n})))}),[t,n]))},d=function(e){var t,n,l,i=r.useContext(a.b).param,c=s(r.useState({width:0}),2),m=c[0],o=c[1],u=r.createRef();r.useEffect((function(){return o(u.current.getBBox())}),[]);var f=i.stn_list[e.nextId].name[0].length,g=(i.svgWidth.runin-e.nameBBox.width)/2;return r.createElement(r.Fragment,null,r.createElement("g",{id:"big_next"},r.createElement("g",{textAnchor:"middle",style:(t={},t["--translate-x"]="l"===i.direction?"80px":f<=2?i.svgWidth.runin-45-m.width-70+"px":i.svgWidth.runin-45-m.width-52.5+"px",t)},r.createElement("text",{className:"rmg-name__zh"},"下站"),r.createElement("text",{className:"rmg-name__en",dy:30},"Next")),r.createElement("g",{textAnchor:"start",ref:u,style:(n={},n["--translate-x"]="l"===i.direction?f<=2?"150px":"132.5px":i.svgWidth.runin-45-m.width+"px",n)},r.createElement("text",{className:"rmg-name__zh"},i.stn_list[e.nextId].name[0]),i.stn_list[e.nextId].name[1].split("\\").map((function(e,t){return r.createElement("text",{className:"rmg-name__en",dy:30+17*t,key:t},e)})))),r.createElement("path",{id:"arrow",d:"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z",fill:"black",style:(l={},l["--translate-x"]="l"===i.direction?(115+35*((f<=2?1:.5)+f)+g)/2-20+"px":(i.svgWidth.runin-45-m.width-(f<=2?105:87.5)+g+e.nameBBox.width+55+25.9)/2+20+"px",l["--rotate"]="l"===i.direction?"0deg":"180deg",l)}))},p=function(e){var t,n=r.useContext(a.b),l=n.param,i=n.routes,c=s(r.useState({width:0}),2),m=c[0],u=c[1],f=e.nextIds.map((function(e){return i.filter((function(t){return-1!==t.indexOf(e)})).map((function(e){return e.filter((function(e){return!["linestart","lineend"].includes(e)}))}))})).map((function(e){return"l"===l.direction?Array.from(new Set(e.map((function(e){return e[0]})))).reverse():Array.from(new Set(e.map((function(e){return e.reverse()[0]}))))})),g=Math.max.apply(Math,o(e.nextIds.map((function(e){return l.stn_list[e].name[0].length})))),d=(l.svgWidth.runin-e.nameBBox.width)/2;return r.createElement(r.Fragment,null,r.createElement("g",{id:"big_next_2"},e.nextIds.map((function(e,t){var n,a,i=r.createRef();return r.useEffect((function(){return u((function(e){var t=i.current.getBBox();return e.width>t.width?e:t}))}),[]),r.createElement(r.Fragment,{key:t},r.createElement("g",{textAnchor:"middle",style:(n={},n["--translate-x"]="l"===l.direction?"72px":l.svgWidth.runin-45-m.width-41+"px",n)},r.createElement("text",{className:"rmg-name__zh"},"下站"),r.createElement("text",{className:"rmg-name__en",y:22},"Next")),r.createElement("g",{ref:i,textAnchor:"start",style:(a={},a["--translate-x"]="l"===l.direction?"113px":l.svgWidth.runin-45-m.width+"px",a)},r.createElement("text",{className:"rmg-name__zh"},l.stn_list[e].name[0]),l.stn_list[e].name[1].split("\\").map((function(e,t){return r.createElement("text",{key:t,className:"rmg-name__en",y:22+13*t},e)})),r.createElement("text",{className:"rmg-name__zh",y:-35},f[t].map((function(e){return l.stn_list[e].name[0]})).join("/")+"方向"),r.createElement("text",{className:"rmg-name__en rmg-name__gzmtr--next2-dest",y:-20},"Towards "+f[t].map((function(e){return l.stn_list[e].name[1]})).join("/").replace("\\"," "))))}))),r.createElement("path",{id:"arrow",d:"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z",fill:"black",style:(t={},t["--translate-x"]="l"===l.direction?(99+27*(1+g)+d)/2-20+"px":(l.svgWidth.runin-45-m.width-41-27+d+e.nameBBox.width+55+25.9)/2+20+"px",t["--rotate"]="l"===l.direction?"0deg":"180deg",t)}))},h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},y=(t.default=function(){var e,t=r.useContext(a.b).param;return r.createElement(r.Fragment,null,r.createElement(l.a,{variant:t.info_panel_type,isShowLight:!0,isShowPSD:t.psd_num}),r.createElement(y,{num:t.platform_num,style:(e={},e["--translate-x"]=("l"===t.direction?t.svgWidth.runin-100:100)+"px",e)}),r.createElement(u,null))},function(e){var t=e.num,n=x(e,["num"]);return r.createElement("g",h({id:"platform"},n),r.useMemo((function(){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:0,cy:0,r:30,fill:"var(--rmg-theme-colour)"}),r.createElement("text",{className:"rmg-name__en",fontSize:38,dy:-9.5},t),r.createElement("text",{className:"rmg-name__zh",fontSize:13,dy:10},"站台"),r.createElement("text",{className:"rmg-name__en",fontSize:9,dy:21},"Platform"))}),[t]))})}}]);