(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{11:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return f}));n(4);var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return i},s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=function(e,t,n){return Object.keys(e).reduce((function(a,s){var i;return r(r({},a),((i={})[s]=e[s].children.reduce((function(a,i){var l;return r(r({},a),((l={})[i]=1+t(e,i)+n(e,s),l))}),{}),i))}),{})},c=function(e,t,n){if(e==t)return{len:0,nodes:[e]};var r=[],a=[];Object.keys(n[e]).forEach((function(s){var i=c(s,t,n);i.len<0||(r.push(n[e][s]+i.len),i.nodes.unshift(e),a.push(i.nodes))}));var i=Math.max.apply(Math,s(r));return{len:i,nodes:a[r.indexOf(i)]}},o=function(e,t,n){var r=c("linestart","lineend",t);if(r.nodes.includes(e))return c(r.nodes[1],e,t).len;for(var a=n.filter((function(t){return t.includes(e)}))[0],s=e;!r.nodes.includes(s);)s=a[a.indexOf(s)-1];for(var i=e;!r.nodes.includes(i);)i=a[a.indexOf(i)+1];var l="linestart"===s,o=[];return l||"lineend"===i?l?(o[0]=0,o[1]=c(r.nodes[1],i,t).len,o[2]=c(a[1],e,t).len,o[3]=c(e,i,t).len):(o[0]=c(r.nodes[1],s,t).len,o[1]=c(s,r.nodes.slice(-2)[0],t).len,o[2]=c(s,e,t).len,o[3]=c(e,a.slice(-2)[0],t).len):(o[0]=c(r.nodes[1],s,t).len,o[1]=c(s,i,t).len,o[2]=c(s,e,t).len,o[3]=c(e,i,t).len),o[0]+o[2]*o[1]/(o[2]+o[3])},u=function(e,t,n){return console.log("computing stations' states"),s(new Set([].concat.apply([],s(t)))).reduce((function(a,s){var l;return r(r({},a),((l={})[s]=s===e?0:("r"===n?function(e,t,n){var r,a;try{for(var s=i(n),l=s.next();!l.done;l=s.next()){var c=l.value,o=c.indexOf(e),u=c.indexOf(t);if(-1!==o&&o<u)return!0}}catch(e){r={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return!1}(e,s,t):function(e,t,n){var r,a;try{for(var s=i(n),l=s.next();!l.done;l=s.next()){var c=l.value,o=c.indexOf(e),u=c.indexOf(t);if(-1!==u&&u<o)return!0}}catch(e){r={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return!1}(e,s,t))?1:-1,l))}),{})},m=function(){function e(e){var t=this;this.yShares={},this.xShares={},this.namePoss={},this.stnList={},this.criticalPath={},this.leftWideFactor=function(e){return 0},this.rightWideFactor=function(e){return 0},this.pathWeight=function(e,n){return t.stnList[e].children.includes(n)?1+t.rightWideFactor(e)+t.leftWideFactor(n):-1/0},this.pathTurnParams=function(e){var t=35-17.5*Math.sqrt(3),n=e-2*t;return{tr:35,dx_a:17.5,dy_a:t,dx_l:n*Math.sqrt(3),dy_l:n}},this.pathTurnSE=function(e){var n=t.pathTurnParams(e),r=n.tr,a=n.dx_a,s=n.dy_a;return"a "+r+","+r+" 0 0,1 "+a+","+s+" l "+n.dx_l+","+n.dy_l+" a "+r+","+r+" 0 0,0 "+a+","+s},this.pathTurnNE=function(e){var n=t.pathTurnParams(e),r=n.tr,a=n.dx_a,s=n.dy_a;return"a "+r+","+r+" 0 0,0 "+a+","+-s+" l "+n.dx_l+","+-n.dy_l+" a "+r+","+r+" 0 0,1 "+a+","+-s},this.stnList=e.stnList,this.criticalPath=e.criticalPath}return e.prototype.getYShare=function(e,t){if(e in this.yShares)return this.yShares[e];if(["linestart","lineend"].includes(e)||this.stnList[e].parents.length>1||this.stnList[e].children.length>1)return this.yShares[e]=0,0;var n=this.stnList[e].parents[0];if(n){if(1==this.stnList[n].children.length){var r=this.getYShare(n);return this.yShares[e]=r,r}r=0==this.stnList[n].children.indexOf(e)?1:-1;return this.yShares[e]=r,r}return this.yShares[e]=0,0},e.getYShares=function(e,t){console.log("computing y shares");var n=new this({stnList:e});return Object.keys(e).forEach((function(e){["linestart","lineend"].includes(e)||e in n.yShares||n.getYShare(e,t)})),n.yShares},e.prototype.getNamePos=function(e){if("linestart"===e)return this.namePoss.linestart=!0,!0;var t=this.criticalPath.nodes.indexOf(e)%2;if(-1===t){var n=this.stnList[e].parents[0];if(2===this.stnList[n].children.length){var r=this.getNamePos(n);return this.namePoss[e]=r,r}var a=!this.getNamePos(n);return this.namePoss[e]=a,a}return this.namePoss[e]=1===t,1===t},e.getNamePos=function(e,t){console.log("computing name position");var n=new this({stnList:e,criticalPath:t});return Object.keys(e).forEach((function(e){["linestart","lineend"].includes(e)||e in n.namePoss||n.getNamePos(e)})),n.namePoss},e.prototype._linePath=function(e,t,n,r,s,i,l){var c=this,o=a([],3),u=o[0],m=o[1],f=o[2],h=[],d=this.pathTurnParams(i),p=d.dx_a+d.dx_l/2,g=(t[1]-t[0])/l.len*.8,y=((t[1]-t[0])/l.len-2*p)/2;return y+g<0&&console.warn("SVG width too small! "+(y+g)),e.forEach((function(t){var l,o,d=r[t],E=s[t];if(!m&&0!==m)return l=a([t,d,E],3),u=l[0],f=l[1],m=l[2],void(1===e.length?h.push("M "+d+","+E):n[0].includes(t)?n[0].includes(e[1])?h.push("M "+d+","+E):(r[e[1]]>0&&h.push("M "+d+","+(E+9.68)),s[e[1]]<0&&h.push("M "+d+","+(E-9.68))):h.push("M "+d+","+E));E>m?(h.push(0===E?"h "+(d-f-g*c.leftWideFactor(t)-y-2*p):"h "+(g*c.rightWideFactor(u)+y)),h.push(c.pathTurnSE(i))):E<m&&(h.push(0===E?"h "+(d-f-g*c.leftWideFactor(t)-y-2*p):"h "+(g*c.rightWideFactor(u)+y)),h.push(c.pathTurnNE(i))),h.push("H "+d),o=a([t,d,E],3),u=o[0],f=o[1],m=o[2]})),h.join(" ").replace(/( H ([\d.]+))+/g," H $2")},e.drawLine=function(e,t,n,r,a,s,i,l){var c=this,o={main:[],pass:[]};return e.map((function(u,m){var f=(u=u.filter((function(e){return!["linestart","lineend"].includes(e)}))).filter((function(e){return t[e]>=0})),h=u.filter((function(e){return t[e]<=0}));1===f.length&&(h=u),0==f.filter((function(e){return-1!==h.indexOf(e)})).length&&f.length&&(h[0]===u[0]?h.push(f[0]):f[0]===u[0]&&f[f.length-1]===u[u.length-1]&&h.length?(h=u,f=[]):h.unshift(f[f.length-1])),o.main.push(new c({stnList:n,criticalPath:l})._linePath(f,r,e,a,s,i,l)),o.pass.push(new c({stnList:n,criticalPath:l})._linePath(h,r,e,a,s,i,l))})),o},e}(),f=function(e,t){var n={main:[],pass:[]};return e.map((function(e){var r=(e=e.filter((function(e){return!["linestart","lineend"].includes(e)}))).filter((function(e){return t[e]>=0})),a=e.filter((function(e){return t[e]<=0}));1===r.length&&(a=e),0==r.filter((function(e){return-1!==a.indexOf(e)})).length&&r.length&&(a[0]===e[0]?a.push(r[0]):r[0]===e[0]&&r[r.length-1]===e[e.length-1]&&a.length?(a=e,r=[]):a.unshift(r[r.length-1])),n.main.push(r),n.pass.push(a)})),n}},34:function(e,t,n){"use strict";var r=n(0);t.a=r.memo((function(e){var t;return r.createElement("rect",{fill:"var(--rmg-theme-colour)",height:20,style:(t={width:"var(--rmg-svg-width)"},t["--strip-percentage"]=e.stripPc,t.transform="translateY(calc(var(--strip-percentage, 95) * var(--rmg-svg-height) / 100 - 10px))",t)})}))},79:function(e,t,n){"use strict";n.r(t);var r,a=n(0),s=n(2),i=n(34),l=n(11),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftWideFactor=function(e){var n=0,r=t.stnList[e].transfer,a=r.type;return"l"===r.tick_direc&&["int3","osi11","osi12","osi21","osi31"].includes(a)&&(n+=.8),"osi22"===a&&(n+=.8),2===t.stnList[e].parents.length&&(n+=.4),2===t.stnList[t.stnList[e].parents[0]].children.length&&(n+=.4),n},t.rightWideFactor=function(e){var n=0,r=t.stnList[e].transfer,a=r.type;return"r"===r.tick_direc&&["int3","osi11","osi12","osi21","osi31"].includes(a)&&(n+=.8),"osi22"===a&&(n+=.8),2===t.stnList[e].children.length&&(n+=.4),2===t.stnList[t.stnList[e].children[0]].parents.length&&(n+=.4),n},t}return c(t,e),t}(l.a),u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return i},m=function(e){var t=a.useContext(s.b).param.stn_list[e.stnId],n=a.useMemo((function(){var e=[];return 2===t.children.length&&e.push(1===t.children.indexOf(t.branch.right[1])?"SE":"NE"),2===t.parents.length&&e.push(1===t.parents.indexOf(t.branch.left[1])?"SW":"NW"),e}),[t.parents.toString(),t.children.toString(),JSON.stringify(t.branch)]),r=a.useMemo((function(){var e=n;return 0===e.length?"":e.includes("NW")&&e.includes("SE")||e.includes("NE")&&e.includes("SW")?"_bb":"_b"}),[n.toString()]),i=a.useMemo((function(){if(""===r)return 0;if("_bb"===r)return e.namePos?9.68:-9.68;var t=n;return t.includes("SE")||t.includes("SW")?e.namePos?9.68:0:t.includes("NE")||t.includes("NW")?e.namePos?0:-9.68:void 0}),[n.toString(),r,e.namePos]),l=a.useMemo((function(){if(""===r)return 0;if("_bb"===r)return e.namePos?-9.68:9.68;var t=n;return t.includes("SE")||t.includes("SW")?e.namePos?0:9.68:t.includes("NE")||t.includes("NW")?e.namePos?-9.68:0:void 0}),[r,e.namePos,n]),c=function(e){var n=e.type,r=e.info;switch(n){case"int3":case"osi31":return r[0].length<11?"int"+(r[0].length+1):"int12";case"osi11":case"osi21":return"osi11";case"osi12":case"osi13":return"osi12";case"osi22":return"linestart"===t.parents[0]||"lineend"===t.children[0]?"osi22end":"osi12";default:return"stn"}}(t.transfer);return a.createElement(a.Fragment,null,a.createElement("g",{style:{transform:"translateY("+l+"px)"}},a.createElement(d,{variant:"osi22"!==t.transfer.type||"linestart"!==t.parents[0]&&"lineend"!==t.children[0]?t.transfer.type:"osi22end",stnTrans:t.transfer,stnState:e.stnState,namePos:e.namePos,end:"osi22end"===c?"linestart"===t.parents[0]?"left":"right":null}),c.includes("osi")&&a.createElement(g,{name:t.transfer.osi_names[0],stnState:e.stnState,variant:"osi22"!==t.transfer.type||"linestart"!==t.parents[0]&&"lineend"!==t.children[0]?t.transfer.type:"osi22end",tickDirec:t.transfer.tick_direc,namePos:e.namePos,end:"osi22end"===c?"linestart"===t.parents[0]?"left":"right":null})),a.createElement("use",{xlinkHref:"#"+c+r,className:(-1===e.stnState?"rmg-stn__mtr--pass":"rmg-stn__mtr--future")+(t.transfer.paid_area?" rmg-stn__mtr--paid-osi":" rmg-stn__mtr--unpaid-osi"),style:{transform:"translateY("+i+"px)scale("+("lineend"===t.children[0]?1:-1)+","+(e.namePos?-1:1)+")"}}),a.createElement("g",{style:{transform:"translateY("+i+"px)"}},a.createElement(f,{name:t.name,namePos:e.namePos,stnState:e.stnState,facility:t.facility,nameDX:"osi22"===t.transfer.type&&"osi12"===c?"l"===t.transfer.tick_direc?3:-3:null})))},f=function(e){var t=a.createRef(),n=u(a.useState({width:0,x:0}),2),r=n[0],s=n[1];a.useEffect((function(){s(t.current.getBBox())}),[e.stnState,e.name.toString()]);var i=e.namePos?24.8125:-36.21875-11*(e.name[1].split("\\").length-1),l=e.nameDX?e.nameDX>0?"start":"end":"middle",c=e.nameDX?e.namePos?11.515625:-11.515625:0,o=e.nameDX?e.nameDX>0?e.nameDX+17.515625:-17.515625-r.width+e.nameDX:-(r.width+3)/2,m=""===e.facility?0:e.nameDX?e.nameDX<0?0:38.03125+e.nameDX:19.015625;return a.createElement("g",{textAnchor:l,style:{transform:"translateY("+(i+c)+"px)"},className:"Name "+(-1===e.stnState?"Pass":0===e.stnState?"Current":"Future")},0===e.stnState&&a.createElement("rect",{id:"current_bg",x:r.x-3+(0===m?0:m-1),y:-11.8125,width:r.width+6+(0===m?0:1),height:33.03125+11*(e.name[1].split("\\").length-1)+2}),""!==e.facility&&a.createElement("use",{xlinkHref:"#"+e.facility,fill:-1===e.stnState?"var(--rmg-grey)":"var(--rmg-black)",x:o,y:5.5*(e.name[1].split("\\").length-1)-11.8125}),a.createElement("g",{ref:t,style:{transform:"translateX("+m+"px)"}},a.createElement(h,{name:e.name,nameGap:17})))},h=a.memo((function(e){return a.createElement(a.Fragment,null,a.createElement("text",{className:"rmg-name__zh rmg-name__mtr--station"},e.name[0]),e.name[1].split("\\").map((function(t,n){return a.createElement("text",{key:n,className:"rmg-name__en rmg-name__mtr--station",dy:e.nameGap+11*n},t)})))}),(function(e,t){return e.name.toString()===t.name.toString()&&e.nameGap===t.nameGap})),d=function(e){switch(e.variant){case"int2":return a.createElement("g",null,a.createElement(p,{intInfo:e.stnTrans.info[0][0],stnState:e.stnState,rotation:e.namePos?180:0}));case"int3":case"osi31":return a.createElement(a.Fragment,null,e.stnTrans.info[0].map((function(t,n){return a.createElement("g",{key:n,style:{transform:"translateY("+(e.namePos?-18*(e.stnTrans.info[0].length-n):18*(n+1))+"px)"}},a.createElement(p,{intInfo:t,stnState:e.stnState,rotation:"r"===e.stnTrans.tick_direc?-90:90}))})));case"osi11":case"osi21":return a.createElement("g",{style:{transform:"translateY("+(e.namePos?-26:26)+"px)"}},a.createElement(p,{intInfo:e.stnTrans.info[1][0],stnState:e.stnState,rotation:e.namePos?180:0}));case"osi12":case"osi13":return a.createElement(a.Fragment,null,e.stnTrans.info[1].map((function(t,n){return a.createElement("g",{key:n,style:{transform:"translateY("+(e.namePos?-8-18*(e.stnTrans.info[1].length-n):8+18*(n+1))+"px)"}},a.createElement(p,{intInfo:t,stnState:e.stnState,rotation:"r"===e.stnTrans.tick_direc?-90:90}))})));case"osi22":return a.createElement(a.Fragment,null,a.createElement("g",null,a.createElement(p,{intInfo:e.stnTrans.info[0][0],stnState:e.stnState,rotation:e.namePos?0:180,nameDX:"r"===e.stnTrans.tick_direc?3:-3})),e.stnTrans.info[1].map((function(t,n){return a.createElement("g",{key:n,style:{transform:"translateY("+(e.namePos?-8-18*(e.stnTrans.info[1].length-n):8+18*(n+1))+"px)"}},a.createElement(p,{intInfo:t,stnState:e.stnState,rotation:"r"===e.stnTrans.tick_direc?-90:90}))})));case"osi22end":return a.createElement(a.Fragment,null,a.createElement("g",null,a.createElement(p,{intInfo:e.stnTrans.info[0][0],stnState:e.stnState,rotation:e.namePos?180:0})),e.stnTrans.info[1].map((function(t,n){return a.createElement("g",{key:n,style:{transform:"translate("+("left"===e.end?-41:41)+"px,"+(e.namePos?18*n:-18*(e.stnTrans.info[1].length-1-n))+"px)"}},a.createElement(p,{intInfo:t,stnState:e.stnState,rotation:"left"===e.end?90:-90}))})));default:return a.createElement(a.Fragment,null)}},p=function(e){var t=e.intInfo[4].split("\\").length,n=e.intInfo[5].split("\\").length,r=function(e){switch(e){case 90:return-24;case-90:return 24;default:return 0}}(e.rotation),s=function(e){switch(e){case 0:return 30.953125;case 180:return-37.703125-10*(t-1)-7*(n-1);default:return 5.953125-(19.65625+10*(t-1)+7*(n-1)-1)/2}}(e.rotation),i=function(t){switch(t){case 90:return"end";case-90:return"start";default:return e.nameDX?e.nameDX>0?"start":"end":"middle"}}(e.rotation);return a.useMemo((function(){return a.createElement(a.Fragment,null,a.createElement("use",{xlinkHref:"#inttick",stroke:e.intInfo[2],style:{transform:"rotate("+e.rotation+"deg)"},className:"rmg-line rmg-line__mtr rmg-line__change"+(-1===e.stnState?" rmg-line__pass":"")}),a.createElement("g",{textAnchor:i,style:{transform:"translate("+(r+(e.nameDX||0))+"px,"+s+"px)"},className:"Name "+(-1===e.stnState?"Pass":"Future")},e.intInfo[4].split("\\").map((function(e,t){return a.createElement("text",{key:t,className:"rmg-name__zh IntName",dy:10*t},e)})),e.intInfo[5].split("\\").map((function(e,n){return a.createElement("text",{key:t+n,className:"rmg-name__en IntName",dy:10*t-1+7*n},e)}))))}),[e.intInfo.toString(),e.rotation,e.stnState])},g=function(e){var t=function(t){switch(t){case"osi11":case"osi21":return"l"===e.tickDirec?"end":"start";case"osi22":return"l"===e.tickDirec?"start":"end";default:return"middle"}}(e.variant),n=function(t){switch(t){case"osi11":case"osi21":return"l"===e.tickDirec?-13:13;case"osi22":return"l"===e.tickDirec?13:-13;case"osi22end":return"left"===e.end?-41:41;default:return 0}}(e.variant),r=function(t){switch(t){case"osi11":case"osi21":return 8.34375+(e.namePos?-26:26)-12.515625-(e.namePos?10*(e.name[1].split("\\").length-1):0);case"osi12":return e.namePos?-70.6875-10*(e.name[1].split("\\").length-1):62.34375;case"osi22":return(e.namePos?-8:8)-(e.namePos?27:-27)+8.34375-12.515625-5*(e.name[1].split("\\").length-1);case"osi22end":return e.namePos?-26.6875-10*(e.name[1].split("\\").length-1):18.34375;default:return 0}}(e.variant);return a.createElement("g",{textAnchor:t,style:{transform:"translate("+n+"px,"+r+"px)"},className:"Name "+(-1===e.stnState?"Pass":"Future")},a.createElement("text",{className:"rmg-name__zh rmg-name__mtr--osi"},e.name[0]),e.name[1].split("\\").map((function(e,t){return a.createElement("text",{key:t,className:"rmg-name__en rmg-name__mtr--osi",dy:12+10*t},e)})))},y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},E=function(e,t){var n=0,r=e[t].transfer,a=r.type;return"l"===r.tick_direc&&["int3","osi11","osi12","osi21","osi31"].includes(a)&&(n+=.8),"osi22"===a&&(n+=.8),2===e[t].parents.length&&(n+=.4),2===e[e[t].parents[0]].children.length&&(n+=.4),n},_=function(e,t){var n=0,r=e[t].transfer,a=r.type;return"r"===r.tick_direc&&["int3","osi11","osi12","osi21","osi31"].includes(a)&&(n+=.8),"osi22"===a&&(n+=.8),2===e[t].children.length&&(n+=.4),2===e[e[t].children[0]].parents.length&&(n+=.4),n},v=function(){var e,t=a.useContext(s.b),n=t.param,r=t.branches,i=t.routes,c=t.deps,u=Object(l.b)(n.stn_list,E,_),m=a.useMemo((function(){return Object(l.c)("linestart","lineend",u)}),[JSON.stringify(u)]),f=a.useMemo((function(){return Object(l.c)(m.nodes[1],m.nodes.slice(-2)[0],u)}),[JSON.stringify(u)]),h=a.useMemo((function(){return console.log("computing x shares"),Object.keys(n.stn_list).reduce((function(e,t){var n;return y(y({},e),((n={})[t]=Object(l.f)(t,u,r),n))}),{})}),[r.toString(),JSON.stringify(u)]),d=[n.svgWidth.railmap*n.padding/100,n.svgWidth.railmap*(1-n.padding/100)],p=Object.keys(h).reduce((function(e,t){var n;return y(y({},e),((n={})[t]=d[0]+h[t]/f.len*(d[1]-d[0]),n))}),{}),g=a.useMemo((function(){return o.getYShares(n.stn_list,r)}),[c]),v=Object.keys(g).reduce((function(e,t){var a;return y(y({},e),((a={})[t]=-g[t]*n.branch_spacing+(r[0].includes(t)?0:g[t]>0?-9.68:9.68),a))}),{}),P=a.useMemo((function(){return Object(l.e)(n.current_stn_idx,i,n.direction)}),[n.current_stn_idx,n.direction,i.toString()]),b=a.useMemo((function(){return o.getNamePos(n.stn_list,m)}),[c,JSON.stringify(m)]),k=o.drawLine(r,P,n.stn_list,d,p,v,n.branch_spacing,m);return a.createElement("g",{id:"main",style:(e={},e["--y-percentage"]=n.y_pc,e.transform="translateY(calc(var(--y-percentage) * var(--rmg-svg-height) / 100))",e)},a.createElement(x,{paths:k}),a.createElement(S,{xs:p,ys:v,stnStates:P,namePoss:b}))},x=a.memo((function(e){return a.createElement("g",{style:{fill:"none",strokeWidth:9.68}},a.createElement("g",{style:{stroke:"var(--rmg-grey)"}},e.paths.pass.map((function(e,t){return a.createElement("path",{key:t,d:e})}))),a.createElement("g",{style:{stroke:"var(--rmg-theme-colour)"}},e.paths.main.map((function(e,t){return a.createElement("path",{key:t,d:e})}))))}),(function(e,t){return JSON.stringify(e.paths)===JSON.stringify(t.paths)})),S=function(e){var t=a.useContext(s.b).param,n={};return Object.keys(e.namePoss).forEach((function(r){return n[r]=t.txt_flip?!e.namePoss[r]:e.namePoss[r]})),a.createElement("g",{id:"stn_icons"},Object.keys(t.stn_list).map((function(t){if(!["linestart","lineend"].includes(t))return a.createElement("g",{key:t,style:{transform:"translate("+e.xs[t]+"px,"+e.ys[t]+"px)"}},a.createElement(m,{stnId:t,stnState:e.stnStates[t],namePos:n[t]}))})))},P=(t.default=function(){var e=a.useContext(s.b).param;return a.createElement(a.Fragment,null,a.createElement(P,null),a.createElement(i.a,{stripPc:e.strip_pc}),a.createElement(v,null))},a.memo((function(){return a.createElement("defs",null,a.createElement("g",{id:"airport",transform:"scale(0.5970084519)"},a.createElement("rect",{x:-29.33899,height:58.67798,width:58.67798}),a.createElement("path",{id:"airport",d:"M28.9769,6.60134c1.711.013,3.111,2.53205,3.111,4.241v10.337s17.106,15.435,17.358,15.666a1.145,1.145,0,0,1,.488,1.152v2.833c0,.651-.451.61-.695.467-.334-.119-17.151-8.863-17.151-8.863-.004,1.458-.797,9.006-1.326,13.304,0,0,4.61,2.457,4.699,2.521.334.268.352.359.352.852v2.001c0,.477-.352.428-.51.324-.183-.062-5.693-1.921-5.693-1.921a2.56018,2.56018,0,0,0-.633-.127,2.31654,2.31654,0,0,0-.666.127s-5.477,1.859-5.672,1.921c-.185.104-.523.153-.523-.324v-2.001c0-.493.029-.584.367-.852.086-.064,4.678-2.521,4.678-2.521-.524-4.298-1.307-11.846-1.325-13.304,0,0-16.822,8.744-17.148,8.863-.217.143-.69.184-.69-.467v-2.833a1.16206,1.16206,0,0,1,.473-1.152c.276-.231,17.365-15.666,17.365-15.666v-10.337c0-1.709,1.403-4.228,3.14105-4.241",transform:"translate(-28.9697,0.14347)",fill:"white"})),a.createElement("g",{id:"disney",transform:"scale(0.5970084519)"},a.createElement("rect",{x:-29.33899,width:58.67798,height:58.67798}),a.createElement("path",{fill:"white",d:"M45.6152,7.85015a9.80248,9.80248,0,0,0-9.79907,9.801,9.70059,9.70059,0,0,0,.342,2.582c.002.026.002.055.002.093a.31815.31815,0,0,1-.31494.318.67741.67741,0,0,1-.12806-.02,15.71521,15.71521,0,0,0-13.498,0,.61.61,0,0,1-.122.02.31841.31841,0,0,1-.322-.318v-.067a9.62553,9.62553,0,0,0,.35608-2.608,9.803,9.803,0,1,0-9.797,9.8,10.10364,10.10364,0,0,0,2.308-.271h.05493a.31113.31113,0,0,1,.31409.318.32433.32433,0,0,1-.019.12,15.72588,15.72588,0,1,0,29.703,7.216,15.83676,15.83676,0,0,0-1.746-7.23.18417.18417,0,0,1-.0271-.106.31612.31612,0,0,1,.32007-.318h.057a10.15953,10.15953,0,0,0,2.316.271,9.80051,9.80051,0,0,0,0-19.601",transform:"translate(-28.9697 0.13398)"})),a.createElement("clipPath",{id:"hsr-clip-path",transform:"translate(-0.00057 0.01643)"},a.createElement("path",{fill:"none",d:"M5.1606.89861a3.67176,3.67176,0,0,0-3.676,3.667v48.966a3.67842,3.67842,0,0,0,3.676,3.692h48.443a3.67892,3.67892,0,0,0,3.678-3.692V4.5656a3.67227,3.67227,0,0,0-3.678-3.667Z"})),a.createElement("g",{id:"hsr",transform:"scale(0.5970084519)"},a.createElement("rect",{x:-29.33899,width:58.67798,height:58.67798}),a.createElement("g",{clipPath:"url(#hsr-clip-path)",transform:"translate(-29.33899,0)"},a.createElement("rect",{x:-3.25242,y:24.74141,width:61.75879,height:.98008,transform:"translate(-8.93747 17.31321) rotate(-30.16134)",fill:"white"}),a.createElement("path",{d:"M5.77169,48.97289c-2.17407-3.89294,2.56994-10.525,4.85-13.724l.173-.248a83.00826,83.00826,0,0,1,7.39294-9.285,97.384,97.384,0,0,1,11.082-9.958c7.051-6.045,15.832-5.876,16.447-5.894l11.785-.957.276,17.42-11.5271,10.586c-.36.39405-5.553,5.863-18.10193,11.035-6.752,2.783-11.877,4.146-15.66,4.146-3.301,0-5.561-1.049-6.71692-3.121",transform:"translate(-0.00057 0.01643)",fill:"white"}),a.createElement("polygon",{points:"57.453 29.614 32.426 58.31 35.582 58.509 57.584 30.433 57.453 29.614",fill:"white"}),a.createElement("path",{d:"M49.04708,11.61364a.94277.94277,0,0,0-.17407-.227c-.752-.93695-2.988-1.259-5.933-.793a25.98382,25.98382,0,0,0-9.99695,3.032A98.52916,98.52916,0,0,0,20.723,23.69768c-3.1759,3.487-4.645,6.388-3.62292,7.584,1.84,2.166,13.7539.716,22.00793-6.066,9.035-7.42,10.718-11.577,9.93909-13.602",transform:"translate(-0.00057 0.01643)"}),a.createElement("path",{d:"M34.65255,13.81182c5.65991-2.842,11.28088-2.856,12.1499-1.213.88306,1.652-2.99792,5.303-8.656,8.128-5.648,2.837-10.9469,3.805-11.81994,2.15-.873-1.641,2.668-6.237,8.326-9.065",transform:"translate(-0.00057 0.01643)",fill:"white"}),a.createElement("path",{d:"M58.10958,25.03454c-16.832,20.708-40.7301,26.038-40.7301,26.038,11-6.73,12.769-8.111,18.968-18.01,8.364-13.351,21.77808-21.549,21.912-21.63,0,0-.068,13.5-.1499,13.602",transform:"translate(-0.00057 0.01643)"}),a.createElement("path",{d:"M27.1877,26.69561l9.705-2.814a6.22768,6.22768,0,0,1-1.994,2.759,25.57277,25.57277,0,0,1-6.697,3.405,11.78221,11.78221,0,0,1-5.5.783Z",transform:"translate(-0.00057 0.01643)",fill:"white"}),a.createElement("path",{d:"M19.59005,25.97692a18.37656,18.37656,0,0,1,3.891-3.976,6.66452,6.66452,0,0,0-.30908,2.213l-4.391,4.829a6.18212,6.18212,0,0,1,.80908-3.066",transform:"translate(-0.00057 0.01643)",fill:"white"}),a.createElement("polygon",{points:"23.156 58.311 57.463 26.746 57.396 25.857 21.582 58.607 23.156 58.311",fill:"white"}),a.createElement("path",{d:"M60.15645,12.35973a68.6782,68.6782,0,0,0-12.602,9.542c-8.15,7.745-12.109,15.259-9.855,16.091,2.24793.816,10.678-4.782,18.83594-12.543,1.828-1.74,3.48-3.424,4.926-5.024Z",transform:"translate(-0.00057 0.01643)",fill:"white"}),a.createElement("path",{d:"M63.07638,11.82653a40.86955,40.86955,0,0,0-10,7.096c-5.90406,5.437-9.48609,11.105-7.848,11.742,1.657.631,8.28894-3.955,14.188-9.401a61.76591,61.76591,0,0,0,4.61694-4.705Z",transform:"translate(-0.00057 0.01643)"}),a.createElement("path",{d:"M12.67989,42.93969a9.87,9.87,0,0,0-5.754-1.895c-.113.22-.223.439-.33008.662a9.45046,9.45046,0,0,1,5.69507,1.749,6.27885,6.27885,0,0,1,2.61,6.305,10.16524,10.16524,0,0,1-.598,2.228c.238-.023.481-.053.725-.087.78308-2.249,1.394-6.184-2.3479-8.962",transform:"translate(-0.00057 0.01643)"}))),a.createElement("circle",{id:"stn",r:8,className:"rmg-stn__mtr"}),a.createElement("path",{id:"stn_b",className:"rmg-stn__mtr",d:"M -6.369803765,4.84 a 8,8 0 1,1 12.73960753,0 a 8,8 0 1,1 -12.73960758,0 Z"}),a.createElement("path",{id:"stn_bb",d:"M -6.369803765,4.84 a 8,8 0 1,1 12.73960753,0 a 8,8 0 0,1 0,9.68 a 8,8 0 1,1 -12.73960753,0 a 8,8 0 0,1 0,-9.68 Z",className:"rmg-stn__mtr"}),a.createElement("path",{id:"int2",d:"M -8,0 v 18 a 8,8 0 0,0 16,0 v -18 a 8,8 0 0,0 -16,0 Z",className:"rmg-stn__mtr"}),[3,4,5,6,7,8,9,10,11,12].map((function(e){var t=18*(e-1);return a.createElement(a.Fragment,{key:e},a.createElement("path",{id:"int"+e,d:"M -8,0 v "+t+" a 8,8 0 0,0 16,0 v -"+t+" a 8,8 0 0,0 -16,0 Z",className:"rmg-stn__mtr"}),a.createElement("path",{id:"int"+e+"_b",className:"rmg-stn__mtr",d:"M -8,9.68 v "+t+" a 8,8 0 0,0 16,0 v -"+t+" a 8,8 0 0,0 -1.630196235,-4.84 a 8,8 0 1,0 -12.73960758,0 a 8,8 0 0,0 -1.630196235,4.84 Z"}),a.createElement("path",{id:"int"+e+"_bb",className:"rmg-stn__mtr",d:"M -8,19.36 v "+t+" a 8,8 0 0,0 16,0 v -"+t+" a 8,8 0 0,0 -1.630196235,-4.84 a 8,8 0 0,0 0,-9.68 a 8,8 0 1,0 -12.73960758,0 a 8,8 0 0,0 0,9.68 a 8,8 0 0,0 -1.630196235,4.84 Z"}))})),a.createElement("g",{id:"osi11"},a.createElement("path",{d:"M 0,0 V 26"}),a.createElement("use",{xlinkHref:"#stn"}),a.createElement("use",{xlinkHref:"#stn",y:26})),a.createElement("g",{id:"osi11_b"},a.createElement("path",{d:"M 0,0 V 35.68"}),a.createElement("use",{xlinkHref:"#stn_b"}),a.createElement("use",{xlinkHref:"#stn",y:35.68})),a.createElement("g",{id:"osi11_bb"},a.createElement("path",{d:"M 0,0 V 45.36"}),a.createElement("use",{xlinkHref:"#stn_bb"}),a.createElement("use",{xlinkHref:"#stn",y:45.36})),a.createElement("g",{id:"osi12"},a.createElement("path",{d:"M 0,0 V 26"}),a.createElement("use",{xlinkHref:"#stn"}),a.createElement("use",{xlinkHref:"#int2",y:26})),a.createElement("g",{id:"osi12_b"},a.createElement("path",{d:"M 0,11 V 35.68"}),a.createElement("use",{xlinkHref:"#stn_b"}),a.createElement("use",{xlinkHref:"#int2",y:35.68})),a.createElement("g",{id:"osi12_bb"},a.createElement("path",{d:"M 0,11 V 45.36"}),a.createElement("use",{xlinkHref:"#stn_bb"}),a.createElement("use",{xlinkHref:"#int2",y:45.36})),a.createElement("g",{id:"osi22end"},a.createElement("path",{d:"M 0,0 H 41"}),a.createElement("use",{xlinkHref:"#stn"}),a.createElement("use",{xlinkHref:"#int2",x:41,y:-18})),a.createElement("g",{id:"osi22end_b"},a.createElement("path",{d:"M 0,9.68 H 41"}),a.createElement("use",{xlinkHref:"#stn_b"}),a.createElement("use",{xlinkHref:"#int2",x:41,y:-8.32})),a.createElement("path",{id:"inttick",d:"M 0,0 v 17",strokeLinecap:"round"}))})))}}]);