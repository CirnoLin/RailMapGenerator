(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["LineHK"],{

/***/ "./src/Line/LineHK.ts":
/*!****************************!*\
  !*** ./src/Line/LineHK.ts ***!
  \****************************/
/*! exports provided: RMGLineHK */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RMGLineHK", function() { return RMGLineHK; });
/* harmony import */ var _Line__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Line */ "./src/Line/Line.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./src/utils.ts");
/* harmony import */ var _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Station/StationHK */ "./src/Station/StationHK.ts");



class RMGLineHK extends _Line__WEBPACK_IMPORTED_MODULE_0__["RMGLine"] {
    constructor(param) {
        super(param);
        this._txtFlip = param.txt_flip;
        this._charForm = param.char_form;
        this._destLegacy = param.dest_legacy;
    }
    _initStnInstance(stnId, stnInfo) {
        switch (stnInfo.transfer.type) {
            case 'int2':
            case 'osi21':
                return new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["Int2StationHK"](stnId, stnInfo);
            case 'int3':
            case 'osi31':
                return stnInfo.transfer.tick_direc === 'l' ?
                    new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["Int3LStationHK"](stnId, stnInfo) :
                    new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["Int3RStationHK"](stnId, stnInfo);
            case 'osi11':
                return stnInfo.transfer.tick_direc === 'l' ?
                    new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI11LStationHK"](stnId, stnInfo) :
                    new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI11RStationHK"](stnId, stnInfo);
            case 'osi12':
            case 'osi13':
                return stnInfo.transfer.tick_direc === 'l' ?
                    new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI12LStationHK"](stnId, stnInfo) :
                    new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI12RStationHK"](stnId, stnInfo);
            case 'osi22':
                if (stnInfo.parents[0] === 'linestart' || stnInfo.children[0] === 'lineend') {
                    return new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI22EndStationHK"](stnId, stnInfo);
                }
                else {
                    return stnInfo.transfer.tick_direc === 'l' ?
                        new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI22LStationHK"](stnId, stnInfo) :
                        new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI22RStationHK"](stnId, stnInfo);
                }
            default:
                return new _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["RMGStationHK"](stnId, stnInfo);
        }
    }
    _updateStnInstance(stnId) {
        super._updateStnInstance(stnId);
        this.stations[stnId].namePos = this._txtFlip ? !this._stnNamePos(stnId) : this._stnNamePos(stnId);
    }
    set svgDestWidth(val) {
        super.svgDestWidth = val;
        this.loadFonts();
    }
    set svgWidth(val) {
        super.svgWidth = val;
        this.loadFonts();
        this.updateStnNameBg();
    }
    set padding(val) {
        super.padding = val;
        this.loadFonts();
        this.updateStnNameBg();
    }
    set branchSpacing(val) {
        super.branchSpacing = val;
        this.loadFonts();
        this.updateStnNameBg();
    }
    set txtFlip(flag) {
        this._txtFlip = flag;
        Object(_utils__WEBPACK_IMPORTED_MODULE_1__["setParams"])('txt_flip', flag);
        for (let [stnId, stnInstance] of Object.entries(this.stations)) {
            if (['linestart', 'lineend'].includes(stnId)) {
                continue;
            }
            stnInstance.namePos = this._txtFlip ? !this._stnNamePos(stnId) : this._stnNamePos(stnId);
        }
        $('#stn_icons').empty();
        this.drawStns();
        this.loadFonts();
        this.updateStnNameBg();
    }
    set direction(val) {
        super.direction = val;
        this.loadFonts();
    }
    /**
     * Setter of character form.
     * @param val 'trad', 'cn', 'tw' or 'jp'
     */
    set charForm(val) {
        this._charForm = val;
        Object(_utils__WEBPACK_IMPORTED_MODULE_1__["setParams"])('char_form', val);
        $('.rmg-name__char-trad, .rmg-name__char-cn, .rmg-name__char-tw, .rmg-name__char-jp')
            .removeClass('rmg-name__char-trad rmg-name__char-cn rmg-name__char-tw rmg-name__char-jp')
            .addClass(`rmg-name__char-${val}`);
    }
    set lineNames(val) {
        super.lineNames = val;
        if (this._destLegacy) {
            this.drawDestInfo();
            this.loadFonts();
        }
    }
    /**
     * Setter of legacy style of destination information panel.
     */
    set destLegacy(val) {
        this._destLegacy = val;
        Object(_utils__WEBPACK_IMPORTED_MODULE_1__["setParams"])('dest_legacy', val);
        this.drawDestInfo();
        this.loadFonts();
    }
    set currentStnId(val) {
        super.currentStnId = val;
        this.loadFonts();
        this.updateStnNameBg();
    }
    /**
     * Station name position (`false`: above line, `true`: below line, given `txtFlip` is `false`).
     */
    _stnNamePos(stnId) {
        if (stnId === 'linestart') {
            return true;
        }
        let self = this;
        let cp = this.criticalPath.nodes;
        let pos = cp.indexOf(stnId) % 2; // -1, 0 or 1;
        if (pos === -1) {
            let parId = this.stations[stnId].parents[0];
            if (this._stnOutdegree(parId) === 2) {
                return self._stnNamePos(parId);
            }
            return !self._stnNamePos(parId);
        }
        return pos === 1;
    }
    loadFonts() {
        $('.rmg-name__zh').addClass(`rmg-name__char-${this._charForm}`);
    }
    /**
     * Update background of current station name. `y` and `height` are changed while station icon is re-drawn and `RMGStation.nameHTML` is loaded.
     */
    updateStnNameBg() {
        var stnNameDim = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTxtBoxDim"])($(`#stn_icons > #${this._currentStnId} g.Name`)[0], 'railmap');
        $('#current_bg').attr({
            x: stnNameDim.x - 3,
            width: stnNameDim.width + 6,
        });
    }
    drawDestInfo() {
        $('#dest_name > #platform > text').text(this._platformNum);
        let validDest = this[this._direction + 'ValidDests'];
        let txtAnchor = this._direction === 'l' ? 'start' : 'end';
        var [destNameZH, destNameEN] = [0, 1].map(idx => {
            return validDest.map(stnId => this.stations[stnId].name[idx].replace(/\\/g, ' ')).join('/');
        });
        if (this._destLegacy) {
            var [lineNameZH, lineNameEN] = this._lineNames;
            lineNameEN += ' ';
        }
        else {
            var lineNameZH = lineNameEN = '';
        }
        $('#dest_name > g:last-child text').eq(0).text(`${lineNameZH}å¾€${destNameZH}`);
        $('#dest_name > g:last-child text').eq(1).text(`${lineNameEN}to ${destNameEN}`);
        var bcr = $('#dest_name > g:last-child')[0].getBoundingClientRect();
        var flagLength = 160 + 150 + bcr.width + 45 + 50;
        var isLeft = (this._direction == 'l') ? 1 : -1;
        var arrowX = (this._svgDestWidth - isLeft * flagLength) / 2;
        var arrowRotate = 90 * (1 - isLeft);
        var platformNumX = arrowX + isLeft * (160 + 50 + 75);
        var destNameX = platformNumX + isLeft * (75 + 45);
        $('#dest_name > use').attr('transform', `translate(${arrowX},130)rotate(${arrowRotate})`);
        $('#dest_name > #platform').attr('transform', `translate(${platformNumX},130)`);
        $('#dest_name > g:last-child').attr({
            transform: `translate(${destNameX},105)`,
            'text-anchor': txtAnchor
        });
    }
    _leftWideFactor(stnId) {
        var res = 0;
        let stnInstance = this.stations[stnId];
        if (stnInstance instanceof _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["Int3LStationHK"]) {
            res += this._longInterval;
        }
        if (stnInstance instanceof _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI11LStationHK"]) {
            res += this._longInterval;
        }
        if (stnInstance instanceof _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI12LStationHK"]) {
            res += this._longInterval;
        }
        if (stnInstance instanceof _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI22StationHK"]) {
            res += this._longInterval;
        }
        if (this._stnIndegree(stnId) == 2) {
            res += this._longInterval / 2;
        }
        if (this._stnOutdegree(this.stations[stnId].parents[0]) == 2) {
            res += this._longInterval / 2;
        }
        return res;
    }
    _rightWideFactor(stnId) {
        var res = 0;
        let stnInstance = this.stations[stnId];
        if (stnInstance instanceof _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["Int3RStationHK"]) {
            res += this._longInterval;
        }
        if (stnInstance instanceof _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI11RStationHK"]) {
            res += this._longInterval;
        }
        if (stnInstance instanceof _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI12RStationHK"]) {
            res += this._longInterval;
        }
        if (stnInstance instanceof _Station_StationHK__WEBPACK_IMPORTED_MODULE_2__["OSI22StationHK"]) {
            res += this._longInterval;
        }
        if (this._stnOutdegree(stnId) == 2) {
            res += this._longInterval / 2;
        }
        if (this._stnIndegree(this.stations[stnId].children[0]) == 2) {
            res += this._longInterval / 2;
        }
        return res;
    }
    updateStnName(stnId, names, stnNum) {
        super.updateStnName(stnId, names, stnNum);
        this.loadFonts();
        if (stnId == this._currentStnId) {
            this.updateStnNameBg();
        }
    }
    updateStnTransfer(stnId, type, info = null) {
        super.updateStnTransfer(stnId, type, info);
        this.loadFonts();
        this.updateStnNameBg();
    }
    addStn(prep, stnId, loc, end) {
        let res = super.addStn(prep, stnId, loc, end);
        this.loadFonts();
        this.updateStnNameBg();
        return res;
    }
    removeStn(stnId) {
        if (!super.removeStn(stnId)) {
            return false;
        }
        this.loadFonts();
        this.updateStnNameBg();
        return true;
    }
    updateBranchType(stnId, direction, type) {
        if (!super.updateBranchType(stnId, direction, type)) {
            return false;
        }
        this.loadFonts();
        return true;
    }
    updateBranchFirst(stnId, direction, first) {
        if (!super.updateBranchFirst(stnId, direction, first)) {
            return false;
        }
        this.loadFonts();
        return true;
    }
    updateBranchPos(stnId, direction, pos) {
        if (!super.updateBranchPos(stnId, direction, pos)) {
            return false;
        }
        this.loadFonts();
        return true;
    }
    static initSVG(line) {
        super.initSVG(line);
        line.loadFonts();
        line.updateStnNameBg();
    }
}


/***/ }),

/***/ "./src/Station/StationHK.ts":
/*!**********************************!*\
  !*** ./src/Station/StationHK.ts ***!
  \**********************************/
/*! exports provided: RMGStationHK, Int2StationHK, Int3LStationHK, Int3RStationHK, OSI11LStationHK, OSI11RStationHK, OSI12LStationHK, OSI12RStationHK, OSI22StationHK, OSI22LStationHK, OSI22RStationHK, OSI22EndStationHK */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RMGStationHK", function() { return RMGStationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Int2StationHK", function() { return Int2StationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Int3LStationHK", function() { return Int3LStationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Int3RStationHK", function() { return Int3RStationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OSI11LStationHK", function() { return OSI11LStationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OSI11RStationHK", function() { return OSI11RStationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OSI12LStationHK", function() { return OSI12LStationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OSI12RStationHK", function() { return OSI12RStationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OSI22StationHK", function() { return OSI22StationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OSI22LStationHK", function() { return OSI22LStationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OSI22RStationHK", function() { return OSI22RStationHK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OSI22EndStationHK", function() { return OSI22EndStationHK; });
/* harmony import */ var _Station__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Station */ "./src/Station/Station.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./src/utils.ts");


class RMGStationHK extends _Station__WEBPACK_IMPORTED_MODULE_0__["RMGStation"] {
    constructor(id, data) {
        super(id, data);
    }
}
class Int2StationHK extends RMGStationHK {
    constructor(id, data) {
        super(id, data);
        this._intInfo = data.transfer.info[0][0];
        // this._intInfo = data.interchange[0][0];
    }
    get _dy() { return 0; }
    get intTickHTML() {
        var tickRotation = (this.namePos) ? 180 : 0;
        var tickColour = this._intInfo[_utils__WEBPACK_IMPORTED_MODULE_1__["IntInfoTag"].colour];
        var tick = $('<use>', {
            'xlink:href': '#inttick_hk',
            stroke: tickColour,
            transform: `translate(${this.x},${this.y + this._dy})rotate(${tickRotation})`,
            class: 'rmg-line rmg-line__mtr rmg-line__change'
        });
        if (this.state == -1) {
            tick.addClass('rmg-line__pass');
        }
        return tick;
    }
    get _nameClass() {
        return (this.state == -1) ? 'Pass' : 'Future';
    }
    get intNameHTML() {
        var [nameHTML, nameZHLn, nameENLn] = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["joinIntName"])([this._intInfo[_utils__WEBPACK_IMPORTED_MODULE_1__["IntInfoTag"].nameZH], this._intInfo[_utils__WEBPACK_IMPORTED_MODULE_1__["IntInfoTag"].nameEN]], 10, 7);
        var dy = (!this.namePos) ? 25 + 5.953125 : -25 + 5.953125 - 18.65625 - 13 * (nameZHLn - 1) - 7 * (nameENLn - 1);
        dy += this._dy;
        // var nameClass = (this.state == -1) ? 'Pass' : 'Future';
        return $('<g>', {
            'text-anchor': 'middle',
            'transform': `translate(${this.x},${this.y + dy})`,
            'class': `Name ${this._nameClass}`
        }).html(nameHTML[0]);
    }
    get ungrpHTML() {
        return [this.intTickHTML, this.iconHTML, this.nameHTML, this.intNameHTML];
    }
}
class Int3StationHK extends RMGStationHK {
    constructor(id, data) {
        super(id, data);
        this._intInfos = data.transfer.info[0];
    }
    get iconHTML() {
        let iconRotation = (!this.namePos) ? 0 : 180;
        return $('<use>', {
            'xlink:href': '#int3_hk',
            transform: `translate(${this.x},${this.y})rotate(${iconRotation})`,
            class: this.iconClass
        });
    }
    get _tickRotation() { return 0; }
    get _dy() { return 0; }
    get _dx() { return 0; }
    get _tickFlip() { return 1; }
    get intTickHTML() {
        let elems = [];
        this._intInfos
            .map(info => info[_utils__WEBPACK_IMPORTED_MODULE_1__["IntInfoTag"].colour])
            .forEach((c, i) => {
            if (i >= 2) {
                return;
            }
            let tickColour = (this.state === -1) ? '#aaa' : c;
            let dy = (!this.namePos) ? 18 * (i + 1) : -18 * (2 - i);
            dy += this._dy;
            dy *= this._tickFlip;
            elems.push($('<use>', {
                'xlink:href': '#inttick_hk',
                stroke: tickColour,
                transform: `translate(${this.x + this._dx},${this.y + dy})rotate(${this._tickRotation})`,
                class: 'rmg-line rmg-line__mtr rmg-line__change'
            }));
        });
        return elems;
    }
    get _txtAnchor() { return 'middle'; }
    get _intNameDX() { return 0; }
    get _nameClass() { return (this.state == -1) ? 'Pass' : 'Future'; }
    get intNameHTML() {
        // var str = '';
        let elems = [];
        let nameClass = this._nameClass;
        this._intInfos
            .map(info => [info[_utils__WEBPACK_IMPORTED_MODULE_1__["IntInfoTag"].nameZH], info[_utils__WEBPACK_IMPORTED_MODULE_1__["IntInfoTag"].nameEN]])
            .forEach((names, i) => {
            if (i >= 2) {
                return;
            }
            let [nameHTML, nameZHLn, nameENLn] = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["joinIntName"])(names, 10, 7);
            var dy = (!this.namePos) ? 18 * (i + 1) : -18 * (2 - i);
            dy += this._dy;
            dy *= this._tickFlip;
            dy += 5.953125 - (19.65625 + 13 * (nameZHLn - 1) + 7 * (nameENLn - 1)) / 2;
            elems.push($('<g>', {
                'text-anchor': this._txtAnchor,
                transform: `translate(${this.x + this._intNameDX},${this.y + dy})`,
                class: 'Name ' + nameClass
            }).html(nameHTML[0]));
        });
        return elems;
    }
    get ungrpHTML() {
        return [...this.intTickHTML, this.iconHTML, this.nameHTML, ...this.intNameHTML];
    }
}
class Int3LStationHK extends Int3StationHK {
    get _tickRotation() { return 90; }
    get _txtAnchor() { return 'end'; }
    get _intNameDX() { return -24; }
}
class Int3RStationHK extends Int3StationHK {
    get _tickRotation() { return -90; }
    get _txtAnchor() { return 'start'; }
    get _intNameDX() { return 24; }
}
class OSI11StationHK extends Int2StationHK {
    constructor(id, data) {
        // data.int2 = data.osi11;
        data.transfer.info[0].push(data.transfer.info[1][0]);
        // data.interchange[0].push(data.interchange[1][1]);
        super(id, data);
        this._osiNames = data.transfer.osi_names[0];
        this._osiType = data.transfer.paid_area ? 'p' : 'u'; // u(npaid) or p(aid);
    }
    get osiClass() { return this._osiType == 'u' ? 'rmg-stn__mtr--unpaid-osi' : 'rmg-stn__mtr--paid-osi'; }
    get iconHTML() {
        var iconRotation = (!this.namePos) ? 0 : 180;
        return $('<use>', {
            'xlink:href': '#osi11_hk',
            'transform': `translate(${this.x},${this.y})rotate(${iconRotation})`,
            class: [this.iconClass, this.osiClass].join(' ')
        });
    }
    get _dy() { return (!this.namePos) ? 26 : -26; }
    get _txtAnchor() { return 'middle'; }
    get _osiNameDX() { return 0; }
    get osiNameHTML() {
        var dy = this._dy + 8.34375 - 25.03125 / 2;
        return $('<g>', {
            'text-anchor': this._txtAnchor,
            'transform': `translate(${this.x + this._osiNameDX},${this.y + dy})`,
            'class': 'Name ' + this._nameClass
        }).append($('<text>').addClass('rmg-name__zh rmg-name__mtr--osi').text(this._osiNames[0])).append($('<text>', {
            'x': 0, 'dy': 12, 'class': 'rmg-name__en rmg-name__mtr--osi'
        }).text(this._osiNames[1]));
    }
    get ungrpHTML() {
        return [this.intTickHTML, this.iconHTML, this.nameHTML, this.intNameHTML, this.osiNameHTML];
    }
}
class OSI11LStationHK extends OSI11StationHK {
    // OSI name on left
    get _txtAnchor() { return 'end'; }
    get _osiNameDX() { return -13; }
}
class OSI11RStationHK extends OSI11StationHK {
    // OSI name on right
    get _txtAnchor() { return 'start'; }
    get _osiNameDX() { return 13; }
}
class OSI12StationHK extends Int3StationHK {
    constructor(id, data) {
        // data.int3 = data.osi12;
        data.transfer.info[0].unshift(...data.transfer.info[1].slice(0, 2));
        // data.interchange[0].unshift(...data.interchange[1].slice(1,3));
        super(id, data);
        this._osiNames = data.transfer.osi_names[0];
        this._osiType = data.transfer.paid_area ? 'p' : 'u';
    }
    get osiClass() { return this._osiType == 'u' ? 'rmg-stn__mtr--unpaid-osi' : 'rmg-stn__mtr--paid-osi'; }
    get iconHTML() {
        var iconRotation = (!this.namePos) ? 0 : 180;
        return $('<use>', {
            'xlink:href': '#osi12_hk',
            transform: `translate(${this.x},${this.y})rotate(${iconRotation})`,
            class: [this.iconClass, this.osiClass].join(' ')
        });
    }
    get _dy() { return (!this.namePos) ? (26 - 18) : -8; }
    get _osiDY() { return (!this.namePos) ? (26 + 18 + 10) + 8.34375 : -(26 + 18 + 10) + 8.34375 - 25.03125; }
    get _osiTxtAnchor() { return 'middle'; }
    get _osiDX() { return 0; }
    get osiNameHTML() {
        var nameClass = (this.state == -1) ? 'Pass' : 'Future';
        return $('<g>', {
            'text-anchor': this._osiTxtAnchor,
            'transform': `translate(${this.x + this._dx + this._osiDX},${this.y + this._osiDY})`,
            'class': `Name ${nameClass}`
        }).append($('<text>').addClass('rmg-name__zh rmg-name__mtr--osi').text(this._osiNames[0])).append($('<text>', {
            'x': 0, 'dy': 12, 'class': 'rmg-name__en rmg-name__mtr--osi'
        }).text(this._osiNames[1].split('\\')[0]).append($('<tspan>', { x: 0, dy: 10 }).text(this._osiNames[1].split('\\')[1] || '')));
    }
    get ungrpHTML() {
        return [...this.intTickHTML, this.iconHTML, this.nameHTML, ...this.intNameHTML, this.osiNameHTML];
    }
}
class OSI12LStationHK extends OSI12StationHK {
    get _tickRotation() { return 90; }
    get _txtAnchor() { return 'end'; }
    get _intNameDX() { return -24; }
}
class OSI12RStationHK extends OSI12StationHK {
    get _tickRotation() { return -90; }
    get _txtAnchor() { return 'start'; }
    get _intNameDX() { return 24; }
}
class OSI22StationHK extends OSI12StationHK {
    constructor(id, data) {
        super(id, data);
        // data mutated by OSI12Station!!!
        this._origIntInfo = data.transfer.info[0][2];
    }
    get _nameTxtAnchor() { return this._osiTxtAnchor; }
    get _nameDY() {
        return this.namePos ? 11.515625 : -11.515625;
    }
    get origIntTickHTML() {
        var tickRotation = this.namePos ? 0 : 180;
        var tickColour = this._origIntInfo[_utils__WEBPACK_IMPORTED_MODULE_1__["IntInfoTag"].colour];
        var tick = $('<use>', {
            'xlink:href': '#inttick_hk',
            stroke: tickColour,
            transform: `translate(${this.x},${this.y})rotate(${tickRotation})`,
            'class': 'rmg-line rmg-line__mtr rmg-line__change'
        });
        if (this.state == -1) {
            tick.addClass('rmg-line__pass');
        }
        return tick;
    }
    get origIntNameHTML() {
        var [nameHTML, nameZHLn, nameENLn] = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["joinIntName"])([this._origIntInfo[_utils__WEBPACK_IMPORTED_MODULE_1__["IntInfoTag"].nameZH], this._origIntInfo[_utils__WEBPACK_IMPORTED_MODULE_1__["IntInfoTag"].nameEN]], 10, 7);
        var dy = this.namePos ? 25 + 5.953125 : -25 + 5.953125 - 18.65625 - 13 * (nameZHLn - 1) - 7 * (nameENLn - 1);
        // dy += this._dy;
        // var nameClass = (this.state == -1) ? 'Pass' : 'Future';
        return $('<g>', {
            'text-anchor': this._txtAnchor,
            transform: `translate(${this.x - this._nameDX},${this.y + dy})`,
            class: `Name ${this._nameClass}`
        }).html(nameHTML[0]);
    }
    get _osiNameDX() { return 0; }
    get osiNameHTML() {
        var dy = this._dy - (this.namePos ? 18 + 9 : -27) + 8.34375 - 25.03125 / 2;
        return $('<g>', {
            'text-anchor': this._osiTxtAnchor,
            transform: `translate(${this.x + this._osiNameDX},${this.y + dy})`,
            class: 'Name ' + this._nameClass
        }).append($('<text>').addClass('rmg-name__zh rmg-name__mtr--osi').text(this._osiNames[0])).append($('<text>', {
            x: 0, dy: 12, class: 'rmg-name__en rmg-name__mtr--osi'
        }).text(this._osiNames[1]));
    }
    get ungrpHTML() {
        return [
            ...this.intTickHTML, this.origIntTickHTML,
            this.iconHTML, this.nameHTML,
            ...this.intNameHTML, this.origIntNameHTML, this.osiNameHTML
        ];
    }
}
class OSI22LStationHK extends OSI22StationHK {
    get _nameDX() { return 3; }
    get _tickRotation() { return 90; }
    get _txtAnchor() { return 'end'; }
    get _intNameDX() { return -24; }
    get _osiNameDX() { return 13; }
    get _osiTxtAnchor() { return 'start'; }
}
class OSI22RStationHK extends OSI22StationHK {
    get _nameDX() { return -3; }
    get _tickRotation() { return -90; }
    get _txtAnchor() { return 'start'; }
    get _intNameDX() { return 24; }
    get _osiNameDX() { return -13; }
    get _osiTxtAnchor() { return 'end'; }
}
class OSI22EndStationHK extends OSI12StationHK {
    constructor(id, data) {
        super(id, data);
        // data mutated by OSI12Station!!!
        [this._origIntCity, this._origIntLine, this._origIntColour, this._origIntFg, this._origIntNameZH, this._origIntNameEN] = data.transfer.info[0][2];
    }
    get origIntTickHTML() {
        var tickRotation = this.namePos ? 180 : 0;
        var tickColour = this._origIntColour;
        var tick = $('<use>', {
            'xlink:href': '#inttick_hk',
            stroke: tickColour,
            transform: `translate(${this.x},${this.y})rotate(${tickRotation})`,
            'class': 'rmg-line rmg-line__mtr rmg-line__change'
        });
        if (this.state == -1) {
            tick.addClass('rmg-line__pass');
        }
        return tick;
    }
    get origIntNameHTML() {
        var [nameHTML, nameZHLn, nameENLn] = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["joinIntName"])([this._origIntNameZH, this._origIntNameEN], 10, 7);
        var dy = !this.namePos ? 25 + 5.953125 : -25 + 5.953125 - 18.65625 - 13 * (nameZHLn - 1) - 7 * (nameENLn - 1);
        // dy += this._dy;
        // var nameClass = (this.state == -1) ? 'Pass' : 'Future';
        return $('<g>', {
            'text-anchor': 'middle',
            'transform': `translate(${this.x},${this.y + dy})`,
            'class': `Name ${this._nameClass}`
        }).html(nameHTML[0]);
    }
    get iconHTML() {
        var iconYFlip = this.namePos ? 1 : -1;
        var iconXFlip = (this.children[0] == 'lineend') ? 1 : -1;
        var iconRotation = (this.children[0] == 'lineend') ? 0 : 180;
        return $('<use>', {
            'xlink:href': '#osi22end_hk',
            'transform': `translate(${this.x},${this.y})scale(${iconXFlip},${iconYFlip})`,
            class: [this.iconClass, this.osiClass].join(' ')
        });
    }
    get _tickRotation() { return (this.children[0] == 'lineend') ? -90 : 90; }
    get _tickFlip() { return -1; }
    get _dx() { return (this.children[0] == 'lineend') ? 41 : -41; }
    get _dy() { return !this.namePos ? -18 : 18; }
    get _intNameDX() { return (this.children[0] == 'lineend') ? 24 + 41 : -(24 + 41); }
    get _txtAnchor() { return (this.children[0] == 'lineend') ? 'start' : 'end'; }
    get _osiDY() { return !this.namePos ? (10) + 8.34375 : -(10) + 8.34375 - 25.03125; }
    get _osiTxtAnchor() { return (this.children[0] == 'lineend') ? 'start' : 'end'; }
    get _osiDX() { return (this.children[0] == 'lineend') ? -9 : 9; }
    get ungrpHTML() {
        return [
            ...this.intTickHTML, this.origIntTickHTML,
            this.iconHTML, this.nameHTML,
            ...this.intNameHTML, this.origIntNameHTML, this.osiNameHTML
        ];
    }
}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvTGluZS9MaW5lSEsudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1N0YXRpb24vU3RhdGlvbkhLLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQWlDO0FBQ2tFO0FBQ3lJO0FBRXJPLE1BQU0sU0FBVSxTQUFRLDZDQUFPO0lBS2xDLFlBQWEsS0FBZTtRQUN4QixLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFYixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUM7UUFDL0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQztJQUN6QyxDQUFDO0lBRUQsZ0JBQWdCLENBQUMsS0FBUyxFQUFFLE9BQW9CO1FBQzVDLFFBQVEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUU7WUFDM0IsS0FBSyxNQUFNLENBQUM7WUFDWixLQUFLLE9BQU87Z0JBQ1IsT0FBTyxJQUFJLGdFQUFhLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQzdDLEtBQUssTUFBTSxDQUFDO1lBQ1osS0FBSyxPQUFPO2dCQUNSLE9BQU8sT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEtBQUcsR0FBRyxDQUFDLENBQUM7b0JBQ3RDLElBQUksaUVBQWMsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztvQkFDcEMsSUFBSSxpRUFBYyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztZQUMzQyxLQUFLLE9BQU87Z0JBQ1IsT0FBTyxPQUFPLENBQUMsUUFBUSxDQUFDLFVBQVUsS0FBRyxHQUFHLENBQUMsQ0FBQztvQkFDdEMsSUFBSSxrRUFBZSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO29CQUNyQyxJQUFJLGtFQUFlLENBQUMs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Q0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUM7SUFDeEUsSUFBSSxTQUFTLEtBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDO0lBQzVCLElBQUksR0FBRyxLQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUM7SUFDOUQsSUFBSSxHQUFHLEtBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBQztJQUM1QyxJQUFJLFVBQVUsS0FBSSxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFDO0lBQzdFLElBQUksVUFBVSxLQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFDO0lBQzVFLElBQUksTUFBTSxLQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sR0FBRyxRQUFRLENBQUMsRUFBQztJQUNuRixJQUFJLGFBQWEsS0FBSSxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBQztJQUMvRSxJQUFJLE1BQU0sS0FBSSxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDO0lBRS9ELElBQUksU0FBUztRQUNULE9BQU87WUFDSCxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGVBQWU7WUFDekMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtZQUM1QixHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsV0FBVztTQUM5RDtJQUNMLENBQUM7Q0FDSiIsImZpbGUiOiJMaW5lSEsubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUk1HTGluZSB9IGZyb20gJy4vTGluZSc7XHJcbmltcG9ydCB7IFJNR1BhcmFtLCBnZXRUeHRCb3hEaW0sIHNldFBhcmFtcywgTmFtZSwgSUQsIERpcmVjdGlvbkxvbmcsIFN0YXRpb25JbmZvIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQgeyBSTUdTdGF0aW9uSEssIEludDJTdGF0aW9uSEssIEludDNMU3RhdGlvbkhLLCBJbnQzUlN0YXRpb25ISywgT1NJMTFMU3RhdGlvbkhLLCBPU0kxMkxTdGF0aW9uSEssIE9TSTEyUlN0YXRpb25ISywgT1NJMjJFbmRTdGF0aW9uSEssIE9TSTIyTFN0YXRpb25ISywgT1NJMjJSU3RhdGlvbkhLLCBPU0kxMVJTdGF0aW9uSEssIE9TSTIyU3RhdGlvbkhLIH0gZnJvbSAnLi4vU3RhdGlvbi9TdGF0aW9uSEsnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJNR0xpbmVISyBleHRlbmRzIFJNR0xpbmUge1xyXG4gICAgcHJpdmF0ZSBfdHh0RmxpcDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX2NoYXJGb3JtOiAndHJhZCcgfCAnY24nIHwgJ3R3JyB8ICdqcCc7XHJcbiAgICBwcml2YXRlIF9kZXN0TGVnYWN5OiBib29sZWFuOyBcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAocGFyYW06IFJNR1BhcmFtKSB7XHJcbiAgICAgICAgc3VwZXIocGFyYW0pO1xyXG5cclxuICAgICAgICB0aGlzLl90eHRGbGlwID0gcGFyYW0udHh0X2ZsaXA7XHJcbiAgICAgICAgdGhpcy5fY2hhckZvcm0gPSBwYXJhbS5jaGFyX2Zvcm07XHJcbiAgICAgICAgdGhpcy5fZGVzdExlZ2FjeSA9IHBhcmFtLmRlc3RfbGVnYWN5O1xyXG4gICAgfVxyXG5cclxuICAgIF9pbml0U3RuSW5zdGFuY2Uoc3RuSWQ6IElELCBzdG5JbmZvOiBTdGF0aW9uSW5mbykge1xyXG4gICAgICAgIHN3aXRjaCAoc3RuSW5mby50cmFuc2Zlci50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2ludDInOlxyXG4gICAgICAgICAgICBjYXNlICdvc2kyMSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludDJTdGF0aW9uSEsoc3RuSWQsIHN0bkluZm8pO1xyXG4gICAgICAgICAgICBjYXNlICdpbnQzJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMzEnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0bkluZm8udHJhbnNmZXIudGlja19kaXJlYz09PSdsJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEludDNMU3RhdGlvbkhLKHN0bklkLCBzdG5JbmZvKSA6IFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBJbnQzUlN0YXRpb25ISyhzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTExJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdG5JbmZvLnRyYW5zZmVyLnRpY2tfZGlyZWM9PT0nbCcgP1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBPU0kxMUxTdGF0aW9uSEsoc3RuSWQsIHN0bkluZm8pIDogXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE9TSTExUlN0YXRpb25ISyhzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ29zaTEyJzpcclxuICAgICAgICAgICAgY2FzZSAnb3NpMTMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0bkluZm8udHJhbnNmZXIudGlja19kaXJlYz09PSdsJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE9TSTEyTFN0YXRpb25ISyhzdG5JZCwgc3RuSW5mbykgOiBcclxuICAgICAgICAgICAgICAgICAgICBuZXcgT1NJMTJSU3RhdGlvbkhLKHN0bklkLCBzdG5JbmZvKTtcclxuICAgICAgICAgICAgY2FzZSAnb3NpMjInOlxyXG4gICAgICAgICAgICAgICAgaWYgKHN0bkluZm8ucGFyZW50c1swXT09PSdsaW5lc3RhcnQnIHx8IHN0bkluZm8uY2hpbGRyZW5bMF09PT0nbGluZWVuZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9TSTIyRW5kU3RhdGlvbkhLKHN0bklkLCBzdG5JbmZvKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0bkluZm8udHJhbnNmZXIudGlja19kaXJlYz09PSdsJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBPU0kyMkxTdGF0aW9uSEsoc3RuSWQsIHN0bkluZm8pIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE9TSTIyUlN0YXRpb25ISyhzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJNR1N0YXRpb25ISyhzdG5JZCwgc3RuSW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF91cGRhdGVTdG5JbnN0YW5jZShzdG5JZDogSUQpIHtcclxuICAgICAgICBzdXBlci5fdXBkYXRlU3RuSW5zdGFuY2Uoc3RuSWQpO1xyXG4gICAgICAgIHRoaXMuc3RhdGlvbnNbc3RuSWRdLm5hbWVQb3MgPSB0aGlzLl90eHRGbGlwID8gIXRoaXMuX3N0bk5hbWVQb3Moc3RuSWQpIDogdGhpcy5fc3RuTmFtZVBvcyhzdG5JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHN2Z0Rlc3RXaWR0aCh2YWw6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyLnN2Z0Rlc3RXaWR0aCA9IHZhbDtcclxuICAgICAgICB0aGlzLmxvYWRGb250cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzdmdXaWR0aCh2YWw6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyLnN2Z1dpZHRoID0gdmFsO1xyXG4gICAgICAgIHRoaXMubG9hZEZvbnRzKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdG5OYW1lQmcoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgcGFkZGluZyh2YWw6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyLnBhZGRpbmcgPSB2YWw7XHJcbiAgICAgICAgdGhpcy5sb2FkRm9udHMoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0bk5hbWVCZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBicmFuY2hTcGFjaW5nKHZhbDogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIuYnJhbmNoU3BhY2luZyA9IHZhbDtcclxuICAgICAgICB0aGlzLmxvYWRGb250cygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RuTmFtZUJnKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHR4dEZsaXAoZmxhZzogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX3R4dEZsaXAgPSBmbGFnO1xyXG4gICAgICAgIHNldFBhcmFtcygndHh0X2ZsaXAnLCBmbGFnKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgW3N0bklkLCBzdG5JbnN0YW5jZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zdGF0aW9ucykpIHtcclxuICAgICAgICAgICAgaWYgKFsnbGluZXN0YXJ0JywgJ2xpbmVlbmQnXS5pbmNsdWRlcyhzdG5JZCkpIHtjb250aW51ZTt9XHJcbiAgICAgICAgICAgIHN0bkluc3RhbmNlLm5hbWVQb3MgPSB0aGlzLl90eHRGbGlwID8gIXRoaXMuX3N0bk5hbWVQb3Moc3RuSWQpIDogdGhpcy5fc3RuTmFtZVBvcyhzdG5JZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcjc3RuX2ljb25zJykuZW1wdHkoKTtcclxuICAgICAgICB0aGlzLmRyYXdTdG5zKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkRm9udHMoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0bk5hbWVCZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBkaXJlY3Rpb24odmFsOiAnbCcgfCAncicpIHtcclxuICAgICAgICBzdXBlci5kaXJlY3Rpb24gPSB2YWw7XHJcbiAgICAgICAgdGhpcy5sb2FkRm9udHMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHRlciBvZiBjaGFyYWN0ZXIgZm9ybS4gXHJcbiAgICAgKiBAcGFyYW0gdmFsICd0cmFkJywgJ2NuJywgJ3R3JyBvciAnanAnXHJcbiAgICAgKi9cclxuICAgIHNldCBjaGFyRm9ybSh2YWw6ICd0cmFkJyB8ICdjbicgfCAndHcnIHwgJ2pwJykge1xyXG4gICAgICAgIHRoaXMuX2NoYXJGb3JtID0gdmFsO1xyXG4gICAgICAgIHNldFBhcmFtcygnY2hhcl9mb3JtJywgdmFsKTtcclxuXHJcbiAgICAgICAgJCgnLnJtZy1uYW1lX19jaGFyLXRyYWQsIC5ybWctbmFtZV9fY2hhci1jbiwgLnJtZy1uYW1lX19jaGFyLXR3LCAucm1nLW5hbWVfX2NoYXItanAnKVxyXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3JtZy1uYW1lX19jaGFyLXRyYWQgcm1nLW5hbWVfX2NoYXItY24gcm1nLW5hbWVfX2NoYXItdHcgcm1nLW5hbWVfX2NoYXItanAnKVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoYHJtZy1uYW1lX19jaGFyLSR7dmFsfWApO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBsaW5lTmFtZXModmFsOiBOYW1lKSB7XHJcbiAgICAgICAgc3VwZXIubGluZU5hbWVzID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLl9kZXN0TGVnYWN5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0Rlc3RJbmZvKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZEZvbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0dGVyIG9mIGxlZ2FjeSBzdHlsZSBvZiBkZXN0aW5hdGlvbiBpbmZvcm1hdGlvbiBwYW5lbC4gXHJcbiAgICAgKi9cclxuICAgIHNldCBkZXN0TGVnYWN5KHZhbDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2Rlc3RMZWdhY3kgPSB2YWw7XHJcbiAgICAgICAgc2V0UGFyYW1zKCdkZXN0X2xlZ2FjeScsIHZhbCk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhd0Rlc3RJbmZvKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkRm9udHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgY3VycmVudFN0bklkKHZhbDogSUQpIHtcclxuICAgICAgICBzdXBlci5jdXJyZW50U3RuSWQgPSB2YWw7XHJcbiAgICAgICAgdGhpcy5sb2FkRm9udHMoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0bk5hbWVCZygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGlvbiBuYW1lIHBvc2l0aW9uIChgZmFsc2VgOiBhYm92ZSBsaW5lLCBgdHJ1ZWA6IGJlbG93IGxpbmUsIGdpdmVuIGB0eHRGbGlwYCBpcyBgZmFsc2VgKS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfc3RuTmFtZVBvcyhzdG5JZDogSUQpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoc3RuSWQgPT09ICdsaW5lc3RhcnQnKSB7cmV0dXJuIHRydWU7fVxyXG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgICBsZXQgY3AgPSB0aGlzLmNyaXRpY2FsUGF0aC5ub2RlcztcclxuICAgICAgICBsZXQgcG9zID0gY3AuaW5kZXhPZihzdG5JZCkgJSAyOyAvLyAtMSwgMCBvciAxO1xyXG4gICAgICAgIGlmIChwb3MgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJJZCA9IHRoaXMuc3RhdGlvbnNbc3RuSWRdLnBhcmVudHNbMF07XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdG5PdXRkZWdyZWUocGFySWQpID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fc3RuTmFtZVBvcyhwYXJJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICFzZWxmLl9zdG5OYW1lUG9zKHBhcklkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBvcyA9PT0gMTtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkRm9udHMoKSB7XHJcbiAgICAgICAgJCgnLnJtZy1uYW1lX196aCcpLmFkZENsYXNzKGBybWctbmFtZV9fY2hhci0ke3RoaXMuX2NoYXJGb3JtfWApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGJhY2tncm91bmQgb2YgY3VycmVudCBzdGF0aW9uIG5hbWUuIGB5YCBhbmQgYGhlaWdodGAgYXJlIGNoYW5nZWQgd2hpbGUgc3RhdGlvbiBpY29uIGlzIHJlLWRyYXduIGFuZCBgUk1HU3RhdGlvbi5uYW1lSFRNTGAgaXMgbG9hZGVkLiBcclxuICAgICAqL1xyXG4gICAgdXBkYXRlU3RuTmFtZUJnKCkge1xyXG4gICAgICAgIHZhciBzdG5OYW1lRGltID0gZ2V0VHh0Qm94RGltKFxyXG4gICAgICAgICAgICAkKGAjc3RuX2ljb25zID4gIyR7dGhpcy5fY3VycmVudFN0bklkfSBnLk5hbWVgKVswXSBhcyBFbGVtZW50IGFzIFNWR0dyYXBoaWNzRWxlbWVudCxcclxuICAgICAgICAgICAgJ3JhaWxtYXAnXHJcbiAgICAgICAgKTtcclxuICAgICAgICAkKCcjY3VycmVudF9iZycpLmF0dHIoe1xyXG4gICAgICAgICAgICB4OiBzdG5OYW1lRGltLngtMywgXHJcbiAgICAgICAgICAgIHdpZHRoOiBzdG5OYW1lRGltLndpZHRoKzYsIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdEZXN0SW5mbygpIHtcclxuICAgICAgICAkKCcjZGVzdF9uYW1lID4gI3BsYXRmb3JtID4gdGV4dCcpLnRleHQodGhpcy5fcGxhdGZvcm1OdW0pO1xyXG5cclxuICAgICAgICBsZXQgdmFsaWREZXN0OiBJRFtdID0gdGhpc1t0aGlzLl9kaXJlY3Rpb24gKyAnVmFsaWREZXN0cyddO1xyXG4gICAgICAgIGxldCB0eHRBbmNob3IgPSB0aGlzLl9kaXJlY3Rpb249PT0nbCcgPyAnc3RhcnQnIDogJ2VuZCc7XHJcblxyXG4gICAgICAgIHZhciBbZGVzdE5hbWVaSCwgZGVzdE5hbWVFTl0gPSBbMCwxXS5tYXAoaWR4ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkRGVzdC5tYXAoc3RuSWQgPT4gdGhpcy5zdGF0aW9uc1tzdG5JZF0ubmFtZVtpZHhdLnJlcGxhY2UoL1xcXFwvZywgJyAnKSkuam9pbignLycpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9kZXN0TGVnYWN5KSB7XHJcbiAgICAgICAgICAgIHZhciBbbGluZU5hbWVaSCwgbGluZU5hbWVFTl0gPSB0aGlzLl9saW5lTmFtZXM7XHJcbiAgICAgICAgICAgIGxpbmVOYW1lRU4gKz0gJyAnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5lTmFtZVpIID0gbGluZU5hbWVFTiA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnI2Rlc3RfbmFtZSA+IGc6bGFzdC1jaGlsZCB0ZXh0JykuZXEoMCkudGV4dChgJHtsaW5lTmFtZVpIfeW+gCR7ZGVzdE5hbWVaSH1gKTtcclxuICAgICAgICAkKCcjZGVzdF9uYW1lID4gZzpsYXN0LWNoaWxkIHRleHQnKS5lcSgxKS50ZXh0KGAke2xpbmVOYW1lRU59dG8gJHtkZXN0TmFtZUVOfWApO1xyXG5cclxuICAgICAgICB2YXIgYmNyID0gJCgnI2Rlc3RfbmFtZSA+IGc6bGFzdC1jaGlsZCcpWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHZhciBmbGFnTGVuZ3RoID0gMTYwICsgMTUwICsgYmNyLndpZHRoICsgNDUgKyA1MDtcclxuICAgICAgICB2YXIgaXNMZWZ0ID0gKHRoaXMuX2RpcmVjdGlvbiA9PSAnbCcpID8gMSA6IC0xO1xyXG4gICAgICAgIHZhciBhcnJvd1ggPSAodGhpcy5fc3ZnRGVzdFdpZHRoIC0gaXNMZWZ0ICogZmxhZ0xlbmd0aCkgLyAyO1xyXG4gICAgICAgIHZhciBhcnJvd1JvdGF0ZSA9IDkwICogKDEgLSBpc0xlZnQpO1xyXG4gICAgICAgIHZhciBwbGF0Zm9ybU51bVggPSBhcnJvd1ggKyBpc0xlZnQgKiAoMTYwICsgNTAgKyA3NSk7XHJcbiAgICAgICAgdmFyIGRlc3ROYW1lWCA9IHBsYXRmb3JtTnVtWCArIGlzTGVmdCAqICg3NSArIDQ1KTtcclxuICAgICAgICAkKCcjZGVzdF9uYW1lID4gdXNlJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke2Fycm93WH0sMTMwKXJvdGF0ZSgke2Fycm93Um90YXRlfSlgKTtcclxuICAgICAgICAkKCcjZGVzdF9uYW1lID4gI3BsYXRmb3JtJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3BsYXRmb3JtTnVtWH0sMTMwKWApO1xyXG4gICAgICAgICQoJyNkZXN0X25hbWUgPiBnOmxhc3QtY2hpbGQnKS5hdHRyKHtcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7ZGVzdE5hbWVYfSwxMDUpYCwgXHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6IHR4dEFuY2hvclxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfbGVmdFdpZGVGYWN0b3Ioc3RuSWQ6IElEKSB7XHJcbiAgICAgICAgdmFyIHJlcyA9IDA7XHJcbiAgICAgICAgbGV0IHN0bkluc3RhbmNlID0gdGhpcy5zdGF0aW9uc1tzdG5JZF07XHJcbiAgICAgICAgaWYgKHN0bkluc3RhbmNlIGluc3RhbmNlb2YgSW50M0xTdGF0aW9uSEspIHtyZXMgKz0gdGhpcy5fbG9uZ0ludGVydmFsO31cclxuICAgICAgICBpZiAoc3RuSW5zdGFuY2UgaW5zdGFuY2VvZiBPU0kxMUxTdGF0aW9uSEspIHtyZXMgKz0gdGhpcy5fbG9uZ0ludGVydmFsO31cclxuICAgICAgICBpZiAoc3RuSW5zdGFuY2UgaW5zdGFuY2VvZiBPU0kxMkxTdGF0aW9uSEspIHtyZXMgKz0gdGhpcy5fbG9uZ0ludGVydmFsO31cclxuICAgICAgICBpZiAoc3RuSW5zdGFuY2UgaW5zdGFuY2VvZiBPU0kyMlN0YXRpb25ISykge3JlcyArPSB0aGlzLl9sb25nSW50ZXJ2YWw7fVxyXG4gICAgICAgIGlmICh0aGlzLl9zdG5JbmRlZ3JlZShzdG5JZCkgPT0gMikge3JlcyArPSB0aGlzLl9sb25nSW50ZXJ2YWwvMjt9XHJcbiAgICAgICAgaWYgKHRoaXMuX3N0bk91dGRlZ3JlZSh0aGlzLnN0YXRpb25zW3N0bklkXS5wYXJlbnRzWzBdKSA9PSAyKSB7cmVzICs9IHRoaXMuX2xvbmdJbnRlcnZhbC8yO31cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfcmlnaHRXaWRlRmFjdG9yKHN0bklkOiBJRCkge1xyXG4gICAgICAgIHZhciByZXMgPSAwO1xyXG4gICAgICAgIGxldCBzdG5JbnN0YW5jZSA9IHRoaXMuc3RhdGlvbnNbc3RuSWRdO1xyXG4gICAgICAgIGlmIChzdG5JbnN0YW5jZSBpbnN0YW5jZW9mIEludDNSU3RhdGlvbkhLKSB7cmVzICs9IHRoaXMuX2xvbmdJbnRlcnZhbDt9XHJcbiAgICAgICAgaWYgKHN0bkluc3RhbmNlIGluc3RhbmNlb2YgT1NJMTFSU3RhdGlvbkhLKSB7cmVzICs9IHRoaXMuX2xvbmdJbnRlcnZhbDt9XHJcbiAgICAgICAgaWYgKHN0bkluc3RhbmNlIGluc3RhbmNlb2YgT1NJMTJSU3RhdGlvbkhLKSB7cmVzICs9IHRoaXMuX2xvbmdJbnRlcnZhbDt9XHJcbiAgICAgICAgaWYgKHN0bkluc3RhbmNlIGluc3RhbmNlb2YgT1NJMjJTdGF0aW9uSEspIHtyZXMgKz0gdGhpcy5fbG9uZ0ludGVydmFsO31cclxuICAgICAgICBpZiAodGhpcy5fc3RuT3V0ZGVncmVlKHN0bklkKSA9PSAyKSB7cmVzICs9IHRoaXMuX2xvbmdJbnRlcnZhbC8yO31cclxuICAgICAgICBpZiAodGhpcy5fc3RuSW5kZWdyZWUodGhpcy5zdGF0aW9uc1tzdG5JZF0uY2hpbGRyZW5bMF0pID09IDIpIHtyZXMgKz0gdGhpcy5fbG9uZ0ludGVydmFsLzI7fVxyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU3RuTmFtZShzdG5JZDogSUQsIG5hbWVzOiBOYW1lLCBzdG5OdW06IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZVN0bk5hbWUoc3RuSWQsIG5hbWVzLCBzdG5OdW0pO1xyXG5cclxuICAgICAgICB0aGlzLmxvYWRGb250cygpO1xyXG4gICAgICAgIGlmIChzdG5JZCA9PSB0aGlzLl9jdXJyZW50U3RuSWQpIHt0aGlzLnVwZGF0ZVN0bk5hbWVCZygpO31cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTdG5UcmFuc2ZlcihzdG5JZDogSUQsIHR5cGUsIGluZm89bnVsbCkge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZVN0blRyYW5zZmVyKHN0bklkLCB0eXBlLCBpbmZvKTtcclxuICAgICAgICB0aGlzLmxvYWRGb250cygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RuTmFtZUJnKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkU3RuKHByZXA6ICdiZWZvcmUnIHwgJ2FmdGVyJywgc3RuSWQ6IElELCBsb2MsIGVuZDogSUQpIHtcclxuICAgICAgICBsZXQgcmVzID0gc3VwZXIuYWRkU3RuKHByZXAsIHN0bklkLCBsb2MsIGVuZCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZEZvbnRzKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdG5OYW1lQmcoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVTdG4oc3RuSWQ6IElEKSB7XHJcbiAgICAgICAgaWYgKCFzdXBlci5yZW1vdmVTdG4oc3RuSWQpKSB7cmV0dXJuIGZhbHNlO31cclxuICAgICAgICB0aGlzLmxvYWRGb250cygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RuTmFtZUJnKCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQnJhbmNoVHlwZShzdG5JZDogSUQsIGRpcmVjdGlvbjogRGlyZWN0aW9uTG9uZywgdHlwZTogJ3Rocm91Z2gnIHwgJ25vbnRocm91Z2gnKSB7XHJcbiAgICAgICAgaWYgKCFzdXBlci51cGRhdGVCcmFuY2hUeXBlKHN0bklkLCBkaXJlY3Rpb24sIHR5cGUpKSB7cmV0dXJuIGZhbHNlO31cclxuICAgICAgICB0aGlzLmxvYWRGb250cygpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUJyYW5jaEZpcnN0KHN0bklkOiBJRCwgZGlyZWN0aW9uOiBEaXJlY3Rpb25Mb25nLCBmaXJzdDogSUQpIHtcclxuICAgICAgICBpZiAoIXN1cGVyLnVwZGF0ZUJyYW5jaEZpcnN0KHN0bklkLCBkaXJlY3Rpb24sIGZpcnN0KSkge3JldHVybiBmYWxzZTt9XHJcbiAgICAgICAgdGhpcy5sb2FkRm9udHMoKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVCcmFuY2hQb3Moc3RuSWQ6IElELCBkaXJlY3Rpb246IERpcmVjdGlvbkxvbmcsIHBvczogMCB8IDEpIHtcclxuICAgICAgICBpZiAoIXN1cGVyLnVwZGF0ZUJyYW5jaFBvcyhzdG5JZCwgZGlyZWN0aW9uLCBwb3MpKSB7cmV0dXJuIGZhbHNlO31cclxuICAgICAgICB0aGlzLmxvYWRGb250cygpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpbml0U1ZHKGxpbmUpIHtcclxuICAgICAgICBzdXBlci5pbml0U1ZHKGxpbmUpO1xyXG4gICAgICAgIGxpbmUubG9hZEZvbnRzKCk7XHJcbiAgICAgICAgbGluZS51cGRhdGVTdG5OYW1lQmcoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFJNR1N0YXRpb24gfSBmcm9tICcuL1N0YXRpb24nO1xyXG5pbXBvcnQgeyBTdGF0aW9uSW5mbywgSUQsIEludGVyY2hhbmdlSW5mbywgSW50SW5mb1RhZywgam9pbkludE5hbWUsIE5hbWUgfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUk1HU3RhdGlvbkhLIGV4dGVuZHMgUk1HU3RhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvciAoaWQ6IElELCBkYXRhOiBTdGF0aW9uSW5mbykge1xyXG4gICAgICAgIHN1cGVyKGlkLCBkYXRhKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEludDJTdGF0aW9uSEsgZXh0ZW5kcyBSTUdTdGF0aW9uSEsge1xyXG4gICAgcHJpdmF0ZSBfaW50SW5mbzogSW50ZXJjaGFuZ2VJbmZvO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yIChpZDogSUQsIGRhdGE6IFN0YXRpb25JbmZvKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIGRhdGEpO1xyXG4gICAgICAgIHRoaXMuX2ludEluZm8gPSBkYXRhLnRyYW5zZmVyLmluZm9bMF1bMF07XHJcbiAgICAgICAgLy8gdGhpcy5faW50SW5mbyA9IGRhdGEuaW50ZXJjaGFuZ2VbMF1bMF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF9keSgpIHtyZXR1cm4gMDt9XHJcblxyXG4gICAgZ2V0IGludFRpY2tIVE1MKCkge1xyXG4gICAgICAgIHZhciB0aWNrUm90YXRpb24gPSAodGhpcy5uYW1lUG9zKSA/IDE4MCA6IDA7XHJcbiAgICAgICAgdmFyIHRpY2tDb2xvdXIgPSB0aGlzLl9pbnRJbmZvW0ludEluZm9UYWcuY29sb3VyXTtcclxuICAgICAgICB2YXIgdGljayA9ICQoJzx1c2U+Jywge1xyXG4gICAgICAgICAgICAneGxpbms6aHJlZic6ICcjaW50dGlja19oaycsIFxyXG4gICAgICAgICAgICBzdHJva2U6IHRpY2tDb2xvdXIsIFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHt0aGlzLnh9LCR7dGhpcy55K3RoaXMuX2R5fSlyb3RhdGUoJHt0aWNrUm90YXRpb259KWAsIFxyXG4gICAgICAgICAgICBjbGFzczogJ3JtZy1saW5lIHJtZy1saW5lX19tdHIgcm1nLWxpbmVfX2NoYW5nZSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSAtMSkge1xyXG4gICAgICAgICAgICB0aWNrLmFkZENsYXNzKCdybWctbGluZV9fcGFzcycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGljaztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgX25hbWVDbGFzcygpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc3RhdGUgPT0gLTEpID8gJ1Bhc3MnIDogJ0Z1dHVyZSc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGludE5hbWVIVE1MKCkge1xyXG4gICAgICAgIHZhciBbbmFtZUhUTUwsIG5hbWVaSExuLCBuYW1lRU5Mbl0gPSBqb2luSW50TmFtZShbdGhpcy5faW50SW5mb1tJbnRJbmZvVGFnLm5hbWVaSF0sIHRoaXMuX2ludEluZm9bSW50SW5mb1RhZy5uYW1lRU5dXSwgMTAsIDcpO1xyXG4gICAgICAgIHZhciBkeSA9ICghdGhpcy5uYW1lUG9zKSA/IDI1ICsgNS45NTMxMjUgOiAtMjUgKyA1Ljk1MzEyNSAtIDE4LjY1NjI1IC0gMTMqKG5hbWVaSExuLTEpIC0gNyoobmFtZUVOTG4tMSk7XHJcbiAgICAgICAgZHkgKz0gdGhpcy5fZHk7XHJcbiAgICAgICAgLy8gdmFyIG5hbWVDbGFzcyA9ICh0aGlzLnN0YXRlID09IC0xKSA/ICdQYXNzJyA6ICdGdXR1cmUnO1xyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7XHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6ICdtaWRkbGUnLCBcclxuICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IGB0cmFuc2xhdGUoJHt0aGlzLnh9LCR7dGhpcy55ICsgZHl9KWAsIFxyXG4gICAgICAgICAgICAnY2xhc3MnOiBgTmFtZSAke3RoaXMuX25hbWVDbGFzc31gXHJcbiAgICAgICAgfSkuaHRtbChuYW1lSFRNTFswXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVuZ3JwSFRNTCgpIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMuaW50VGlja0hUTUwsIHRoaXMuaWNvbkhUTUwsIHRoaXMubmFtZUhUTUwsIHRoaXMuaW50TmFtZUhUTUxdO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBJbnQzU3RhdGlvbkhLIGV4dGVuZHMgUk1HU3RhdGlvbkhLIHtcclxuICAgIHByaXZhdGUgX2ludEluZm9zOiBJbnRlcmNoYW5nZUluZm9bXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoaWQ6IElELCBkYXRhOiBTdGF0aW9uSW5mbykge1xyXG4gICAgICAgIHN1cGVyKGlkLCBkYXRhKTtcclxuICAgICAgICB0aGlzLl9pbnRJbmZvcyA9IGRhdGEudHJhbnNmZXIuaW5mb1swXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaWNvbkhUTUwoKSB7XHJcbiAgICAgICAgbGV0IGljb25Sb3RhdGlvbiA9ICghdGhpcy5uYW1lUG9zKSA/IDAgOiAxODA7XHJcbiAgICAgICAgcmV0dXJuICQoJzx1c2U+Jywge1xyXG4gICAgICAgICAgICAneGxpbms6aHJlZic6ICcjaW50M19oaycsIFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHt0aGlzLnh9LCR7dGhpcy55fSlyb3RhdGUoJHtpY29uUm90YXRpb259KWAsIFxyXG4gICAgICAgICAgICBjbGFzczogdGhpcy5pY29uQ2xhc3NcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgX3RpY2tSb3RhdGlvbigpIHtyZXR1cm4gMDt9XHJcbiAgICBnZXQgX2R5KCkge3JldHVybiAwO31cclxuICAgIGdldCBfZHgoKSB7cmV0dXJuIDA7fVxyXG4gICAgZ2V0IF90aWNrRmxpcCgpIHtyZXR1cm4gMTt9XHJcblxyXG4gICAgZ2V0IGludFRpY2tIVE1MKCkge1xyXG4gICAgICAgIGxldCBlbGVtczogSlF1ZXJ5PEhUTUxFbGVtZW50PltdID0gW107XHJcbiAgICAgICAgdGhpcy5faW50SW5mb3NcclxuICAgICAgICAgICAgLm1hcChpbmZvID0+IGluZm9bSW50SW5mb1RhZy5jb2xvdXJdKVxyXG4gICAgICAgICAgICAuZm9yRWFjaCgoYywgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gMikge3JldHVybjt9XHJcbiAgICAgICAgICAgICAgICBsZXQgdGlja0NvbG91ciA9ICh0aGlzLnN0YXRlID09PSAtMSkgPyAnI2FhYScgOiBjO1xyXG4gICAgICAgICAgICAgICAgbGV0IGR5ID0gKCF0aGlzLm5hbWVQb3MpID8gMTgqKGkrMSkgOiAtMTgqKDItaSk7XHJcbiAgICAgICAgICAgICAgICBkeSArPSB0aGlzLl9keTtcclxuICAgICAgICAgICAgICAgIGR5ICo9IHRoaXMuX3RpY2tGbGlwO1xyXG4gICAgICAgICAgICAgICAgZWxlbXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAkKCc8dXNlPicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3hsaW5rOmhyZWYnOiAnI2ludHRpY2tfaGsnLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiB0aWNrQ29sb3VyLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7dGhpcy54ICsgdGhpcy5fZHh9LCR7dGhpcy55ICsgZHl9KXJvdGF0ZSgke3RoaXMuX3RpY2tSb3RhdGlvbn0pYCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAncm1nLWxpbmUgcm1nLWxpbmVfX210ciBybWctbGluZV9fY2hhbmdlJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZWxlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF90eHRBbmNob3IoKSB7cmV0dXJuICdtaWRkbGUnO31cclxuICAgIGdldCBfaW50TmFtZURYKCkge3JldHVybiAwO31cclxuICAgIGdldCBfbmFtZUNsYXNzKCkge3JldHVybiAodGhpcy5zdGF0ZSA9PSAtMSkgPyAnUGFzcycgOiAnRnV0dXJlJzt9XHJcblxyXG4gICAgZ2V0IGludE5hbWVIVE1MKCkge1xyXG4gICAgICAgIC8vIHZhciBzdHIgPSAnJztcclxuICAgICAgICBsZXQgZWxlbXM6IEpRdWVyeTxIVE1MRWxlbWVudD5bXSA9IFtdO1xyXG4gICAgICAgIGxldCBuYW1lQ2xhc3MgPSB0aGlzLl9uYW1lQ2xhc3M7XHJcblxyXG4gICAgICAgIHRoaXMuX2ludEluZm9zXHJcbiAgICAgICAgICAgIC5tYXAoaW5mbyA9PiBbaW5mb1tJbnRJbmZvVGFnLm5hbWVaSF0sIGluZm9bSW50SW5mb1RhZy5uYW1lRU5dXSBhcyBOYW1lKVxyXG4gICAgICAgICAgICAuZm9yRWFjaCgobmFtZXMsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpID49Mikge3JldHVybjt9XHJcbiAgICAgICAgICAgICAgICBsZXQgW25hbWVIVE1MLCBuYW1lWkhMbiwgbmFtZUVOTG5dID0gam9pbkludE5hbWUobmFtZXMsIDEwLCA3KTtcclxuICAgICAgICAgICAgICAgIHZhciBkeSA9ICghdGhpcy5uYW1lUG9zKSA/IDE4KihpKzEpIDogLTE4KigyLWkpO1xyXG4gICAgICAgICAgICAgICAgZHkgKz0gdGhpcy5fZHk7XHJcbiAgICAgICAgICAgICAgICBkeSAqPSB0aGlzLl90aWNrRmxpcDtcclxuICAgICAgICAgICAgICAgIGR5ICs9IDUuOTUzMTI1IC0gKDE5LjY1NjI1ICsgMTMqKG5hbWVaSExuLTEpICsgNyoobmFtZUVOTG4tMSkpLzI7XHJcbiAgICAgICAgICAgICAgICBlbGVtcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICQoJzxnPicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RleHQtYW5jaG9yJzogdGhpcy5fdHh0QW5jaG9yLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7dGhpcy54ICsgdGhpcy5faW50TmFtZURYfSwke3RoaXMueSArIGR5fSlgLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICdOYW1lICcgKyBuYW1lQ2xhc3NcclxuICAgICAgICAgICAgICAgICAgICB9KS5odG1sKG5hbWVIVE1MWzBdKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB1bmdycEhUTUwoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmludFRpY2tIVE1MLCB0aGlzLmljb25IVE1MLCB0aGlzLm5hbWVIVE1MLCAuLi50aGlzLmludE5hbWVIVE1MXTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEludDNMU3RhdGlvbkhLIGV4dGVuZHMgSW50M1N0YXRpb25ISyB7XHJcbiAgICBnZXQgX3RpY2tSb3RhdGlvbigpIHtyZXR1cm4gOTA7fVxyXG4gICAgZ2V0IF90eHRBbmNob3IoKSB7cmV0dXJuICdlbmQnO31cclxuICAgIGdldCBfaW50TmFtZURYKCkge3JldHVybiAtMjQ7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSW50M1JTdGF0aW9uSEsgZXh0ZW5kcyBJbnQzU3RhdGlvbkhLIHtcclxuICAgIGdldCBfdGlja1JvdGF0aW9uKCkge3JldHVybiAtOTA7fVxyXG4gICAgZ2V0IF90eHRBbmNob3IoKSB7cmV0dXJuICdzdGFydCc7fVxyXG4gICAgZ2V0IF9pbnROYW1lRFgoKSB7cmV0dXJuIDI0O31cclxufVxyXG5cclxuY2xhc3MgT1NJMTFTdGF0aW9uSEsgZXh0ZW5kcyBJbnQyU3RhdGlvbkhLIHtcclxuICAgIHByaXZhdGUgX29zaU5hbWVzOiBOYW1lO1xyXG4gICAgcHJpdmF0ZSBfb3NpVHlwZTogJ3UnIHwgJ3AnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yIChpZDogSUQsIGRhdGE6IFN0YXRpb25JbmZvKSB7XHJcbiAgICAgICAgLy8gZGF0YS5pbnQyID0gZGF0YS5vc2kxMTtcclxuICAgICAgICBkYXRhLnRyYW5zZmVyLmluZm9bMF0ucHVzaChkYXRhLnRyYW5zZmVyLmluZm9bMV1bMF0pO1xyXG4gICAgICAgIC8vIGRhdGEuaW50ZXJjaGFuZ2VbMF0ucHVzaChkYXRhLmludGVyY2hhbmdlWzFdWzFdKTtcclxuICAgICAgICBzdXBlcihpZCwgZGF0YSk7XHJcblxyXG4gICAgICAgIHRoaXMuX29zaU5hbWVzID0gZGF0YS50cmFuc2Zlci5vc2lfbmFtZXNbMF07XHJcbiAgICAgICAgdGhpcy5fb3NpVHlwZSA9IGRhdGEudHJhbnNmZXIucGFpZF9hcmVhID8gJ3AnIDogJ3UnOyAvLyB1KG5wYWlkKSBvciBwKGFpZCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGdldCBvc2lDbGFzcygpIHtyZXR1cm4gdGhpcy5fb3NpVHlwZSA9PSAndScgPyAncm1nLXN0bl9fbXRyLS11bnBhaWQtb3NpJyA6ICdybWctc3RuX19tdHItLXBhaWQtb3NpJzt9XHJcbiAgICBnZXQgaWNvbkhUTUwoKSB7XHJcbiAgICAgICAgdmFyIGljb25Sb3RhdGlvbiA9ICghdGhpcy5uYW1lUG9zKSA/IDAgOiAxODA7XHJcbiAgICAgICAgcmV0dXJuICQoJzx1c2U+Jywge1xyXG4gICAgICAgICAgICAneGxpbms6aHJlZic6ICcjb3NpMTFfaGsnLCBcclxuICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IGB0cmFuc2xhdGUoJHt0aGlzLnh9LCR7dGhpcy55fSlyb3RhdGUoJHtpY29uUm90YXRpb259KWAsIFxyXG4gICAgICAgICAgICBjbGFzczogW3RoaXMuaWNvbkNsYXNzLCB0aGlzLm9zaUNsYXNzXS5qb2luKCcgJylcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgX2R5KCkge3JldHVybiAoIXRoaXMubmFtZVBvcykgPyAyNiA6IC0yNjt9XHJcbiAgICBnZXQgX3R4dEFuY2hvcigpIHtyZXR1cm4gJ21pZGRsZSc7fVxyXG4gICAgZ2V0IF9vc2lOYW1lRFgoKSB7cmV0dXJuIDA7fVxyXG5cclxuICAgIGdldCBvc2lOYW1lSFRNTCgpIHtcclxuICAgICAgICB2YXIgZHkgPSB0aGlzLl9keSArIDguMzQzNzUgLSAyNS4wMzEyNS8yO1xyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7XHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6IHRoaXMuX3R4dEFuY2hvciwgXHJcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBgdHJhbnNsYXRlKCR7dGhpcy54K3RoaXMuX29zaU5hbWVEWH0sJHt0aGlzLnkrZHl9KWAsIFxyXG4gICAgICAgICAgICAnY2xhc3MnOiAnTmFtZSAnICsgdGhpcy5fbmFtZUNsYXNzXHJcbiAgICAgICAgfSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAkKCc8dGV4dD4nKS5hZGRDbGFzcygncm1nLW5hbWVfX3poIHJtZy1uYW1lX19tdHItLW9zaScpLnRleHQodGhpcy5fb3NpTmFtZXNbMF0pXHJcbiAgICAgICAgKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICQoJzx0ZXh0PicsIHtcclxuICAgICAgICAgICAgICAgICd4JzowLCAnZHknOjEyLCAnY2xhc3MnOidybWctbmFtZV9fZW4gcm1nLW5hbWVfX210ci0tb3NpJ1xyXG4gICAgICAgICAgICB9KS50ZXh0KHRoaXMuX29zaU5hbWVzWzFdKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVuZ3JwSFRNTCgpIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMuaW50VGlja0hUTUwsIHRoaXMuaWNvbkhUTUwsIHRoaXMubmFtZUhUTUwsIHRoaXMuaW50TmFtZUhUTUwsIHRoaXMub3NpTmFtZUhUTUxdO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT1NJMTFMU3RhdGlvbkhLIGV4dGVuZHMgT1NJMTFTdGF0aW9uSEsge1xyXG4gICAgLy8gT1NJIG5hbWUgb24gbGVmdFxyXG4gICAgZ2V0IF90eHRBbmNob3IoKSB7cmV0dXJuICdlbmQnO31cclxuICAgIGdldCBfb3NpTmFtZURYKCkge3JldHVybiAtMTM7fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT1NJMTFSU3RhdGlvbkhLIGV4dGVuZHMgT1NJMTFTdGF0aW9uSEsge1xyXG4gICAgLy8gT1NJIG5hbWUgb24gcmlnaHRcclxuICAgIGdldCBfdHh0QW5jaG9yKCkge3JldHVybiAnc3RhcnQnO31cclxuICAgIGdldCBfb3NpTmFtZURYKCkge3JldHVybiAxMzt9XHJcbn1cclxuXHJcbmNsYXNzIE9TSTEyU3RhdGlvbkhLIGV4dGVuZHMgSW50M1N0YXRpb25ISyB7XHJcbiAgICBwcm90ZWN0ZWQgX29zaU5hbWVzOiBOYW1lO1xyXG4gICAgcHJpdmF0ZSBfb3NpVHlwZTogJ3UnIHwgJ3AnO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvciAoaWQ6IElELCBkYXRhOiBTdGF0aW9uSW5mbykge1xyXG4gICAgICAgIC8vIGRhdGEuaW50MyA9IGRhdGEub3NpMTI7XHJcbiAgICAgICAgZGF0YS50cmFuc2Zlci5pbmZvWzBdLnVuc2hpZnQoLi4uZGF0YS50cmFuc2Zlci5pbmZvWzFdLnNsaWNlKDAsMikpO1xyXG4gICAgICAgIC8vIGRhdGEuaW50ZXJjaGFuZ2VbMF0udW5zaGlmdCguLi5kYXRhLmludGVyY2hhbmdlWzFdLnNsaWNlKDEsMykpO1xyXG4gICAgICAgIHN1cGVyKGlkLCBkYXRhKTtcclxuXHJcbiAgICAgICAgdGhpcy5fb3NpTmFtZXMgPSBkYXRhLnRyYW5zZmVyLm9zaV9uYW1lc1swXTtcclxuICAgICAgICB0aGlzLl9vc2lUeXBlID0gZGF0YS50cmFuc2Zlci5wYWlkX2FyZWEgPyAncCcgOiAndSc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG9zaUNsYXNzKCkge3JldHVybiB0aGlzLl9vc2lUeXBlID09ICd1JyA/ICdybWctc3RuX19tdHItLXVucGFpZC1vc2knIDogJ3JtZy1zdG5fX210ci0tcGFpZC1vc2knO31cclxuICAgIGdldCBpY29uSFRNTCgpIHtcclxuICAgICAgICB2YXIgaWNvblJvdGF0aW9uID0gKCF0aGlzLm5hbWVQb3MpID8gMCA6IDE4MDtcclxuICAgICAgICByZXR1cm4gJCgnPHVzZT4nLCB7XHJcbiAgICAgICAgICAgICd4bGluazpocmVmJzogJyNvc2kxMl9oaycsIFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHt0aGlzLnh9LCR7dGhpcy55fSlyb3RhdGUoJHtpY29uUm90YXRpb259KWAsXHJcbiAgICAgICAgICAgIGNsYXNzOiBbdGhpcy5pY29uQ2xhc3MsIHRoaXMub3NpQ2xhc3NdLmpvaW4oJyAnKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBfZHkoKSB7cmV0dXJuICghdGhpcy5uYW1lUG9zKSA/ICgyNi0xOCkgOiAtODt9XHJcbiAgICBnZXQgX29zaURZKCkge3JldHVybiAoIXRoaXMubmFtZVBvcykgPyAoMjYrMTgrMTApICsgOC4zNDM3NSAgOiAtKDI2KzE4KzEwKSArIDguMzQzNzUgLSAyNS4wMzEyNTt9XHJcbiAgICBnZXQgX29zaVR4dEFuY2hvcigpIHtyZXR1cm4gJ21pZGRsZSc7fVxyXG4gICAgZ2V0IF9vc2lEWCgpIHtyZXR1cm4gMDt9XHJcblxyXG4gICAgZ2V0IG9zaU5hbWVIVE1MKCkge1xyXG4gICAgICAgIHZhciBuYW1lQ2xhc3MgPSAodGhpcy5zdGF0ZSA9PSAtMSkgPyAnUGFzcycgOiAnRnV0dXJlJztcclxuICAgICAgICByZXR1cm4gJCgnPGc+Jywge1xyXG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiB0aGlzLl9vc2lUeHRBbmNob3IsIFxyXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZSgke3RoaXMueCt0aGlzLl9keCt0aGlzLl9vc2lEWH0sJHt0aGlzLnkrdGhpcy5fb3NpRFl9KWAsIFxyXG4gICAgICAgICAgICAnY2xhc3MnOiBgTmFtZSAke25hbWVDbGFzc31gXHJcbiAgICAgICAgfSkuYXBwZW5kKFxyXG4gICAgICAgICAgICAkKCc8dGV4dD4nKS5hZGRDbGFzcygncm1nLW5hbWVfX3poIHJtZy1uYW1lX19tdHItLW9zaScpLnRleHQodGhpcy5fb3NpTmFtZXNbMF0pXHJcbiAgICAgICAgKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICQoJzx0ZXh0PicsIHtcclxuICAgICAgICAgICAgICAgICd4JzowLCAnZHknOjEyLCAnY2xhc3MnOidybWctbmFtZV9fZW4gcm1nLW5hbWVfX210ci0tb3NpJ1xyXG4gICAgICAgICAgICB9KS50ZXh0KHRoaXMuX29zaU5hbWVzWzFdLnNwbGl0KCdcXFxcJylbMF0pLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICQoJzx0c3Bhbj4nLCB7eDowLCBkeToxMH0pLnRleHQodGhpcy5fb3NpTmFtZXNbMV0uc3BsaXQoJ1xcXFwnKVsxXSB8fCAnJylcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVuZ3JwSFRNTCgpIHtcclxuICAgICAgICByZXR1cm4gWy4uLnRoaXMuaW50VGlja0hUTUwsIHRoaXMuaWNvbkhUTUwsIHRoaXMubmFtZUhUTUwsIC4uLnRoaXMuaW50TmFtZUhUTUwsIHRoaXMub3NpTmFtZUhUTUxdO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT1NJMTJMU3RhdGlvbkhLIGV4dGVuZHMgT1NJMTJTdGF0aW9uSEsge1xyXG4gICAgZ2V0IF90aWNrUm90YXRpb24oKSB7cmV0dXJuIDkwO31cclxuICAgIGdldCBfdHh0QW5jaG9yKCkge3JldHVybiAnZW5kJzt9XHJcbiAgICBnZXQgX2ludE5hbWVEWCgpIHtyZXR1cm4gLTI0O31cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9TSTEyUlN0YXRpb25ISyBleHRlbmRzIE9TSTEyU3RhdGlvbkhLIHtcclxuICAgIGdldCBfdGlja1JvdGF0aW9uKCkge3JldHVybiAtOTA7fVxyXG4gICAgZ2V0IF90eHRBbmNob3IoKSB7cmV0dXJuICdzdGFydCc7fVxyXG4gICAgZ2V0IF9pbnROYW1lRFgoKSB7cmV0dXJuIDI0O31cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9TSTIyU3RhdGlvbkhLIGV4dGVuZHMgT1NJMTJTdGF0aW9uSEsge1xyXG4gICAgcHJpdmF0ZSBfb3JpZ0ludEluZm86IEludGVyY2hhbmdlSW5mbztcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoaWQ6IElELCBkYXRhOiBTdGF0aW9uSW5mbykge1xyXG4gICAgICAgIHN1cGVyKGlkLCBkYXRhKTtcclxuICAgICAgICAvLyBkYXRhIG11dGF0ZWQgYnkgT1NJMTJTdGF0aW9uISEhXHJcbiAgICAgICAgdGhpcy5fb3JpZ0ludEluZm8gPSBkYXRhLnRyYW5zZmVyLmluZm9bMF1bMl07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF9uYW1lVHh0QW5jaG9yKCkge3JldHVybiB0aGlzLl9vc2lUeHRBbmNob3I7fVxyXG4gICAgZ2V0IF9uYW1lRFkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZVBvcyA/IDExLjUxNTYyNSA6IC0xMS41MTU2MjU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG9yaWdJbnRUaWNrSFRNTCgpIHtcclxuICAgICAgICB2YXIgdGlja1JvdGF0aW9uID0gdGhpcy5uYW1lUG9zID8gMCA6IDE4MDtcclxuICAgICAgICB2YXIgdGlja0NvbG91ciA9IHRoaXMuX29yaWdJbnRJbmZvW0ludEluZm9UYWcuY29sb3VyXTtcclxuICAgICAgICB2YXIgdGljayA9ICQoJzx1c2U+Jywge1xyXG4gICAgICAgICAgICAneGxpbms6aHJlZic6ICcjaW50dGlja19oaycsIFxyXG4gICAgICAgICAgICBzdHJva2U6IHRpY2tDb2xvdXIsIFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHt0aGlzLnh9LCR7dGhpcy55fSlyb3RhdGUoJHt0aWNrUm90YXRpb259KWAsXHJcbiAgICAgICAgICAgICdjbGFzcyc6ICdybWctbGluZSBybWctbGluZV9fbXRyIHJtZy1saW5lX19jaGFuZ2UnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gLTEpIHtcclxuICAgICAgICAgICAgdGljay5hZGRDbGFzcygncm1nLWxpbmVfX3Bhc3MnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRpY2s7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG9yaWdJbnROYW1lSFRNTCgpIHtcclxuICAgICAgICB2YXIgW25hbWVIVE1MLCBuYW1lWkhMbiwgbmFtZUVOTG5dID0gam9pbkludE5hbWUoW3RoaXMuX29yaWdJbnRJbmZvW0ludEluZm9UYWcubmFtZVpIXSwgdGhpcy5fb3JpZ0ludEluZm9bSW50SW5mb1RhZy5uYW1lRU5dXSwgMTAsIDcpO1xyXG4gICAgICAgIHZhciBkeSA9IHRoaXMubmFtZVBvcyA/IDI1ICsgNS45NTMxMjUgOiAtMjUgKyA1Ljk1MzEyNSAtIDE4LjY1NjI1IC0gMTMqKG5hbWVaSExuLTEpIC0gNyoobmFtZUVOTG4tMSk7XHJcbiAgICAgICAgLy8gZHkgKz0gdGhpcy5fZHk7XHJcbiAgICAgICAgLy8gdmFyIG5hbWVDbGFzcyA9ICh0aGlzLnN0YXRlID09IC0xKSA/ICdQYXNzJyA6ICdGdXR1cmUnO1xyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7XHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6IHRoaXMuX3R4dEFuY2hvciwgXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke3RoaXMueCAtIHRoaXMuX25hbWVEWH0sJHt0aGlzLnkgKyBkeX0pYCwgXHJcbiAgICAgICAgICAgIGNsYXNzOiBgTmFtZSAke3RoaXMuX25hbWVDbGFzc31gXHJcbiAgICAgICAgfSkuaHRtbChuYW1lSFRNTFswXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF9vc2lOYW1lRFgoKTogbnVtYmVyIHtyZXR1cm4gMDt9XHJcblxyXG4gICAgZ2V0IG9zaU5hbWVIVE1MKCkge1xyXG4gICAgICAgIHZhciBkeSA9IHRoaXMuX2R5IC0gKHRoaXMubmFtZVBvcyA/IDE4KzkgOiAtMjcpICsgOC4zNDM3NSAtIDI1LjAzMTI1LzI7XHJcbiAgICAgICAgcmV0dXJuICQoJzxnPicsIHtcclxuICAgICAgICAgICAgJ3RleHQtYW5jaG9yJzogdGhpcy5fb3NpVHh0QW5jaG9yLCBcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7dGhpcy54K3RoaXMuX29zaU5hbWVEWH0sJHt0aGlzLnkrZHl9KWAsIFxyXG4gICAgICAgICAgICBjbGFzczogJ05hbWUgJyArIHRoaXMuX25hbWVDbGFzc1xyXG4gICAgICAgIH0pLmFwcGVuZChcclxuICAgICAgICAgICAgJCgnPHRleHQ+JykuYWRkQ2xhc3MoJ3JtZy1uYW1lX196aCBybWctbmFtZV9fbXRyLS1vc2knKS50ZXh0KHRoaXMuX29zaU5hbWVzWzBdKVxyXG4gICAgICAgICkuYXBwZW5kKFxyXG4gICAgICAgICAgICAkKCc8dGV4dD4nLCB7XHJcbiAgICAgICAgICAgICAgICB4OjAsIGR5OjEyLCBjbGFzczoncm1nLW5hbWVfX2VuIHJtZy1uYW1lX19tdHItLW9zaSdcclxuICAgICAgICAgICAgfSkudGV4dCh0aGlzLl9vc2lOYW1lc1sxXSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB1bmdycEhUTUwoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgLi4udGhpcy5pbnRUaWNrSFRNTCwgdGhpcy5vcmlnSW50VGlja0hUTUwsIFxyXG4gICAgICAgICAgICB0aGlzLmljb25IVE1MLCB0aGlzLm5hbWVIVE1MLCBcclxuICAgICAgICAgICAgLi4udGhpcy5pbnROYW1lSFRNTCwgdGhpcy5vcmlnSW50TmFtZUhUTUwsIHRoaXMub3NpTmFtZUhUTUxcclxuICAgICAgICBdXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPU0kyMkxTdGF0aW9uSEsgZXh0ZW5kcyBPU0kyMlN0YXRpb25ISyB7XHJcbiAgICBnZXQgX25hbWVEWCgpIHtyZXR1cm4gMzt9XHJcbiAgICBnZXQgX3RpY2tSb3RhdGlvbigpIHtyZXR1cm4gOTA7fVxyXG4gICAgZ2V0IF90eHRBbmNob3IoKSB7cmV0dXJuICdlbmQnO31cclxuICAgIGdldCBfaW50TmFtZURYKCkge3JldHVybiAtMjQ7fVxyXG4gICAgZ2V0IF9vc2lOYW1lRFgoKSB7cmV0dXJuIDEzO31cclxuICAgIGdldCBfb3NpVHh0QW5jaG9yKCkge3JldHVybiAnc3RhcnQnO31cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9TSTIyUlN0YXRpb25ISyBleHRlbmRzIE9TSTIyU3RhdGlvbkhLIHtcclxuICAgIGdldCBfbmFtZURYKCkge3JldHVybiAtMzt9XHJcbiAgICBnZXQgX3RpY2tSb3RhdGlvbigpIHtyZXR1cm4gLTkwO31cclxuICAgIGdldCBfdHh0QW5jaG9yKCkge3JldHVybiAnc3RhcnQnO31cclxuICAgIGdldCBfaW50TmFtZURYKCkge3JldHVybiAyNDt9XHJcbiAgICBnZXQgX29zaU5hbWVEWCgpIHtyZXR1cm4gLTEzO31cclxuICAgIGdldCBfb3NpVHh0QW5jaG9yKCkge3JldHVybiAnZW5kJzt9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPU0kyMkVuZFN0YXRpb25ISyBleHRlbmRzIE9TSTEyU3RhdGlvbkhLIHtcclxuICAgIHByaXZhdGUgX29yaWdJbnRDaXR5OiBzdHJpbmc7IFxyXG4gICAgcHJpdmF0ZSBfb3JpZ0ludExpbmU6IHN0cmluZztcclxuICAgIHByaXZhdGUgX29yaWdJbnRDb2xvdXI6IHN0cmluZztcclxuICAgIHByaXZhdGUgX29yaWdJbnRGZzogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfb3JpZ0ludE5hbWVaSDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfb3JpZ0ludE5hbWVFTjogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yIChpZCwgZGF0YSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBkYXRhKTtcclxuICAgICAgICAvLyBkYXRhIG11dGF0ZWQgYnkgT1NJMTJTdGF0aW9uISEhXHJcbiAgICAgICAgW3RoaXMuX29yaWdJbnRDaXR5LCB0aGlzLl9vcmlnSW50TGluZSwgdGhpcy5fb3JpZ0ludENvbG91ciwgdGhpcy5fb3JpZ0ludEZnLCB0aGlzLl9vcmlnSW50TmFtZVpILCB0aGlzLl9vcmlnSW50TmFtZUVOXSA9IGRhdGEudHJhbnNmZXIuaW5mb1swXVsyXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgb3JpZ0ludFRpY2tIVE1MKCkge1xyXG4gICAgICAgIHZhciB0aWNrUm90YXRpb24gPSB0aGlzLm5hbWVQb3MgPyAxODAgOiAwO1xyXG4gICAgICAgIHZhciB0aWNrQ29sb3VyID0gdGhpcy5fb3JpZ0ludENvbG91cjtcclxuICAgICAgICB2YXIgdGljayA9ICQoJzx1c2U+Jywge1xyXG4gICAgICAgICAgICAneGxpbms6aHJlZic6ICcjaW50dGlja19oaycsIFxyXG4gICAgICAgICAgICBzdHJva2U6IHRpY2tDb2xvdXIsIFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHt0aGlzLnh9LCR7dGhpcy55fSlyb3RhdGUoJHt0aWNrUm90YXRpb259KWAsXHJcbiAgICAgICAgICAgICdjbGFzcyc6ICdybWctbGluZSBybWctbGluZV9fbXRyIHJtZy1saW5lX19jaGFuZ2UnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gLTEpIHtcclxuICAgICAgICAgICAgdGljay5hZGRDbGFzcygncm1nLWxpbmVfX3Bhc3MnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRpY2s7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG9yaWdJbnROYW1lSFRNTCgpIHtcclxuICAgICAgICB2YXIgW25hbWVIVE1MLCBuYW1lWkhMbiwgbmFtZUVOTG5dID0gam9pbkludE5hbWUoW3RoaXMuX29yaWdJbnROYW1lWkgsIHRoaXMuX29yaWdJbnROYW1lRU5dLCAxMCwgNyk7XHJcbiAgICAgICAgdmFyIGR5ID0gIXRoaXMubmFtZVBvcyA/IDI1ICsgNS45NTMxMjUgOiAtMjUgKyA1Ljk1MzEyNSAtIDE4LjY1NjI1IC0gMTMqKG5hbWVaSExuLTEpIC0gNyoobmFtZUVOTG4tMSk7XHJcbiAgICAgICAgLy8gZHkgKz0gdGhpcy5fZHk7XHJcbiAgICAgICAgLy8gdmFyIG5hbWVDbGFzcyA9ICh0aGlzLnN0YXRlID09IC0xKSA/ICdQYXNzJyA6ICdGdXR1cmUnO1xyXG4gICAgICAgIHJldHVybiAkKCc8Zz4nLCB7XHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6ICdtaWRkbGUnLCBcclxuICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IGB0cmFuc2xhdGUoJHt0aGlzLnh9LCR7dGhpcy55ICsgZHl9KWAsIFxyXG4gICAgICAgICAgICAnY2xhc3MnOiBgTmFtZSAke3RoaXMuX25hbWVDbGFzc31gXHJcbiAgICAgICAgfSkuaHRtbChuYW1lSFRNTFswXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGljb25IVE1MKCkge1xyXG4gICAgICAgIHZhciBpY29uWUZsaXAgPSB0aGlzLm5hbWVQb3MgPyAxIDogLTE7XHJcbiAgICAgICAgdmFyIGljb25YRmxpcCA9ICh0aGlzLmNoaWxkcmVuWzBdID09ICdsaW5lZW5kJykgPyAxIDogLTE7XHJcbiAgICAgICAgdmFyIGljb25Sb3RhdGlvbiA9ICh0aGlzLmNoaWxkcmVuWzBdID09ICdsaW5lZW5kJykgPyAwIDogMTgwO1xyXG4gICAgICAgIHJldHVybiAkKCc8dXNlPicsIHtcclxuICAgICAgICAgICAgJ3hsaW5rOmhyZWYnOiAnI29zaTIyZW5kX2hrJywgXHJcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBgdHJhbnNsYXRlKCR7dGhpcy54fSwke3RoaXMueX0pc2NhbGUoJHtpY29uWEZsaXB9LCR7aWNvbllGbGlwfSlgLCBcclxuICAgICAgICAgICAgY2xhc3M6IFt0aGlzLmljb25DbGFzcywgdGhpcy5vc2lDbGFzc10uam9pbignICcpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF90aWNrUm90YXRpb24oKSB7cmV0dXJuICh0aGlzLmNoaWxkcmVuWzBdID09ICdsaW5lZW5kJykgPyAtOTAgOiA5MDt9XHJcbiAgICBnZXQgX3RpY2tGbGlwKCkge3JldHVybiAtMTt9XHJcbiAgICBnZXQgX2R4KCkge3JldHVybiAodGhpcy5jaGlsZHJlblswXSA9PSAnbGluZWVuZCcpID8gNDEgOiAtNDE7fVxyXG4gICAgZ2V0IF9keSgpIHtyZXR1cm4gIXRoaXMubmFtZVBvcyA/IC0xOCA6IDE4O31cclxuICAgIGdldCBfaW50TmFtZURYKCkge3JldHVybiAodGhpcy5jaGlsZHJlblswXSA9PSAnbGluZWVuZCcpID8gMjQrNDEgOiAtKDI0KzQxKTt9XHJcbiAgICBnZXQgX3R4dEFuY2hvcigpIHtyZXR1cm4gKHRoaXMuY2hpbGRyZW5bMF0gPT0gJ2xpbmVlbmQnKSA/ICdzdGFydCcgOiAnZW5kJzt9XHJcbiAgICBnZXQgX29zaURZKCkge3JldHVybiAhdGhpcy5uYW1lUG9zID8gKDEwKSArIDguMzQzNzUgIDogLSgxMCkgKyA4LjM0Mzc1IC0gMjUuMDMxMjU7fVxyXG4gICAgZ2V0IF9vc2lUeHRBbmNob3IoKSB7cmV0dXJuICh0aGlzLmNoaWxkcmVuWzBdID09ICdsaW5lZW5kJykgPyAnc3RhcnQnIDogJ2VuZCc7fVxyXG4gICAgZ2V0IF9vc2lEWCgpIHtyZXR1cm4gKHRoaXMuY2hpbGRyZW5bMF0gPT0gJ2xpbmVlbmQnKSA/IC05IDogOTt9XHJcblxyXG4gICAgZ2V0IHVuZ3JwSFRNTCgpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAuLi50aGlzLmludFRpY2tIVE1MLCB0aGlzLm9yaWdJbnRUaWNrSFRNTCwgXHJcbiAgICAgICAgICAgIHRoaXMuaWNvbkhUTUwsIHRoaXMubmFtZUhUTUwsIFxyXG4gICAgICAgICAgICAuLi50aGlzLmludE5hbWVIVE1MLCB0aGlzLm9yaWdJbnROYW1lSFRNTCwgdGhpcy5vc2lOYW1lSFRNTFxyXG4gICAgICAgIF1cclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9