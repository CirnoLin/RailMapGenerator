(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{15:function(t,e,s){"use strict";s.r(e),s.d(e,"RMGLineHK",(function(){return i}));var n=s(4),a=s(0),r=s(5);class i extends n.a{constructor(t){super(t),this._charForm=t.char_form,this._destLegacy=t.dest_legacy}_initStnInstance(t,e){switch(e.transfer.type){case"int2":case"osi21":return new r.a(t,e);case"int3":case"osi31":return"l"===e.transfer.tick_direc?new r.b(t,e):new r.c(t,e);case"osi11":return"l"===e.transfer.tick_direc?new r.d(t,e):new r.e(t,e);case"osi12":case"osi13":return"l"===e.transfer.tick_direc?new r.f(t,e):new r.g(t,e);case"osi22":return"linestart"===e.parents[0]||"lineend"===e.children[0]?new r.h(t,e):"l"===e.transfer.tick_direc?new r.i(t,e):new r.j(t,e);default:return new r.l(t,e)}}set svgDestWidth(t){super.svgDestWidth=t,this.loadFonts()}set svgWidth(t){super.svgWidth=t,this.loadFonts(),this.updateStnNameBg()}set padding(t){super.padding=t,this.loadFonts(),this.updateStnNameBg()}set branchSpacing(t){super.branchSpacing=t,this.loadFonts(),this.updateStnNameBg()}set txtFlip(t){super.txtFlip=t,this.loadFonts(),this.updateStnNameBg()}set direction(t){super.direction=t,this.loadFonts()}set charForm(t){this._charForm=t,Object(a.n)("char_form",t),$(".rmg-name__char-trad, .rmg-name__char-cn, .rmg-name__char-tw, .rmg-name__char-jp").removeClass("rmg-name__char-trad rmg-name__char-cn rmg-name__char-tw rmg-name__char-jp").addClass(`rmg-name__char-${t}`)}set lineNames(t){super.lineNames=t,this._destLegacy&&(this.drawDestInfo(),this.loadFonts())}set destLegacy(t){this._destLegacy=t,Object(a.n)("dest_legacy",t),this.drawDestInfo(),this.loadFonts()}set currentStnId(t){super.currentStnId=t,this.loadFonts(),this.updateStnNameBg()}loadFonts(){$(".rmg-name__zh").addClass(`rmg-name__char-${this._charForm}`)}updateStnNameBg(){var t=Object(a.j)($(`#stn_icons > #${this._currentStnId} g.Name`)[0],"railmap");$("#current_bg").attr({x:t.x-3,width:t.width+6})}drawDestInfo(){$("#dest_name > #platform > text").text(this._platformNum);let t=this[this._direction+"ValidDests"],e="l"===this._direction?"start":"end";var[s,n]=[0,1].map(e=>t.map(t=>this.stations[t].name[e].replace(/\\/g," ")).join("/"));if(this._destLegacy){var[a,r]=this._lineNames;r+=" "}else var a=r="";$("#dest_name > g:last-child text").eq(0).text(`${a}å¾€${s}`),$("#dest_name > g:last-child text").eq(1).text(`${r}to ${n}`);var i=310+$("#dest_name > g:last-child")[0].getBoundingClientRect().width+45+50,d="l"==this._direction?1:-1,h=(this._svgDestWidth-d*i)/2,o=90*(1-d),c=h+285*d,l=c+120*d;$("#dest_name > use").attr("transform",`translate(${h},130)rotate(${o})`),$("#dest_name > #platform").attr("transform",`translate(${c},130)`),$("#dest_name > g:last-child").attr({transform:`translate(${l},105)`,"text-anchor":e})}_leftWideFactor(t){var e=0;let s=this.stations[t];return s instanceof r.b&&(e+=this._longInterval),s instanceof r.d&&(e+=this._longInterval),s instanceof r.f&&(e+=this._longInterval),s instanceof r.k&&(e+=this._longInterval),2==this._stnIndegree(t)&&(e+=this._longInterval/2),2==this._stnOutdegree(this.stations[t].parents[0])&&(e+=this._longInterval/2),e}_rightWideFactor(t){var e=0;let s=this.stations[t];return s instanceof r.c&&(e+=this._longInterval),s instanceof r.e&&(e+=this._longInterval),s instanceof r.g&&(e+=this._longInterval),s instanceof r.k&&(e+=this._longInterval),2==this._stnOutdegree(t)&&(e+=this._longInterval/2),2==this._stnIndegree(this.stations[t].children[0])&&(e+=this._longInterval/2),e}updateStnName(t,e,s){super.updateStnName(t,e,s),this.loadFonts(),t==this._currentStnId&&this.updateStnNameBg()}updateStnTransfer(t,e,s=null){super.updateStnTransfer(t,e,s),this.loadFonts(),this.updateStnNameBg()}addStn(t,e,s,n){let a=super.addStn(t,e,s,n);return this.loadFonts(),this.updateStnNameBg(),a}removeStn(t){return!!super.removeStn(t)&&(this.loadFonts(),this.updateStnNameBg(),!0)}updateBranchType(t,e,s){return!!super.updateBranchType(t,e,s)&&(this.loadFonts(),!0)}updateBranchFirst(t,e,s){return!!super.updateBranchFirst(t,e,s)&&(this.loadFonts(),!0)}updateBranchPos(t,e,s){return!!super.updateBranchPos(t,e,s)&&(this.loadFonts(),!0)}static initSVG(t){super.initSVG(t),t.loadFonts(),t.updateStnNameBg()}}}}]);