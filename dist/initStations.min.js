(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["initStations"],{

/***/ "./src/PageInitialiser/stations.ts":
/*!*****************************************!*\
  !*** ./src/PageInitialiser/stations.ts ***!
  \*****************************************/
/*! exports provided: common */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "common", function() { return common; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./src/utils.ts");
/* harmony import */ var _material_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material/dialog */ "@material/dialog");
/* harmony import */ var _material_dialog__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_dialog__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _material_select__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material/select */ "@material/select");
/* harmony import */ var _material_select__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_select__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_textfield__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material/textfield */ "@material/textfield");
/* harmony import */ var _material_textfield__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_textfield__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_tab_bar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material/tab-bar */ "@material/tab-bar");
/* harmony import */ var _material_tab_bar__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_tab_bar__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_chips__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material/chips */ "./node_modules/@material/chips/index.js");
/* harmony import */ var _material_ripple__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material/ripple */ "@material/ripple");
/* harmony import */ var _material_ripple__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ripple__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _material_switch__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @material/switch */ "@material/switch");
/* harmony import */ var _material_switch__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_material_switch__WEBPACK_IMPORTED_MODULE_7__);









const getStationCard = (id, names, num) => {
    return $('<div>', {
        id: id,
        class: 'mdc-card mdc-layout-grid__cell--span-2-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone station-card'
    })
        .append($('<div>', { class: 'mdc-card__primary-action' })
        .append($('<div>', { class: 'mdc-card__media mdc-card__media--16-9' }))
        .append($('<div>', { class: 'mdc-card__media-content station-card__content' })
        .html(names.join('<br>'))
        .prepend($('<span>')
        .css('display', window.urlParams.get('style') === 'gzmtr' ? 'inline' : 'none')
        .text(num + '\u00a0'))))
        .append($('<div>', { class: 'mdc-card__actions' })
        .append($('<div>', { class: 'mdc-card__action-icons' })
        .append($('<button>', {
        title: 'Set As Current',
        class: 'material-icons mdc-icon-button mdc-card__action mdc-card__action--icon'
    })
        .text('my_location'))
        .append($('<button>', {
        title: 'Interchange',
        class: 'material-icons mdc-icon-button mdc-card__action mdc-card__action--icon'
    })
        .text('edit'))
        .append($('<button>', {
        title: 'Remove',
        class: 'material-icons mdc-icon-button mdc-card__action mdc-card__action--icon'
    })
        .text('delete_forever'))));
};
const getIntBoxChip = (intInfo) => {
    let chipEl = $('<div>', { class: 'mdc-chip', role: 'row' })
        .css({
        'background-color': intInfo[_utils__WEBPACK_IMPORTED_MODULE_0__["IntInfoTag"].colour],
        color: intInfo[_utils__WEBPACK_IMPORTED_MODULE_0__["IntInfoTag"].fg]
    })
        .data('theme', {
        city: intInfo[_utils__WEBPACK_IMPORTED_MODULE_0__["IntInfoTag"].city],
        line: intInfo[_utils__WEBPACK_IMPORTED_MODULE_0__["IntInfoTag"].line]
    })
        .append($('<div>', { class: 'mdc-chip__ripple' }))
        .append($('<span>', { role: 'gridcell' })
        .append($('<span>', { role: 'button', tabindex: 0, class: 'mdc-chip__text' })
        .html(intInfo[_utils__WEBPACK_IMPORTED_MODULE_0__["IntInfoTag"].nameZH] + '<br>' + intInfo[_utils__WEBPACK_IMPORTED_MODULE_0__["IntInfoTag"].nameEN])))
        .append($('<span>', { role: 'gridcell' })
        .append($('<i>', { class: 'material-icons mdc-chip__icon mdc-chip__icon--trailing', tabindex: -1, role: 'button' })
        .text('cancel')));
    return chipEl[0];
};
const getIntInfoFromChip = (chip) => {
    return [
        $(chip).data('theme').city,
        $(chip).data('theme').line,
        Object(_utils__WEBPACK_IMPORTED_MODULE_0__["rgb2Hex"])($(chip).css('background-color')),
        Object(_utils__WEBPACK_IMPORTED_MODULE_0__["rgb2Hex"])($(chip).css('color')),
        $(chip).find('.mdc-chip__text').html().split('<br>')[0],
        $(chip).find('.mdc-chip__text').html().split('<br>')[1]
    ];
};
const getStnIntFromChipSets = (sets) => {
    let info = sets.map(set => {
        return $(set).find('.mdc-chip').get().map(el => getIntInfoFromChip(el));
    });
    let ns = info
        .map(int => int.length);
    if (ns[1] === 0) {
        info = [info[0]];
    }
    let changeType;
    if (ns[0] === 3 && ns[1] === 0) {
        changeType = 'int3'; // was int4
    }
    else if (ns[0] === 2 && ns[1] === 1) {
        changeType = 'osi31';
    }
    else if (ns[0] === 2 && ns[1] === 0) {
        changeType = 'int3';
    }
    else if (ns[0] === 1 && ns[1] === 2) {
        changeType = 'osi22';
    }
    else if (ns[0] === 1 && ns[1] === 1) {
        changeType = 'osi21';
    }
    else if (ns[0] === 1 && ns[1] === 0) {
        changeType = 'int2';
    }
    else if (ns[0] === 0 && ns[1] === 3) {
        changeType = 'osi13';
    }
    else if (ns[0] === 0 && ns[1] === 2) {
        changeType = 'osi12';
    }
    else if (ns[0] === 0 && ns[1] === 1) {
        changeType = 'osi11';
    }
    else if (ns[0] === 0 && ns[1] === 0) {
        changeType = 'none';
    }
    else {
        // sum(ns) > 3
        changeType = 'int3';
    }
    console.log(changeType);
    return { info, changeType };
};
const updateStnTransfer = (sets, tick, paid) => {
    let { changeType, info } = getStnIntFromChipSets(sets);
    let intInfo = info;
    let stnId = $('#stn_edit_diag').attr('for');
    if (changeType.indexOf('osi') !== -1) {
        let osiNames = $('button#osi_name .mdc-button__label').html().split('<br>');
        intInfo[1].unshift(osiNames);
    }
    let tickDirec;
    if (tick.selectedChipIds.length) {
        tickDirec = tick.selectedChipIds[0];
    }
    else {
        tickDirec = 'r';
    }
    let paidArea = paid.checked;
    if (changeType.indexOf('osi') !== -1) {
        changeType += '_' + (paidArea ? 'p' : 'u') + tickDirec;
    }
    else if (changeType.indexOf('int3') !== -1) {
        changeType += '_' + tickDirec;
    }
    window.myLine.updateStnTransfer(stnId, changeType, intInfo);
};
function common() {
    // Duplicate element
    var intNameEl = $('#stn_edit_diag .mdc-layout-grid__inner #int_name_zh,#int_name_en').slice(0, 2).clone();
    intNameEl.find('.mdc-text-field').removeAttr('data-mdc-auto-init-state'); // to be removed
    $('div#int_line').slice(1, 3).after(intNameEl);
    // mdc instances
    const [stnAddDialog, stnEditDialog, stnIntBoxDialog, stnOSINameDialog, stnDeleteDialog, stnDeleteErrDialog] = ['#stn_add_diag', '#stn_edit_diag', '#stn_intbox_diag', '#stn_osiname_diag', '#stn_delete_diag', '#stn_delete_err']
        .map(selector => new _material_dialog__WEBPACK_IMPORTED_MODULE_1__["MDCDialog"]($(selector)[0]));
    const [stnAddPrepSelect, stnAddPivotSelect, stnAddLocSelect, stnAddEndSelect] = ['#prep', '#pivot', '#loc', '#end'].map(selector => new _material_select__WEBPACK_IMPORTED_MODULE_2__["MDCSelect"]($('#stn_add_diag').find(selector)[0]));
    const servicesChipSetEl = $('#stn_edit_diag #panel_name .mdc-chip-set')[0];
    const servicesChipSet = new _material_chips__WEBPACK_IMPORTED_MODULE_5__["MDCChipSet"](servicesChipSetEl);
    const stnModifyNameFields = ['#name_zh', '#name_en'].map(selector => new _material_textfield__WEBPACK_IMPORTED_MODULE_3__["MDCTextField"]($('#stn_edit_diag').find(selector)[0]));
    const stnModifyNumField = new _material_textfield__WEBPACK_IMPORTED_MODULE_3__["MDCTextField"]($('#stn_edit_diag #stn_num')[0]);
    const intChipAddButtonEls = $('#stn_edit_diag .mdc-icon-button').get();
    const intChipSetEls = $('#stn_edit_diag #panel_interchange .mdc-chip-set.int-chip-set').get();
    const intChipSets = intChipSetEls.map(el => new _material_chips__WEBPACK_IMPORTED_MODULE_5__["MDCChipSet"](el));
    const osiNameButtonRipple = new _material_ripple__WEBPACK_IMPORTED_MODULE_6__["MDCRipple"]($('#stn_edit_diag #osi_name')[0]);
    const intCitySelect = new _material_select__WEBPACK_IMPORTED_MODULE_2__["MDCSelect"]($('#int_city')[0]);
    const intLineSelect = new _material_select__WEBPACK_IMPORTED_MODULE_2__["MDCSelect"]($('#int_line')[0]);
    const intBoxNameFields = ['zh', 'en'].map(lang => new _material_textfield__WEBPACK_IMPORTED_MODULE_3__["MDCTextField"]($('#stn_intbox_diag').find('#name_' + lang)[0]));
    const tickDirecChipSet = new _material_chips__WEBPACK_IMPORTED_MODULE_5__["MDCChipSet"]($('#tick_direc')[0]);
    // const tickDirecChips = $('#tick_direc .mdc-chip').map((_,el) => new MDCChip(el)).get();
    const paidAreaSwitch = new _material_switch__WEBPACK_IMPORTED_MODULE_7__["MDCSwitch"]($('#paid_area')[0]);
    const stnTransferTabBar = new _material_tab_bar__WEBPACK_IMPORTED_MODULE_4__["MDCTabBar"]($('#stn_edit_diag .mdc-tab-bar')[0]);
    const stnOSINameFields = ['zh', 'en'].map(lang => new _material_textfield__WEBPACK_IMPORTED_MODULE_3__["MDCTextField"]($('#stn_osiname_diag').find(`#osi_name_${lang}`)[0]));
    // const [tickDirecToggle, paidAreaToggle] = 
    //     ['#tick_direc', '#paid_area'].map(selector => new MDCIconButtonToggle($('#stn_edit_diag').find(selector)[0]));
    const [throughSelects, firstSelects, posSelects] = ['through', 'first', 'pos']
        .map(selector => ['left', 'right'].map(direc => new _material_select__WEBPACK_IMPORTED_MODULE_2__["MDCSelect"]($(`#${direc}_${selector}`)[0])));
    var stnList = Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getParams"])().stn_list;
    window.myLine.tpo.forEach(stnId => {
        $('#panel_stations .mdc-layout-grid__inner:first').append(getStationCard(stnId, stnList[stnId].name, stnList[stnId].num));
        $('#pivot__selection').append($('<li>', { 'data-value': stnId }).addClass('mdc-list-item').text(stnList[stnId].name.join()));
    });
    $('#panel_stations .mdc-card__primary-action').on('click', event => {
        // var stnId = event.target.closest('.mdc-card').id;
        // if (stnId == 'add_stn') {return;}
        // $('#stn_modify_diag').attr('for', stnId);
        // stnModifyDialog.open();
    });
    $('#panel_stations .mdc-card__action-icons > [title="Add"]').on('click', event => {
        stnAddDialog.open();
    });
    $('#panel_stations .mdc-card__action-icons > [title="Set As Current"]').on('click', event => {
        var stnId = event.target.closest('.mdc-card').id;
        window.myLine.currentStnId = stnId;
    });
    $('#panel_stations .mdc-card__action-icons > [title="Interchange"]').on('click', event => {
        $('#stn_edit_diag').attr('for', event.target.closest('.mdc-card').id);
        stnEditDialog.open();
    });
    $('#panel_stations .mdc-card__action-icons > [title="Remove"]').on('click', event => {
        var stnId = event.target.closest('.mdc-card').id;
        $('#stn_delete_diag').attr('for', stnId);
        stnDeleteDialog.open();
    });
    // Addition
    stnAddDialog.listen('MDCDialog:opening', () => {
        stnAddPivotSelect.selectedIndex = 0;
    });
    stnAddDialog.listen('MDCDialog:opened', () => {
        [stnAddPrepSelect, stnAddPivotSelect, stnAddLocSelect].forEach(select => select.layout());
    });
    stnAddDialog.listen('MDCDialog:closed', (event) => {
        if (event.detail.action == 'close') {
            return;
        }
        var prep = stnAddPrepSelect.value;
        var stnId = stnAddPivotSelect.value;
        var loc = stnAddLocSelect.value;
        var end = stnAddEndSelect.value;
        var [newId, newInfo] = window.myLine.addStn(prep, stnId, loc, end);
        console.log(prep, stnId, loc, end);
        // _genStnList();
        var prevId = window.myLine.tpo[window.myLine.tpo.indexOf(newId) - 1] || 'add_stn';
        $(`#panel_stations .mdc-layout-grid__inner:first #${prevId}`).after(getStationCard(newId, newInfo.name, newInfo.num));
        // Add event listeners
        $(`#panel_stations #${newId} .mdc-card__primary-action`).on('click', event => {
            // var stnId = event.target.closest('.mdc-card').id;
            // if (stnId == 'add_stn') {return;}
            // $('#stn_modify_diag').attr('for', stnId);
            // stnModifyDialog.open();
        });
        $(`#panel_stations #${newId} .mdc-card__action-icons > [title="Set As Current"]`).on('click', event => {
            var stnId = event.target.closest('.mdc-card').id;
            window.myLine.currentStnId = stnId;
        });
        $(`#panel_stations #${newId} .mdc-card__action-icons > [title="Interchange"]`).on('click', event => {
            var stnId = event.target.closest('.mdc-card').id;
            $('#stn_edit_diag').attr('for', stnId);
            stnEditDialog.open();
        });
        $(`#panel_stations #${newId} .mdc-card__action-icons > [title="Remove"]`).on('click', event => {
            var stnId = event.target.closest('.mdc-card').id;
            $('#stn_delete_diag').attr('for', stnId);
            stnDeleteDialog.open();
        });
        var listElem = $('<li>', {
            'data-value': newId, 'class': 'mdc-list-item'
        }).text(newInfo.name.join(' - '));
        if (prevId == 'add_stn') {
            $('#pivot__selection').prepend(listElem);
        }
        else {
            $(`#pivot__selection [data-value="${prevId}"`).after(listElem);
        }
        // Trigger station name modification
        $('#stn_edit_diag').attr('for', newId);
        stnEditDialog.open();
    });
    stnAddPrepSelect.listen('MDCSelect:change', event => {
        $('#stn_add_diag #pivot')[0].dispatchEvent(new Event('MDCSelect:change'));
    });
    stnAddPivotSelect.listen('MDCSelect:change', event => {
        var prep = stnAddPrepSelect.value;
        var stnId = stnAddPivotSelect.value;
        var stnList = Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getParams"])().stn_list;
        for (let [idx, state] of window.myLine.newStnPossibleLoc(prep, stnId).entries()) {
            if (state === 1 || state.length) {
                $('#loc__selection li').eq(idx).show();
                if (idx >= 3) {
                    // newupper or newlower
                    $('#end__selection').empty();
                    state.forEach(stnId => {
                        $('#end__selection').append($('<li>', { class: 'mdc-list-item', 'data-value': stnId }).text(stnList[stnId].name.join(' - ')));
                    });
                }
            }
            else {
                $('#loc__selection li').eq(idx).hide();
            }
        }
        // stnAddLocSelect.value = $('#loc__selection li:not([style="display: none;"]):first').attr('data-value');
        stnAddLocSelect.value = Array
            .from(document.querySelectorAll('#loc__selection li'))
            .filter(el => el.style.display !== 'none')[0]
            .dataset.value;
    });
    stnAddLocSelect.listen('MDCSelect:change', (event) => {
        if (['newupper', 'newlower'].includes(event.detail.value)) {
            // $('#stn_add_diag #new_branch').show();
            $('#stn_add_diag [new-branch]').show();
            stnAddEndSelect.selectedIndex = 0;
        }
        else {
            // $('#stn_add_diag #new_branch').hide();
            $('#stn_add_diag [new-branch]').hide();
        }
    });
    // Modification (Name)
    $('#stn_edit_diag').find('#name_zh, #name_en, #stn_num').on('input', () => {
        let names = stnModifyNameFields.map(textfield => textfield.value);
        var stnNum = stnModifyNumField.value;
        var stnId = $('#stn_edit_diag').attr('for');
        window.myLine.updateStnName(stnId, names, stnNum);
        $(`#panel_stations .mdc-layout-grid__inner:first #${stnId} .mdc-card__media-content`)
            .html(names.join('<br>'))
            .prepend($('<span>', { style: (window.urlParams.get('style') == 'gzmtr' ? '' : 'display:none;') }).text(stnNum + ' '));
        $(`li[data-value="${stnId}`).text(names.join());
    });
    // Modification (Interchange)
    const focusName = () => {
        stnModifyNameFields.map(textfield => textfield.layout());
        stnModifyNumField.layout();
    };
    const focusInterchange = () => {
        stnOSINameFields.forEach(textfield => textfield.layout());
    };
    const focusBranch = () => {
        [...throughSelects, ...firstSelects, ...posSelects]
            .map(select => select.layout());
    };
    const initName = (stnInfo) => {
        stnModifyNameFields.forEach((textfield, i) => textfield.value = stnInfo.name[i]);
        stnModifyNumField.value = stnInfo.num;
        servicesChipSet.chips.forEach(chip => {
            chip.selected = stnInfo.services.includes(chip.id);
        });
    };
    const initInterchange = (stnInfo) => {
        $(intChipSetEls).empty();
        stnInfo.transfer.info.forEach((infos, i) => {
            infos.forEach((info, j) => {
                let chipEl = getIntBoxChip(info);
                intChipSetEls[i].appendChild(chipEl);
                intChipSets[i].addChip(chipEl);
            });
        });
        // // hide trailing icon if 1 chip only?
        if (stnInfo.transfer.osi_names.length) {
            $('button#osi_name .mdc-button__label').html(stnInfo.transfer.osi_names[0].join('<br>'));
        }
        else {
            $('button#osi_name .mdc-button__label').html('車站名<br>Stn Name');
        }
        paidAreaSwitch.checked = stnInfo.transfer.paid_area;
        tickDirecChipSet.chips.filter(chip => chip.id === stnInfo.transfer.tick_direc)[0].selected = true;
    };
    const initBranch = (stnInfo) => {
        // through type
        ['left', 'right'].forEach((direc) => {
            let throughType = stnInfo.branch[direc][0];
            if (throughType) {
                throughSelects[_utils__WEBPACK_IMPORTED_MODULE_0__["DirectionLong"][direc]].value = throughType;
                $(`#${direc}_through__selection [data-value="na"]`).hide();
                $(`#${direc}_through__selection [data-value="through"]`).show();
                $(`#${direc}_through__selection [data-value="nonthrough"]`).show();
                $(`[${direc}-first-group], [${direc}-pos-group]`).show();
            }
            else {
                throughSelects[_utils__WEBPACK_IMPORTED_MODULE_0__["DirectionLong"][direc]].value = 'na';
                $(`#${direc}_through__selection [data-value="na"]`).show();
                $(`#${direc}_through__selection [data-value="through"]`).hide();
                $(`#${direc}_through__selection [data-value="nonthrough"]`).hide();
                $(`[${direc}-first-group], [${direc}-pos-group]`).hide();
            }
        });
        // first station
        $('#left_first__selection, #right_first__selection').empty();
        Promise.resolve(Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getParams"])().stn_list)
            .then(stnList => {
            [0, 1].forEach(i => {
                stnInfo[_utils__WEBPACK_IMPORTED_MODULE_0__["NeighbourPl"][i]]
                    .forEach(ne => {
                    $(`#${_utils__WEBPACK_IMPORTED_MODULE_0__["DirectionLong"][i]}_first__selection`)
                        .append($('<li>', { class: 'mdc-list-item', 'data-value': ne })
                        .text(stnList[ne].name.join()));
                });
            });
        })
            .then(() => {
            throughSelects.forEach((select, idx) => {
                firstSelects[idx].selectedIndex =
                    select.value !== 'na' ?
                        stnInfo[_utils__WEBPACK_IMPORTED_MODULE_0__["NeighbourPl"][idx]].indexOf(stnInfo.branch[_utils__WEBPACK_IMPORTED_MODULE_0__["DirectionLong"][idx]][1]) :
                        0;
            });
        });
        // swap position
        posSelects.forEach((select, i) => {
            select.selectedIndex = stnInfo[_utils__WEBPACK_IMPORTED_MODULE_0__["NeighbourPl"][i]].indexOf(stnInfo.branch[_utils__WEBPACK_IMPORTED_MODULE_0__["DirectionLong"][i]][1]);
        });
    };
    stnTransferTabBar.listen('MDCTabBar:activated', (event) => {
        switch (event.detail.index) {
            case 0:
                $('#panel_name').show();
                $('#panel_interchange, #panel_branch').hide();
                focusName();
                break;
            case 1:
                $('#panel_interchange').show();
                $('#panel_name, #panel_branch').hide();
                focusInterchange();
                break;
            case 2:
                $('#panel_name, #panel_interchange').hide();
                $('#panel_branch').show();
                focusBranch();
        }
    });
    $.getJSON('data/city_list.json', data => {
        var lang = window.urlParams.get('lang');
        data.forEach((c) => {
            $('#int_city__selection.mdc-list').each((_, el) => {
                $(el).append($('<li>', { class: 'mdc-list-item', 'data-value': c.id })
                    .text(Object(_utils__WEBPACK_IMPORTED_MODULE_0__["countryCode2Emoji"])(c.country) + Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getTransText"])(c.name, lang)));
            });
        });
    });
    stnEditDialog.listen('MDCDialog:opening', event => {
        let stnId = $(event.target).attr('for');
        let stnInfo = Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getParams"])().stn_list[stnId];
        initName(stnInfo);
        initInterchange(stnInfo);
        initBranch(stnInfo);
    });
    stnEditDialog.listen('MDCDialog:opened', event => {
        focusName();
        focusInterchange();
        focusBranch();
    });
    servicesChipSet.listen('MDCChip:selection', (event) => {
        if (event.detail.chipId === 'local') {
            if (!event.detail.selected) {
                servicesChipSet.chips.filter(chip => chip.id === 'local')[0].selected = true;
            }
            return;
        }
        let stnId = $('#stn_edit_diag').attr('for');
        window.myLine.updateStnServices(stnId, event.detail);
    });
    intChipAddButtonEls.forEach((button, i) => {
        $(button).on('click', event => {
            let param = Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getParams"])();
            let info = [param.theme[0], null, null, '#000', '線', 'Line'];
            let chipEl = getIntBoxChip(info);
            intChipSetEls[i].appendChild(chipEl);
            intChipSets[i].addChip(chipEl);
            updateStnTransfer(intChipSetEls, tickDirecChipSet, paidAreaSwitch);
        });
    });
    intChipSets.forEach((chipset, i) => {
        chipset.listen('MDCChip:interaction', (event) => {
            // setIdx (0: int, 1: osi)
            $('#stn_intbox_diag').data('intId', { setIdx: i, chipId: event.detail.chipId });
            stnIntBoxDialog.open();
        });
    });
    intChipSets.forEach((chipset, i) => {
        chipset.listen('MDCChip:removal', () => {
            updateStnTransfer(intChipSetEls, tickDirecChipSet, paidAreaSwitch);
            // // hide trailing icon if 1 chip left
            // if ($(intChipSetEls[i]).find('.mdc-chip').length === 1) {
            //     $(intChipSetEls[i]).find('.mdc-chip__icon--trailing').parent().hide();
            // }
        });
    });
    $('button#osi_name').on('click', event => {
        stnOSINameDialog.open();
    });
    stnIntBoxDialog.listen('MDCDialog:opening', (event) => {
        let { setIdx, chipId } = $(event.target).data('intId');
        let { city, line } = $(intChipSetEls[setIdx]).find('#' + chipId).data('theme');
        intCitySelect.value = city;
        let intNames = $(intChipSetEls[setIdx])
            .find('#' + chipId)
            .find('.mdc-chip__text')
            .html().split('<br>');
        intBoxNameFields.forEach((textfield, i) => textfield.value = intNames[i]);
    });
    stnIntBoxDialog.listen('MDCDialog:opened', (event) => {
        intBoxNameFields.map(textfield => textfield.layout());
    });
    intCitySelect.listen('MDCSelect:change', (event) => {
        if (event.detail.index === -1) {
            return;
        }
        let { setIdx, chipId } = $('#stn_intbox_diag').data('intId');
        $.getJSON(`data/${event.detail.value}.json`, data => {
            var lang = window.urlParams.get('lang');
            $('#int_line__selection.mdc-list').empty();
            data.forEach(l => {
                $('#int_line__selection.mdc-list').append(`<li class="mdc-list-item" data-value="${l.id}">
                    <span style="background:${l.colour};color:${l.fg || '#fff'};">&nbsp;${Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getTransText"])(l.name, lang)}&nbsp;</span>
                    </li>`);
            });
            // select default intLine value
            let { line } = $(intChipSetEls[setIdx]).find('#' + chipId).data('theme');
            let lineIdx = $('#int_line__selection.mdc-list').find(`[data-value="${line}"]`).index();
            intLineSelect.selectedIndex = lineIdx === -1 ? 0 : lineIdx;
        });
        // update data value of chip element
        $(intChipSetEls[setIdx]).find('#' + chipId).data('theme').city = event.detail.value;
    });
    intLineSelect.listen('MDCSelect:change', (event) => {
        let { value, index } = event.detail;
        let { setIdx, chipId } = $('#stn_intbox_diag').data('intId');
        // update data value of chip element
        $(intChipSetEls[setIdx]).find('#' + chipId).data('theme').line = value;
        // update colour of chip
        $(intChipSetEls[setIdx]).find('#' + chipId).css({
            'background-color': $('#int_line__selection span').eq(index).css('background-color'),
            color: $('#int_line__selection span').eq(index).css('color')
        });
    });
    intBoxNameFields.forEach(textfield => {
        $(textfield.root_).find('input')
            .on('input', () => {
            let { setIdx, chipId } = $('#stn_intbox_diag').data('intId');
            $(intChipSetEls[setIdx])
                .find('#' + chipId)
                .find('.mdc-chip__text')
                .html(intBoxNameFields[0].value + '<br>' + intBoxNameFields[1].value);
        });
    });
    stnIntBoxDialog.listen('MDCDialog:closed', () => {
        updateStnTransfer(intChipSetEls, tickDirecChipSet, paidAreaSwitch);
    });
    stnOSINameDialog.listen('MDCDialog:opening', () => {
        $('button#osi_name .mdc-button__label')
            .html()
            .split('<br>')
            .forEach((txt, i) => stnOSINameFields[i].value = txt);
    });
    stnOSINameDialog.listen('MDCDialog:opened', () => {
        stnOSINameFields.map(textfield => textfield.layout());
    });
    $('#osi_name_zh, #osi_name_en')
        .find('input')
        .each((_, el) => {
        $(el).on('input', () => {
            $('button#osi_name .mdc-button__label')
                .html(stnOSINameFields.map(textfield => textfield.value).join('<br>'));
        });
    });
    stnOSINameDialog.listen('MDCDialog:closed', () => {
        updateStnTransfer(intChipSetEls, tickDirecChipSet, paidAreaSwitch);
    });
    tickDirecChipSet.listen('MDCChip:selection', (event) => {
        if (tickDirecChipSet.selectedChipIds.length === 0) {
            return;
        }
        updateStnTransfer(intChipSetEls, tickDirecChipSet, paidAreaSwitch);
    });
    $(paidAreaSwitch.root_).find('input')
        .on('change', () => {
        updateStnTransfer(intChipSetEls, tickDirecChipSet, paidAreaSwitch);
    });
    // Modification (Branch)
    throughSelects.forEach((select, idx) => {
        select.listen('MDCSelect:change', (event) => {
            if (event.detail.value === 'na') {
                return;
            }
            let stnId = $('#stn_edit_diag').attr('for');
            window.myLine.updateBranchType(stnId, idx, event.detail.value);
        });
    });
    firstSelects.forEach((select, idx) => {
        select.listen('MDCSelect:change', (event) => {
            if ($(`#${_utils__WEBPACK_IMPORTED_MODULE_0__["DirectionLong"][idx]}_first__selection`).children().length === 1) {
                return;
            }
            let stnId = $('#stn_edit_diag').attr('for');
            if (window.myLine.updateBranchFirst(stnId, idx, event.detail.value)) {
                posSelects[idx].selectedIndex = posSelects[idx].selectedIndex === 0 ? 1 : 0;
            }
        });
    });
    posSelects.forEach((select, idx) => {
        select.listen('MDCSelect:change', (event) => {
            if (throughSelects[idx].value === 'na') {
                return;
            }
            let stnId = $('#stn_edit_diag').attr('for');
            window.myLine.updateBranchPos(stnId, idx, event.detail.index);
        });
    });
    // Deletion
    stnDeleteDialog.listen('MDCDialog:opening', event => {
        var stnId = $(event.target).attr('for');
        $('#stn_delete_diag #err_stn').text(Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getParams"])().stn_list[stnId].name.join(' - '));
    });
    stnDeleteDialog.listen('MDCDialog:closed', (event) => {
        if (event.detail.action == 'close') {
            return;
        }
        var stnId = $(event.target).attr('for');
        // Remove from data and svg
        if (window.myLine.removeStn(stnId)) {
            // Remove station from selection
            $(`#panel_stations .mdc-layout-grid__inner #${stnId}`).remove();
            $(`#pivot__selection [data-value="${stnId}"]`).remove();
        }
        else {
            stnDeleteErrDialog.open();
        }
    });
}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvUGFnZUluaXRpYWxpc2VyL3N0YXRpb25zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUEwRjtBQUNnQjtBQUM3RDtBQUNBO0FBQ007QUFDTDtBQUNRO0FBQ1Q7QUFDQTtBQUU3QyxNQUFNLGNBQWMsR0FBRyxDQUFDLEVBQU0sRUFBRSxLQUFXLEVBQUUsR0FBVyxFQUFFLEVBQUU7SUFDeEQsT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFO1FBQ2QsRUFBRSxFQUFFLEVBQUU7UUFDTixLQUFLLEVBQUUsc0lBQXNJO0tBQ2hKLENBQUM7U0FDRyxNQUFNLENBQ0gsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLEtBQUssRUFBRSwwQkFBMEIsRUFBQyxDQUFDO1NBQzNDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsS0FBSyxFQUFFLHVDQUF1QyxFQUFFLENBQUMsQ0FBQztTQUN0RSxNQUFNLENBQ0gsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLEtBQUssRUFBRSwrQ0FBK0MsRUFBQyxDQUFDO1NBQ2hFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ3hCLE9BQU8sQ0FDSixDQUFDLENBQUMsUUFBUSxDQUFDO1NBQ04sR0FBRyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1NBQzdFLElBQUksQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDLENBQzVCLENBQ1IsQ0FDUjtTQUNBLE1BQU0sQ0FDSCxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsS0FBSyxFQUFFLG1CQUFt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QUFTLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDaEMsZ0NBQWdDO1lBQ2hDLENBQUMsQ0FBQyw0Q0FBNEMsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoRSxDQUFDLENBQUMsa0NBQWtDLEtBQUssSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDM0Q7YUFBTTtZQUNILGtCQUFrQixDQUFDLElBQUksRUFBRSxDQUFDO1NBQzdCO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDIiwiZmlsZSI6ImluaXRTdGF0aW9ucy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRQYXJhbXMsIGNvdW50cnlDb2RlMkVtb2ppLCBnZXRUcmFuc1RleHQsIHJnYjJIZXgsIENpdHlFbnRyeSB9IGZyb20gJy4uL3V0aWxzJztcclxuaW1wb3J0IHsgSUQsIFN0YXRpb25JbmZvLCBOYW1lLCBEaXJlY3Rpb25Mb25nLCBOZWlnaGJvdXJQbCwgSW50ZXJjaGFuZ2VJbmZvLCBJbnRJbmZvVGFnIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQgeyBNRENEaWFsb2cgfSBmcm9tICdAbWF0ZXJpYWwvZGlhbG9nJztcclxuaW1wb3J0IHsgTURDU2VsZWN0IH0gZnJvbSAnQG1hdGVyaWFsL3NlbGVjdCc7XHJcbmltcG9ydCB7IE1EQ1RleHRGaWVsZCB9IGZyb20gJ0BtYXRlcmlhbC90ZXh0ZmllbGQnO1xyXG5pbXBvcnQgeyBNRENUYWJCYXIgfSBmcm9tICdAbWF0ZXJpYWwvdGFiLWJhcic7XHJcbmltcG9ydCB7IE1EQ0NoaXAsIE1EQ0NoaXBTZXQgfSBmcm9tICdAbWF0ZXJpYWwvY2hpcHMnO1xyXG5pbXBvcnQgeyBNRENSaXBwbGUgfSBmcm9tICdAbWF0ZXJpYWwvcmlwcGxlJztcclxuaW1wb3J0IHsgTURDU3dpdGNoIH0gZnJvbSAnQG1hdGVyaWFsL3N3aXRjaCc7XHJcblxyXG5jb25zdCBnZXRTdGF0aW9uQ2FyZCA9IChpZDogSUQsIG5hbWVzOiBOYW1lLCBudW06IHN0cmluZykgPT4ge1xyXG4gICAgcmV0dXJuICQoJzxkaXY+Jywge1xyXG4gICAgICAgIGlkOiBpZCwgXHJcbiAgICAgICAgY2xhc3M6ICdtZGMtY2FyZCBtZGMtbGF5b3V0LWdyaWRfX2NlbGwtLXNwYW4tMi1kZXNrdG9wIG1kYy1sYXlvdXQtZ3JpZF9fY2VsbC0tc3Bhbi00LXRhYmxldCBtZGMtbGF5b3V0LWdyaWRfX2NlbGwtLXNwYW4tMi1waG9uZSBzdGF0aW9uLWNhcmQnXHJcbiAgICB9KVxyXG4gICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAgICQoJzxkaXY+JywgeyBjbGFzczogJ21kYy1jYXJkX19wcmltYXJ5LWFjdGlvbid9KVxyXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8ZGl2PicsIHsgY2xhc3M6ICdtZGMtY2FyZF9fbWVkaWEgbWRjLWNhcmRfX21lZGlhLS0xNi05JyB9KSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnPGRpdj4nLCB7IGNsYXNzOiAnbWRjLWNhcmRfX21lZGlhLWNvbnRlbnQgc3RhdGlvbi1jYXJkX19jb250ZW50J30pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKG5hbWVzLmpvaW4oJzxicj4nKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnByZXBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCc8c3Bhbj4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ2Rpc3BsYXknLCB3aW5kb3cudXJsUGFyYW1zLmdldCgnc3R5bGUnKSA9PT0gJ2d6bXRyJyA/ICdpbmxpbmUnIDogJ25vbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KG51bSArICdcXHUwMGEwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgICAgICAuYXBwZW5kKFxyXG4gICAgICAgICAgICAkKCc8ZGl2PicsIHsgY2xhc3M6ICdtZGMtY2FyZF9fYWN0aW9ucycgfSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnPGRpdj4nLCB7IGNsYXNzOiAnbWRjLWNhcmRfX2FjdGlvbi1pY29ucycgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJzxidXR0b24+Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnU2V0IEFzIEN1cnJlbnQnLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ21hdGVyaWFsLWljb25zIG1kYy1pY29uLWJ1dHRvbiBtZGMtY2FyZF9fYWN0aW9uIG1kYy1jYXJkX19hY3Rpb24tLWljb24nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KCdteV9sb2NhdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJzxidXR0b24+Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnSW50ZXJjaGFuZ2UnLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ21hdGVyaWFsLWljb25zIG1kYy1pY29uLWJ1dHRvbiBtZGMtY2FyZF9fYWN0aW9uIG1kYy1jYXJkX19hY3Rpb24tLWljb24nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KCdlZGl0JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGJ1dHRvbj4nLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdSZW1vdmUnLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ21hdGVyaWFsLWljb25zIG1kYy1pY29uLWJ1dHRvbiBtZGMtY2FyZF9fYWN0aW9uIG1kYy1jYXJkX19hY3Rpb24tLWljb24nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KCdkZWxldGVfZm9yZXZlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG59O1xyXG5cclxuY29uc3QgZ2V0SW50Qm94Q2hpcCA9IChpbnRJbmZvOiBJbnRlcmNoYW5nZUluZm8pID0+IHtcclxuICAgIGxldCBjaGlwRWwgPSAkKCc8ZGl2PicsIHsgY2xhc3M6ICdtZGMtY2hpcCcsIHJvbGU6ICdyb3cnIH0pXHJcbiAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogaW50SW5mb1tJbnRJbmZvVGFnLmNvbG91cl0sIFxyXG4gICAgICAgICAgICBjb2xvcjogaW50SW5mb1tJbnRJbmZvVGFnLmZnXVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmRhdGEoJ3RoZW1lJywge1xyXG4gICAgICAgICAgICBjaXR5OiBpbnRJbmZvW0ludEluZm9UYWcuY2l0eV0sIFxyXG4gICAgICAgICAgICBsaW5lOiBpbnRJbmZvW0ludEluZm9UYWcubGluZV1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5hcHBlbmQoJCgnPGRpdj4nLCB7IGNsYXNzOiAnbWRjLWNoaXBfX3JpcHBsZScgfSkpXHJcbiAgICAgICAgLmFwcGVuZChcclxuICAgICAgICAgICAgJCgnPHNwYW4+JywgeyByb2xlOiAnZ3JpZGNlbGwnIH0pXHJcbiAgICAgICAgICAgICAgICAuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICQoJzxzcGFuPicsIHsgcm9sZTogJ2J1dHRvbicsIHRhYmluZGV4OiAwLCBjbGFzczogJ21kYy1jaGlwX190ZXh0JyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuaHRtbChpbnRJbmZvW0ludEluZm9UYWcubmFtZVpIXSArICc8YnI+JyArIGludEluZm9bSW50SW5mb1RhZy5uYW1lRU5dKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgICAgICAuYXBwZW5kKFxyXG4gICAgICAgICAgICAkKCc8c3Bhbj4nLCB7IHJvbGU6ICdncmlkY2VsbCcgfSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnPGk+JywgeyBjbGFzczogJ21hdGVyaWFsLWljb25zIG1kYy1jaGlwX19pY29uIG1kYy1jaGlwX19pY29uLS10cmFpbGluZycsIHRhYmluZGV4OiAtMSwgcm9sZTogJ2J1dHRvbicgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoJ2NhbmNlbCcpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIHJldHVybiBjaGlwRWxbMF07XHJcbn07XHJcblxyXG5jb25zdCBnZXRJbnRJbmZvRnJvbUNoaXAgPSAoY2hpcDogSFRNTERpdkVsZW1lbnQpID0+IHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgJChjaGlwKS5kYXRhKCd0aGVtZScpLmNpdHksIFxyXG4gICAgICAgICQoY2hpcCkuZGF0YSgndGhlbWUnKS5saW5lLCBcclxuICAgICAgICByZ2IySGV4KCQoY2hpcCkuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJykpLCBcclxuICAgICAgICByZ2IySGV4KCQoY2hpcCkuY3NzKCdjb2xvcicpKSwgXHJcbiAgICAgICAgJChjaGlwKS5maW5kKCcubWRjLWNoaXBfX3RleHQnKS5odG1sKCkuc3BsaXQoJzxicj4nKVswXSwgXHJcbiAgICAgICAgJChjaGlwKS5maW5kKCcubWRjLWNoaXBfX3RleHQnKS5odG1sKCkuc3BsaXQoJzxicj4nKVsxXVxyXG4gICAgXSBhcyBJbnRlcmNoYW5nZUluZm87XHJcbn07XHJcblxyXG5jb25zdCBnZXRTdG5JbnRGcm9tQ2hpcFNldHMgPSAoc2V0czogSFRNTERpdkVsZW1lbnRbXSkgPT4ge1xyXG4gICAgbGV0IGluZm8gPSBzZXRzLm1hcChzZXQgPT4ge1xyXG4gICAgICAgIHJldHVybiAkKHNldCkuZmluZCgnLm1kYy1jaGlwJykuZ2V0KCkubWFwKGVsID0+IGdldEludEluZm9Gcm9tQ2hpcChlbCkpO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgbnMgPSBpbmZvXHJcbiAgICAgICAgLm1hcChpbnQgPT4gaW50Lmxlbmd0aCk7XHJcbiAgICBpZiAobnNbMV0gPT09IDApIHtpbmZvID0gW2luZm9bMF1dO31cclxuICAgIGxldCBjaGFuZ2VUeXBlOiBzdHJpbmc7XHJcbiAgICBpZiAobnNbMF0gPT09IDMgJiYgbnNbMV0gPT09IDApIHtcclxuICAgICAgICBjaGFuZ2VUeXBlID0gJ2ludDMnOyAvLyB3YXMgaW50NFxyXG4gICAgfSBlbHNlIGlmIChuc1swXSA9PT0gMiAmJiBuc1sxXSA9PT0gMSkge1xyXG4gICAgICAgIGNoYW5nZVR5cGUgPSAnb3NpMzEnO1xyXG4gICAgfSBlbHNlIGlmIChuc1swXSA9PT0gMiAmJiBuc1sxXSA9PT0gMCkge1xyXG4gICAgICAgIGNoYW5nZVR5cGUgPSAnaW50MydcclxuICAgIH0gZWxzZSBpZiAobnNbMF0gPT09IDEgJiYgbnNbMV0gPT09IDIpIHtcclxuICAgICAgICBjaGFuZ2VUeXBlID0gJ29zaTIyJzsgXHJcbiAgICB9IGVsc2UgaWYgKG5zWzBdID09PSAxICYmIG5zWzFdID09PSAxKSB7XHJcbiAgICAgICAgY2hhbmdlVHlwZSA9ICdvc2kyMSc7XHJcbiAgICB9IGVsc2UgaWYgKG5zWzBdID09PSAxICYmIG5zWzFdID09PSAwKSB7XHJcbiAgICAgICAgY2hhbmdlVHlwZSA9ICdpbnQyJztcclxuICAgIH0gZWxzZSBpZiAobnNbMF0gPT09IDAgJiYgbnNbMV0gPT09IDMpIHtcclxuICAgICAgICBjaGFuZ2VUeXBlID0gJ29zaTEzJztcclxuICAgIH0gZWxzZSBpZiAobnNbMF0gPT09IDAgJiYgbnNbMV0gPT09IDIpIHtcclxuICAgICAgICBjaGFuZ2VUeXBlID0gJ29zaTEyJztcclxuICAgIH0gZWxzZSBpZiAobnNbMF0gPT09IDAgJiYgbnNbMV0gPT09IDEpIHtcclxuICAgICAgICBjaGFuZ2VUeXBlID0gJ29zaTExJztcclxuICAgIH0gZWxzZSBpZiAobnNbMF0gPT09IDAgJiYgbnNbMV0gPT09IDApIHtcclxuICAgICAgICBjaGFuZ2VUeXBlID0gJ25vbmUnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBzdW0obnMpID4gM1xyXG4gICAgICAgIGNoYW5nZVR5cGUgPSAnaW50Myc7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhjaGFuZ2VUeXBlKTtcclxuICAgIHJldHVybiB7IGluZm8sIGNoYW5nZVR5cGUgfTtcclxufTtcclxuXHJcbmNvbnN0IHVwZGF0ZVN0blRyYW5zZmVyID0gKHNldHM6IEhUTUxEaXZFbGVtZW50W10sIHRpY2s6IE1EQ0NoaXBTZXQsIHBhaWQ6IE1EQ1N3aXRjaCkgPT4ge1xyXG4gICAgbGV0IHsgY2hhbmdlVHlwZSwgaW5mbyB9ID0gZ2V0U3RuSW50RnJvbUNoaXBTZXRzKHNldHMpO1xyXG4gICAgbGV0IGludEluZm8gPSBpbmZvIGFzIGFueTtcclxuICAgIGxldCBzdG5JZCA9ICQoJyNzdG5fZWRpdF9kaWFnJykuYXR0cignZm9yJyk7XHJcbiAgICBpZiAoY2hhbmdlVHlwZS5pbmRleE9mKCdvc2knKSAhPT0gLTEpIHtcclxuICAgICAgICBsZXQgb3NpTmFtZXMgPSAkKCdidXR0b24jb3NpX25hbWUgLm1kYy1idXR0b25fX2xhYmVsJykuaHRtbCgpLnNwbGl0KCc8YnI+Jyk7XHJcbiAgICAgICAgaW50SW5mb1sxXS51bnNoaWZ0KG9zaU5hbWVzKTtcclxuICAgIH1cclxuICAgIGxldCB0aWNrRGlyZWM6IHN0cmluZztcclxuICAgIGlmICh0aWNrLnNlbGVjdGVkQ2hpcElkcy5sZW5ndGgpIHtcclxuICAgICAgICB0aWNrRGlyZWMgPSB0aWNrLnNlbGVjdGVkQ2hpcElkc1swXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGlja0RpcmVjID0gJ3InO1xyXG4gICAgfVxyXG4gICAgbGV0IHBhaWRBcmVhID0gcGFpZC5jaGVja2VkO1xyXG5cclxuICAgIGlmIChjaGFuZ2VUeXBlLmluZGV4T2YoJ29zaScpICE9PSAtMSkge1xyXG4gICAgICAgIGNoYW5nZVR5cGUgKz0gJ18nICsgKHBhaWRBcmVhID8gJ3AnIDogJ3UnKSArIHRpY2tEaXJlYztcclxuICAgIH0gZWxzZSBpZiAoY2hhbmdlVHlwZS5pbmRleE9mKCdpbnQzJykgIT09IC0xKSB7XHJcbiAgICAgICAgY2hhbmdlVHlwZSArPSAnXycgKyB0aWNrRGlyZWM7XHJcbiAgICB9XHJcbiAgICB3aW5kb3cubXlMaW5lLnVwZGF0ZVN0blRyYW5zZmVyKHN0bklkLCBjaGFuZ2VUeXBlLCBpbnRJbmZvKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbW1vbigpIHtcclxuXHJcblxyXG4gICAgLy8gRHVwbGljYXRlIGVsZW1lbnRcclxuICAgIHZhciBpbnROYW1lRWwgPSAkKCcjc3RuX2VkaXRfZGlhZyAubWRjLWxheW91dC1ncmlkX19pbm5lciAjaW50X25hbWVfemgsI2ludF9uYW1lX2VuJykuc2xpY2UoMCwyKS5jbG9uZSgpO1xyXG4gICAgaW50TmFtZUVsLmZpbmQoJy5tZGMtdGV4dC1maWVsZCcpLnJlbW92ZUF0dHIoJ2RhdGEtbWRjLWF1dG8taW5pdC1zdGF0ZScpOyAvLyB0byBiZSByZW1vdmVkXHJcbiAgICAkKCdkaXYjaW50X2xpbmUnKS5zbGljZSgxLDMpLmFmdGVyKGludE5hbWVFbCk7XHJcblxyXG4gICAgLy8gbWRjIGluc3RhbmNlc1xyXG4gICAgY29uc3QgW3N0bkFkZERpYWxvZywgc3RuRWRpdERpYWxvZywgc3RuSW50Qm94RGlhbG9nLCBzdG5PU0lOYW1lRGlhbG9nLCBzdG5EZWxldGVEaWFsb2csIHN0bkRlbGV0ZUVyckRpYWxvZ10gPSBcclxuICAgICAgICBbJyNzdG5fYWRkX2RpYWcnLCAnI3N0bl9lZGl0X2RpYWcnLCAnI3N0bl9pbnRib3hfZGlhZycsICcjc3RuX29zaW5hbWVfZGlhZycsICcjc3RuX2RlbGV0ZV9kaWFnJywgJyNzdG5fZGVsZXRlX2VyciddXHJcbiAgICAgICAgICAgIC5tYXAoc2VsZWN0b3IgPT4gbmV3IE1EQ0RpYWxvZygkKHNlbGVjdG9yKVswXSkpO1xyXG4gICAgXHJcbiAgICBjb25zdCBbc3RuQWRkUHJlcFNlbGVjdCwgc3RuQWRkUGl2b3RTZWxlY3QsIHN0bkFkZExvY1NlbGVjdCwgc3RuQWRkRW5kU2VsZWN0XSA9IFxyXG4gICAgICAgIFsnI3ByZXAnLCAnI3Bpdm90JywgJyNsb2MnLCAnI2VuZCddLm1hcChzZWxlY3RvciA9PiBuZXcgTURDU2VsZWN0KCQoJyNzdG5fYWRkX2RpYWcnKS5maW5kKHNlbGVjdG9yKVswXSkpO1xyXG5cclxuICAgIGNvbnN0IHNlcnZpY2VzQ2hpcFNldEVsID0gJCgnI3N0bl9lZGl0X2RpYWcgI3BhbmVsX25hbWUgLm1kYy1jaGlwLXNldCcpWzBdO1xyXG4gICAgY29uc3Qgc2VydmljZXNDaGlwU2V0ID0gbmV3IE1EQ0NoaXBTZXQoc2VydmljZXNDaGlwU2V0RWwpO1xyXG5cclxuICAgIGNvbnN0IHN0bk1vZGlmeU5hbWVGaWVsZHMgPSBcclxuICAgICAgICBbJyNuYW1lX3poJywgJyNuYW1lX2VuJ10ubWFwKHNlbGVjdG9yID0+IG5ldyBNRENUZXh0RmllbGQoJCgnI3N0bl9lZGl0X2RpYWcnKS5maW5kKHNlbGVjdG9yKVswXSkpO1xyXG4gICAgY29uc3Qgc3RuTW9kaWZ5TnVtRmllbGQgPSBuZXcgTURDVGV4dEZpZWxkKCQoJyNzdG5fZWRpdF9kaWFnICNzdG5fbnVtJylbMF0pO1xyXG5cclxuICAgIGNvbnN0IGludENoaXBBZGRCdXR0b25FbHMgPSAkKCcjc3RuX2VkaXRfZGlhZyAubWRjLWljb24tYnV0dG9uJykuZ2V0KCkgYXMgSFRNTEJ1dHRvbkVsZW1lbnRbXTtcclxuICAgIGNvbnN0IGludENoaXBTZXRFbHMgPSAkKCcjc3RuX2VkaXRfZGlhZyAjcGFuZWxfaW50ZXJjaGFuZ2UgLm1kYy1jaGlwLXNldC5pbnQtY2hpcC1zZXQnKS5nZXQoKSBhcyBIVE1MRGl2RWxlbWVudFtdO1xyXG4gICAgY29uc3QgaW50Q2hpcFNldHMgPSBpbnRDaGlwU2V0RWxzLm1hcChlbCA9PiBuZXcgTURDQ2hpcFNldChlbCkpO1xyXG4gICAgY29uc3Qgb3NpTmFtZUJ1dHRvblJpcHBsZSA9IG5ldyBNRENSaXBwbGUoJCgnI3N0bl9lZGl0X2RpYWcgI29zaV9uYW1lJylbMF0pO1xyXG4gICAgY29uc3QgaW50Q2l0eVNlbGVjdCA9IG5ldyBNRENTZWxlY3QoJCgnI2ludF9jaXR5JylbMF0pO1xyXG4gICAgY29uc3QgaW50TGluZVNlbGVjdCA9IG5ldyBNRENTZWxlY3QoJCgnI2ludF9saW5lJylbMF0pO1xyXG4gICAgY29uc3QgaW50Qm94TmFtZUZpZWxkcyA9IFsnemgnLCAnZW4nXS5tYXAobGFuZyA9PiBuZXcgTURDVGV4dEZpZWxkKCQoJyNzdG5faW50Ym94X2RpYWcnKS5maW5kKCcjbmFtZV8nK2xhbmcpWzBdKSk7XHJcbiAgICBjb25zdCB0aWNrRGlyZWNDaGlwU2V0ID0gbmV3IE1EQ0NoaXBTZXQoJCgnI3RpY2tfZGlyZWMnKVswXSk7XHJcbiAgICAvLyBjb25zdCB0aWNrRGlyZWNDaGlwcyA9ICQoJyN0aWNrX2RpcmVjIC5tZGMtY2hpcCcpLm1hcCgoXyxlbCkgPT4gbmV3IE1EQ0NoaXAoZWwpKS5nZXQoKTtcclxuICAgIGNvbnN0IHBhaWRBcmVhU3dpdGNoID0gbmV3IE1EQ1N3aXRjaCgkKCcjcGFpZF9hcmVhJylbMF0pO1xyXG5cclxuICAgIGNvbnN0IHN0blRyYW5zZmVyVGFiQmFyID0gbmV3IE1EQ1RhYkJhcigkKCcjc3RuX2VkaXRfZGlhZyAubWRjLXRhYi1iYXInKVswXSk7XHJcbiAgICBjb25zdCBzdG5PU0lOYW1lRmllbGRzID0gXHJcbiAgICAgICAgWyd6aCcsICdlbiddLm1hcChsYW5nID0+IG5ldyBNRENUZXh0RmllbGQoJCgnI3N0bl9vc2luYW1lX2RpYWcnKS5maW5kKGAjb3NpX25hbWVfJHtsYW5nfWApWzBdKSk7XHJcbiAgICAvLyBjb25zdCBbdGlja0RpcmVjVG9nZ2xlLCBwYWlkQXJlYVRvZ2dsZV0gPSBcclxuICAgIC8vICAgICBbJyN0aWNrX2RpcmVjJywgJyNwYWlkX2FyZWEnXS5tYXAoc2VsZWN0b3IgPT4gbmV3IE1EQ0ljb25CdXR0b25Ub2dnbGUoJCgnI3N0bl9lZGl0X2RpYWcnKS5maW5kKHNlbGVjdG9yKVswXSkpO1xyXG5cclxuICAgIGNvbnN0IFt0aHJvdWdoU2VsZWN0cywgZmlyc3RTZWxlY3RzLCBwb3NTZWxlY3RzXSA9IFxyXG4gICAgICAgIFsndGhyb3VnaCcsICdmaXJzdCcsICdwb3MnXVxyXG4gICAgICAgICAgICAubWFwKHNlbGVjdG9yID0+IFsnbGVmdCcsICdyaWdodCddLm1hcChkaXJlYyA9PiBuZXcgTURDU2VsZWN0KCQoYCMke2RpcmVjfV8ke3NlbGVjdG9yfWApWzBdKSkpO1xyXG5cclxuICAgIHZhciBzdG5MaXN0ID0gZ2V0UGFyYW1zKCkuc3RuX2xpc3Q7XHJcbiAgICB3aW5kb3cubXlMaW5lLnRwby5mb3JFYWNoKHN0bklkID0+IHtcclxuICAgICAgICAkKCcjcGFuZWxfc3RhdGlvbnMgLm1kYy1sYXlvdXQtZ3JpZF9faW5uZXI6Zmlyc3QnKS5hcHBlbmQoZ2V0U3RhdGlvbkNhcmQoc3RuSWQsIHN0bkxpc3Rbc3RuSWRdLm5hbWUsIHN0bkxpc3Rbc3RuSWRdLm51bSkpO1xyXG4gICAgICAgICQoJyNwaXZvdF9fc2VsZWN0aW9uJykuYXBwZW5kKFxyXG4gICAgICAgICAgICAkKCc8bGk+JywgeydkYXRhLXZhbHVlJzpzdG5JZH0pLmFkZENsYXNzKCdtZGMtbGlzdC1pdGVtJykudGV4dChzdG5MaXN0W3N0bklkXS5uYW1lLmpvaW4oKSlcclxuICAgICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI3BhbmVsX3N0YXRpb25zIC5tZGMtY2FyZF9fcHJpbWFyeS1hY3Rpb24nKS5vbignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICAgICAgLy8gdmFyIHN0bklkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5tZGMtY2FyZCcpLmlkO1xyXG4gICAgICAgIC8vIGlmIChzdG5JZCA9PSAnYWRkX3N0bicpIHtyZXR1cm47fVxyXG4gICAgICAgIC8vICQoJyNzdG5fbW9kaWZ5X2RpYWcnKS5hdHRyKCdmb3InLCBzdG5JZCk7XHJcbiAgICAgICAgLy8gc3RuTW9kaWZ5RGlhbG9nLm9wZW4oKTtcclxuICAgIH0pO1xyXG4gICAgJCgnI3BhbmVsX3N0YXRpb25zIC5tZGMtY2FyZF9fYWN0aW9uLWljb25zID4gW3RpdGxlPVwiQWRkXCJdJykub24oJ2NsaWNrJywgZXZlbnQgPT4ge1xyXG4gICAgICAgIHN0bkFkZERpYWxvZy5vcGVuKCk7XHJcbiAgICB9KTtcclxuICAgICQoJyNwYW5lbF9zdGF0aW9ucyAubWRjLWNhcmRfX2FjdGlvbi1pY29ucyA+IFt0aXRsZT1cIlNldCBBcyBDdXJyZW50XCJdJykub24oJ2NsaWNrJywgZXZlbnQgPT4ge1xyXG4gICAgICAgIHZhciBzdG5JZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcubWRjLWNhcmQnKS5pZDtcclxuICAgICAgICB3aW5kb3cubXlMaW5lLmN1cnJlbnRTdG5JZCA9IHN0bklkO1xyXG4gICAgfSk7XHJcbiAgICAkKCcjcGFuZWxfc3RhdGlvbnMgLm1kYy1jYXJkX19hY3Rpb24taWNvbnMgPiBbdGl0bGU9XCJJbnRlcmNoYW5nZVwiXScpLm9uKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgICAkKCcjc3RuX2VkaXRfZGlhZycpLmF0dHIoJ2ZvcicsIGV2ZW50LnRhcmdldC5jbG9zZXN0KCcubWRjLWNhcmQnKS5pZClcclxuICAgICAgICBzdG5FZGl0RGlhbG9nLm9wZW4oKTtcclxuICAgIH0pO1xyXG4gICAgJCgnI3BhbmVsX3N0YXRpb25zIC5tZGMtY2FyZF9fYWN0aW9uLWljb25zID4gW3RpdGxlPVwiUmVtb3ZlXCJdJykub24oJ2NsaWNrJywgZXZlbnQgPT4ge1xyXG4gICAgICAgIHZhciBzdG5JZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcubWRjLWNhcmQnKS5pZDtcclxuICAgICAgICAkKCcjc3RuX2RlbGV0ZV9kaWFnJykuYXR0cignZm9yJywgc3RuSWQpO1xyXG4gICAgICAgIHN0bkRlbGV0ZURpYWxvZy5vcGVuKCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy8gQWRkaXRpb25cclxuICAgIHN0bkFkZERpYWxvZy5saXN0ZW4oJ01EQ0RpYWxvZzpvcGVuaW5nJywgKCkgPT4ge1xyXG4gICAgICAgIHN0bkFkZFBpdm90U2VsZWN0LnNlbGVjdGVkSW5kZXggPSAwO1xyXG4gICAgfSk7XHJcbiAgICBzdG5BZGREaWFsb2cubGlzdGVuKCdNRENEaWFsb2c6b3BlbmVkJywgKCkgPT4ge1xyXG4gICAgICAgIFtzdG5BZGRQcmVwU2VsZWN0LCBzdG5BZGRQaXZvdFNlbGVjdCwgc3RuQWRkTG9jU2VsZWN0XS5mb3JFYWNoKHNlbGVjdCA9PiBzZWxlY3QubGF5b3V0KCkpO1xyXG4gICAgfSk7XHJcbiAgICBzdG5BZGREaWFsb2cubGlzdGVuKCdNRENEaWFsb2c6Y2xvc2VkJywgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAoZXZlbnQuZGV0YWlsLmFjdGlvbiA9PSAnY2xvc2UnKSB7cmV0dXJuO31cclxuXHJcbiAgICAgICAgdmFyIHByZXAgPSBzdG5BZGRQcmVwU2VsZWN0LnZhbHVlIGFzICdiZWZvcmUnIHwgJ2FmdGVyJztcclxuICAgICAgICB2YXIgc3RuSWQgPSBzdG5BZGRQaXZvdFNlbGVjdC52YWx1ZTtcclxuICAgICAgICB2YXIgbG9jID0gc3RuQWRkTG9jU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIHZhciBlbmQgPSBzdG5BZGRFbmRTZWxlY3QudmFsdWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIFtuZXdJZCwgbmV3SW5mb10gPSB3aW5kb3cubXlMaW5lLmFkZFN0bihwcmVwLCBzdG5JZCwgbG9jLCBlbmQpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhwcmVwLCBzdG5JZCwgbG9jLCBlbmQpO1xyXG4gICAgICAgIC8vIF9nZW5TdG5MaXN0KCk7XHJcbiAgICAgICAgdmFyIHByZXZJZCA9IHdpbmRvdy5teUxpbmUudHBvW3dpbmRvdy5teUxpbmUudHBvLmluZGV4T2YobmV3SWQpIC0gMV0gfHwgJ2FkZF9zdG4nO1xyXG4gICAgICAgICQoYCNwYW5lbF9zdGF0aW9ucyAubWRjLWxheW91dC1ncmlkX19pbm5lcjpmaXJzdCAjJHtwcmV2SWR9YCkuYWZ0ZXIoZ2V0U3RhdGlvbkNhcmQobmV3SWQsIG5ld0luZm8ubmFtZSwgbmV3SW5mby5udW0pKTtcclxuICAgICAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgICAgJChgI3BhbmVsX3N0YXRpb25zICMke25ld0lkfSAubWRjLWNhcmRfX3ByaW1hcnktYWN0aW9uYCkub24oJ2NsaWNrJywgZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAvLyB2YXIgc3RuSWQgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLm1kYy1jYXJkJykuaWQ7XHJcbiAgICAgICAgICAgIC8vIGlmIChzdG5JZCA9PSAnYWRkX3N0bicpIHtyZXR1cm47fVxyXG4gICAgICAgICAgICAvLyAkKCcjc3RuX21vZGlmeV9kaWFnJykuYXR0cignZm9yJywgc3RuSWQpO1xyXG4gICAgICAgICAgICAvLyBzdG5Nb2RpZnlEaWFsb2cub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoYCNwYW5lbF9zdGF0aW9ucyAjJHtuZXdJZH0gLm1kYy1jYXJkX19hY3Rpb24taWNvbnMgPiBbdGl0bGU9XCJTZXQgQXMgQ3VycmVudFwiXWApLm9uKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgdmFyIHN0bklkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5tZGMtY2FyZCcpLmlkO1xyXG4gICAgICAgICAgICB3aW5kb3cubXlMaW5lLmN1cnJlbnRTdG5JZCA9IHN0bklkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoYCNwYW5lbF9zdGF0aW9ucyAjJHtuZXdJZH0gLm1kYy1jYXJkX19hY3Rpb24taWNvbnMgPiBbdGl0bGU9XCJJbnRlcmNoYW5nZVwiXWApLm9uKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgdmFyIHN0bklkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5tZGMtY2FyZCcpLmlkO1xyXG4gICAgICAgICAgICAkKCcjc3RuX2VkaXRfZGlhZycpLmF0dHIoJ2ZvcicsIHN0bklkKTtcclxuICAgICAgICAgICAgc3RuRWRpdERpYWxvZy5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChgI3BhbmVsX3N0YXRpb25zICMke25ld0lkfSAubWRjLWNhcmRfX2FjdGlvbi1pY29ucyA+IFt0aXRsZT1cIlJlbW92ZVwiXWApLm9uKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgdmFyIHN0bklkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5tZGMtY2FyZCcpLmlkO1xyXG4gICAgICAgICAgICAkKCcjc3RuX2RlbGV0ZV9kaWFnJykuYXR0cignZm9yJywgc3RuSWQpO1xyXG4gICAgICAgICAgICBzdG5EZWxldGVEaWFsb2cub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgbGlzdEVsZW0gPSAkKCc8bGk+Jywge1xyXG4gICAgICAgICAgICAnZGF0YS12YWx1ZSc6IG5ld0lkLCAnY2xhc3MnOiAnbWRjLWxpc3QtaXRlbSdcclxuICAgICAgICB9KS50ZXh0KG5ld0luZm8ubmFtZS5qb2luKCcgLSAnKSk7XHJcbiAgICAgICAgaWYgKHByZXZJZCA9PSAnYWRkX3N0bicpIHtcclxuICAgICAgICAgICAgJCgnI3Bpdm90X19zZWxlY3Rpb24nKS5wcmVwZW5kKGxpc3RFbGVtKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKGAjcGl2b3RfX3NlbGVjdGlvbiBbZGF0YS12YWx1ZT1cIiR7cHJldklkfVwiYCkuYWZ0ZXIobGlzdEVsZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVHJpZ2dlciBzdGF0aW9uIG5hbWUgbW9kaWZpY2F0aW9uXHJcbiAgICAgICAgJCgnI3N0bl9lZGl0X2RpYWcnKS5hdHRyKCdmb3InLCBuZXdJZCk7XHJcbiAgICAgICAgc3RuRWRpdERpYWxvZy5vcGVuKCk7XHJcbiAgICB9KTtcclxuICAgIHN0bkFkZFByZXBTZWxlY3QubGlzdGVuKCdNRENTZWxlY3Q6Y2hhbmdlJywgZXZlbnQgPT4ge1xyXG4gICAgICAgICQoJyNzdG5fYWRkX2RpYWcgI3Bpdm90JylbMF0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ01EQ1NlbGVjdDpjaGFuZ2UnKSk7XHJcbiAgICB9KTtcclxuICAgIHN0bkFkZFBpdm90U2VsZWN0Lmxpc3RlbignTURDU2VsZWN0OmNoYW5nZScsIGV2ZW50ID0+IHtcclxuICAgICAgICB2YXIgcHJlcCA9IHN0bkFkZFByZXBTZWxlY3QudmFsdWUgYXMgJ2JlZm9yZScgfCAnYWZ0ZXInO1xyXG4gICAgICAgIHZhciBzdG5JZCA9IHN0bkFkZFBpdm90U2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIHZhciBzdG5MaXN0ID0gZ2V0UGFyYW1zKCkuc3RuX2xpc3Q7XHJcbiAgICAgICAgZm9yIChsZXQgW2lkeCwgc3RhdGVdIG9mIHdpbmRvdy5teUxpbmUubmV3U3RuUG9zc2libGVMb2MocHJlcCwgc3RuSWQpLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IDEgfHwgKDxJRFtdPnN0YXRlKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICQoJyNsb2NfX3NlbGVjdGlvbiBsaScpLmVxKGlkeCkuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlkeCA+PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbmV3dXBwZXIgb3IgbmV3bG93ZXJcclxuICAgICAgICAgICAgICAgICAgICAkKCcjZW5kX19zZWxlY3Rpb24nKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICg8SURbXT5zdGF0ZSkuZm9yRWFjaChzdG5JZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNlbmRfX3NlbGVjdGlvbicpLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJzxsaT4nLCB7IGNsYXNzOidtZGMtbGlzdC1pdGVtJywgJ2RhdGEtdmFsdWUnOnN0bklkIH0pLnRleHQoc3RuTGlzdFtzdG5JZF0ubmFtZS5qb2luKCcgLSAnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJyNsb2NfX3NlbGVjdGlvbiBsaScpLmVxKGlkeCkuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHN0bkFkZExvY1NlbGVjdC52YWx1ZSA9ICQoJyNsb2NfX3NlbGVjdGlvbiBsaTpub3QoW3N0eWxlPVwiZGlzcGxheTogbm9uZTtcIl0pOmZpcnN0JykuYXR0cignZGF0YS12YWx1ZScpO1xyXG4gICAgICAgIHN0bkFkZExvY1NlbGVjdC52YWx1ZSA9IEFycmF5XHJcbiAgICAgICAgICAgIC5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNsb2NfX3NlbGVjdGlvbiBsaScpIGFzIE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGVsID0+IGVsLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJylbMF1cclxuICAgICAgICAgICAgLmRhdGFzZXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHN0bkFkZExvY1NlbGVjdC5saXN0ZW4oJ01EQ1NlbGVjdDpjaGFuZ2UnLCAoZXZlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgIGlmIChbJ25ld3VwcGVyJywgJ25ld2xvd2VyJ10uaW5jbHVkZXMoZXZlbnQuZGV0YWlsLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAvLyAkKCcjc3RuX2FkZF9kaWFnICNuZXdfYnJhbmNoJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcjc3RuX2FkZF9kaWFnIFtuZXctYnJhbmNoXScpLnNob3coKTtcclxuICAgICAgICAgICAgc3RuQWRkRW5kU2VsZWN0LnNlbGVjdGVkSW5kZXggPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICQoJyNzdG5fYWRkX2RpYWcgI25ld19icmFuY2gnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJyNzdG5fYWRkX2RpYWcgW25ldy1icmFuY2hdJykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvLyBNb2RpZmljYXRpb24gKE5hbWUpXHJcbiAgICAkKCcjc3RuX2VkaXRfZGlhZycpLmZpbmQoJyNuYW1lX3poLCAjbmFtZV9lbiwgI3N0bl9udW0nKS5vbignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgbGV0IG5hbWVzID0gc3RuTW9kaWZ5TmFtZUZpZWxkcy5tYXAodGV4dGZpZWxkID0+IHRleHRmaWVsZC52YWx1ZSkgYXMgTmFtZTtcclxuICAgICAgICB2YXIgc3RuTnVtID0gc3RuTW9kaWZ5TnVtRmllbGQudmFsdWU7XHJcblxyXG4gICAgICAgIHZhciBzdG5JZCA9ICQoJyNzdG5fZWRpdF9kaWFnJykuYXR0cignZm9yJyk7XHJcbiAgICAgICAgd2luZG93Lm15TGluZS51cGRhdGVTdG5OYW1lKHN0bklkLCBuYW1lcywgc3RuTnVtKTtcclxuICAgICAgICAkKGAjcGFuZWxfc3RhdGlvbnMgLm1kYy1sYXlvdXQtZ3JpZF9faW5uZXI6Zmlyc3QgIyR7c3RuSWR9IC5tZGMtY2FyZF9fbWVkaWEtY29udGVudGApXHJcbiAgICAgICAgICAgIC5odG1sKG5hbWVzLmpvaW4oJzxicj4nKSlcclxuICAgICAgICAgICAgLnByZXBlbmQoJCgnPHNwYW4+JywgeyBzdHlsZTood2luZG93LnVybFBhcmFtcy5nZXQoJ3N0eWxlJyk9PSdnem10cicgPyAnJyA6ICdkaXNwbGF5Om5vbmU7Jyl9KS50ZXh0KHN0bk51bSsnICcpKTtcclxuICAgICAgICAkKGBsaVtkYXRhLXZhbHVlPVwiJHtzdG5JZH1gKS50ZXh0KG5hbWVzLmpvaW4oKSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy8gTW9kaWZpY2F0aW9uIChJbnRlcmNoYW5nZSlcclxuICAgIGNvbnN0IGZvY3VzTmFtZSA9ICgpID0+IHtcclxuICAgICAgICBzdG5Nb2RpZnlOYW1lRmllbGRzLm1hcCh0ZXh0ZmllbGQgPT4gdGV4dGZpZWxkLmxheW91dCgpKTtcclxuICAgICAgICBzdG5Nb2RpZnlOdW1GaWVsZC5sYXlvdXQoKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBmb2N1c0ludGVyY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgIHN0bk9TSU5hbWVGaWVsZHMuZm9yRWFjaCh0ZXh0ZmllbGQgPT4gdGV4dGZpZWxkLmxheW91dCgpKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBmb2N1c0JyYW5jaCA9ICgpID0+IHtcclxuICAgICAgICBbLi4udGhyb3VnaFNlbGVjdHMsIC4uLmZpcnN0U2VsZWN0cywgLi4ucG9zU2VsZWN0c11cclxuICAgICAgICAgICAgLm1hcChzZWxlY3QgPT4gc2VsZWN0LmxheW91dCgpKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgaW5pdE5hbWUgPSAoc3RuSW5mbzogU3RhdGlvbkluZm8pID0+IHtcclxuICAgICAgICBzdG5Nb2RpZnlOYW1lRmllbGRzLmZvckVhY2goKHRleHRmaWVsZCwgaSkgPT4gdGV4dGZpZWxkLnZhbHVlID0gc3RuSW5mby5uYW1lW2ldKTtcclxuICAgICAgICBzdG5Nb2RpZnlOdW1GaWVsZC52YWx1ZSA9IHN0bkluZm8ubnVtOyBcclxuXHJcbiAgICAgICAgc2VydmljZXNDaGlwU2V0LmNoaXBzLmZvckVhY2goY2hpcCA9PiB7XHJcbiAgICAgICAgICAgIGNoaXAuc2VsZWN0ZWQgPSBzdG5JbmZvLnNlcnZpY2VzLmluY2x1ZGVzKGNoaXAuaWQgYXMgJ2xvY2FsJyB8ICdleHByZXNzJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaW5pdEludGVyY2hhbmdlID0gKHN0bkluZm86IFN0YXRpb25JbmZvKSA9PiB7XHJcbiAgICAgICAgJChpbnRDaGlwU2V0RWxzKS5lbXB0eSgpO1xyXG5cclxuICAgICAgICBzdG5JbmZvLnRyYW5zZmVyLmluZm8uZm9yRWFjaCgoaW5mb3MsIGkpID0+IHtcclxuICAgICAgICAgICAgaW5mb3MuZm9yRWFjaCgoaW5mbywgaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaXBFbCA9IGdldEludEJveENoaXAoaW5mbyk7XHJcbiAgICAgICAgICAgICAgICBpbnRDaGlwU2V0RWxzW2ldLmFwcGVuZENoaWxkKGNoaXBFbCk7XHJcbiAgICAgICAgICAgICAgICBpbnRDaGlwU2V0c1tpXS5hZGRDaGlwKGNoaXBFbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyAvLyBoaWRlIHRyYWlsaW5nIGljb24gaWYgMSBjaGlwIG9ubHk/XHJcblxyXG4gICAgICAgIGlmIChzdG5JbmZvLnRyYW5zZmVyLm9zaV9uYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJCgnYnV0dG9uI29zaV9uYW1lIC5tZGMtYnV0dG9uX19sYWJlbCcpLmh0bWwoc3RuSW5mby50cmFuc2Zlci5vc2lfbmFtZXNbMF0uam9pbignPGJyPicpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCdidXR0b24jb3NpX25hbWUgLm1kYy1idXR0b25fX2xhYmVsJykuaHRtbCgn6LuK56uZ5ZCNPGJyPlN0biBOYW1lJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwYWlkQXJlYVN3aXRjaC5jaGVja2VkID0gc3RuSW5mby50cmFuc2Zlci5wYWlkX2FyZWE7XHJcbiAgICAgICAgdGlja0RpcmVjQ2hpcFNldC5jaGlwcy5maWx0ZXIoY2hpcCA9PiBjaGlwLmlkID09PSBzdG5JbmZvLnRyYW5zZmVyLnRpY2tfZGlyZWMpWzBdLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgaW5pdEJyYW5jaCA9IChzdG5JbmZvOiBTdGF0aW9uSW5mbykgPT4ge1xyXG4gICAgICAgIC8vIHRocm91Z2ggdHlwZVxyXG4gICAgICAgIFsnbGVmdCcsICdyaWdodCddLmZvckVhY2goKGRpcmVjOiAnbGVmdCcgfCAncmlnaHQnKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0aHJvdWdoVHlwZSA9IHN0bkluZm8uYnJhbmNoW2RpcmVjXVswXTtcclxuICAgICAgICAgICAgaWYgKHRocm91Z2hUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdWdoU2VsZWN0c1tEaXJlY3Rpb25Mb25nW2RpcmVjXV0udmFsdWUgPSB0aHJvdWdoVHlwZTtcclxuICAgICAgICAgICAgICAgICQoYCMke2RpcmVjfV90aHJvdWdoX19zZWxlY3Rpb24gW2RhdGEtdmFsdWU9XCJuYVwiXWApLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoYCMke2RpcmVjfV90aHJvdWdoX19zZWxlY3Rpb24gW2RhdGEtdmFsdWU9XCJ0aHJvdWdoXCJdYCkuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJChgIyR7ZGlyZWN9X3Rocm91Z2hfX3NlbGVjdGlvbiBbZGF0YS12YWx1ZT1cIm5vbnRocm91Z2hcIl1gKS5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJChgWyR7ZGlyZWN9LWZpcnN0LWdyb3VwXSwgWyR7ZGlyZWN9LXBvcy1ncm91cF1gKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdWdoU2VsZWN0c1tEaXJlY3Rpb25Mb25nW2RpcmVjXV0udmFsdWUgPSAnbmEnO1xyXG4gICAgICAgICAgICAgICAgJChgIyR7ZGlyZWN9X3Rocm91Z2hfX3NlbGVjdGlvbiBbZGF0YS12YWx1ZT1cIm5hXCJdYCkuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJChgIyR7ZGlyZWN9X3Rocm91Z2hfX3NlbGVjdGlvbiBbZGF0YS12YWx1ZT1cInRocm91Z2hcIl1gKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKGAjJHtkaXJlY31fdGhyb3VnaF9fc2VsZWN0aW9uIFtkYXRhLXZhbHVlPVwibm9udGhyb3VnaFwiXWApLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKGBbJHtkaXJlY30tZmlyc3QtZ3JvdXBdLCBbJHtkaXJlY30tcG9zLWdyb3VwXWApLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBmaXJzdCBzdGF0aW9uXHJcbiAgICAgICAgJCgnI2xlZnRfZmlyc3RfX3NlbGVjdGlvbiwgI3JpZ2h0X2ZpcnN0X19zZWxlY3Rpb24nKS5lbXB0eSgpO1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZShnZXRQYXJhbXMoKS5zdG5fbGlzdClcclxuICAgICAgICAgICAgLnRoZW4oc3RuTGlzdCA9PiB7XHJcbiAgICAgICAgICAgICAgICBbMCwgMV0uZm9yRWFjaChpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzdG5JbmZvW05laWdoYm91clBsW2ldIGFzICdwYXJlbnRzJyB8ICdjaGlsZHJlbiddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKG5lID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoYCMke0RpcmVjdGlvbkxvbmdbaV19X2ZpcnN0X19zZWxlY3Rpb25gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJzxsaT4nLCB7IGNsYXNzOiAnbWRjLWxpc3QtaXRlbScsICdkYXRhLXZhbHVlJzogbmV9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoc3RuTGlzdFtuZV0ubmFtZS5qb2luKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhyb3VnaFNlbGVjdHMuZm9yRWFjaCgoc2VsZWN0LCBpZHgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdFNlbGVjdHNbaWR4XS5zZWxlY3RlZEluZGV4ID0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdC52YWx1ZSAhPT0gJ25hJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0bkluZm9bTmVpZ2hib3VyUGxbaWR4XV0uaW5kZXhPZihzdG5JbmZvLmJyYW5jaFtEaXJlY3Rpb25Mb25nW2lkeF1dWzFdKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDA7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gc3dhcCBwb3NpdGlvblxyXG4gICAgICAgIHBvc1NlbGVjdHMuZm9yRWFjaCgoc2VsZWN0LCBpKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGVjdC5zZWxlY3RlZEluZGV4ID0gc3RuSW5mb1tOZWlnaGJvdXJQbFtpXV0uaW5kZXhPZihzdG5JbmZvLmJyYW5jaFtEaXJlY3Rpb25Mb25nW2ldXVsxXSlcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgc3RuVHJhbnNmZXJUYWJCYXIubGlzdGVuKCdNRENUYWJCYXI6YWN0aXZhdGVkJywgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKGV2ZW50LmRldGFpbC5pbmRleCkge1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAkKCcjcGFuZWxfbmFtZScpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJyNwYW5lbF9pbnRlcmNoYW5nZSwgI3BhbmVsX2JyYW5jaCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGZvY3VzTmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICQoJyNwYW5lbF9pbnRlcmNoYW5nZScpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJyNwYW5lbF9uYW1lLCAjcGFuZWxfYnJhbmNoJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgZm9jdXNJbnRlcmNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICQoJyNwYW5lbF9uYW1lLCAjcGFuZWxfaW50ZXJjaGFuZ2UnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjcGFuZWxfYnJhbmNoJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgZm9jdXNCcmFuY2goKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkLmdldEpTT04oJ2RhdGEvY2l0eV9saXN0Lmpzb24nLCBkYXRhID0+IHtcclxuICAgICAgICB2YXIgbGFuZyA9IHdpbmRvdy51cmxQYXJhbXMuZ2V0KCdsYW5nJyk7XHJcbiAgICAgICAgZGF0YS5mb3JFYWNoKChjOiBDaXR5RW50cnkpID0+IHtcclxuICAgICAgICAgICAgJCgnI2ludF9jaXR5X19zZWxlY3Rpb24ubWRjLWxpc3QnKS5lYWNoKChfLGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkKGVsKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnPGxpPicsIHsgY2xhc3M6ICdtZGMtbGlzdC1pdGVtJywgJ2RhdGEtdmFsdWUnOiBjLmlkfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoY291bnRyeUNvZGUyRW1vamkoYy5jb3VudHJ5KSArIGdldFRyYW5zVGV4dChjLm5hbWUsIGxhbmcpKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdG5FZGl0RGlhbG9nLmxpc3RlbignTURDRGlhbG9nOm9wZW5pbmcnLCBldmVudCA9PiB7XHJcbiAgICAgICAgbGV0IHN0bklkID0gJChldmVudC50YXJnZXQpLmF0dHIoJ2ZvcicpO1xyXG4gICAgICAgIGxldCBzdG5JbmZvID0gZ2V0UGFyYW1zKCkuc3RuX2xpc3Rbc3RuSWRdO1xyXG5cclxuICAgICAgICBpbml0TmFtZShzdG5JbmZvKTtcclxuICAgICAgICBpbml0SW50ZXJjaGFuZ2Uoc3RuSW5mbyk7XHJcbiAgICAgICAgaW5pdEJyYW5jaChzdG5JbmZvKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHN0bkVkaXREaWFsb2cubGlzdGVuKCdNRENEaWFsb2c6b3BlbmVkJywgZXZlbnQgPT4ge1xyXG4gICAgICAgIGZvY3VzTmFtZSgpO1xyXG4gICAgICAgIGZvY3VzSW50ZXJjaGFuZ2UoKTtcclxuICAgICAgICBmb2N1c0JyYW5jaCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VydmljZXNDaGlwU2V0Lmxpc3RlbignTURDQ2hpcDpzZWxlY3Rpb24nLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmRldGFpbC5jaGlwSWQgPT09ICdsb2NhbCcpIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudC5kZXRhaWwuc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHNlcnZpY2VzQ2hpcFNldC5jaGlwcy5maWx0ZXIoY2hpcCA9PiBjaGlwLmlkID09PSAnbG9jYWwnKVswXS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgc3RuSWQgPSAkKCcjc3RuX2VkaXRfZGlhZycpLmF0dHIoJ2ZvcicpO1xyXG4gICAgICAgIHdpbmRvdy5teUxpbmUudXBkYXRlU3RuU2VydmljZXMoc3RuSWQsIGV2ZW50LmRldGFpbCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpbnRDaGlwQWRkQnV0dG9uRWxzLmZvckVhY2goKGJ1dHRvbiwgaSkgPT4ge1xyXG4gICAgICAgICQoYnV0dG9uKS5vbignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBwYXJhbSA9IGdldFBhcmFtcygpO1xyXG4gICAgICAgICAgICBsZXQgaW5mbyA9IFtwYXJhbS50aGVtZVswXSwgbnVsbCwgbnVsbCwgJyMwMDAnLCAn57eaJywgJ0xpbmUnXSBhcyBJbnRlcmNoYW5nZUluZm87XHJcbiAgICAgICAgICAgIGxldCBjaGlwRWwgPSBnZXRJbnRCb3hDaGlwKGluZm8pO1xyXG4gICAgICAgICAgICBpbnRDaGlwU2V0RWxzW2ldLmFwcGVuZENoaWxkKGNoaXBFbCk7XHJcbiAgICAgICAgICAgIGludENoaXBTZXRzW2ldLmFkZENoaXAoY2hpcEVsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHVwZGF0ZVN0blRyYW5zZmVyKGludENoaXBTZXRFbHMsIHRpY2tEaXJlY0NoaXBTZXQsIHBhaWRBcmVhU3dpdGNoKTtcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBpbnRDaGlwU2V0cy5mb3JFYWNoKChjaGlwc2V0LCBpKSA9PiB7XHJcbiAgICAgICAgY2hpcHNldC5saXN0ZW4oJ01EQ0NoaXA6aW50ZXJhY3Rpb24nLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHNldElkeCAoMDogaW50LCAxOiBvc2kpXHJcbiAgICAgICAgICAgICQoJyNzdG5faW50Ym94X2RpYWcnKS5kYXRhKCdpbnRJZCcsIHsgc2V0SWR4OiBpLCBjaGlwSWQ6IGV2ZW50LmRldGFpbC5jaGlwSWQgfSk7XHJcbiAgICAgICAgICAgIHN0bkludEJveERpYWxvZy5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpbnRDaGlwU2V0cy5mb3JFYWNoKChjaGlwc2V0LCBpKSA9PiB7XHJcbiAgICAgICAgY2hpcHNldC5saXN0ZW4oJ01EQ0NoaXA6cmVtb3ZhbCcsICgpID0+IHtcclxuICAgICAgICAgICAgdXBkYXRlU3RuVHJhbnNmZXIoaW50Q2hpcFNldEVscywgdGlja0RpcmVjQ2hpcFNldCwgcGFpZEFyZWFTd2l0Y2gpO1xyXG5cclxuICAgICAgICAgICAgLy8gLy8gaGlkZSB0cmFpbGluZyBpY29uIGlmIDEgY2hpcCBsZWZ0XHJcbiAgICAgICAgICAgIC8vIGlmICgkKGludENoaXBTZXRFbHNbaV0pLmZpbmQoJy5tZGMtY2hpcCcpLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAvLyAgICAgJChpbnRDaGlwU2V0RWxzW2ldKS5maW5kKCcubWRjLWNoaXBfX2ljb24tLXRyYWlsaW5nJykucGFyZW50KCkuaGlkZSgpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCdidXR0b24jb3NpX25hbWUnKS5vbignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICAgICAgc3RuT1NJTmFtZURpYWxvZy5vcGVuKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdG5JbnRCb3hEaWFsb2cubGlzdGVuKCdNRENEaWFsb2c6b3BlbmluZycsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGxldCB7IHNldElkeCwgY2hpcElkIH0gPSAkKGV2ZW50LnRhcmdldCkuZGF0YSgnaW50SWQnKTtcclxuICAgICAgICBsZXQgeyBjaXR5LCBsaW5lIH0gPSAkKGludENoaXBTZXRFbHNbc2V0SWR4XSkuZmluZCgnIycrY2hpcElkKS5kYXRhKCd0aGVtZScpO1xyXG4gICAgICAgIGludENpdHlTZWxlY3QudmFsdWUgPSBjaXR5O1xyXG5cclxuICAgICAgICBsZXQgaW50TmFtZXMgPSAkKGludENoaXBTZXRFbHNbc2V0SWR4XSlcclxuICAgICAgICAgICAgLmZpbmQoJyMnK2NoaXBJZClcclxuICAgICAgICAgICAgLmZpbmQoJy5tZGMtY2hpcF9fdGV4dCcpXHJcbiAgICAgICAgICAgIC5odG1sKCkuc3BsaXQoJzxicj4nKTtcclxuICAgICAgICBpbnRCb3hOYW1lRmllbGRzLmZvckVhY2goKHRleHRmaWVsZCwgaSkgPT4gdGV4dGZpZWxkLnZhbHVlID0gaW50TmFtZXNbaV0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc3RuSW50Qm94RGlhbG9nLmxpc3RlbignTURDRGlhbG9nOm9wZW5lZCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGludEJveE5hbWVGaWVsZHMubWFwKHRleHRmaWVsZCA9PiB0ZXh0ZmllbGQubGF5b3V0KCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaW50Q2l0eVNlbGVjdC5saXN0ZW4oJ01EQ1NlbGVjdDpjaGFuZ2UnLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmRldGFpbC5pbmRleCA9PT0gLTEpIHtyZXR1cm47fVxyXG5cclxuICAgICAgICBsZXQgeyBzZXRJZHgsIGNoaXBJZCB9ID0gJCgnI3N0bl9pbnRib3hfZGlhZycpLmRhdGEoJ2ludElkJyk7XHJcblxyXG4gICAgICAgICQuZ2V0SlNPTihgZGF0YS8ke2V2ZW50LmRldGFpbC52YWx1ZX0uanNvbmAsIGRhdGEgPT4ge1xyXG4gICAgICAgICAgICB2YXIgbGFuZyA9IHdpbmRvdy51cmxQYXJhbXMuZ2V0KCdsYW5nJyk7XHJcbiAgICAgICAgICAgICQoJyNpbnRfbGluZV9fc2VsZWN0aW9uLm1kYy1saXN0JykuZW1wdHkoKTtcclxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgJCgnI2ludF9saW5lX19zZWxlY3Rpb24ubWRjLWxpc3QnKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgYDxsaSBjbGFzcz1cIm1kYy1saXN0LWl0ZW1cIiBkYXRhLXZhbHVlPVwiJHtsLmlkfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZDoke2wuY29sb3VyfTtjb2xvcjoke2wuZmcgfHwgJyNmZmYnfTtcIj4mbmJzcDske2dldFRyYW5zVGV4dChsLm5hbWUsIGxhbmcpfSZuYnNwOzwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2xpPmBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gc2VsZWN0IGRlZmF1bHQgaW50TGluZSB2YWx1ZVxyXG4gICAgICAgICAgICBsZXQgeyBsaW5lIH0gPSAkKGludENoaXBTZXRFbHNbc2V0SWR4XSkuZmluZCgnIycrY2hpcElkKS5kYXRhKCd0aGVtZScpO1xyXG4gICAgICAgICAgICBsZXQgbGluZUlkeCA9ICQoJyNpbnRfbGluZV9fc2VsZWN0aW9uLm1kYy1saXN0JykuZmluZChgW2RhdGEtdmFsdWU9XCIke2xpbmV9XCJdYCkuaW5kZXgoKTtcclxuICAgICAgICAgICAgaW50TGluZVNlbGVjdC5zZWxlY3RlZEluZGV4ID0gbGluZUlkeD09PS0xID8gMCA6IGxpbmVJZHg7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBkYXRhIHZhbHVlIG9mIGNoaXAgZWxlbWVudFxyXG4gICAgICAgICQoaW50Q2hpcFNldEVsc1tzZXRJZHhdKS5maW5kKCcjJytjaGlwSWQpLmRhdGEoJ3RoZW1lJykuY2l0eSA9IGV2ZW50LmRldGFpbC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIGludExpbmVTZWxlY3QubGlzdGVuKCdNRENTZWxlY3Q6Y2hhbmdlJywgKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgICAgIGxldCB7IHZhbHVlLCBpbmRleCB9ID0gZXZlbnQuZGV0YWlsO1xyXG4gICAgICAgIGxldCB7IHNldElkeCwgY2hpcElkIH0gPSAkKCcjc3RuX2ludGJveF9kaWFnJykuZGF0YSgnaW50SWQnKTtcclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIGRhdGEgdmFsdWUgb2YgY2hpcCBlbGVtZW50XHJcbiAgICAgICAgJChpbnRDaGlwU2V0RWxzW3NldElkeF0pLmZpbmQoJyMnK2NoaXBJZCkuZGF0YSgndGhlbWUnKS5saW5lID0gdmFsdWU7XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBjb2xvdXIgb2YgY2hpcFxyXG4gICAgICAgICQoaW50Q2hpcFNldEVsc1tzZXRJZHhdKS5maW5kKCcjJytjaGlwSWQpLmNzcyh7XHJcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJCgnI2ludF9saW5lX19zZWxlY3Rpb24gc3BhbicpLmVxKGluZGV4KS5jc3MoJ2JhY2tncm91bmQtY29sb3InKSwgXHJcbiAgICAgICAgICAgIGNvbG9yOiAkKCcjaW50X2xpbmVfX3NlbGVjdGlvbiBzcGFuJykuZXEoaW5kZXgpLmNzcygnY29sb3InKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaW50Qm94TmFtZUZpZWxkcy5mb3JFYWNoKHRleHRmaWVsZCA9PiB7XHJcbiAgICAgICAgKCQodGV4dGZpZWxkLnJvb3RfKS5maW5kKCdpbnB1dCcpIGFzIEpRdWVyeTxIVE1MSW5wdXRFbGVtZW50PilcclxuICAgICAgICAgICAgLm9uKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB7IHNldElkeCwgY2hpcElkIH0gPSAkKCcjc3RuX2ludGJveF9kaWFnJykuZGF0YSgnaW50SWQnKTtcclxuICAgICAgICAgICAgICAgICQoaW50Q2hpcFNldEVsc1tzZXRJZHhdKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKCcjJytjaGlwSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5tZGMtY2hpcF9fdGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoaW50Qm94TmFtZUZpZWxkc1swXS52YWx1ZSArICc8YnI+JyArIGludEJveE5hbWVGaWVsZHNbMV0udmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHN0bkludEJveERpYWxvZy5saXN0ZW4oJ01EQ0RpYWxvZzpjbG9zZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgdXBkYXRlU3RuVHJhbnNmZXIoaW50Q2hpcFNldEVscywgdGlja0RpcmVjQ2hpcFNldCwgcGFpZEFyZWFTd2l0Y2gpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc3RuT1NJTmFtZURpYWxvZy5saXN0ZW4oJ01EQ0RpYWxvZzpvcGVuaW5nJywgKCkgPT4ge1xyXG4gICAgICAgICQoJ2J1dHRvbiNvc2lfbmFtZSAubWRjLWJ1dHRvbl9fbGFiZWwnKVxyXG4gICAgICAgICAgICAuaHRtbCgpXHJcbiAgICAgICAgICAgIC5zcGxpdCgnPGJyPicpXHJcbiAgICAgICAgICAgIC5mb3JFYWNoKCh0eHQsIGkpID0+IHN0bk9TSU5hbWVGaWVsZHNbaV0udmFsdWUgPSB0eHQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc3RuT1NJTmFtZURpYWxvZy5saXN0ZW4oJ01EQ0RpYWxvZzpvcGVuZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgc3RuT1NJTmFtZUZpZWxkcy5tYXAodGV4dGZpZWxkID0+IHRleHRmaWVsZC5sYXlvdXQoKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjb3NpX25hbWVfemgsICNvc2lfbmFtZV9lbicpXHJcbiAgICAgICAgLmZpbmQoJ2lucHV0JylcclxuICAgICAgICAuZWFjaCgoXywgZWwpID0+IHtcclxuICAgICAgICAgICAgJChlbCkub24oJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJCgnYnV0dG9uI29zaV9uYW1lIC5tZGMtYnV0dG9uX19sYWJlbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoc3RuT1NJTmFtZUZpZWxkcy5tYXAodGV4dGZpZWxkID0+IHRleHRmaWVsZC52YWx1ZSkuam9pbignPGJyPicpKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBzdG5PU0lOYW1lRGlhbG9nLmxpc3RlbignTURDRGlhbG9nOmNsb3NlZCcsICgpID0+IHtcclxuICAgICAgICB1cGRhdGVTdG5UcmFuc2ZlcihpbnRDaGlwU2V0RWxzLCB0aWNrRGlyZWNDaGlwU2V0LCBwYWlkQXJlYVN3aXRjaCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aWNrRGlyZWNDaGlwU2V0Lmxpc3RlbignTURDQ2hpcDpzZWxlY3Rpb24nLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKHRpY2tEaXJlY0NoaXBTZXQuc2VsZWN0ZWRDaGlwSWRzLmxlbmd0aCA9PT0gMCkge3JldHVybjt9XHJcbiAgICAgICAgdXBkYXRlU3RuVHJhbnNmZXIoaW50Q2hpcFNldEVscywgdGlja0RpcmVjQ2hpcFNldCwgcGFpZEFyZWFTd2l0Y2gpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgKCQocGFpZEFyZWFTd2l0Y2gucm9vdF8pLmZpbmQoJ2lucHV0JykgYXMgSlF1ZXJ5PEhUTUxJbnB1dEVsZW1lbnQ+KVxyXG4gICAgICAgIC5vbignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB1cGRhdGVTdG5UcmFuc2ZlcihpbnRDaGlwU2V0RWxzLCB0aWNrRGlyZWNDaGlwU2V0LCBwYWlkQXJlYVN3aXRjaCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAvLyBNb2RpZmljYXRpb24gKEJyYW5jaClcclxuICAgIHRocm91Z2hTZWxlY3RzLmZvckVhY2goKHNlbGVjdCwgaWR4KSA9PiB7XHJcbiAgICAgICAgc2VsZWN0Lmxpc3RlbignTURDU2VsZWN0OmNoYW5nZScsIChldmVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5kZXRhaWwudmFsdWUgPT09ICduYScpIHtyZXR1cm47fVxyXG4gICAgICAgICAgICBsZXQgc3RuSWQgPSAkKCcjc3RuX2VkaXRfZGlhZycpLmF0dHIoJ2ZvcicpO1xyXG4gICAgICAgICAgICB3aW5kb3cubXlMaW5lLnVwZGF0ZUJyYW5jaFR5cGUoc3RuSWQsIGlkeCwgZXZlbnQuZGV0YWlsLnZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZpcnN0U2VsZWN0cy5mb3JFYWNoKChzZWxlY3QsIGlkeCkgPT4ge1xyXG4gICAgICAgIHNlbGVjdC5saXN0ZW4oJ01EQ1NlbGVjdDpjaGFuZ2UnLCAoZXZlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoJChgIyR7RGlyZWN0aW9uTG9uZ1tpZHhdfV9maXJzdF9fc2VsZWN0aW9uYCkuY2hpbGRyZW4oKS5sZW5ndGggPT09IDEpIHtyZXR1cm47fVxyXG4gICAgICAgICAgICBsZXQgc3RuSWQgPSAkKCcjc3RuX2VkaXRfZGlhZycpLmF0dHIoJ2ZvcicpO1xyXG4gICAgICAgICAgICBpZiAod2luZG93Lm15TGluZS51cGRhdGVCcmFuY2hGaXJzdChzdG5JZCwgaWR4LCBldmVudC5kZXRhaWwudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBwb3NTZWxlY3RzW2lkeF0uc2VsZWN0ZWRJbmRleCA9IHBvc1NlbGVjdHNbaWR4XS5zZWxlY3RlZEluZGV4ID09PSAwID8gMSA6IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHBvc1NlbGVjdHMuZm9yRWFjaCgoc2VsZWN0LCBpZHgpID0+IHtcclxuICAgICAgICBzZWxlY3QubGlzdGVuKCdNRENTZWxlY3Q6Y2hhbmdlJywgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRocm91Z2hTZWxlY3RzW2lkeF0udmFsdWUgPT09ICduYScpIHtyZXR1cm47fVxyXG4gICAgICAgICAgICBsZXQgc3RuSWQgPSAkKCcjc3RuX2VkaXRfZGlhZycpLmF0dHIoJ2ZvcicpO1xyXG4gICAgICAgICAgICB3aW5kb3cubXlMaW5lLnVwZGF0ZUJyYW5jaFBvcyhzdG5JZCwgaWR4LCBldmVudC5kZXRhaWwuaW5kZXgpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIERlbGV0aW9uXHJcbiAgICBzdG5EZWxldGVEaWFsb2cubGlzdGVuKCdNRENEaWFsb2c6b3BlbmluZycsIGV2ZW50ID0+IHtcclxuICAgICAgICB2YXIgc3RuSWQgPSAkKGV2ZW50LnRhcmdldCkuYXR0cignZm9yJyk7XHJcbiAgICAgICAgJCgnI3N0bl9kZWxldGVfZGlhZyAjZXJyX3N0bicpLnRleHQoZ2V0UGFyYW1zKCkuc3RuX2xpc3Rbc3RuSWRdLm5hbWUuam9pbignIC0gJykpO1xyXG4gICAgfSk7XHJcbiAgICBzdG5EZWxldGVEaWFsb2cubGlzdGVuKCdNRENEaWFsb2c6Y2xvc2VkJywgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAoZXZlbnQuZGV0YWlsLmFjdGlvbiA9PSAnY2xvc2UnKSB7cmV0dXJuO31cclxuICAgICAgICB2YXIgc3RuSWQgPSAkKGV2ZW50LnRhcmdldCkuYXR0cignZm9yJyk7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGZyb20gZGF0YSBhbmQgc3ZnXHJcbiAgICAgICAgaWYgKHdpbmRvdy5teUxpbmUucmVtb3ZlU3RuKHN0bklkKSkge1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgc3RhdGlvbiBmcm9tIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAkKGAjcGFuZWxfc3RhdGlvbnMgLm1kYy1sYXlvdXQtZ3JpZF9faW5uZXIgIyR7c3RuSWR9YCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoYCNwaXZvdF9fc2VsZWN0aW9uIFtkYXRhLXZhbHVlPVwiJHtzdG5JZH1cIl1gKS5yZW1vdmUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdG5EZWxldGVFcnJEaWFsb2cub3BlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==