(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{37:function(e,t,n){var a={"./beijing":[12,1],"./beijing.ts":[12,1],"./chengdu":[13,7],"./chengdu.ts":[13,7],"./chongqing":[14,18],"./chongqing.ts":[14,18],"./dongguan":[15,21],"./dongguan.ts":[15,21],"./edinburgh":[16,22],"./edinburgh.ts":[16,22],"./foshan":[17,2],"./foshan.ts":[17,2],"./glasgow":[18,3],"./glasgow.ts":[18,3],"./guangzhou":[19,4],"./guangzhou.ts":[19,4],"./hongkong":[20,5],"./hongkong.ts":[20,5],"./kaohsiung":[21,6],"./kaohsiung.ts":[21,6],"./london":[22,8],"./london.ts":[22,8],"./macau":[23,9],"./macau.ts":[23,9],"./newtaipei":[24,10],"./newtaipei.ts":[24,10],"./other":[25,11],"./other.ts":[25,11],"./sanfrancisco":[26,12],"./sanfrancisco.ts":[26,12],"./seoul":[27,13],"./seoul.ts":[27,13],"./shanghai":[28,14],"./shanghai.ts":[28,14],"./shenzhen":[29,15],"./shenzhen.ts":[29,15],"./taipei":[30,16],"./taipei.ts":[30,16],"./tokyo":[31,17],"./tokyo.ts":[31,17],"./toronto":[32,19],"./toronto.ts":[32,19],"./xi'an":[33,20],"./xi'an.ts":[33,20]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(a)},o.id=37,e.exports=o},38:function(e,t,n){"use strict";var a=n(0),o=n(3),i=n(1),r=Object(i.makeStyles)((function(){return Object(i.createStyles)({listItemIcon:{width:"1em",fontSize:"1.5rem",textAlign:"center"}})}));t.a=function(e){var t=Object(o.useTranslation)().t,n=r();return a.useMemo((function(){return a.createElement(a.Fragment,null,a.createElement(i.ListItem,null,a.createElement(i.ListItemIcon,null,a.createElement("span",{className:n.listItemIcon},"漢")),a.createElement(i.TextField,{style:{width:"100%"},variant:"outlined",label:t("stations.edit.name.nameZH"),onChange:e.onUpdate(0),value:e.name[0]})),a.createElement(i.ListItem,null,a.createElement(i.ListItemIcon,null,a.createElement("span",{className:n.listItemIcon},"A")),a.createElement(i.TextField,{style:{width:"100%"},variant:"outlined",label:t("stations.edit.name.nameEN"),onChange:e.onUpdate(1),value:e.name[1],helperText:t("stations.edit.name.nameENHelper")})))}),[e.name.toString()])}},39:function(e,t,n){"use strict";var a=n(0),o=n(3),i=n(1),r=n(5),l=[{id:"beijing",country:"CN",name:{en:"Beijing",zh:"北京"}},{id:"chengdu",country:"CN",name:{en:"Chengdu",zh:"成都"}},{id:"chongqing",country:"CN",name:{en:"Chongqing","zh-Hans":"重庆","zh-Hant":"重慶"}},{id:"dongguan",country:"CN",name:{en:"Dongguan","zh-Hans":"东莞","zh-Hant":"東莞"}},{id:"edinburgh",country:"GBSCT",name:{en:"Edinburgh",ga:"Dùn Èideann","zh-Hans":"爱丁堡","zh-Hant":"愛丁堡"}},{id:"foshan",country:"CN",name:{en:"Foshan",zh:"佛山"}},{id:"glasgow",country:"GBSCT",name:{en:"Glasgow",ga:"Glaschu",zh:"格拉斯哥"}},{id:"guangzhou",country:"CN",name:{en:"Guangzhou","zh-Hans":"广州","zh-Hant":"廣州"}},{id:"hongkong",country:"HK",name:{en:"Hong Kong",zh:"香港"}},{id:"kaohsiung",country:"TW",name:{en:"Kaohsiung",zh:"高雄"}},{id:"london",country:"GBENG",name:{en:"London","zh-Hans":"伦敦","zh-Hant":"倫敦"}},{id:"macau",country:"MO",name:{en:"Macao",pt:"Macau","zh-Hans":"澳门","zh-Hant":"澳門"}},{id:"newtaipei",country:"TW",name:{en:"New Taipei",zh:"新北"}},{id:"sanfrancisco",country:"US",name:{en:"San Francisco","zh-Hans":"旧金山","zh-HK":"三藩市","zh-TW":"舊金山"}},{id:"seoul",country:"KR",name:{en:"Seoul (Metropolitan Area)",ko:"서울(수도권)","zh-Hans":"首尔（首都圈）","zh-Hant":"首爾（首都圈）"}},{id:"shanghai",country:"CN",name:{en:"Shanghai",zh:"上海"}},{id:"shenzhen",country:"CN",name:{en:"Shenzhen",zh:"深圳"}},{id:"taipei",country:"TW",name:{en:"Taipei","zh-Hans":"台北","zh-Hant":"臺北"}},{id:"tokyo",country:"JP",name:{en:"Tokyo (Greater Tokyo Area)",ja:"東京（首都圏）","zh-Hans":"东京（首都圈）","zh-Hant":"東京（首都圈）"}},{id:"toronto",country:"CA",name:{en:"Toronto","zh-Hans":"多伦多","zh-Hant":"多倫多"}},{id:"xian",country:"CN",name:{en:"Xi'an",zh:"西安"}},{id:"other",country:"UN",name:{en:"Customise (Beta)","zh-Hans":"自定义 (Beta)","zh-Hant":"自訂 (Beta)"}}],c=function(){return(c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,o,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)r.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return r},u=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},m=Object(i.makeStyles)((function(){return Object(i.createStyles)({cityItem:{display:"flex",flexDirection:"row",alignItems:"center"},menuItemSpan:{padding:"0 .3rem"},button:{borderRadius:"50%",height:28,width:28,minWidth:0,marginRight:8,border:"solid",padding:0},inputColour:{position:"absolute",width:0,height:0,left:27,top:32},buttonContainer:{display:"flex",flexShrink:1}})})),d=a.memo((function(e){var t,u,d=m(),h=Object(o.useTranslation)(),p=h.t,g=h.i18n,E=s(a.useState(e.theme[2]),2),y=E[0],I=E[1],v=function(e){var t=s(a.useState([]),2),o=t[0],i=t[1],r=e[0]?n(37)("./"+e[0]).then((function(e){return e.default})):Promise.resolve([]);return a.useEffect((function(){void 0!==e[0]&&("other"===e[0]?r.then((function(t){i(t.map((function(t,n){return 0===n?c(c({},t),{colour:e[2],fg:e[3]||"#fff"}):c({},t)})))})):r.then((function(e){return i(e)})))}),[e.toString()]),o}(e.theme);a.useEffect((function(){if(0!==v.length&&!v.filter((function(t){return t.id===e.theme[1]})).length){var t=[e.theme[0],v[0].id,v[0].colour,v[0].fg||"#fff"];e.onUpdate("theme",t)}}),[v]);a.useEffect((function(){I(e.theme[2])}),[e.theme[2]]);return a.createElement(a.Fragment,null,a.createElement(i.ListItem,null,a.createElement(i.ListItemIcon,null,a.createElement(i.Icon,null,"location_city")),a.createElement(i.TextField,{select:!0,style:{width:"100%"},variant:"outlined",label:p("colour.city"),onChange:function(t){var n=e.theme.map((function(e,n){return 0===n?t.target.value:e}));e.onUpdate("theme",n)},value:e.theme[0]},l.map((function(e){return a.createElement(i.MenuItem,{key:e.id,value:e.id},a.createElement("span",{className:d.cityItem},a.createElement(f,{code:e.country}),a.createElement("span",null,Object(r.b)(e.name,g.languages))))})))),a.createElement(i.ListItem,null,a.createElement(i.ListItemIcon,null,a.createElement(i.Icon,null,"subway")),a.createElement(i.TextField,{select:!0,style:{width:"100%"},variant:"outlined",label:p("colour.line"),onChange:function(t){var n=t.target.value,a=[e.theme[0],n,v.filter((function(e){return e.id===n}))[0].colour,v.filter((function(e){return e.id===n}))[0].fg||"#fff"];e.onUpdate("theme",a)},value:e.theme[1]},v.map((function(e){return a.createElement(i.MenuItem,{key:e.id,value:e.id},a.createElement("span",{className:d.menuItemSpan,style:{backgroundColor:e.colour,color:e.fg||"#fff"}},Object(r.b)(e.name,g.languages)))})))),a.createElement(i.ListItem,null,a.createElement("div",{className:d.buttonContainer},a.createElement("input",{type:"color",id:"input-color",value:e.theme[2],onChange:function(t){var n=t.target.value;if(I(n),"other"!==e.theme[0]){var a=["other",e.theme[1],n,e.theme[3]];e.onUpdate("theme",a)}else{a=e.theme.map((function(e,t){return 2===t?n:e}));e.onUpdate("theme",a)}},className:d.inputColour}),a.createElement("label",{htmlFor:"input-color"},a.createElement(i.Tooltip,{title:p("colour.tooltip"),"aria-label":"colour picker"},a.createElement(i.Button,{className:d.button,style:{backgroundColor:e.theme[2],borderColor:e.theme[3]||"#fff"},variant:"contained",component:"span"}," ")))),a.createElement(i.TextField,{error:!(null===(t=y)||void 0===t?void 0:t.match(/^#[0-9a-fA-f]{6}$/g)),style:{width:"100%",marginRight:5},variant:"outlined",label:p("colour.colour"),onChange:function(t){var n=t.target.value;if(null!==n.match(/^#[0-9a-fA-f]{0,6}$/))if(I(n),"other"!==e.theme[0])if(null!==n.match(/^#[0-9a-fA-f]{6}$/)){var a=["other",e.theme[1],n,e.theme[3]];e.onUpdate("theme",a)}else{a=["other",e.theme[1],e.theme[2],e.theme[3]];e.onUpdate("theme",a)}else if(null!==n.match(/^#[0-9a-fA-f]{6}$/)){a=e.theme.map((function(e,t){return 2===t?n:e}));e.onUpdate("theme",a)}},value:null===(u=y)||void 0===u?void 0:u.toUpperCase()}),a.createElement(i.TextField,{select:!0,style:{width:"100%"},variant:"outlined",label:p("colour.fg"),onChange:function(t){var n=["other","other",e.theme[2],t.target.value];e.onUpdate("theme",n)},value:e.theme[3]||"#fff"},a.createElement(i.MenuItem,{key:"#fff",value:"#fff"},p("colour.fgWhite")),a.createElement(i.MenuItem,{key:"#000",value:"#000"},p("colour.fgBlack")))))}),(function(e,t){return e.theme.toString()===t.theme.toString()})),h=Object(i.makeStyles)((function(){return Object(i.createStyles)({img:{height:20,marginRight:"0.2rem"}})}));function f(e){var t=Object(o.useTranslation)().i18n,n=h(),i=[];return 2===e.code.length?i=e.code.toUpperCase().split("").map((function(e){return(e.codePointAt(0)+127397).toString(16).toUpperCase()})):(i=["1F3F4","E007F"]).splice.apply(i,u([1,0],e.code.toUpperCase().split("").map((function(e){return(e.codePointAt(0)+917536).toString(16).toUpperCase()})))),["zh-CN","zh-Hans"].includes(t.language)&&"TW"===e.code&&(i=["1F3F4"]),-1!==navigator.platform.indexOf("Win32")||-1!==navigator.platform.indexOf("Win64")?a.createElement("img",{src:"./images/flags/"+i.join("-")+".svg",className:n.img}):a.createElement("span",null,String.fromCodePoint.apply(String,u(i.map((function(e){return parseInt(e,16)})))))}var p=Object(i.makeStyles)((function(e){return Object(i.createStyles)({paperRoot:{width:250},listItemPaper:{justifyContent:"center"},iconRoot:{position:"absolute",color:e.palette.action.active},inputBaseRoot:{display:"block"},inputBaseInputZH:{textAlign:"center",fontSize:36,padding:0,paddingTop:6,height:45},inputBaseInputEN:{textAlign:"center",fontSize:18,padding:0,paddingBottom:6,height:"auto"}})})),g=a.memo((function(e){var t=p(),n=Object(o.useTranslation)().t,r=function(t,n){var a=e.lineName.map((function(e,a){return a===n?t:e}));e.onUpdate("name",a)},l=function(){e.onClose()};return a.createElement(i.Dialog,{onClose:l,open:e.open},a.createElement(i.DialogTitle,null,n("colour.title")),a.createElement(i.DialogContent,{dividers:!0},a.createElement(i.List,null,a.createElement(i.ListItem,{className:t.listItemPaper},a.createElement(i.Paper,{className:t.paperRoot,style:{backgroundColor:e.theme[2]}},a.createElement(i.Icon,{className:t.iconRoot},"edit"),a.createElement(i.InputBase,{value:e.lineName[0],classes:{root:t.inputBaseRoot,input:t.inputBaseInputZH},style:{color:e.theme[3]||"#fff"},onChange:function(e){return r(e.target.value,0)},autoFocus:!0}),a.createElement(i.InputBase,{value:e.lineName[1],classes:{root:t.inputBaseRoot,input:t.inputBaseInputEN},style:{color:e.theme[3]||"#fff"},onChange:function(e){return r(e.target.value,1)}}))),a.createElement(d,{theme:e.theme,onUpdate:e.onUpdate}))),a.createElement(i.DialogActions,null,a.createElement(i.Button,{onClick:l,color:"primary"},n("dialog.done"))))}),(function(e,t){return e.open===t.open&&e.lineName.toString()===t.lineName.toString()&&e.theme.toString()===t.theme.toString()}));t.a=g},73:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(3),i=n(1),r=n(2),l=n(39),c=n(38),s=function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,o,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)r.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return r},m=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e};t.default=function(e){var t=Object(o.useTranslation)().t,n=a.useContext(r.b),l=(n.param,n.dispatch,u(a.useState(!1),2)),c=l[0],m=l[1],d=function(t){var n,a=e.stnTrans.info.map((function(e){return e.length}));if(1===a.length&&(a[1]=0),a[t]+=1,n=3===a[0]&&0===a[1]?"int3":2===a[0]&&1===a[1]?"osi31":2===a[0]&&0===a[1]?"int3":1===a[0]&&2===a[1]?"osi22":1===a[0]&&1===a[1]?"osi21":1===a[0]&&0===a[1]?"int2":0===a[0]&&3===a[1]?"osi13":0===a[0]&&2===a[1]?"osi12":0===a[0]&&1===a[1]?"osi11":0===a[0]&&0===a[1]?"none":"int3",console.log(n),1===e.stnTrans.info.length&&1===t){var o=s(s({},e.stnTrans),{type:n,osi_names:n.includes("osi")?[e.stnTrans.osi_names[0]||["車站名","Stn Name"]]:[],info:e.stnTrans.info.concat([[[,,,,,,]]])});console.log(o),e.onUpdate(o)}else{o=s(s({},e.stnTrans),{type:n,osi_names:n.includes("osi")?[e.stnTrans.osi_names[0]||["車站名","Stn Name"]]:[],info:e.stnTrans.info.map((function(e,n){return n===t?e.concat([[,,,,,,]]):e}))});console.log(o),e.onUpdate(o)}},g=function(t,n){var a,o=e.stnTrans.info.map((function(e){return e.length}));1===o.length&&(o[1]=0),o[t]-=1,a=3===o[0]&&0===o[1]?"int3":2===o[0]&&1===o[1]?"osi31":2===o[0]&&0===o[1]?"int3":1===o[0]&&2===o[1]?"osi22":1===o[0]&&1===o[1]?"osi21":1===o[0]&&0===o[1]?"int2":0===o[0]&&3===o[1]?"osi13":0===o[0]&&2===o[1]?"osi12":0===o[0]&&1===o[1]?"osi11":0===o[0]&&0===o[1]?"none":"int3",console.log(a);var i=s(s({},e.stnTrans),{type:a,osi_names:a.includes("osi")?[e.stnTrans.osi_names[0]||["車站名","Stn Name"]]:[],info:e.stnTrans.info.map((function(e,a){return a===t?e.slice(0,n).concat(e.slice(n+1)):e}))});console.log(i),e.onUpdate(i)};return a.createElement(i.List,null,a.createElement(i.ListItem,null,a.createElement(i.ListItemText,null,a.createElement("h3",{style:{margin:0}},t("stations.edit.interchange.within"))),a.createElement(i.ListItemSecondaryAction,null,a.createElement(i.Tooltip,{title:t("stations.edit.interchange.add"),"aria-label":"add"},a.createElement(i.IconButton,{onClick:function(){return d(0)}},a.createElement(i.Icon,null,"add_circle"))))),a.createElement(i.ListItem,null,a.createElement(h,{stnId:e.stnId,setIndex:0,onDelete:function(e){return g(0,e)}})),["mtr","shmetro"].includes(window.urlParams.get("style"))&&a.createElement(a.Fragment,null,a.createElement(i.Divider,null),a.createElement(i.ListItem,null,a.createElement(i.ListItemText,null,a.createElement("h3",{style:{margin:0}},t("stations.edit.interchange.osi"))),a.createElement(i.ListItemSecondaryAction,null,a.createElement(i.Button,{variant:"outlined",color:"primary",style:{lineHeight:"1rem",whiteSpace:"pre",marginRight:5},onClick:function(){return m(!0)}},e.stnTrans.osi_names[0]?e.stnTrans.osi_names[0].join("\r\n"):"車站名\r\nStn Name"),a.createElement(f,{open:c,osiName:e.stnTrans.osi_names[0]||["",""],stnId:e.stnId,onClose:function(){return m(!1)}}),a.createElement(i.Tooltip,{title:t("stations.edit.interchange.add"),"aria-label":"add"},a.createElement(i.IconButton,{onClick:function(){return d(1)}},a.createElement(i.Icon,null,"add_circle"))))),a.createElement(i.ListItem,null,a.createElement(h,{stnId:e.stnId,setIndex:1,onDelete:function(e){return g(1,e)}})),a.createElement(i.ListItem,null,a.createElement("span",null,t("stations.edit.interchange.note")))),"mtr"===window.urlParams.get("style")&&a.createElement(p,{stnId:e.stnId}))};var d=Object(i.makeStyles)((function(){return Object(i.createStyles)({intChip:{borderRadius:4.5,height:40,lineHeight:"1rem",margin:2},intChipText:{display:"block",textAlign:"center"},intChipTextZH:{fontSize:18,lineHeight:"1.2rem"},intChipTextEN:{fontSize:".75rem",lineHeight:".9rem",whiteSpace:"pre-wrap"},intChipLabel:{paddingLeft:6,paddingRight:6},intChipDeleteIcon:{marginLeft:-3}})})),h=function(e){var t,n=d(),o=a.useContext(r.b),c=o.param,s=o.dispatch,h=c.stn_list[e.stnId].transfer.info[e.setIndex],f=u(a.useState(null),2),p=f[0],g=f[1],E=u(a.useState(!1),2),y=E[0],I=E[1],v=null===(t=h)||void 0===t?void 0:t.map((function(t,o){var r=a.createElement("span",{style:{color:t[3]}},a.createElement("span",{className:n.intChipText+" "+n.intChipTextZH},t[4]),a.createElement("span",{className:n.intChipText+" "+n.intChipTextEN},t[5]));return a.createElement(i.Chip,{key:o,label:r,className:n.intChip,classes:{label:n.intChipLabel,deleteIcon:n.intChipDeleteIcon},style:{backgroundColor:t[2]},onDelete:function(){return e.onDelete(o)},onClick:function(){return g(o),void I(!0)}})}));return a.createElement("div",null,v,a.createElement(l.a,{open:y,theme:null===p?[]:[h[p][0],h[p][1],h[p][2],h[p][3]],lineName:null===p?[]:[h[p][4],h[p][5]],onUpdate:function(t,n){"theme"===t&&s({type:"UPDATE_STATION_INTERCHANGE_INFO",stnId:e.stnId,setIdx:e.setIndex,intIdx:p,info:m(n,[,,])}),"name"===t&&s({type:"UPDATE_STATION_INTERCHANGE_INFO",stnId:e.stnId,setIdx:e.setIndex,intIdx:p,info:[,,,,n[0],n[1]]})},onClose:function(){return I(!1)}}))},f=a.memo((function(e){var t=Object(o.useTranslation)().t,n=a.useContext(r.b).dispatch;return a.createElement(i.Dialog,{open:e.open,onClose:e.onClose},a.createElement(i.DialogTitle,null,t("stations.edit.interchange.osiName")),a.createElement(i.DialogContent,{dividers:!0},a.createElement(i.List,null,a.createElement(c.a,{onUpdate:function(t){return function(a){var o=e.osiName.map((function(e,n){return n===t?a.target.value:e}));n({type:"UPDATE_STATION_OSI_NAME",stnId:e.stnId,name:o})}},name:e.osiName}))),a.createElement(i.DialogActions,null,a.createElement(i.Button,{onClick:e.onClose,color:"primary",autoFocus:!0},t("dialog.done"))))}),(function(e,t){return e.open===t.open&&e.osiName.toString()===t.osiName.toString()})),p=function(e){var t=Object(o.useTranslation)().t,n=a.useContext(r.b),l=n.param,c=n.dispatch,s=l.stn_list[e.stnId].transfer,u=function(t,n){c({type:"UPDATE_STATION_TICK_DIREC",stnId:e.stnId,direction:n})},m=function(t,n){c({type:"UPDATE_STATION_PAID_AREA",stnId:e.stnId,isPaid:n})};return a.useMemo((function(){var e;return a.createElement(a.Fragment,null,a.createElement(i.Divider,null),a.createElement(i.ListItem,null,a.createElement(i.ListItemText,null,a.createElement("h3",{style:{margin:0}},t("stations.edit.interchange.settings")))),a.createElement(i.ListItem,null,a.createElement(i.ListItemIcon,null,a.createElement(i.Icon,null,"format_textdirection_l_to_r")),a.createElement(i.ListItemText,{primary:t("stations.edit.interchange.tickDirec.label"),secondary:a.createElement(i.RadioGroup,{name:"tick_direc",row:!0,value:s.tick_direc,onChange:u},a.createElement(i.FormControlLabel,{value:"l",control:a.createElement(i.Radio,{color:"secondary"}),label:t("stations.edit.interchange.tickDirec.l"),labelPlacement:"end"}),a.createElement(i.FormControlLabel,{value:"r",control:a.createElement(i.Radio,{color:"secondary"}),label:t("stations.edit.interchange.tickDirec.r"),labelPlacement:"end"})),secondaryTypographyProps:(e={},e.component="div",e)})),a.createElement(i.ListItem,null,a.createElement(i.ListItemIcon,null,a.createElement(i.Icon,null,"attach_money")),a.createElement(i.ListItemText,{primary:t("stations.edit.interchange.paidArea")}),a.createElement(i.ListItemSecondaryAction,null,a.createElement(i.Switch,{edge:"end",onChange:m,checked:s.paid_area}))))}),[e.stnId,s.tick_direc,s.paid_area])}}}]);